__d('MercuryTimestampTracker',['MercuryActionType','MercuryPayloadSource','MercurySingletonMixin','MercuryDispatcher'],function a(b,c,d,e,f,g,h,i,j,k){if(c.__markCompiled)c.__markCompiled();function l(m){this._fbid=m;this._dispatcher=k.getForFBID(this._fbid);this._lastTimestamp=0;this._dispatcher.subscribe('update-messages',(function(n,o){if(!o.actions||!o.actions.length)return;if(o.payload_source==i.CLIENT_SEND_MESSAGE||o.payload_source==i.UNKNOWN)return;for(var p=0;p<o.actions.length;p++){var q=o.actions[p],r=q.action_type;if(r==h.USER_GENERATED_MESSAGE&&q.thread_id&&q.timestamp>this._lastTimestamp)this._lastTimestamp=q.timestamp;}}).bind(this));}Object.assign(l.prototype,{getLastUserMessageTimestamp:function(){return this._lastTimestamp;}});Object.assign(l,j);f.exports=l;},null);
__d('ChatTypeaheadBehavior',['BanzaiLogger','ChatOpenTab','ChatTypeaheadEvent','CSS','MercuryTypeaheadConstants','Parent','Rect','cx'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o){if(c.__markCompiled)c.__markCompiled();function p(r,s){var t=m.byClass(r,"_4oes");if(t)k.conditionClass(t,"_5q83",s);}function q(r){'use strict';this._typeahead=r;this._loggedQuery=false;}q.prototype.enable=function(){'use strict';var r=this._typeahead;this._subscriptions=[r.subscribe('focus',(function(){this._loggedQuery=false;r.getData().refreshData();p(r.getElement(),true);}).bind(this)),r.subscribe('blur',(function(s){if(this._loggedQuery)h.log('ChatTypeaheadLoggerConfig',{event:j.ABANDONED_QUERY,max_results:r.getData().getMaxResults(),num_friend_results:r.getView().results.filter(function(t){return t.render_type===l.FRIEND_TYPE;}).length,query:r.getCore().value});r.getCore().reset();p(r.getElement(),false);this._loggedQuery=false;}).bind(this)),r.subscribe('respond',(function(s,t){if(!this._loggedQuery&&r.getCore().getValue().length>0){h.log('ChatTypeaheadLoggerConfig',{event:j.NEW_QUERY});this._loggedQuery=true;}if(t.value&&t.value===r.getCore().getValue()){if(!t.results.length){var u=t.value.toLowerCase(),v=r.getData().getQueryCache();if(!t.isAsync&&!v.hasOwnProperty(u))return;r.getView().showNoResults();}k.addClass(r.getElement(),'hasValue');}}).bind(this)),r.subscribe('reset',function(){k.removeClass(r.getElement(),'hasValue');}),r.subscribe('select',(function(s,t){var u=t.selected.uid;if(t.selected.mercury_thread&&!t.selected.mercury_thread.is_canonical)u=t.selected.mercury_thread.thread_fbid;r.getView().hide();h.log('ChatTypeaheadLoggerConfig',{event:j.RESULT_SELECTED,max_results:r.getData().getMaxResults(),result_type:t.selected.render_type,query:r.getCore().value});this._loggedQuery=false;i.openTabByType(u,t.selected.type,'typeahead');}).bind(this)),r.subscribe('highlight',function(s,t){if(t.index>=0){var u=r.getView().getItems()[t.index];if(u){var v=new n(u),w=u.offsetParent,x=v.boundWithin(new n(w)).getPositionVector();v.getPositionVector().sub(x).scrollElementBy(w);}}})];};q.prototype.disable=function(){'use strict';this._subscriptions.forEach(function(r){this._typeahead.unsubscribe(r);},this);this._subscriptions=null;};Object.assign(q.prototype,{_subscriptions:null});f.exports=q;},null);
__d('ChatMentionsNotifications',['fbt','CurrentUser','MercuryParticipants'],function a(b,c,d,e,f,g,h,i,j){if(c.__markCompiled)c.__markCompiled();var k={notifyIfMessageToMe:function(l){var m='fbid:'+i.getID(),n=l.body;j.get(m,function(o){var p=new RegExp(o.short_name,"i");if(p.test(n))k._notify(l);});},_notify:function(l){var m=48,n=l.body;if(n.length>m)n=n.substr(0,m-3)+"...";new Notification(h._("You were tagged in a message!"),{body:n,icon:"http://facebook.com//images/icons-large/fb-xl.png"});}};f.exports=k;},null);
__d('ChatTabPolicy',['ChatBehavior','JSLogger','MercuryActionType','MercuryLogMessageType','MercuryAssert','MercuryConfig','MercuryGroupThreadMentions','MercuryIDs','MercuryParticipantTypes','MercurySourceType','MercuryThreadInfo','MercuryViewer','MessagingTag','PresencePrivacy','ShortProfiles','WorkModeConfig','MercuryBlockedParticipants','MercuryThreadActions'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w){if(c.__markCompiled)c.__markCompiled();var x=c('MercuryBlockedParticipants').get(),y=c('MercuryThreadActions').get(),z=i.create('tab_policy');f.exports={messageIsAllowed:function(aa,ba,ca){var da=aa.thread_id,ea=ba.message_id;l.isThreadID(da);l.isParticipantID(ba.author);var fa;if(r.isMuted(aa)){fa={thread_id:da,message_id:ea,mute_settings:aa.mute_settings};z.log('message_thread_muted',fa);if(m.GroupChatMentionsGK)n.messageMentionsViewer(ba,function(ia){if(ia)ca();});return;}if(aa.read_only){fa={thread_id:da,message_id:ea,mode:aa.mode};z.log('message_read_only',fa);return;}if(ba.source==q.EMAIL||ba.source==q.TITAN_EMAIL_REPLY){fa={thread_id:da,message_id:ea,source:ba.source};z.log('message_source_not_allowed',fa);return;}var ga=o.getUserIDFromParticipantID(ba.author);if(!ga){z.log('message_bad_author',{thread_id:da,message_id:ea,user:ga});return;}if(ba.action_type!=j.USER_GENERATED_MESSAGE&&!this._messageIsNewlyCreatedGroup(ba,aa)){fa={thread_id:da,message_id:ea,type:ba.action_type};z.log('message_non_user_generated',fa);return;}if(aa.is_canonical_user&&!h.notifiesUserMessages()){z.log('message_jabber',{thread_id:da,message_id:ea});y.markSeen(da,true);return;}if(aa.is_canonical&&!aa.other_user_fbid){z.log('message_canonical_contact',{thread_id:da,message_id:ea});return;}if(aa.folder!=t.INBOX){z.log('message_folder',{thread_id:da,message_id:ea,folder:aa.folder});return;}if(x.isPresentInGroupThread(aa)){fa={thread_id:da,message_id:ea};z.log('message_blocked_participants',fa);return;}var ha=o.getUserIDFromParticipantID(s.getID());v.getMulti([ga,ha],function(ia){if(!u.allows(ga)){z.log('message_privacy',{thread_id:da,message_id:ea,user:ga});return;}var ja=ia[ga].employee&&ia[ha].employee,ka=w.is_work_user;if(!ja&&!ka&&!ia[ga].isCommercePage&&ia[ga].type!==p.FRIEND){z.log('message_non_friend',{thread_id:da,message_id:ea,user:ga});return;}ca();});},_messageIsNewlyCreatedGroup:function(aa,ba){return aa.action_type===j.LOG_MESSAGE&&aa.log_message_type===k.THREAD_NAME&&ba.message_count===1;}};},null);
__d('ChatApp',['CSS','ChatPerfInstrumentation','DOM','JSLogger','Promise','React','ReactDOM','csx'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o){'use strict';if(c.__markCompiled)c.__markCompiled();var p={init:function(v,w,x){if(this._isInitialized){k.create('chat_app').error('repeated_init');return;}this._rootElem=v;l.resolve().then(function(){return i.init();}).then(function(){return q();}).then(function(){return r(x);}).then(function(){return s(w,v);}).then(function(){return t();}).then((function(){this._isInitialized=this._isLoaded=true;i.logTTI();}).bind(this)).done(function(){return u(x);});},isInitialized:function(){return !!this._isInitialized;},isHidden:function(){return !this._isInitialized||this._isHidden;},hide:function(){if(this.isHidden())return;h.hide(this._rootElem);this._isHidden=true;},unhide:function(){if(this._isInitialized){if(this._isHidden){h.show(this._rootElem);this.tabsViewport.checkWidth();e(['Dock'],function(v){v.resizeAllFlyouts();});this._isHidden=false;}}else if(!this._isLoaded){e(['UIPagelet'],function(v){v.loadFromEndpoint('ChatTabsPagelet','ChatTabsPagelet');v.loadFromEndpoint('BuddylistPagelet','BuddylistPagelet');});this._isLoaded=true;}}};function q(){return new l(function(v){e(['MercuryBlockedParticipants','MercuryChannelHandler','MercuryDelayedRoger','MercuryDeliveryReceipts','MercuryDeliveryState','MercuryParticipants','MercuryStateCheck','MercuryThreads','MercuryUnreadState','MercuryUnseenState','MercurySyncDispatcher'],function(w,x,y,z,aa,ba,ca,da,ea,fa,ga){w.get();x.get().turnOn();y;z.get();aa.get();ba;da.get();fa.get();ea.get();ca.get();ga.get();v();});});}function r(v){return new l(function(w){e(['MercuryServerPayloadPreprocessor'],function(x){x.get().handleUpdate(v);w();});});}function s(v,w){return new l(function(x){e(['ChatTabController','ChatTabViewCoordinator','TabsViewport','MNCommerceDialogContainer.react','P2PDialogContainer.react','FBRTCMessageHandler','ChatOpenTabImpl'],function(y,z,aa,ba,ca,da,ea){p.tabsViewport=new aa(v);p.tabViewCoordinator=new z(v,p.tabsViewport);p.tabController=new y(p.tabsViewport);da.init();var fa=j.find(w,"._26-x");n.render(m.createElement(ba,null),fa);var ga=j.find(w,"._26-y");n.render(m.createElement(ca,null),ga);p.chatOpenTabImpl=ea;x();});});}function t(){return new l(function(v){e(['HotLikeSound','ChatOptions'],function(w,x){w.setCheckSoundEnabledFunc(function(){return x.getSetting('sound');});v();});});}function u(v){if(!v.threads_to_auto_open||!p.tabsViewport.hasRoomForRaisedTab())return;e(['ChatOpenTab'],function(w){w.openThread(v.threads_to_auto_open.thread_fbid,'autoOpenTab','',null,true);});}f.exports=p;},null);
__d('ChatTypeaheadView',['BucketedTypeaheadView','ChatTypeaheadConstants','CurrentUser','DOM','MercuryConfig','React','ReactDOM','ScrollableArea','MercuryThreadSearchUtils','Style','WorkModeConfig','XUISpinner.react','arrayContains','cx','fbt'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v){if(c.__markCompiled)c.__markCompiled();var w,x;w=babelHelpers.inherits(y,h);x=w&&w.prototype;function y(z,aa){'use strict';if(l.ScrollableSidebarTypeaheadGK){var ba=o.renderDOM();k.appendContent(z,ba.root);var ca=o.fromNative(ba.root);x.constructor.call(this,ba.content,aa);this.$ChatTypeaheadView1=ba;this.$ChatTypeaheadView2=ca;}else x.constructor.call(this,z,aa);this.showingLoadingIndicator=false;this.typeObjects={};this.typeObjectsOrder=[];this.typeObjects[i.NON_FRIEND_TYPE]={uid:i.NON_FRIEND_TYPE,type:i.HEADER_TYPE,text:v._("MORE PEOPLE")};this.typeObjects[i.PAGE_TYPE]={disabled:true,uid:i.PAGE_TYPE,type:i.HEADER_TYPE,text:v._("BUSINESSES")};this.typeObjects[i.THREAD_TYPE]={uid:i.THREAD_TYPE,type:i.HEADER_TYPE,text:v._("GROUP CONVERSATIONS")};this.typeObjects[i.FB4C_TYPE]={uid:i.FB4C_TYPE,type:i.HEADER_TYPE,text:v._("CO-WORKERS")};this.typeObjects[i.FRIEND_TYPE]={disabled:true,uid:i.FRIEND_TYPE,type:i.HEADER_TYPE,text:v._("FRIENDS")};this.$ChatTypeaheadView3();}y.prototype.reset=function(){'use strict';if(this.value==='')this.clearContent();this.index=-1;this.items=[];this.results=[];this.value='';this.inform('reset');return this;};y.prototype.clearContent=function(){'use strict';this.hideLoadingIndicator();k.empty(this.content);};y.prototype.buildBuckets=function(z,aa){'use strict';var ba=aa.filter(function(ca){var da=ca.render_type||ca.type;if(da==='thread'){var ea='fbid:'+j.getID();if(!t(ca.mercury_thread.participants,ea))return false;var fa=ca.participants_to_render.some(function(ha){return p.queryMatchesName(z,ha.name);}),ga=p.queryMatchesName(z,ca.mercury_thread.name);if(!fa&&!ga)return false;}return true;}).reverse();this.$ChatTypeaheadView3(z);return x.buildBuckets.call(this,z,ba);};y.prototype.getDefaultIndex=function(z){'use strict';if(z.length===0)return -1;var aa=z.length-1;while(!this.isHighlightable(z[aa])&&aa>=0)aa--;return aa;};y.prototype.showLoadingIndicator=function(){'use strict';if(!this.showingLoadingIndicator){n.render(m.createElement('div',{className:'spinnerContainer'},m.createElement(s,{className:"_3-8i",background:'light',size:'small',paused:false})),this.content);this.showingLoadingIndicator=true;}};y.prototype.hideLoadingIndicator=function(){'use strict';if(this.showingLoadingIndicator){n.unmountComponentAtNode(this.content);this.showingLoadingIndicator=false;}};y.prototype.showNoResults=function(){'use strict';var z=v._("Friend not found.");if(r.is_work_user)z=v._("Co-worker not found.");this.hideLoadingIndicator();k.setContent(this.content,k.create('div',{className:"noResults _3-9a"},z));};y.prototype.hide=function(){'use strict';this.clearContent();return x.hide.call(this);};y.prototype.next=function(){'use strict';x.next.call(this);if(l.ScrollableSidebarTypeaheadGK)this.$ChatTypeaheadView2.scrollIntoView(this.selected,false);};y.prototype.prev=function(){'use strict';x.prev.call(this);if(l.ScrollableSidebarTypeaheadGK)this.$ChatTypeaheadView2.scrollIntoView(this.selected,false);};y.prototype.setMaxHeight=function(z){'use strict';q.set(this.$ChatTypeaheadView1.wrap,'max-height',z+'px');};y.prototype.render=function(z,aa,ba){'use strict';if(l.ScrollableSidebarTypeaheadGK)var ca=this.value!==z||this.$ChatTypeaheadView2.isScrolledToBottom();if(!aa.length){if(z&&z.length>1)this.showLoadingIndicator();}else this.hideLoadingIndicator();x.render.call(this,z,aa,ba);if(l.ScrollableSidebarTypeaheadGK&&ca)this.$ChatTypeaheadView2.scrollToBottom(false);};y.prototype.$ChatTypeaheadView3=function(z){'use strict';if(l.WWWMessengerMoneyPennyGK&&z&&l.HoistAgentsKeywords&&l.HoistAgentsKeywords.indexOf(z.toLowerCase())!==-1){this.typeObjectsOrder=[i.NON_FRIEND_TYPE,i.THREAD_TYPE,i.FB4C_TYPE,i.FRIEND_TYPE,i.PAGE_TYPE];}else this.typeObjectsOrder=[i.NON_FRIEND_TYPE,i.PAGE_TYPE,i.THREAD_TYPE,i.FB4C_TYPE,i.FRIEND_TYPE];};f.exports=y;},null);
__d('MercuryLogMessageRenderer',['Bootloader','CSS','HovercardLink','MercuryViewer','MessagesViewer','MercuryLogMessageType','MessagingGenericAdminTextType','MercuryParticipants','React','ReactDOM','Image.react','TextWithEntities.react','TooltipLink.react','MercuryRtcCallLogMessage.react','cx','fbt','ix'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x){if(c.__markCompiled)c.__markCompiled();var y={renderText:function(na,oa){switch(na.log_message_type){case m.SUBSCRIBE:ba(na,oa);break;case m.UNSUBSCRIBE:ga(na,oa);break;case m.THREAD_NAME:ha(na,oa);break;case m.THREAD_IMAGE:ia(na,oa);break;case m.WALLPAPER:ja(na,oa);break;case m.GENERIC_ADMIN_TEXT:ka(na,oa);break;default:h.loadModules(["MercurySpecialLogMessageRenderer"],function(pa){pa.renderText(na,oa);});break;}},renderIcon:function(na){return (p.createElement(r,{className:z(na),src:x('images/spacer.gif')}));},renderLegacy:function(na,oa,pa,qa){z(qa).split(' ').forEach(function(ra){return ra&&i.addClass(na,ra);});this.renderText(qa,function(ra){q.render(p.createElement('span',null,ra),oa);});this.renderAttachmentLegacy(pa,qa);},renderAttachmentLegacy:function(na,oa){if(oa.log_message_type==m.THREAD_IMAGE){var pa=oa.log_message_data.image;if(pa&&pa.preview_url){q.render(p.createElement(r,{className:"_z6a",onClick:function(){return aa(pa);},src:pa.preview_url}),na);i.show(na);}}}};f.exports=y;function z(na){var oa=na.log_message_type,pa=na.log_message_data;return "_5wzu"+(oa==m.SUBSCRIBE?' '+"_5wzj":'')+(oa==m.UNSUBSCRIBE?' '+"_5wzk":'')+(oa==m.THREAD_NAME?' '+"_5wzl":'')+(oa==m.THREAD_IMAGE?' '+"_5wzm":'')+(oa==m.VIDEO_CALL&&pa.answered?' '+"_5wzn":'')+(oa==m.VIDEO_CALL&&!pa.answered?' '+"_5wzo":'')+(oa==m.PHONE_CALL&&pa.answered?' '+"_5wzp":'')+(oa==m.PHONE_CALL&&!pa.answered?' '+"_5wzq":'')+(oa==m.SERVER_ERROR?' '+"_5wzr":'');}function aa(na){l.bootstrapWithConfig({src:na.preview_url,endpoint:na.url,fbid:na.metadata.fbid,dimensions:na.metadata.dimensions,disablePaging:true},null);}function ba(na,oa){var pa=ma(na.log_message_data.added_participants);switch(pa.length){case 1:ca(na,oa,pa);break;case 2:da(na,oa,pa);break;case 3:ea(na,oa,pa);break;default:fa(na,oa,pa);break;}}function ca(na,oa,pa){var qa=[na.author,pa[0]];o.getMulti(qa,function(ra){if(na.author==k.getID()){oa(w._("You added {subscriber1}.",[w.param('subscriber1',la(ra[pa[0]]))]));}else if(pa[0]==k.getID()){oa(w._("{actor} added you.",[w.param('actor',la(ra[na.author]))]));}else oa(w._("{actor} added {subscriber1}.",[w.param('actor',la(ra[na.author])),w.param('subscriber1',la(ra[pa[0]]))]));});}function da(na,oa,pa){var qa=[na.author].concat(pa);o.getMulti(qa,function(ra){if(na.author==k.getID()){oa(w._("You added {subscriber1} and {subscriber2}.",[w.param('subscriber1',la(ra[pa[0]])),w.param('subscriber2',la(ra[pa[1]]))]));}else if(pa[0]==k.getID()){oa(w._("{actor} added you and {subscriber2}.",[w.param('actor',la(ra[na.author])),w.param('subscriber2',la(ra[pa[1]]))]));}else oa(w._("{actor} added {subscriber1} and {subscriber2}.",[w.param('actor',la(ra[na.author])),w.param('subscriber1',la(ra[pa[0]])),w.param('subscriber2',la(ra[pa[1]]))]));});}function ea(na,oa,pa){var qa=[na.author].concat(pa);o.getMulti(qa,function(ra){if(na.author==k.getID()){oa(w._("You added {subscriber1}, {subscriber2} and {subscriber3}.",[w.param('subscriber1',la(ra[pa[0]])),w.param('subscriber2',la(ra[pa[1]])),w.param('subscriber3',la(ra[pa[2]]))]));}else if(pa[0]==k.getID()){oa(w._("{actor} added you, {subscriber2} and {subscriber3}.",[w.param('actor',la(ra[na.author])),w.param('subscriber2',la(ra[pa[1]])),w.param('subscriber3',la(ra[pa[2]]))]));}else oa(w._("{actor} added {subscriber1}, {subscriber2} and {subscriber3}.",[w.param('actor',la(ra[na.author])),w.param('subscriber1',la(ra[pa[0]])),w.param('subscriber2',la(ra[pa[1]])),w.param('subscriber3',la(ra[pa[2]]))]));});}function fa(na,oa,pa){var qa=[na.author].concat(pa);o.getMulti(qa,function(ra){function sa(ua){var va=p.createElement('div',null,ua.map(function(wa){return p.createElement('div',null,wa.name);}));return (p.createElement(t,{alignH:'center',position:'above',tooltip:va},w._({"*":"{num} more"},[w.param('num',ua.length,[0])])));}var ta=pa.map(function(ua){return ra[ua];});if(na.author==k.getID()){oa(w._("You added {subscriber1}, {subscriber2} and {more_people}.",[w.param('subscriber1',la(ta[0])),w.param('subscriber2',la(ta[1])),w.param('more_people',sa(ta.slice(2)))]));}else if(pa[0]==k.getID()){oa(w._("{actor} added you, {subscriber2} and {more_people}.",[w.param('actor',la(ra[na.author])),w.param('subscriber2',la(ta[1])),w.param('more_people',sa(ta.slice(2)))]));}else oa(w._("{actor} added {subscriber1}, {subscriber2} and {more_people}.",[w.param('actor',la(ra[na.author])),w.param('subscriber1',la(ta[0])),w.param('subscriber2',la(ta[1])),w.param('more_people',sa(ta.slice(2)))]));});}function ga(na,oa){var pa=[na.author],qa=na.log_message_data.removed_participants,ra;if(qa.length===1){ra=qa[0];pa.push(ra);}o.getMulti(pa,function(sa){var ta=sa[na.author],ua=sa[ra];if(na.author==k.getID()){if(!ra||ra==na.author){oa(w._("You left the conversation."));}else oa(w._("You removed {name} from the conversation.",[w.param('name',la(ua))]));}else if(!ra||ra==na.author){oa(w._("{actor} left the conversation.",[w.param('actor',la(ta))]));}else if(ra==k.getID()){oa(w._("{actor} removed you from the conversation.",[w.param('actor',la(ta))]));}else oa(w._("{actor} removed {name} from the conversation.",[w.param('actor',la(ta)),w.param('name',la(ua))]));});}function ha(na,oa){var pa=na.log_message_data.name;if(na.author==k.getID()){if(pa){oa(w._("You named the conversation: {name}.",[w.param('name',p.createElement('span',{className:"_5wzs"},p.createElement(s,{renderEmoticons:true,renderEmoji:true,text:pa})))]));}else oa(w._("You removed the conversation name."));}else o.get(na.author,function(qa){var ra=la(qa);if(pa){oa(w._("{actor} named the conversation: {name}.",[w.param('actor',ra),w.param('name',p.createElement('span',{className:"_5wzs"},pa))]));}else oa(w._("{actor} removed the conversation name.",[w.param('actor',ra)]));});}function ia(na,oa){if(na.author==k.getID()){if(na.log_message_data.image){oa(w._("You changed the conversation picture."));}else oa(w._("You removed the conversation picture."));}else o.get(na.author,function(pa){var qa=la(pa);if(na.log_message_data.image){oa(w._("{actor} changed the conversation picture.",[w.param('actor',qa)]));}else oa(w._("{actor} removed the conversation picture.",[w.param('actor',qa)]));});}function ja(na,oa){if(na.author==k.getID()){oa(w._("You changed the wallpaper."));}else o.get(na.author,function(pa){var qa=la(pa);oa(w._("{actor} changed the wallpaper.",[w.param('actor',qa)]));});}function ka(na,oa){var pa=na.log_message_body,qa=na.log_message_data;switch(qa.message_type){case n.TURN_ON_PUSH:if(pa&&pa.length>0)pa=w._("{admin-text-message} for Messenger on mobile.",[w.param('admin-text-message',pa.substring(0,pa.length-1))]);break;case n.RTC_CALL_LOG:pa=p.createElement(u,{message:pa,conferenceId:qa.untypedData.conference_id,isVideoCall:qa.untypedData.is_video_call==='1',event:qa.untypedData.event});break;}oa(pa);}function la(na,oa){var pa=na.fbid,qa=j.constructEndpoint({id:pa});if(na.href)return (p.createElement('a',{className:"_5wzt",href:na.href,'data-hovercard':qa},oa?na.short_name:na.name));return na.name;}function ma(na){var oa=na.indexOf(k.getID());if(oa>0){var pa=na.filter(function(qa){return qa!==k.getID();});return [k.getID()].concat(pa);}return na;}},null);
__d('ChatTabView',['AsyncRequest','AsyncSignal','AvailableListConstants','BanzaiODS','BootloadedComponent.react','Bootloader','CSS','ChatBehavior','ChatConfig','ChatNubLogger','ChatOpenTab','ChatPhotoUploader.react','ChatQuietLinks','ChatStickerButton.react','ChatTabActions','ChatTabMessagesView','ChatTabSheetController','ChatTabViewEvents','ChatTabViewInstances','ChatTitleLink.react','ChatVisibility','MercuryConstants','CurrentLocale','CurrentUser','DOM','DOMEvent','DOMQuery','Dock','DragDropTarget','EmoticonUtils','EmoticonsList','Event','FBID','FBRTCCallabilityStore','Focus','ImmutableObject','Input','JSResource','Keys','Locale','LogHistory','MercuryConfig','MercuryIDs','MercuryMessengerBlockingUtils','MercuryParticipants','MercuryShareAttachmentRenderLocations','MercurySourceType','MercuryThreadInfo','MercuryTypingAnimation.react','MercuryThreadTitle.react','MercuryViewer','MessengerHotLikeButton.react','MessagingTag','NubController','P2PChatThreadBannerContainer.react','P2PGKValues','P2PSendMoneyButton.react','P2PSendMoneyDialogStore','PagesMercuryChatTabIndicatorHandler','Parent','PhotosUploadWaterfall','PresenceStatus','Promise','React','ReactDOM','ReactComponentRenderer','Run','Scroll','SelectionPosition','ShortProfiles','SimpleXUIDialog','StickerActions','StickerConstants','StickerState','Style','SubscriptionsHandler','SyntheticMouseEvent','ChatTabTemplates','TextAreaControl','TooltipData','TypingDetectorController','URI','UserAgent_DEPRECATED','WaterfallIDGenerator','WebMessengerDeleteThreadDialog','WebMessengerThreadPermalinks','WorkFileUploadsGating','WorkModeConfig','XStickerReplyNUXController','cancelAnimationFrame','createCancelableFunction','csx','cx','emptyFunction','fbt','getActiveElement','isEmpty','requireWeak','requestAnimationFrame','setIntervalAcrossTransitions','ChatReactInput','MercuryBlockedParticipants','MercuryTypingReceiver','MercuryMessageActions','MercuryMessages','MercuryMessageObject','MercuryThreadIDMap','MercuryServerRequests','MercuryThreadInformer','MercuryThreadActions','MercuryThreads'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba,ca,da,ea,fa,ga,ha,ia,ja,ka,la,ma,na,oa,pa,qa,ra,sa,ta,ua,va,wa,xa,ya,za,ab,bb,cb,db,eb,fb,gb,hb,ib,jb,kb,lb,mb,nb,ob,pb,qb,rb,sb,tb,ub,vb,wb,xb,yb,zb,ac,bc,cc,dc,ec,fc,gc,hc,ic,jc,kc,lc,mc,nc,oc,pc,qc,rc,sc,tc,uc,vc,wc,xc,yc,zc,ad,bd,cd){'use strict';if(c.__markCompiled)c.__markCompiled();var dd=c('ChatReactInput').module,ed=c('MercuryBlockedParticipants').get(),fd=c('MercuryTypingReceiver').get(),gd=c('MercuryMessageActions').get(),hd=c('MercuryMessages').get(),id=c('MercuryMessageObject').get(),jd=c('MercuryThreadIDMap').get(),kd=c('MercuryServerRequests').get(),ld=c('MercuryThreadInformer').get(),md=c('MercuryThreadActions').get(),nd=c('MercuryThreads').get(),od=/^\s*$/,pd=z,qd,rd=10,sd=960,td=va.getInstance('chat_tab_view');ad('AvailableList',function(qe){qe.subscribe(j.ON_AVAILABILITY_CHANGED,me);});function ud(qe,re){var se=fa.create('div');re=re&&re.filter(function(ve){return ve!=fb.getID();});if(zc(re))return ic.remove(qe);var te=re.length,ue=te-rd;if(ue>1)re=re.slice(0,rd);za.getMulti(re,function(ve){for(var we in ve){var xe=ve[we],ye=gc[':fb:mercury:chat:multichat-tooltip-item'].build();fa.setContent(ye.getNode('name'),xe.name);var ze=xa.getUserIDFromParticipantID(we),af=ze&&qb.get(ze)==j.ACTIVE;n.conditionShow(ye.getNode('icon'),af);n.conditionClass(ye.getNode('name'),'tooltipItemWithIcon',af);fa.appendContent(se,ye.getRoot());}if(ue>1){var bf=xc._("and {number of hidden chat participants} more.",[xc.param('number of hidden chat participants',ue)]);fa.appendContent(se,fa.create('div',{},bf));}ic.set(qe,se,'above');});}var vd={},wd=null,xd=false;function yd(qe,re,se){if(se){vd[qe]=re;if(!wd)wd=cd(zd,600);}else{n.removeClass(re,'highlightTitle');delete vd[qe];}}function zd(){for(var qe in vd){var re=vd[qe];if(re.parentNode){n.conditionClass(re,'highlightTitle',xd);}else delete vd[qe];}xd=!xd;if(!Object.keys(vd).length){clearInterval(wd);wd=null;}}function ae(qe){var re=xa.tokenize(qe);switch(re.type){case 'user':return gc[':fb:mercury:chat:user-tab'].build();}return gc[':fb:mercury:chat:multichat-tab'].build();}function be(qe){var re=qe._getInputValue(),se=qe._fileUploader,te=se?se.getAttachments():[];if(he(qe))de(qe,re,te,function(ue){ue=pe(ue,se);gd.send(ue,function(ve){var we=nd.getThreadMetaNow(ve);if(wa.CoreGraphEnabled&&we&&we.folder===hb.PENDING)md.movePendingToInbox(ve);});se&&se.removeAttachments();if(qe._sharePreview)qe._sharePreview.setProps({share:null,uri:null});if(!p.get('chat_react_input'))qe._getNode('input').value='';qe._typingDetector&&qe._typingDetector.resetState();qe._messagesView&&qe._messagesView.setShouldScrollToBottom(true);});}function ce(qe,re){if(re===0)return;je(qe,pb.POST_PUBLISHED,{count:re});qe._waterfallID=mc.generate();}function de(qe,re,se,te){nd.getThreadMeta(qe._threadID,function(ue){if(ue&&ue.is_canonical&&!cb.canReply(ue)&&ya.gk_result){qe._showMessageBlockedDialog(ue);return;}var ve=bb.CHAT_WEB,we=id.constructUserGeneratedMessageObject(re,ve,qe._threadID);if(se.length>0){we.has_attachment=true;we.raw_attachments=se;}if(qe._sharePreview){var xe=qe._sharePreview.component.getShareData();if(xe){we.has_attachment=true;we.shareable_attachment=xe;}}if(nd.isNewEmptyLocalThread(qe._threadID)){var ye=qe._sheetController.getAddFriendsParticipants();qe._sheetController.closeAddFriendsSheet();if(ye===null||ye.length===0)return;ye=ye.filter(function(bf){return bf!=fb.getID();});if(ye.length===0){we.thread_id=xa.getThreadIDFromUserID(ea.getID());}else if(ye.length===1){we.thread_id=xa.getThreadIDFromParticipantID(ye[0]);}else md.addParticipants(qe._threadID,ye);}if(nd.isEmptyLocalThread(qe._threadID)){we.offline_threading_id=xa.tokenize(qe._threadID).value;var ze=nd.getThreadMetaNow(ue.thread_id);we.specific_to_list=Array.from(ze.participants);}if(typeof we!='undefined')we.signatureID=qe._signatureID;we.ui_push_phase=ca.UIPushPhase;te(we);if(qe._threadID!==we.thread_id&&!qe._photoUploader.isUploading()){var af=qe._getInputValue();v.closeTab(qe._threadID);r.openThread(we.thread_id,'ChatTabView',null,re?wc:function(bf){return bf.appendTextToInput(af);});}});}function ee(qe){qe._blocked=true;qe._sheetController.openUploadWarningTabSheet();}function fe(qe){return !!(qe._fileUploader&&(qe._fileUploader.isUploading()||qe._photoUploader.isUploading()||qe._sharePreview&&qe._sharePreview.component.isLoading()));}function ge(qe){return (qe._fileUploader&&qe._fileUploader.isUploading()||qe._sharePreviewLoading);}function he(qe){var re=qe._getInputValue();if(!od.test(re))return true;if(qe._fileUploader&&(qe._fileUploader.getAttachments().length>0||qe._fileUploader.getImageFiles().length>0||qe._fileUploader.getAnimatedImageFiles().length>0||qe._fileUploader.getVideoFiles().length>0||qe._fileUploader.getAudioFiles().length>0||qe._fileUploader.getFiles().length>0))return true;if(qe._sharePreview&&qe._sharePreview.component.getShareData())return true;return false;}function ie(qe){qe._nubController.flyoutContentChanged();var re=qe._getNode('attachmentShelf');wb.setTop(re,re.scrollHeight);}function je(qe,re,se){pb.sendSignal(babelHelpers._extends({qn:qe._waterfallID,step:re,uploader:pb.APP_CHAT},se||{}));}function ke(qe,re,se,te,ue){if(re)kd.ensureThreadIsFetched(re);this._threadID=qe;this._signatureID=se;this._eventListeners=[];this._onlineStatus=j.OFFLINE;this._tabTemplate=ae(qe);this._tabElem=this._tabTemplate.getRoot();if(ue&&ue.getTabElem()){this.insertBefore(ue);}else this.appendTo(te);this._stickersFlyoutShown=false;this._messagesView=null;this._titlebar=this._getNode('nubFlyoutTitlebar');this._iconsContainerNode=this._getNode('iconsContainer');this._inputContainerNode=this._getNode('inputContainer');this._contentSearchNode=this._getNode('contentSearchContainer');this._emojiSearchNode=this._getNode('emojiSearchContainer');this._fileUploaderNode=this._getNode('fileUploaderContainer');this._pagesMessageIndicator=this._getNode('pagesMessageIndicator');this._waterfallID=mc.generate();this._subscriptionsHandler=new ec();var ve=ha.scry(this._tabElem,"._8ms");this._isTwoLine=ve&&ve.length>0;this._initializeSheetController();var we=[wc,this._initializeComposer.bind(this),this._initializeHotLike.bind(this),this._initializeHeader.bind(this),this._initializeUIListeners.bind(this),this._initializeAutoSendPhotoUploader.bind(this),this._initializeAutoSendFileUploader.bind(this),this._initializeTitleHREF.bind(this),this._initializeP2P.bind(this),this._initializeInput.bind(this),this._initializeStickers.bind(this),this._initializeContentSearch.bind(this),this._initializeEmojiSearch.bind(this),(function(){nd.getThreadMeta(this._threadID,(function(df){this._updateMutingSettings(df);this._updateMessageBlockSettings(df);this._updateSecretModeSettings(df);}).bind(this));t.removeEmptyHrefs(this._tabElem);}).bind(this),(function(){this.updateAvailableStatus();this.updateTab();this._setCloseTooltip(false);}).bind(this),this._initializeUnloadListeners.bind(this),this._initializeDragDropTarget.bind(this),this._initializePageMessagingIndicator.bind(this),this._initializeP2PChatThreadBannerContainer.bind(this)];if(p.get('chat_defer_initialization',false)){var xe=(function(df){if(!df.length){delete this._initFrame;return;}var ef=df.shift();this._initFrame=bd(function(){xe(df);});ef();}).bind(this);xe(we);}else for(var ye=we,ze=Array.isArray(ye),af=0,ye=ze?ye:ye[typeof Symbol==='function'?Symbol.iterator:'@@iterator']();;){var bf;if(ze){if(af>=ye.length)break;bf=ye[af++];}else{af=ye.next();if(af.done)break;bf=af.value;}var cf=bf;cf();}pd.set(qe,this);this._logOpenTab();}function le(qe){if(qe._photoUploader.isUploading())je(qe,pb.CANCEL_DURING_UPLOAD);}function me(){for(var qe=pd.values(),re=Array.isArray(qe),se=0,qe=re?qe:qe[typeof Symbol==='function'?Symbol.iterator:'@@iterator']();;){var te;if(re){if(se>=qe.length)break;te=qe[se++];}else{se=qe.next();if(se.done)break;te=se.value;}var ue=te;ue.updateAvailableStatus();ue.updateMultichatTooltip();}}function ne(){for(var qe=pd.values(),re=Array.isArray(qe),se=0,qe=re?qe:qe[typeof Symbol==='function'?Symbol.iterator:'@@iterator']();;){var te;if(re){if(se>=qe.length)break;te=qe[se++];}else{se=qe.next();if(se.done)break;te=se.value;}var ue=te;ue.updateCallLink();}}oa.addListener(ne);o.subscribe(o.ON_CHANGED,function(){for(var qe=pd.keys(),re=Array.isArray(qe),se=0,qe=re?qe:qe[typeof Symbol==='function'?Symbol.iterator:'@@iterator']();;){var te;if(re){if(se>=qe.length)break;te=qe[se++];}else{se=qe.next();if(se.done)break;te=se.value;}var ue=te;nd.getThreadMeta(ue,function(ve){pd.get(ue)._updateUnreadCount(ve);});}});fd.addRetroactiveListener('state-changed',function(qe){for(var re in qe){var se=qe[re]&&qe[re].length,te=pd.get(re);te&&te.showTypingIndicator(se);}});ld.subscribe('threads-updated',function(qe,re){for(var se=pd.keys(),te=Array.isArray(se),ue=0,se=te?se:se[typeof Symbol==='function'?Symbol.iterator:'@@iterator']();;){var ve;if(te){if(ue>=se.length)break;ve=se[ue++];}else{ue=se.next();if(ue.done)break;ve=ue.value;}var we=ve,xe=pd.get(we);re[we]&&xe.updateTab();if(xe._newThreadIDFromPhotoUpload&&!xe._photoUploader.isUploading()&&re[xe._newThreadIDFromPhotoUpload]){v.closeTab(xe._threadID);r.openThread(xe._newThreadIDFromPhotoUpload,'ChatTabView');xe._newThreadIDFromPhotoUpload=null;}}});ld.subscribe('threads-deleted',function(qe,re){for(var se=pd.keys(),te=Array.isArray(se),ue=0,se=te?se:se[typeof Symbol==='function'?Symbol.iterator:'@@iterator']();;){var ve;if(te){if(ue>=se.length)break;ve=se[ue++];}else{ue=se.next();if(ue.done)break;ve=ue.value;}var we=ve;re[we]&&v.closeTab(we,'thread_deleted');}});Object.assign(ke.prototype,{getThreadID:function(){return this._threadID;},getTabElem:function(){return this._tabElem;},showAddFriend:function(){setTimeout((function(){this._sheetController.openAddFriendsSheet();}).bind(this),0);},showNameConversation:function(qe){setTimeout((function(){this._sheetController.openNameConversationSheet(qe);}).bind(this),0);},hideAutomaticNameConversation:function(){setTimeout((function(){this._sheetController.closeAutomaticNameConversationSheet();}).bind(this),0);},isVisible:function(){return n.shown(this._tabElem);},setVisibleState:function(qe,re){var se=n.shown(this._tabElem),te=n.hasClass(this._tabElem,'opened');n.conditionShow(this._tabElem,qe);n.conditionClass(this._tabElem,'opened',re);if(!(se&&te)&&qe&&re){if(!this._messagesView){var ue=xa.tokenize(this._threadID);this._messagesView=new w(this._threadID,this._sheetController,this._getNode('scrollingArea'),this._getNode('conversation'),this._getNode('loadingIndicator'),this._getNode('lastMessageIndicator'),this._getNode('typingIndicator'),this,wa.ShowContextBanner&&ue.type==='user');}this._nubController.flyoutContentChanged();this._messagesView.scrollToBottom();this.setP2PChatThreadBannerContainerVisibility();}},focus:function(){if(n.hasClass(this._tabElem,'opened')){this._focusInput();}else this._getNode('dockButton').focus();},isFocused:function(){var qe=yc();return ob.byClass(qe,"_50mz")===this._tabElem;},hasEmptyInput:function(){return od.test(this._getInputValue());},getInputElem:function(){if(p.get('chat_react_input')){if(!this._chatInput||!this._chatInput.isMounted())return null;return tb.findDOMNode(this._chatInput);}else return this._getNode('input');},setStickersFlyoutPackID:function(qe){if(!this._stickerButton.isMounted())return;ac.selectPack(qe);this._toggleStickersFlyoutShown(true);},loadShareFromParams:function(qe,re){this._getSharePreview().done(function(se){se.setProps({share:{params:re,type:qe},uri:null});});},_linkDropped:function(qe){this._getSharePreview().done(function(re){re.setProps({share:null,uri:qe});});},_filesDropped:function(qe){if(this._fileUploader){this._fileUploader.addDroppedFiles(qe);}else if(this._menuPromise)this._menuPromise.done(function(re){var se=re.component.getFileUploaderPromise();if(se)se.done(function(te){te.addDroppedFiles(qe);});});},_toggleStickersFlyoutShown:function(qe){this._stickerButton.showFlyout();this._stickersFlyoutShown=qe;},showStickerReplyNUX:function(){if(qd)return;new h(rc.getURIBuilder().getURI()).setRelativeTo(this._getNode('stickerButtonContainer')).setData({thread_id:this._threadID}).setHandler(function(qe){cc.clearShowStickerReplyNUX();}).send();},insertBefore:function(qe){fa.insertBefore(qe.getTabElem(),this._tabElem);},appendTo:function(qe){fa.appendContent(qe,this._tabElem);},nextTabIs:function(qe){var re=qe&&qe.getTabElem();return this._tabElem.nextSibling==re;},getScrollTop:function(){return wb.getTop(fa.find(this._tabElem,'.fbNubFlyoutBody.scrollable'));},setScrollTop:function(qe){wb.setTop(fa.find(this._tabElem,'.fbNubFlyoutBody.scrollable'),qe);},destroy:function(){this._initFrame&&sc(this._initFrame);this._selectionPosition&&this._selectionPosition.disable();while(this._eventListeners.length)this._eventListeners.pop().remove();if(this._dropTarget)this._dropTarget.disable();this._checkUnsentMessages&&this._checkUnsentMessages.cancel();this._logUnsentPhotos&&this._logUnsentPhotos.cancel();this._messagesView&&this._messagesView.destroy();this._sheetController&&this._sheetController.destroy();tb.unmountComponentAtNode(this._getNode('animationContainer'));tb.unmountComponentAtNode(this._getNode('menuContainer'));if(p.get('chat_react_header')){if(this._addToThreadButton){this._addToThreadButton.unmount();this._addToThreadButton=null;}if(this._archiveWarning){this._archiveWarning.unmount();this._archiveWarning=null;}if(this._videoCallButton){this._videoCallButton.unmount();this._videoCallButton=null;}if(this._closeButton){this._closeButton.unmount();this._closeButton=null;}if(this._title){this._title.unmount();this._title=null;}}if(this._sharePreview){this._sharePreview.unmount();this._sharePreview=null;}try{tb.unmountComponentAtNode(this._getNode('photoUploaderContainer'));tb.unmountComponentAtNode(this._getNode('fileUploaderContainer'));}catch(qe){k.bumpEntityKey('chat.web','chattab.unmount_failed');}tb.unmountComponentAtNode(this._getNode('stickerButtonContainer'));this._subscriptionsHandler&&this._subscriptionsHandler.release();if(p.get('chat_react_input')){tb.unmountComponentAtNode(this._getNode('inputContainer'));}else ra.reset(this._getNode('input'));if(this._getNode('hotLikeContainer'))tb.unmountComponentAtNode(this._getNode('hotLikeContainer'));tb.unmountComponentAtNode(this._getNode('name'));if(!p.get('chat_react_header'))tb.unmountComponentAtNode(this._getNode('titlebarText'));if(this._orionTriggerContainer){if(this._orionTrigger)this._orionTrigger.unmount();this._orionTriggerContainer=null;this._orionTrigger=null;}if(this._p2pChatThreadBannerContainerEl){tb.unmountComponentAtNode(this._p2pChatThreadBannerContainerEl);this._p2pChatThreadBannerContainerEl=null;}this._unsubscribeP2PSendMoneyDialogStore();fa.remove(this._tabElem);pd['delete'](this._threadID);ia.unregisterNubController(this._nubController);},updateAvailableStatus:function(){nd.getThreadMeta(this._threadID,(function(qe){var re=j.OFFLINE,se=this._getCanonicalUserID(),te=null;if(se){re=qb.get(se);te=yb.getNow(se);}else{var ue=qe.participants.map(function(we){return xa.getUserIDFromParticipantID(we);});re=qb.getGroup(ue);}if(!ba.isOnline())re=j.OFFLINE;this.updateCallLink();n.conditionClass(this._tabElem,"_5238",re===j.ACTIVE&&(te===undefined||te===null||!te.is_messenger_only));n.conditionClass(this._tabElem,"_5239",re===j.MOBILE||te!==undefined&&te!==null&&te.is_messenger_only);var ve=this._getNode('presenceIndicator');this._onlineStatus=re;this._pagesMessageIndicatorHandler&&this._pagesMessageIndicatorHandler.notifyPageOnlineStatusChanged(re);switch(re){case j.ACTIVE:ve.setAttribute('alt',xc._("Online"));break;case j.MOBILE:ve.setAttribute('alt',xc._("Mobile"));break;default:ve.removeAttribute('alt');break;}}).bind(this));},updateTab:function(){nd.getThreadMeta(this._threadID,(function(qe){var re=[this._getNode('name')];if(!p.get('chat_react_header')){re.push(this._getNode('titlebarText'));}else if(this._title)this._title.setProps({thread:qe},(function(){this._getNode('chatWrapper').setAttribute('aria-label',this._title.component.getTitle());}).bind(this));for(var se=re,te=Array.isArray(se),ue=0,se=te?se:se[typeof Symbol==='function'?Symbol.iterator:'@@iterator']();;){var ve;if(te){if(ue>=se.length)break;ve=se[ue++];}else{ue=se.next();if(ue.done)break;ve=ue.value;}var we=ve;tb.render(sb.createElement(eb,{isNewThread:nd.isNewEmptyLocalThread(this._threadID),thread:qe,useAndSeparator:true,useShortName:!qe.is_canonical,viewer:ea.getID()}),we);}this._updateControls(qe);this._updateMessageBlockSettings(qe);this._updateSecretModeSettings(qe);this._updateMutingSettings(qe);this._updateUnreadCount(qe);this.updateMultichatTooltip();this._updateArchiveWarning(qe);this._updateEmployeeAwayWarning(qe);this._updateOfficeStatus(qe);this._updateNewThread(qe);this._updateNameConversationSheet(qe);this._updateReadOnlySheet(qe);this._updateSwitchToWork(qe);}).bind(this));},_updateNameConversationSheet:function(qe){if(cb.canReply(qe)&&!qe.name&&!qe.is_canonical&&!qe.name_conversation_sheet_dismissed&&!qe.has_email_participant&&!qe.read_only&&!nd.isEmptyLocalThread(qe.thread_id)){this.showNameConversation(true);}else this.hideAutomaticNameConversation();},_updateReadOnlySheet:function(qe){var re=cb.showComposer(qe),se=cb.canReply(qe),te=nd.isEmptyLocalThread(qe.thread_id);if(!se&&!re&&!te)this._sheetController.openReadOnlySheet();},updateSignatureID:function(qe){this._signatureID=qe;},_updateMessageBlockSettings:function(qe){this._updateMenuPropsSafe({hasMessageBlocked:ed.isMessageBlocked(qe)});},_updateSecretModeSettings:function(qe){var re=!!(qe&&qe.ephemeral_ttl_mode);this._updateMenuPropsSafe({hasSecretModeOn:re});n.conditionClass(this._tabElem,"ephemeral",re);if(!this._isTwoLine)return;var se=re?xc._("Type a disappearing message..."):xc._("Type a message...");if(p.get('chat_react_input')){this._chatInput.setProps({placeholder:se});}else this.getInputElem().placeholder=se;},_updateMutingSettings:function(qe){var re=cb.isMuted(qe);this._updateMenuPropsSafe({isMuted:re});},_updateMenuPropsSafe:function(qe){if(this._menuPromise)this._menuPromise.done(function(re){re&&re.component&&re.component.isMounted()&&re.setProps(qe);});},_updateArchiveWarning:function(qe){if(ea.isEmployee())za.getMulti(qe.participants,this._showArchiveWarningIfAllParticipantsAreEmployees.bind(this));},_updateEmployeeAwayWarning:function(qe){if(!ea.isEmployee())return;vb.onAfterLoad((function(){m.loadModules(["ChatEmployeeAwayWarning"],(function(re){re.updateEmployeeAwayWarning(qe,(function(){this._sheetController.openEmployeeAwaySheet();}).bind(this),wc);}).bind(this));}).bind(this));},_updateOfficeStatus:function(qe){var re=this._getNode('officeStatus');if(!re||xa.isGroupChat(qe.thread_id))return;vb.onAfterLoad(function(){m.loadModules(["ChatTabOfficeStatus"],function(se){var te=xa.getParticipantIDFromUserID(qe.other_user_fbid);za.get(te,function(ue){se.update(re,ue);});});});},_updateSwitchToWork:function(qe){if(ea.isEmployee()&&ea.hasWorkUser()&&xa.isGroupChat(qe.thread_id)){za.getMulti(qe.participants,(function(re){var se=this._isEmployeesOnly(re);this._updateMenuPropsSafe({hasSwitchToWork:se});}).bind(this));}else this._updateMenuPropsSafe({hasSwitchToWork:false});},_updateControls:function(qe,re,se){var te=false;if(qe&&qe.thread_id){var ue=xa.tokenize(qe.thread_id);if(ue.type==='user'){var ve=ue.value;te=!na.isUser(ve);}}var we=cb.showComposer(qe)&&(!zc(qe.participants)||!!re)&&!this._pendingActions,xe=this._getNode('footer');n.conditionShow(xe,we);this._updateMenuPropsSafe({isEmptyChat:nd.isNewEmptyLocalThread(qe.thread_id),show:we});if(te)this._updateMenuPropsSafe({showAddFriend:null});var ye=we&&!te;if(p.get('chat_react_header')){this._addToThreadButton&&this._addToThreadButton.setProps({shown:ye});}else n.conditionShow(this._getNode('addToThreadLink'),ye);if(se&&se.length===1&&wa.ShowContextBanner&&wa.ShowContextBannerNullState){this._messagesView&&this._messagesView.renderContextBanner(null,se[0].info&&se[0].info.uid);}else this._messagesView&&this._messagesView.unmountContextBanner();this._resizeInputContainer();this._updateOrionTrigger();},_updateOrionTrigger:function(){if(this._orionTrigger){this._setOrionTriggerProps();}else this._renderOrionTrigger();},_setOrionTriggerProps:function(){this.getParticipantIDsForOrionNUX((function(qe,re){za.getMulti(qe,(function(se){var te=[],ue,ve=nd.isNewEmptyLocalThread(this._threadID);for(var we in se){ue=this._getUserIdFromParticipantID(we);if(ue!==ea.getID())te.push(qa.set(se[we],{userID:ue}));}if(this._orionTrigger)this._orionTrigger.setProps(babelHelpers._extends({participants:te,isNewEmptyLocalThread:ve,isGroupChat:xa.isGroupChat(this._threadID)&&!ve,threadID:this._threadID,threadFBID:re},mb.getStateByThreadID(this._threadID),{referrer:ab.CHAT}));}).bind(this));}).bind(this));},_getUserIdFromParticipantID:function(qe){return xa.getUserIDFromParticipantID(qe);},_onP2PSendMoneyDialogStoreChange:function(){var qe=mb.getStateByThreadID(this._threadID);if(qe&&qe.referrer!==ab.WEB_INBOX)this._updateOrionTrigger();},_unsubscribeP2PSendMoneyDialogStore:function(){if(this._sendMoneyDialogStoreSub){this._sendMoneyDialogStoreSub.remove();this._sendMoneyDialogStoreSub=null;}},_isP2PEnabled:function(){return kb.P2PEnabled;},_canP2PSend:function(){return (this._isP2PEnabled());},_renderOrionTrigger:function(){var qe=this._getCanonicalUserID();if(this._canP2PSend()&&qe!==ea.getID()){this._orionTriggerContainer=this._getNode('orionTriggerContainer');this._orionTrigger=new ub(lb,this._orionTriggerContainer);this._orionTrigger.setProps({flyoutAlignment:this._isTwoLine?'right':undefined,onTrigger:this._orionTriggered.bind(this)});n.addClass(this._inputContainerNode,"_11d6");this._setOrionTriggerProps();}},getParticipantIDsForOrionNUX:function(qe){var re=this._sheetController.getAddFriendsParticipants(),se=this._getCanonicalUserID();if(se){qe([xa.getParticipantIDFromUserID(se)]);}else if(nd.isNewEmptyLocalThread(this._threadID)&&re){qe(re);}else nd.getThreadMeta(this._threadID,function(te){qe(te.participants,te.thread_fbid);});},_resizeInputContainer:function(){if(!this._isTwoLine){var qe=this._tabElem.clientWidth,re=2,se=qe-(this._inputContainerNode.clientWidth+re),te=ua.isRTL()?'left':'right';dc.set(this._iconsContainerNode,te,se+'px');}if(!p.get('chat_react_input'))hc.getInstance(this._getNode('input')).update();},_updateNewThread:function(qe){if(nd.isNewEmptyLocalThread(qe.thread_id))this.showAddFriend();},_isEmployeesOnly:function(qe){for(var re in qe)if(!qe[re].employee)return false;return true;},_showArchiveWarningIfAllParticipantsAreEmployees:function(qe){var re=this._isEmployeesOnly(qe),se=p.get('chat_react_header'),te=se?this._getNode('archiveContainer'):this._getNode('titanArchiveWarning');if(te){if(this._titlebarTooltipAnchor)n.conditionClass(this._titlebarTooltipAnchor,'narrowTitleBar',re);n.conditionShow(te,re);if(se)this._archiveWarning&&this._archiveWarning.setProps({shown:re});}},updateMultichatTooltip:function(){nd.getThreadMeta(this._threadID,(function(qe){if(!qe.is_canonical){var re;if(p.get('chat_react_header')){re=tb.findDOMNode(this._title.component);}else re=this._titlebarTooltipAnchor;ud(re,qe.participants);}}).bind(this));},_getNode:function(qe){return this._tabTemplate.getNode(qe);},_getCanonicalUserID:function(){return xa.getUserIDFromThreadID(this._threadID);},_listen:function(qe,event,re,se){var te=this._getNode(qe);if(te){this._eventListeners.push(ma.listen(te,event,re.bind(this)));}else if(!se)throw new Error('Could not find node "'+qe+'"');},_closePreClicked:function(qe){this._closeMouseDown=true;},_closeClicked:function(qe){le(this);v.closeTab(this._threadID);if(qe instanceof fc){qe.stopPropagation();return;}qe.kill();},_closeEnter:function(qe){if(qe.keyCode===ta.RETURN)this._closeClicked(qe);},_nubClicked:function(qe){qe.kill();return y.inform('nub-activated',this._threadID);},_dockKeyDown:function(event){if(event.keyCode===ta.RETURN||event.keyCode===ta.SPACE){y.inform('nub-activated',this._threadID);event.kill();}else this._handleHotkeyPressed(event);},_handleHotkeyPressed:function(event){if(event.keyCode===ta.ESC){this._handleEscape();if(p.get('chat_react_input'))event=new ga(event);event.kill();}else if(event.keyCode===ta.TAB)this._handleTabPressed(event);},_handleTabPressed:function(event){if(!event.ctrlKey){var qe=y.inform('tab-pressed',{id:this._threadID,shiftPressed:event.shiftKey});if(p.get('chat_react_input'))event=new ga(event);!qe&&event.kill();return true;}},_handleEscape:function(){if(this._stickersFlyoutShown){this._toggleStickersFlyoutShown(false);return;}le(this);if(this.hasEmptyInput()){y.inform('esc-pressed',this._threadID);}else{var qe=xc._("Are you sure you want to close this chat window?"),re=xc._("You haven't sent your message.");zb.showConfirm(qe,re,(function(se){if(se){y.inform('esc-pressed',this._threadID);}else this.focus();}).bind(this),{autofocusConfirm:true});}},_titleClicked:function(event){var qe=event.getTarget();if(!ob.byClass(qe,'titlebarText')&&!ob.byClass(qe,'uiSelector')&&!ob.byClass(qe,'addToThread')&&!ob.byClass(qe,'optionMenu')&&!ob.byClass(qe,'videoicon')&&!ob.byClass(qe,'phoneicon')&&!ob.byClass(qe,"_1fu3")&&!ob.byClass(qe,"_1fu4")&&!ob.byClass(qe,'close')){event.kill();v.lowerTab(this._threadID);this.focus();}},_groupCallEnter:function(qe){if(qe.keyCode===ta.RETURN)this._groupCallClicked(qe);},_groupCallClicked:function(qe){if(qe.target)qe.target.blur();if(this._videoCallLinkEnabled){var re;if(qe.target&&(n.hasClass(qe.target,'phoneicon')||n.hasClass(qe.target,"_1fu4"))){re='chat_tab_voice_icon';}else re='chat_tab_icon';nd.getThreadMeta(this._threadID,function(se){var te=se.participants.map(function(ve){return xa.getUserIDFromParticipantID(ve);}),ue=te.filter(function(ve){return ve!==ea.getID();});y.inform('group-call-clicked',{threadID:'GROUP:'+se.thread_fbid.toString(),usersToCall:ue,clickSource:re,audioOnly:re==='chat_tab_voice_icon'});});}if(p.get('chat_react_header')){qe.stopPropagation();}else return false;},_callEnter:function(qe){if(qe.keyCode===ta.RETURN)this._callClicked(qe);},_callClicked:function(qe){if(qe.target)qe.target.blur();var re=this._getCanonicalUserID();if(this._videoCallLinkEnabled){var se;if(qe.target&&(n.hasClass(qe.target,'phoneicon')||n.hasClass(qe.target,"_1fu4"))){se='chat_tab_voice_icon';}else se='chat_tab_icon';y.inform('video-call-clicked',{threadID:this._threadID,userID:re,clickSource:se,audioOnly:se==='chat_tab_voice_icon'});}if(p.get('chat_react_header')){qe.stopPropagation();}else return false;},_addFriendLinkClicked:function(){this.showAddFriend();},_getUserParticipants:function(qe){var re=[];qe.forEach(function(se){var te=xa.getUserIDFromParticipantID(se);te&&re.push(te);});return re;},_enableDesktopNotif:function(){Notification.requestPermission();},_inputPasted:function(event){if(lc.chrome()){var qe=event.clipboardData||event.originalEvent.clipboardData;if(!qe||!qe.items||qe.items.length<1)return;var re=qe.items[0].type;if(re!=='image/png')return;if(qe.items[0].getAsFile){var se=qe.items[0].getAsFile();this._photoUploader.uploadFile(se);}}},_focusInput:function(){q.processEvent('focus');if(p.get('chat_react_input')){this._chatInput&&this._chatInput.isMounted()&&this._chatInput.focus();}else this._getNode('input').focus();},_focusTab:function(){n.addClass(this._tabElem,'focusedTab');this.tryMarkAsRead();this._closeMouseDown=false;this._setCloseTooltip(true);y.inform('focus-tab',this._threadID);},_blurTab:function(){q.processEvent('blur');n.removeClass(this._tabElem,'focusedTab');!this._closeMouseDown&&this._setCloseTooltip(false);},_setCloseTooltip:function(qe){if(p.get('chat_react_header')){this._closeButton&&this._closeButton.setProps({active:qe});return;}var re=this._getNode('titlebarCloseButton'),se=qe?xc._("Press Esc to close"):xc._("Close tab");ic.set(re,se,'above');},_inputKeyDown:function(event){this.tryMarkAsRead();if(event.keyCode===ta.RETURN&&!event.shiftKey){if(ge(this)){ee(this);event.kill&&event.kill();return;}be(this);event.kill&&event.kill();return;}if(event.keyCode===ta.DOWN&&event.shiftKey&&this.hasEmptyInput()){event.kill&&event.kill();v.lowerTab(this._threadID);this.focus();return;}this._handleHotkeyPressed(event);},_showMessageBlockedDialog:function(qe){var re=this._getCanonicalUserID();if(!re)return;if(!p.get('chat_react_input'))this._getNode('input').blur();var se='fbid:'+re;za.get(se,function(te){m.loadModules(["MessageBlockedDialog"],function(ue){ue.show(qe.thread_id,qe.can_reply,ed.isMessageBlocked(qe),te.short_name);});});},_initializeComposer:function(){if(this._isTwoLine)n.addClass(this._tabElem,"_8mr");},_initializeInput:function(){if(!p.get('chat_react_input')){var qe=this._inputContainerNode.clientHeight;hc.getInstance(this._getNode('input')).subscribe('resize',(function(){var se=this._inputContainerNode.clientHeight;if(se!=qe)this._nubController.flyoutContentChanged();qe=se;}).bind(this));this._listen('input','focus',this._focusTab);this._listen('input','blur',this._blurTab);this._listen('input','paste',this._inputPasted);if(lc.firefox()&&da.get()=='ko_KR'){this._listen('input','keyup',this._inputKeyDown);}else this._listen('input','keydown',this._inputKeyDown);this._initializeThingsWithInputFn(this._tabTemplate.getNode('input'));}else{var re=this._isTwoLine?xc._("Type a message..."):null;this._chatInput=tb.render(sb.createElement(dd,{initializeThingsWithInputFn:this._initializeThingsWithInputFn.bind(this),inputKeyDown:this._inputKeyDown.bind(this),onBlur:this._blurTab.bind(this),onEscape:this._handleEscape.bind(this),onFocus:this._focusTab.bind(this),onTab:this._handleTabPressed.bind(this),openFlyoutFn:(function(){return this._toggleStickersFlyoutShown(true);}).bind(this),resizeFn:(function(se){dc.set(this._getNode('inputContainer'),'height',se+'px');this._nubController.flyoutContentChanged();}).bind(this),uploadPhotoFn:(function(se){this._photoUploader&&this._photoUploader.uploadFile(se);}).bind(this),placeholder:re}),this._getNode('chatInputContainer'));}},_initializeSharePreview:function(qe,re){ma.listen(qe,'keyup',(function(){var se=re?re():qe.value;if(!se.length)if(this._urlScraper){this._urlScraper.reset();delete this._urlScraperData;}}).bind(this));vb.onAfterLoad((function(){m.loadModules(["URLScraper"],(function(se){this._urlScraper=new se(qe,re);this._urlScraper.subscribe('match',(function(te,ue){this._urlScraperData=ue;this._getSharePreview().done((function(ve){var we=this._urlScraperData;ve.setProps({share:null,uri:we&&we.url});}).bind(this));}).bind(this));}).bind(this));}).bind(this));},_getSharePreview:function(){if(!this._sharePreview&&!this._sharePreviewPromise){this._sharePreviewLoading=true;this._sharePreviewPromise=new rb((function(qe){m.loadModules(["MercurySharePreview.react"],(function(re){this._sharePreview=new ub(re,this._getNode('shareAttachmentShelf'));this._sharePreview.setProps({imageSize:{width:sd,height:sd},location:ab.CHAT_PREVIEW,onClose:this._focusInput.bind(this),onUpdate:(function(){ie(this);this._unblockSend();}).bind(this)});this._sharePreviewLoading=false;qe(this._sharePreview);}).bind(this));}).bind(this));}return this._sharePreviewPromise;},_initializeThingsWithInputFn:function(qe,re){this._initializeSharePreview(qe,re);nd.getThreadMeta(this._threadID,(function(se){if(wa.CoreGraphEnabled&&se&&se.folder===hb.PENDING){var te=fa.create('div');fa.appendContent(this._getNode('chatConv'),te);this._pendingActions=te;tb.render(sb.createElement(l,{bootloadPlaceholder:sb.createElement('div',{style:{height:27}}),bootloadLoader:sa('ChatPendingActions.react'),onDeleteClick:(function(ue){nc.show(this._threadID);}).bind(this),onReplyClick:(function(ue){fa.remove(te);delete this._pendingActions;this._updateControls(se);}).bind(this)}),te);}jd.getServerIDFromClientID(this._threadID,(function(ue){this._typingDetector=new jc(this._getCanonicalUserID(),qe,'mercury-chat',null,ue,re);}).bind(this));}).bind(this));},_getInputValue:function(){if(p.get('chat_react_input')){if(!this._chatInput||!this._chatInput.isMounted())return '';return this._chatInput.getValue()||'';}else return this._tabTemplate.getNode('input').value||'';},appendTextToInput:function(qe){if(p.get('chat_react_input')){if(this._chatInput&&this._chatInput.isMounted())this._chatInput.appendText(qe);}else this._getNode('input').value+=qe;},_hasUnfinishedPost:function(){return he(this)||fe(this);},tryMarkAsRead:function(){if(!this._messagesView||this._messagesView.isScrolledToBottom()){md.markRead(this._threadID);md.markSeen(this._threadID);return true;}return false;},_chatConvClicked:function(qe){this.tryMarkAsRead();if(ob.byTag(qe.getTarget(),'a')||fa.getSelection())return;this.focus();},_inputContainerClicked:function(qe){this.tryMarkAsRead();this.focus();},_initializePageMessagingIndicator:function(){if(!this._pagesMessageIndicator)return;n.hide(this._pagesMessageIndicator);this._pagesMessageIndicatorHandler=nb.tryCreateHandler(this._threadID,this._pagesMessageIndicator,this._onlineStatus);this._pagesMessageIndicatorHandler&&this._pagesMessageIndicatorHandler.checkResponsiveness();},showTypingIndicator:function(qe){this._renderTypingIndicator();n.conditionClass(this._tabElem,"_54m8",qe);},_renderTypingIndicator:function(){var qe=n.hasClass(this._tabElem,'highlightTab')?'light':'dark';tb.render(sb.createElement(db,{color:qe}),this._getNode('animationContainer'));},_updateUnreadCount:function(qe){var re=qe.unread_count;if(typeof re!='undefined'){var se=!!re&&(!o.showsTabUnreadUI||o.showsTabUnreadUI()),te=this._getNode('numMessages');n.conditionShow(te,se);n.conditionClass(this._tabElem,'highlightTab',se);this._renderTypingIndicator();yd(this._threadID,this._tabElem,se);fa.setContent(te,re);}},updateCallLink:function(){var qe=xa.isGroupChat(this._threadID);if(qe&&p.get('rtc_conferencing')){this._videoCallLinkEnabled=true;if(!p.get('chat_react_header'))n.conditionClass(this._tabElem,"_26-s",this._videoCallLinkEnabled);}else{var re=this._getCanonicalUserID();if(!re||re===ea.getID()||!na.isUser(re)){if(p.get('chat_react_header')){if(this._videoCallButton)this._videoCallButton&&this._videoCallButton.setProps({shown:false});}else{var se=this._getNode('videoCallLink');if(se)n.hide(se);var te=this._getNode('voiceCallLink');if(te)n.hide(te);}this._videoCallLinkEnabled=false;return;}this._videoCallLinkEnabled=oa.isCallable(re);if(!p.get('chat_react_header')){n.conditionClass(this._tabElem,"_4hwz",this._videoCallLinkEnabled);za.get(xa.getParticipantIDFromUserID(re),(function(ue){oa.callButtonTooltip(re,ue.short_name);this._setCallButtonTooltips(re,ue.short_name);}).bind(this));}}},_setCallButtonTooltips:function(qe,re){var se=oa.callButtonTooltip(qe,re),te=oa.voiceCallButtonTooltip(qe,re);ic.set(this._getNode('videoCallLink'),se);var ue=this._getNode('voiceCallLink');if(ue)ic.set(ue,te);},_initializeSheetController:function(){this._sheetController=new x(this._threadID,this._getNode('sheet'),this._tabElem,this);this._sheetController.onClickMessagesBlockedSheet((function(){md.unblockMessages(this._threadID);this.focus();}).bind(this));this._sheetController.onClickNewMessagesSheet((function(){this._messagesView&&this._messagesView.scrollToBottom();this.focus();this.tryMarkAsRead();}).bind(this));this._sheetController.onClickThreadIsMutedSheet((function(){md.unmute(this._threadID);this.focus();}).bind(this));this._sheetController.onClickSecretModeSheet((function(){md.turnOffSecretMode(this._threadID);this.focus();}).bind(this));this._sheetController.onTokensChanged((function(qe,re){nd.getThreadMeta(this._threadID,(function(se){this._updateControls(se,re.token_count,re.tokens);}).bind(this));}).bind(this));this._nubController=new ib().init(this._tabElem);this._sheetController.onResize((function(){this._nubController.flyoutContentChanged();}).bind(this));this._nubController.subscribe('resize',(function(){this._resizeInputContainer();}).bind(this));},_initializeHeader:function(){this._initializeReactMenu(this._getNode('fileAttachmentShelf'));this._initializeArchiveWarning();this._initializeAddToThreadButton();this._initializeVideoCallButton();this._initializeCloseButton();this._initializeTitle();},_initializeReactMenu:function(qe){var re=xa.isGroupChat(this._threadID),se=nd.isNewEmptyLocalThread(this._threadID),te=this._sheetController.openAddFriendsSheet.bind(this._sheetController);this._menuPromise=new rb((function(ue){vb.onAfterLoad((function(){sa('ChatTabMenu.react').load().done((function(ve){this._reactChatTabMenu=new ub(ve,this._getNode('menuContainer'));this._reactChatTabMenu.setProps({sheetController:this._sheetController,onFileUploaderMounted:this.setFileUploader.bind(this),nameConversationFunc:(function(){return this.showNameConversation();}).bind(this),isGroupChat:re,isEmptyChat:se,showAddFriend:te,threadID:this._threadID,otherUserID:this._getCanonicalUserID(),attachmentsShelf:qe,onUploadFinished:this._unblockSend.bind(this),onUpdateAttachmentsShelf:ie.bind(this,this),onSubmit:this._focusInput.bind(this)},(function(){return ue(this._reactChatTabMenu);}).bind(this));}).bind(this));}).bind(this));}).bind(this));},_initializeArchiveWarning:function(){if(p.get('chat_react_header'))vb.onAfterLoad((function(){m.loadModules(["ChatArchiveWarning.react"],(function(qe){this._archiveWarning=new ub(qe,this._getNode('archiveContainer'));this._archiveWarning.setProps({isFBAtWork:qc.is_work_user,shown:true});}).bind(this));}).bind(this));},_initializeAddToThreadButton:function(){if(p.get('chat_react_header')){vb.onAfterLoad((function(){m.loadModules(["ChatAddToThreadButton.react"],(function(qe){this._addToThreadButton=new ub(qe,this._getNode('addToThreadContainer'));this._addToThreadButton.setProps({isFBAtWork:qc.is_work_user,onClick:this._addFriendLinkClicked.bind(this),shown:true});}).bind(this));}).bind(this));}else this._listen('addToThreadLink','click',this._addFriendLinkClicked,true);},_initializeVideoCallButton:function(){vb.onAfterLoad((function(){m.loadModules(["ChatVideoCallButton.react"],(function(qe){var re=xa.isGroupChat(this._threadID);if(re&&p.get('rtc_conferencing')){if(p.get('chat_react_header')){this._videoCallButton=new ub(qe,this._getNode('videoCallButtonContainer'));this._videoCallButton.setProps({shown:true,isAudio:false,isGroupChat:true,userID:null,onClick:this._groupCallClicked.bind(this),onKeyUp:this._groupCallEnter.bind(this)});this._voiceCallButton=new ub(qe,this._getNode('voiceCallButtonContainer'));this._voiceCallButton.setProps({shown:true,isAudio:true,isGroupChat:true,userID:null,onClick:this._groupCallClicked.bind(this),onKeyUp:this._groupCallEnter.bind(this)});}else{this._listen('videoCallLink','click',this._groupCallClicked,true);this._listen('videoCallLink','keyup',this._groupCallEnter,true);if(this._getNode('voiceCallLink')){this._listen('voiceCallLink','click',this._groupCallClicked,true);this._listen('voiceCallLink','keyup',this._groupCallEnter,true);}}}else{if(!xa.getUserIDFromThreadID(this._threadID))return;if(p.get('chat_react_header')){var se=this._getCanonicalUserID();this._videoCallButton=new ub(qe,this._getNode('videoCallButtonContainer'));this._videoCallButton.setProps({shown:true,isAudio:false,userID:se,onClick:this._callClicked.bind(this),onKeyUp:this._callEnter.bind(this)});var te=this._getNode('voiceCallButtonContainer');if(te){this._voiceCallButton=new ub(qe,te);this._voiceCallButton.setProps({shown:true,isAudio:true,userID:se,onClick:this._callClicked.bind(this),onKeyUp:this._callEnter.bind(this)});}}else{this._listen('videoCallLink','click',this._callClicked,true);this._listen('videoCallLink','keyup',this._callEnter,true);if(this._getNode('voiceCallLink')){this._listen('voiceCallLink','click',this._callClicked,true);this._listen('voiceCallLink','keyup',this._callEnter,true);}}}}).bind(this));}).bind(this));},_initializeCloseButton:function(){if(p.get('chat_react_header')){vb.onAfterLoad((function(){m.loadModules(["ChatCloseButton.react"],(function(qe){this._closeButton=new ub(qe,this._getNode('closeButtonContainer'));this._closeButton.setProps({onClick:this._closeClicked.bind(this),onKeyUp:this._closeEnter.bind(this),onMouseDown:this._closePreClicked.bind(this)});}).bind(this));}).bind(this));}else{this._listen('titlebarCloseButton','click',this._closeClicked);this._listen('titlebarCloseButton','keyup',this._closeEnter);this._listen('titlebarCloseButton','mousedown',this._closePreClicked);}},_initializeTitle:function(){if(p.get('chat_react_header')){var qe=nd.getThreadMetaNow(this._threadID);this._title=new ub(aa,this._getNode('titleContainer'));this._title.setProps({isNewThread:nd.isNewEmptyLocalThread(this._threadID),thread:qe,viewer:ea.getID()});}},_initializeTitleHREF:function(){oc.getThreadURI(this._threadID,(function(re){return this._setTitleHref(re);}).bind(this));if(!xa.getUserIDFromThreadID(this._threadID))this._titlebarTooltipAnchor=this._getNode('titlebarText');var qe=this._getCanonicalUserID();if(this._getCanonicalUserID())za.get(xa.getParticipantIDFromUserID(qe),(function(re){if(re.href)this._setTitleHref(re.href);}).bind(this));},_initializeUIListeners:function(){if(this._pagesMessageIndicator)this._listen('scrollingArea','scroll',(function(event){var qe=event.target;if(qe.scrollHeight-qe.offsetHeight!==qe.scrollTop)this._pagesMessageIndicatorHandler&&this._pagesMessageIndicatorHandler.hideIndicatorAndPreventFutureShow();}).bind(this));this._listen('closeButton','click',this._closeClicked);this._listen('dockButton','click',this._nubClicked);this._listen('dockButton','keydown',this._dockKeyDown);this._listen('nubFlyoutTitlebar','click',this._titleClicked);this._listen('chatConv','click',this._chatConvClicked);this._listen('inputContainer','click',this._inputContainerClicked);this._listen('sheet','keydown',(function(event){if(!event.getModifiers().any&&event.keyCode===ta.TAB){this._focusInput();event.kill();}if(event.keyCode===ta.ESC)this._handleEscape();}).bind(this));if(this._getNode('officeStatus'))this._listen('officeStatus','click',function(){return false;},true);},setFileUploader:function(qe){this._fileUploader=qe;},_initializeAutoSendPhotoUploader:function(){this._photoUploader=tb.render(sb.createElement(s,{onSubmit:this._handlePUSubmit.bind(this),onAllUploadsComplete:this._handlePUAllUploadsCompleted.bind(this),onLastUploadFail:this._handlePULastUploadFailed.bind(this),onLastUploadCancel:this._handlePULastUploadCanceled.bind(this)}),this._getNode('photoUploaderContainer'));},_initializeStickers:function(){var qe=this._isTwoLine?'right':'left';this._stickerButton=tb.render(sb.createElement(u,{className:"_4vui",flyoutAlignment:qe,isChat:true,onFlyoutShown:this._onStickerFlyoutShown.bind(this),onFlyoutHidden:this._onStickerFlyoutHidden.bind(this),onStickerSelect:this._stickerSelected.bind(this),onEmoticonSelect:this._emoticonSelected.bind(this),threadID:this._threadID}),this._getNode('stickerButtonContainer'));},_initializeAutoSendFileUploader:function(){if(!this._isTwoLine||!this._fileUploaderNode)return;this._photoUploader=tb.render(sb.createElement(s,{imageClassName:"_2wye",imagesOnly:false,onSubmit:this._handlePUSubmit.bind(this),onAllUploadsComplete:this._handlePUAllUploadsCompleted.bind(this),onLastUploadFail:this._handlePULastUploadFailed.bind(this),onLastUploadCancel:this._handlePULastUploadCanceled.bind(this)}),this._fileUploaderNode);},_initializeContentSearch:function(){if(this._contentSearchNode){tb.render(sb.createElement(l,{bootloadPlaceholder:sb.createElement('div',{style:{height:27}}),bootloadLoader:sa('ChatContentSearchButton.react'),className:"_4vui _2ksk",getInput:(function(){return this.getInputElem();}).bind(this),getQuery:(function(){return this._getInputValue();}).bind(this),onLoad:(function(qe){this._contentSearchButton=qe;}).bind(this),onSelect:(function(qe,re){var se=this.getInputElem();se&&se.select&&se.select();if(qe.platformFBID.toString()===wa.MessengerAppID){this._stickerSelected(qe.resultID.toString());}else{this._photoUploader&&this._photoUploader.uploadURL({attribution_app_id:qe.platformFBID,errorDialogParams:{body:xc._("There was a problem sending this GIF. Choose another one and try again."),title:xc._("Couldn't Send GIF")},external_image_url:qe.source.url,preview_url:qe.media.preview?qe.media.preview.url:qe.media.thumbnail.url,source:qe.source});this._messagesView&&this._messagesView.scrollToBottom();}}).bind(this)}),this._contentSearchNode);n.addClass(this._inputContainerNode,"_35li");k.bumpEntityKey('chat.web','content_search_button.mounting_attempted');}},_initializeEmojiSearch:function(){if(this._emojiSearchNode){tb.render(sb.createElement(l,{bootloadPlaceholder:sb.createElement('div',{style:{height:27}}),bootloadLoader:sa('ChatEmojiSearchButton.react'),className:"_4vui _32cu",getInput:(function(){return this.getInputElem();}).bind(this),getQuery:(function(){return this._getInputValue();}).bind(this),onLoad:(function(qe){this._contentEmojiButton=qe;}).bind(this),onSelect:function(){}}),this._emojiSearchNode);n.addClass(this._inputContainerNode,"_32cv");k.bumpEntityKey('chat.web','chat_emoji_search.mounting_attempted');}},_initializeDragDropTarget:function(){if(pc.canUploadFiles){var qe=ha.scry(this._tabElem,"._1ia");if(qe&&qe.length>0){this._dropTarget=new ja(qe[0]);this._dropTarget.setOnFilesDropCallback(this._filesDropped.bind(this));this._dropTarget.setOnURLDropCallback(this._linkDropped.bind(this));this._dropTarget.enable();}}},_initializeP2PChatThreadBannerContainer:function(){var qe=ha.scry(this._tabElem,"._2hc2");if(qe&&qe.length>0){this._p2pChatThreadBannerContainerEl=qe[0];this._p2pChatThreadBannerContainer=new ub(jb,this._p2pChatThreadBannerContainerEl);this._p2pChatThreadBannerContainer.setProps({isVisible:this.isChatViewable(),otherUserID:xa.getUserIDFromThreadID(this._threadID),threadID:this._threadID});}},setP2PChatThreadBannerContainerVisibility:function(){if(this._p2pChatThreadBannerContainer)this._p2pChatThreadBannerContainer.setProps({isVisible:this.isChatViewable()});},isChatViewable:function(){return (this._tabElem&&n.hasClass(this._tabElem,'opened')&&!n.hasClass(this._tabElem,'hidden_elem'));},_initializeP2P:function(){this._sendMoneyDialogStoreSub=mb.addListener('change',this._onP2PSendMoneyDialogStoreChange.bind(this));if(this._isP2PEnabled())this._renderOrionTrigger();},_initializeHotLike:function(){var qe=nd.getThreadMetaNow(this._threadID),re=qe?qe.custom_like_icon:null;if(this._getNode('hotLikeContainer')){tb.render(sb.createElement(gb,{className:"_3s0d",customLike:re,onMouseDown:(function(){if(this._contentSearchButton)this._contentSearchButton.hideFlyout();}).bind(this),sendSticker:this._stickerSelected.bind(this),threadID:this._threadID}),this._getNode('hotLikeContainer'));n.addClass(this._inputContainerNode,"_n4k");}},_initializeUnloadListeners:function(){this._checkUnsentMessages=tc((function(){if(this._hasUnfinishedPost())return xc._("You haven't sent your message yet. Do you want to leave without sending?");if(hd.getNumberLocalMessages(this._threadID))return xc._("Your message is still being sent. Are you sure you want to leave?");return null;}).bind(this));vb.onBeforeUnload(this._checkUnsentMessages,false);this._logUnsentPhotos=tc(le.bind(null,this));vb.onUnload(this._logUnsentPhotos);},_handlePUSubmit:function(qe,re){je(this,pb.UPLOAD_START,re);de(this,'',[],(function(se){if(this._threadID!==se.thread_id){this._newThreadIDFromPhotoUpload=se.thread_id;if(this._messagesView)this._messagesView.setNewThreadID(se.thread_id);}se.content_attachment=null;gd.addAttachmentPlaceholder(se,re.upload_id,re);}).bind(this));oe('submit',re);this._focusInput();},_handlePULastUploadFailed:function(qe,re){je(this,pb.CLIENT_ERROR,re);oe('failed',re);gd.cancelAttachmentPlaceholder(re.upload_id,re);var se=xc._("Photo Upload Failed"),te=xc._("Please try again. Make sure you are uploading a valid photo.");if(re.errorDialogParams){se=re.errorDialogParams.title||se;te=re.errorDialogParams.body||te;}zb.show(se,te);},_handlePULastUploadCanceled:function(qe,re){je(this,pb.CANCEL_DURING_UPLOAD,re);oe('canceled',re);gd.cancelAttachmentPlaceholder(re.upload_id,re);},_handlePUAllUploadsCompleted:function(qe,re){je(this,pb.ALL_UPLOADS_DONE,re);oe('completed',re);gd.confirmAttachmentPlaceholder(re.upload_id,re);var se=re.image_ids.length||re.attachments.length;ce(this,se);},_stickerSelected:function(qe){de(this,'',[],(function(re){re.has_attachment=true;re.sticker_id=qe;gd.send(re);this.focus();}).bind(this));this._messagesView&&this._messagesView.scrollToBottom();},_emoticonSelected:function(qe){var re=la.symbols[qe];if(!re)return;if(p.get('chat_react_input')){this._chatInput.insertEmoticon(re);return;}this._selectionPosition=this._selectionPosition||new xb(this._getNode('input'));var se=hc.getInstance(this._getNode('input')),te=se.getValue(),ue=ka.insertEmoticon(re,te,this._selectionPosition.getPos());se.setValue(ue.result);this._selectionPosition.setPos(ue.start,ue.end);},_orionTriggered:function(){de(this,'',[],(function(qe){this.focus();}).bind(this));this._messagesView&&this._messagesView.scrollToBottom();},_onStickerFlyoutShown:function(qe){var re=this._stickersFlyout.props.packID;if(re!==bc.SEARCH_PACK_ID)this.focus();qe();this._stickersFlyoutShown=true;},_searchStickers:function(qe,re){this._stickersFlyout&&this._stickersFlyout.setProps({packID:bc.SEARCH_PACK_ID,trigger:qe},re);},_onStickerFlyoutHidden:function(){this._stickersFlyoutShown=false;this.focus();},_setTitleHref:function(qe){if(p.get('chat_react_header')){this._title&&this._title.setProps({href:qe});}else{var re=this._getNode('titlebarText');re.setAttribute('href',qe);re.removeAttribute('rel');n.removeClass(re,'noLink');}},_unblockSend:function(){if(!this._blocked||ge(this))return;this._blocked=false;be(this);this._sheetController.closeUploadWarningTabSheet();},_logOpenTab:function(){new i('/ajax/chat/opentab_tracking.php',{threadID:this._threadID,userID:this._getCanonicalUserID(),signatureID:this._signatureID}).send();}});function oe(qe,re){td.debug('photo_uploader:'+qe,babelHelpers._extends({},re));}function pe(qe,re){if(!re)return qe;var se=re.getImageFiles();if(se.length>0){qe.image_ids=se;qe.has_attachment=true;}var te=re.getAnimatedImageFiles();if(te.length>0){qe.gif_ids=te;qe.has_attachment=true;}var ue=re.getVideoFiles();if(ue.length>0){qe.video_ids=ue;qe.has_attachment=true;}var ve=re.getAudioFiles();if(ve.length>0){qe.audio_ids=ve;qe.has_attachment=true;}var we=re.getFiles();if(we.length>0){qe.file_ids=we;qe.has_attachment=true;}return qe;}f.exports=ke;},null);
__d('MercuryIDs',[],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h={isValid:function(i){if(!i||typeof i!=='string')return false;return (/^\w{3,12}:/.test(i));},isValidThreadID:function(i){if(!h.isValid(i))return false;var j=h.tokenize(i);switch(j.type){case 'user':case 'group':case 'thread':case 'root':case 'pending':return true;default:return false;}},tokenize:function(i){if(!this.isValid(i))throw 'bad_id_format '+i;var j=i.indexOf(':');return {type:i.substr(0,j),value:i.substr(j+1)};},getUserIDFromParticipantID:function(i){if(!this.isValid(i))throw 'bad_id_format '+i;var j=h.tokenize(i),k=j.type,l=j.value;if(k!='fbid')return null;return l;},getParticipantIDFromUserID:function(i){if(isNaN(i))throw 'Not a user ID: '+i;return 'fbid:'+i;},getUserIDFromThreadID:function(i){if(!this.isCanonical(i))return null;return this.tokenize(i).value;},getThreadIDFromUserID:function(i){return 'user:'+i;},getThreadIDFromThreadFBID:function(i){return 'thread:'+i;},getThreadIDFromParticipantID:function(i){var j=this.getUserIDFromParticipantID(i);return j?this.getThreadIDFromUserID(j):null;},getParticipantIDFromFromThreadID:function(i){return this.getParticipantIDFromUserID(this.getUserIDFromThreadID(i)||'');},isCanonical:function(i){return this.isValid(i)&&this.tokenize(i).type==='user';},isGroupChat:function(i){return this.isValid(i)&&this.tokenize(i).type!=='user';},isLocalThread:function(i){return this.isValid(i)&&this.tokenize(i).type==='root';}};f.exports=h;},null);
__d('MercuryAssert',['MercuryIDs'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();f.exports={isParticipantID:function(i){if(!h.isValid(i))throw 'bad_participant_id '+i;},allParticipantIDs:function(i){i.forEach(this.isParticipantID);},isUserParticipantID:function(i){var j=h.tokenize(i);if(j.type!='fbid')throw 'bad_user_id '+i;},isEmailParticipantID:function(i){var j=h.tokenize(i);if(j.type!='email')throw 'bad_email_id '+i;},allThreadID:function(i){i.forEach(this.isThreadID);},isThreadID:function(i){if(!h.isValid(i))throw 'bad_thread_id '+i;}};},null);
__d('MercuryPageServerRequests',['MercuryAPIArgsSource','MercuryAssert','MercuryServerRequests','PageMessageEnumTag','PagesMessengerThreadUtils','MercuryServerDispatcher'],function a(b,c,d,e,f,g,h,i,j,k,l,m){if(c.__markCompiled)c.__markCompiled();var n,o,p=h.MERCURY;n=babelHelpers.inherits(q,j);o=n&&n.prototype;function q(r){'use strict';o.constructor.call(this,r);var s={'/pages/messaging/thread_tag/add/':{request_user_id:r,mode:m.BATCH_SUCCESSIVE,batch_function:this.$MercuryPageServerRequests1,handler:(function(t,u){return this.__handleUpdate(t,u);}).bind(this)},'/pages/messaging/thread_tag/remove/':{request_user_id:r,mode:m.BATCH_SUCCESSIVE,batch_function:this.$MercuryPageServerRequests1,handler:(function(t,u){return this.__handleUpdate(t,u);}).bind(this)},'/pages/messaging/thread_tag/list/':{request_user_id:r,mode:m.IMMEDIATE,handler:(function(t,u){return this.__handleUpdate(t,u);}).bind(this)},'/pages/messaging/create_note/':{request_user_id:r,mode:m.IMMEDIATE,handler:(function(t,u){return this.__handleUpdate(t,u);}).bind(this)}};m.registerEndpoints(s);}q.prototype.$MercuryPageServerRequests1=function(r,s){'use strict';var t=r?r.tag_name:s.tag_name,u=r?r.thread_ids:[],v=s?s.thread_ids:[],w=u.concat(v),x={tag_name:t,thread_ids:w};return x;};q.prototype.addThreadFlag=function(r,s){'use strict';i.isThreadID(r);this.__threadIDMap.getServerIDFromClientID(r,(function(t){var u={thread_ids:[t],tag_name:k.FLAG};this.__sendRequest('/pages/messaging/thread_tag/add/',u);}).bind(this));};q.prototype.createNote=function(r,s,t){'use strict';i.isThreadID(t);this.__threadIDMap.getServerIDFromClientID(t,(function(u){var v={body:r,message_id:s,other_user_fbid:u};this.__sendRequest('/pages/messaging/create_note/',v);}).bind(this));};q.prototype.fetchThreadlistInfo=function(r,s,t,u,v){'use strict';if(l.isPageSpecficFilter(u)){v=v||p;var w={folder:t,tag_name:u,offset:r,limit:s};this.__sendRequest('/pages/messaging/thread_tag/list/',w);return;}o.fetchThreadlistInfo.call(this,r,s,t,u,v);};q.prototype.removeThreadFlag=function(r,s){'use strict';i.isThreadID(r);this.__threadIDMap.getServerIDFromClientID(r,(function(t){var u={thread_ids:[t],tag_name:k.FLAG};this.__sendRequest('/pages/messaging/thread_tag/remove/',u);}).bind(this));};q.prototype.toString=function(){'use strict';return 'MercuryPageServerRequests';};f.exports=q;},null);
__d('MercuryServerPayloadPreprocessor',['CurrentEnvironment','MercuryIDs','MercuryConfig','MercuryActionStatus','MercuryActionType','MercuryAttachment','MercuryDispatcher','MercurySendErrorLogger','MercurySingletonMixin','MercuryThreadIDMap','StoryAttachmentStyle','invariant','URI'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t){'use strict';if(c.__markCompiled)c.__markCompiled();function u(v){this.$MercuryServerPayloadPreprocessor1=v;this.$MercuryServerPayloadPreprocessor2=q.getForFBID(this.$MercuryServerPayloadPreprocessor1);this.$MercuryServerPayloadPreprocessor3=n.getForFBID(this.$MercuryServerPayloadPreprocessor1);}u.prototype.handleUpdate=function(v){var w={};!!v.from_client?s(0):undefined;(v.threads||[]).forEach((function(oa){this.$MercuryServerPayloadPreprocessor4(oa,w);var pa=this.$MercuryServerPayloadPreprocessor2.getServerIDFromClientIDNow(oa.thread_id);e(['MercuryServerRequests'],(function(qa){var ra=qa.getForFBID(this.$MercuryServerPayloadPreprocessor1);ra.markThreadFetched(oa.thread_id);ra.markThreadFetched(pa);ra.updateLastActionTimestamp(oa.timestamp);}).bind(this));}).bind(this));(v.ordered_threadlists||[]).forEach((function(oa){var pa=oa.thread_fbids||[];pa=pa.concat(oa.other_user_fbids||[]);oa.thread_ids=pa.map((function(qa){return this.$MercuryServerPayloadPreprocessor2.getClientIDFromServerIDNow(qa.toString());}).bind(this));}).bind(this));if(v.pinned_threads&&v.pinned_threads.thread_fbids)v.pinned_threads.thread_fbids=v.pinned_threads.thread_fbids.map((function(oa){return this.$MercuryServerPayloadPreprocessor2.getClientIDFromServerIDNow(oa);}).bind(this));if(v.delivery_receipts){var x={};for(var y=v.delivery_receipts,z=Array.isArray(y),aa=0,y=z?y:y[typeof Symbol==='function'?Symbol.iterator:'@@iterator']();;){var ba;if(z){if(aa>=y.length)break;ba=y[aa++];}else{aa=y.next();if(aa.done)break;ba=aa.value;}var ca=ba,da=ca.other_user_fbid?i.getThreadIDFromUserID(ca.other_user_fbid):this.$MercuryServerPayloadPreprocessor2.getClientIDFromServerIDNow(ca.thread_fbid);x[da]=ca.time;}v.delivery_receipts=x;}v.actions=v.actions||[];v.actions.forEach((function(oa){if(oa.action_type===l.SEND_MESSAGE&&oa.status===k.ERROR)o.log(oa);var pa=null,qa=null;if(oa.other_user_fbid){qa=i.getThreadIDFromUserID(oa.other_user_fbid);pa=oa.other_user_fbid;}else if(oa.thread_fbid){qa=i.getThreadIDFromThreadFBID(oa.thread_fbid);pa=oa.thread_fbid;}else if(oa.thread_id){qa=i.getThreadIDFromThreadFBID(oa.thread_id);pa=oa.thread_id;}else if(oa.status&&oa.status!=k.SUCCESS&&oa.client_thread_id){qa=oa.client_thread_id;}else s(0);pa=pa&&pa.toString();oa.thread_id=this.$MercuryServerPayloadPreprocessor2.hasClientIDForServerID(pa)?this.$MercuryServerPayloadPreprocessor2.getClientIDFromServerIDNow(pa):qa;if(oa.action_type==l.SEND_MESSAGE&&oa.client_thread_id&&pa){oa.thread_id=oa.client_thread_id;this.$MercuryServerPayloadPreprocessor2.forceSetServerIDToClientID(pa,oa.client_thread_id);w[pa]=oa.client_thread_id;}!oa.thread_id?s(0):undefined;if(!v.payload_source||!v.payload_source.startsWith('server'))e(['MercuryServerRequests'],(function(ra){ra.getForFBID(this.$MercuryServerPayloadPreprocessor1).updateLastActionTimestamp(oa.timestamp);}).bind(this));}).bind(this));this.$MercuryServerPayloadPreprocessor5(v);this.$MercuryServerPayloadPreprocessor6(v);if(v.end_of_history){var ea=[];for(var fa=0;fa<v.end_of_history.length;fa++){var ga=v.end_of_history[fa];if(ga.type=='user'){ea.push('user:'+ga.fbid);}else if(ga.type=='thread'&&this.$MercuryServerPayloadPreprocessor2.hasClientIDForServerID(ga.fbid))ea.push(this.$MercuryServerPayloadPreprocessor2.getClientIDFromServerIDNow(ga.fbid));}v.end_of_history=ea;}if(v.roger){var ha={};for(var ia in v.roger){var ja=Object.keys(v.roger[ia]),ka;if(ia){ka=this.$MercuryServerPayloadPreprocessor2.getClientIDFromServerIDNow(ia);}else if(ja.length===1)ka=i.getThreadIDFromUserID(ja[0]);if(ka){var la=v.roger[ia];ha[ka]={};for(var ma in la)if(la.hasOwnProperty(ma)){var na=i.getParticipantIDFromUserID(ma);ha[ka][na]=la[ma];}}}v.roger=ha;}v.newlyAddedClientIDs=w;v.preprocessed=true;this.$MercuryServerPayloadPreprocessor3.handleUpdate(v);};u.prototype.$MercuryServerPayloadPreprocessor4=function(v,w){var x=v.other_user_fbid?v.other_user_fbid:v.thread_fbid;!x?s(0):undefined;var y=this.$MercuryServerPayloadPreprocessor2.getClientIDFromServerIDNow(x);if(!y){y=v.other_user_fbid?i.getThreadIDFromUserID(v.other_user_fbid):i.getThreadIDFromThreadFBID(v.thread_fbid);this.$MercuryServerPayloadPreprocessor2.setServerIDToClientID(x,y);this.$MercuryServerPayloadPreprocessor2.setDeprecatedServerIDToClientID(v.thread_id,y);w[x]=y;}v.thread_id=y;};u.prototype.$MercuryServerPayloadPreprocessor5=function(v){v.actions.forEach(function(w){if(w.action_type===l.USER_GENERATED_MESSAGE){w.attachments=w.attachments||[];w.attachments.forEach(function(x){if(m.isShareAttachment(x)&&h.messengerdotcom){var y=new t(x.share.uri);if(!y.getDomain())x.share.uri=y.setDomain('facebook.com').setSubdomain(t.getRequestURI().getSubdomain()).setProtocol('https').toString();}});}});};u.prototype.$MercuryServerPayloadPreprocessor6=function(v){if(!j.MercuryGenieRendering)return;v.actions.forEach(function(w){if(w.action_type!==l.USER_GENERATED_MESSAGE)return;var x=w;if(!x.has_attachment||!x.attachments)return;for(var y=x.attachments.length-1;y>=0;y-=1){var z=x.attachments[y];if(!z.share||!z.share.style_list||z.share.style_list[0]!=r.GENIE_MESSAGE)continue;if(z.share.target.genie_id)x.author=i.getParticipantIDFromUserID(z.share.target.genie_id);if(z.share.target&&!z.share.target.attachment){x.attachments.splice(y,1);x.has_attachment=x.attachments.length>0;}}});};Object.assign(u,p);f.exports=u;},null);
__d('MercuryServerSendMessageQueue',['BanzaiODS','LogHistory','MercuryLoggingHelper','MercuryServerRequestsConfig','MercuryServerDispatcher','MercuryServerSendMessageQueueSimulatedError'],function a(b,c,d,e,f,g,h,i,j,k,l,m){if(c.__markCompiled)c.__markCompiled();var n='/ajax/mercury/send_messages.php',o=i.getInstance('mercury_server_send_message_queue');function p(q,r,s,t){'use strict';this.sender_id=q;this.queue_id=r;this.$MercuryServerSendMessageQueue1=s.success_handler;this.$MercuryServerSendMessageQueue2=s.error_handler;this.$MercuryServerSendMessageQueue3=s.transport_error_handler;this.$MercuryServerSendMessageQueue4=s.timeout_handler;this.client=t;var u=null;if(k.msgrRegion)u={name:'X-MSGR-Region',value:k.msgrRegion};var v={};v[n]={request_user_id:this.sender_id,endpoint_id:this.queue_id,mode:l.IMMEDIATE,customHeader:u,handler:this.handleSuccess.bind(this),error_handler:this.handleError.bind(this),transport_error_handler:this.handleTransportError.bind(this),timeout:s.timeout,timeout_handler:this.handleTimeout.bind(this),connection_retries:s.connection_retries};l.registerEndpoints(v);this.pending_message=null;this.queue=[];}p.prototype.enqueue=function(q){'use strict';this.queue.push(q);this.$MercuryServerSendMessageQueue5();};p.prototype.$MercuryServerSendMessageQueue5=function(){'use strict';if(this.pending_message||!this.queue.length){if(this.pending_message)this.$MercuryServerSendMessageQueue6();return;}this.pending_message=this.queue.shift();l.trySend(n,{message_batch:[this.pending_message],client:this.client},null,this.sender_id,this.queue_id);};p.prototype.$MercuryServerSendMessageQueue7=function(){'use strict';while(this.queue.length)this.$MercuryServerSendMessageQueue8(this.queue.shift());};p.prototype.$MercuryServerSendMessageQueue8=function(q){'use strict';this.$MercuryServerSendMessageQueue2(m.create(q));o.error('mark_as_failed',{fbid:this.sender_id,queue_id:this.queue_id,message:j.obfuscateMessage(q)});};p.prototype.handleSuccess=function(q,r){'use strict';this.$MercuryServerSendMessageQueue1(q,r);this.pending_message=null;this.$MercuryServerSendMessageQueue5();};p.prototype.handleError=function(q){'use strict';this.$MercuryServerSendMessageQueue2(q);this.$MercuryServerSendMessageQueue7();this.pending_message=null;};p.prototype.handleTransportError=function(q){'use strict';this.$MercuryServerSendMessageQueue3(q);this.$MercuryServerSendMessageQueue7();this.pending_message=null;};p.prototype.handleTimeout=function(q){'use strict';this.$MercuryServerSendMessageQueue4(q);this.$MercuryServerSendMessageQueue7();this.pending_message=null;};p.prototype.$MercuryServerSendMessageQueue6=function(){'use strict';o.debug('maybe_send_next_pending_message',{fbid:this.sender_id,queue_id:this.queue_id,pending_message:j.obfuscateMessage(this.pending_message),queue:this.queue.map(function(r){return j.obfuscateMessage(r);})});var q='send_queue.delayed.queue_length.'+this.queue.length.toString();h.bumpEntityKey('chat.web',q);};f.exports=p;},null);
__d('MercuryServerSendMessageQueueRouter',['BanzaiODS','LogHistory','Map','MercuryServerSendMessageQueue','MercurySingletonMixin'],function a(b,c,d,e,f,g,h,i,j,k,l){if(c.__markCompiled)c.__markCompiled();var m=i.getInstance('mercury_server_send_message_queue_router'),n='chat.web.send_queue_router';h.setEntitySample(n,.1);function o(p){'use strict';this.fbid=p;this.queues=new j();}o.prototype.enqueue=function(p,q,r,s){'use strict';if(!this.queues.has(p)){this.queues.set(p,new k(this.fbid,p,q,r));m.debug('added queue',{fbid:this.fbid,queue_id:p});h.bumpEntityKey(n,'new_queue');}this.queues.get(p).enqueue(s);};Object.assign(o,l);f.exports=o;},null);
__d('MercuryServerRequests',['Arbiter','AsyncResponse','BanzaiODS','ChannelConstants','CurrentUser','LogHistory','MercuryActionStatus','MercuryActionType','MercuryAPIArgsSource','MercuryAssert','MercuryDispatcher','MercuryThreadIDMap','MercuryErrorType','MercuryGlobalActionType','MercuryIDs','MercuryLogMessageType','MercuryMessageClientState','MercuryPayloadSource','MercurySendErrorLogger','MercuryServerPayloadPreprocessor','MercuryServerRequestsConfig','MercuryServerSendMessageQueueRouter','MercuryServerRequestSingletonMixin','MercurySourceType','MercuryThreadlistConstants','MercuryMessageIDs','MessagingConfig','MessagingTag','MercuryServerDispatcher','MercuryServerSendMessageQueueOptions','createObjectFrom','errorCode','invariant','setTimeoutAcrossTransitions'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba,ca,da,ea,fa,ga,ha,ia,ja,ka,la,ma,na,oa){'use strict';if(c.__markCompiled)c.__markCompiled();var pa=m.getInstance('mercury_server'),qa=p.MERCURY,ra=1000;function sa(db){return db.getError()?'_'+db.getError():'';}function ta(db,eb){var fb=babelHelpers._extends({},db),gb;if(eb.threads){if(!fb.threads)fb.threads={};for(gb in eb.threads)fb.threads[gb]=Object.keys(la((fb.threads[gb]||[]).concat(eb.threads[gb])));}if(eb.messages){if(!fb.messages)fb.messages={};for(gb in eb.messages){if(!fb.messages[gb])fb.messages[gb]={};for(var hb in eb.messages[gb])if(fb.messages[gb][hb]){fb.messages[gb][hb]=ya(fb.messages[gb][hb],eb.messages[gb][hb]);}else fb.messages[gb][hb]=eb.messages[gb][hb];}}fb.client=db.client||eb.client;return fb;}function ua(db,eb){var fb=Object.assign(la(db.folders,true),la(eb.folders,true)),gb=db.client||eb.client;return {folders:Object.keys(fb),client:gb};}function va(db,eb){for(var fb in eb)if(db[fb]&&typeof db[fb]==='object'){db[fb]=ya(db[fb],eb[fb]);}else if(eb[fb]&&typeof eb[fb]==='object'){var gb={};Object.assign(gb,eb[fb]);db[fb]=gb;}return db;}function wa(db,eb){var fb=babelHelpers._extends({},db.ids,eb.ids),gb=db.client||eb.client;return {ids:fb,client:gb};}function xa(db,eb){return eb;}function ya(db,eb){var fb=db.offset<eb.offset?db.offset:eb.offset,gb=db.offset+db.limit,hb=eb.offset+eb.limit,ib=gb>hb?gb:hb,jb=ib-fb,kb=db.timestamp>eb.timestamp?db.timestamp:eb.timestamp;return {offset:fb,limit:jb,timestamp:kb};}function za(db,eb){var fb=db.client||eb.client,gb={ids:{},client:fb};Object.assign(gb.ids,db.ids,eb.ids);return gb;}function ab(db,eb){var fb={},gb,hb=db.client||eb.client;delete db.client;delete eb.client;for(gb in db)Object.assign(fb,la(db[gb],gb));for(gb in eb)Object.assign(fb,la(eb[gb],gb));var ib={client:hb};for(var jb in fb){gb=fb[jb];if(!ib[gb])ib[gb]=[];ib[gb].push(jb);}return ib;}function bb(db,eb){var fb=db.client||eb.client,gb=la(db.ids,true),hb=la(eb.ids,true),ib=Object.assign(gb,hb);return {ids:Object.keys(ib),client:fb};}function cb(db){this._fbid=db;this._lastActionTimestamp=0;this._fetchingThreads={};this._sentMessagesTimestamp={};this.__threadIDMap=s.getForFBID(this._fbid);this._dispatcher=r.getForFBID(this._fbid);this._payloadPreprocessor=aa.getForFBID(this._fbid);this._sendMessageQueueOptions=new ka((function(eb,fb){return this.__handleUpdate(eb,fb);}).bind(this),(function(eb){return this._handleSendMessageError(eb);}).bind(this),(function(eb){return this._handleSendMessageTransportError(eb);}).bind(this),(function(eb){return this._handleSendMessageTimeout(eb);}).bind(this),ba.sendMessageTimeout,ha.SEND_CONNECTION_RETRIES);this._registerEndpoints();}Object.assign(cb.prototype,{fetchThreadlistInfo:function(db,eb,fb,gb,hb){fb=fb||ia.INBOX;hb=hb||qa;var ib=gb?ja.IMMEDIATE:null,jb={client:hb};jb[fb]={offset:db,limit:eb,filter:gb};this.__sendRequest('/ajax/mercury/threadlist_info.php',jb,ib);},fetchPinnedThreads:function(){this.__sendRequest('/mercury/pinned_threads/',{});},fetchUnseenThreadIDs:function(db,eb){eb=eb||qa;this.fetchThreadlistInfo(fa.RECENT_THREAD_OFFSET,fa.JEWEL_THREAD_COUNT,db,null,eb);},fetchUnreadThreadIDs:function(db,eb){eb=eb||qa;this.__sendRequest('/ajax/mercury/unread_threads.php',{folders:[db],client:eb});},fetchMissedMessages:function(db,eb,fb){eb=eb||qa;var gb={last_action_timestamp:fb||this._lastActionTimestamp,folders:db,client:eb};setTimeout((function(){this.__sendRequest('/ajax/mercury/thread_sync.php',gb);}).bind(this),ra);},fetchThreadData:function(db,eb){eb=eb||qa;q.allThreadID(db);var fb={threads:{},client:eb},gb=[],hb=[];db.forEach((function(jb){if(this._fetchingThreads[jb])return;this._fetchingThreads[jb]=true;var kb=this.__threadIDMap.getServerIDFromClientIDNow(jb),lb=v.tokenize(jb);if(lb.type=='user'){gb.push(lb.value);fb.threads.user_ids=gb;}else if(lb.type=='thread'){if(kb){hb.push(kb);}else hb.push(lb.value);fb.threads.thread_fbids=hb;}else if(lb.type=='root'){if(kb){hb.push(kb);fb.threads.thread_fbids=hb;}}else if(lb.type!='pending')throw new Error('Unknown thread type',lb);}).bind(this));this._dispatcher.inform("fetch-thread-data",fb);for(var ib in fb.threads){this.__sendRequest('/ajax/mercury/thread_info.php',fb);break;}},ensureThreadIsFetched:function(db,eb){eb=eb||qa;if(!this.__threadIDMap.getClientIDFromServerIDNow(db)&&!this._fetchingThreads[db]){this._fetchingThreads[db]=true;this.__sendRequest('/ajax/mercury/thread_info.php',{threads:{thread_fbids:[db]},client:eb});}},fetchThreadMessages:function(db,eb,fb,gb,hb,ib){q.isThreadID(db);ib=ib||qa;var jb,kb,lb=v.tokenize(db),mb=this.__threadIDMap.getServerIDFromClientIDNow(db),nb=false;if(mb){jb=mb;kb=lb.type=='user'?'user_ids':'thread_fbids';}else{jb=lb.value;switch(lb.type){case 'user':kb='user_ids';nb=true;break;case 'thread':kb='thread_fbids';break;}}var ob={messages:{},threads:{},client:ib};if(kb){ob.messages[kb]={};ob.messages[kb][jb]={offset:eb,timestamp:gb,limit:fb};if(nb)ob.threads[kb]=[jb];this.__sendRequest('/ajax/mercury/thread_info.php',ob,hb);}else this.__threadIDMap.getServerIDFromClientID(db,(function(pb){ob.messages.thread_fbids={};ob.messages.thread_fbids[pb]={offset:eb,timestamp:gb,limit:fb};this.__sendRequest('/ajax/mercury/thread_info.php',ob,hb);}).bind(this));},handleThreadInfoError:function(db){var eb=db.getRequest().getData(),fb=[];if(eb.messages){for(var gb in eb.messages.thread_fbids)fb.push(this._createServerErrorLogMessage(this.__threadIDMap.getClientIDFromServerIDNow(gb)));for(var hb in eb.messages.user_ids)fb.push(this._createServerErrorLogMessage('user:'+hb));for(var ib in eb.messages.group_ids)fb.push(this._createServerErrorLogMessage('group:'+ib));}if(fb.length)this._dispatcher.handleUpdate({actions:fb,from_client:true,payload_source:y.CLIENT_CHANNEL_MESSAGE});if(eb.threads&&(eb.threads.user_ids||eb.threads.group_ids||eb.threads.thread_ids)){var jb=5,kb=true;if(!eb.retry_count){eb.retry_count=0;if(eb.messages)delete eb.messages;}else if(eb.retry_count>=jb){kb=false;(eb.threads.thread_ids||[]).forEach((function(mb){if(mb in this._fetchingThreads)delete this._fetchingThreads[mb];}).bind(this));}if(kb){var lb=Math.pow(2,eb.retry_count)*1000;oa((function(){pa.log('retry_thread',eb);this.__sendRequest('/ajax/mercury/thread_info.php',eb);}).bind(this),lb);eb.retry_count++;}}},markFolderAsRead:function(db){this.__sendRequest('/ajax/mercury/mark_folder_as_read.php',{folder:db});var eb=[{action_type:u.MARK_ALL_READ,action_id:null,folder:db}];this._dispatcher.handleUpdate({global_actions:eb,from_client:true,payload_source:y.CLIENT_CHANGE_READ_STATUS});},changeThreadReadStatus:function(db,eb,fb,gb,hb,ib){q.isThreadID(db);this.__threadIDMap.getServerIDFromClientID(db,(function(jb){var kb,lb={ids:(kb={},kb[jb]=eb,kb),source:fb,watermarkTimestamp:gb,titanOriginatedThreadId:hb,shouldSendReadReceipt:ib};this.__sendRequest('/ajax/mercury/change_read_status.php',lb);}).bind(this));},changeThreadArchivedStatus:function(db,eb,fb){q.isThreadID(db);this.__threadIDMap.getServerIDFromClientID(db,(function(gb){var hb={ids:{},source:fb};hb.ids[gb]=eb;this.__sendRequest('/ajax/mercury/change_archived_status.php',hb);}).bind(this));},changeThreadFolder:function(db,eb){q.isThreadID(db);this.__threadIDMap.getServerIDFromClientID(db,(function(fb){var gb={};gb[eb]=[fb];this.__sendRequest('/ajax/mercury/move_thread.php',gb);}).bind(this));},changeMutingOnThread:function(db,eb){q.isThreadID(db);this.__threadIDMap.getServerIDFromClientID(db,(function(fb){this.__sendRequest('/ajax/mercury/change_mute_thread.php',{thread_fbid:fb,mute_settings:eb,payload_source:qa});}).bind(this));},markThreadSpam:function(db,eb){q.isThreadID(db);this.__threadIDMap.getServerIDFromClientID(db,(function(fb){this.__sendRequest('/ajax/mercury/mark_spam.php',{id:fb,source:eb});}).bind(this));},unmarkThreadSpam:function(db,eb){q.isThreadID(db);this.__threadIDMap.getServerIDFromClientID(db,(function(fb){this.__sendRequest('/ajax/mercury/unmark_spam.php',{id:fb,source:eb});}).bind(this));},deleteThread:function(db,eb){q.isThreadID(db);this.__threadIDMap.getServerIDFromClientID(db,(function(fb){var gb={ids:[fb],source:eb};this.__sendRequest('/ajax/mercury/delete_thread.php',gb);}).bind(this));},unpinThread:function(db){q.isThreadID(db);this.__threadIDMap.getServerIDFromClientID(db,(function(eb){this.__sendRequest('/mercury/unpin_thread/',{id:eb});}).bind(this));},deleteMessages:function(db,eb){ga.getServerIDs(eb||[],(function(fb){this.__sendRequest('/ajax/mercury/delete_messages.php',{message_ids:fb});}).bind(this));},sendDeliveryReceipts:function(db,eb){ga.getServerIDs(db||[],(function(fb){this.__sendRequest('/ajax/mercury/delivery_receipts.php',{message_ids:fb,thread_ids:eb});}).bind(this));},sendNewMessage:function(db,eb){eb=eb||qa;if(!db.offline_threading_id)j.bumpEntityKey('chat.web','missing_otid_on_send');if(db.client_state&&db.client_state!==x.SEND_TO_SERVER)return;var fb=v.tokenize(db.thread_id),gb=fb.type,hb=babelHelpers._extends({},db);hb.thread_id=null;if(gb=='user'){hb.other_user_fbid=fb.value;this._sendNewMessageToServer(hb,eb);}else if(gb=='thread'){hb.thread_fbid=fb.value;this._sendNewMessageToServer(hb,eb);}else if(gb=='root'&&fb.value==hb.offline_threading_id){hb.client_thread_id=db.thread_id;this._sendNewMessageToServer(hb,eb);}else{!v.isLocalThread(db.thread_id)?na(0):undefined;this.__threadIDMap.getServerIDFromClientID(db.thread_id,(function(ib){hb.thread_fbid=ib;this._sendNewMessageToServer(hb,eb);}).bind(this));}},_sendNewMessageToServer:function(db,eb){h.inform(k.ATTEMPT_RECONNECT);this._sentMessagesTimestamp[db.message_id]=Date.now();ca.getForFBID(this._fbid).enqueue(db.other_user_fbid||db.thread_fbid||db.client_thread_id,this._sendMessageQueueOptions,eb,db);},markSeen:function(){var db=this._lastActionTimestamp;this.__sendRequest('/ajax/mercury/mark_seen.php',{seen_timestamp:db});},_handleSendMessageErrorCommon:function(db,eb,fb,gb){pa.debug('handle_send_message_error_common',{reliability_error_status:fb,request_error_status:eb});var hb=db.getData(),ib=hb.message_batch,jb=ib.map(function(lb){var mb={action_type:o.SEND_MESSAGE,other_user_fbid:lb.other_user_fbid,thread_fbid:lb.thread_fbid,client_message_id:lb.message_id,message_id:lb.message_id,client_thread_id:lb.client_thread_id,status:eb,error_data:gb};return mb;});jb.forEach(function(lb){if(lb.action_type===o.SEND_MESSAGE&&lb.status===n.ERROR)z.log(lb);},this);var kb={actions:jb,payload_source:y.CLIENT_HANDLE_ERROR};this._payloadPreprocessor.handleUpdate(kb);},handleSendMessageError:function(db){var eb=db.getPayload(),fb=null,gb=null;if(eb&&eb.error_payload){fb=n.UNCONFIRMED;gb='send_error';}else{fb=n.ERROR;gb='request_error'+sa(db);}var hb=db.error;if(hb===1404102)i.verboseErrorHandler(db);var ib=/<.*>/.test(db.getErrorDescription())?db.getErrorSummary():db.getErrorDescription();this._handleSendMessageErrorCommon(db.getRequest(),fb,gb,{type:t.SERVER,code:db.getError(),description:ib,is_transient:db.isTransient()});},handleSendMessageTransportError:function(db){this._handleSendMessageErrorCommon(db.getRequest(),n.ERROR,'transport_error'+sa(db),{type:t.TRANSPORT,code:db.getError(),is_transient:true});},handleSendMessageTimeout:function(db){this._handleSendMessageErrorCommon(db,n.ERROR,'transport_timeout',{type:t.TIMEOUT,is_transient:true});},getLastActionTimestamp:function(){return this._lastActionTimestamp;},updateLastActionTimestamp:function(db){if(db)this._lastActionTimestamp=Math.max(this._lastActionTimestamp,db);},markThreadFetched:function(db){delete this._fetchingThreads[db];},_createServerErrorLogMessage:function(db){return {action_type:o.LOG_MESSAGE,thread_id:db,message_id:db,timestamp:Date.now(),timestamp_absolute:'',timestamp_relative:'',is_unread:false,source:ea.UNKNOWN,log_message_type:w.SERVER_ERROR,log_message_data:{}};},_getForAsyncRequest:function(db){var eb=db.getData(),fb=eb.request_user_id?eb.request_user_id:l.getID();return cb.getForFBID(fb);},__handleUpdate:function(db,eb){this._getForAsyncRequest(eb)._payloadPreprocessor.handleUpdate(db);},_handleThreadInfoError:function(db){var eb=this._getForAsyncRequest(db.getRequest());eb.handleThreadInfoError(db);},_handleSendMessageError:function(db){var eb=this._getForAsyncRequest(db.getRequest());eb.handleSendMessageError(db);},_handleSendMessageTransportError:function(db){var eb=this._getForAsyncRequest(db.getRequest());eb.handleSendMessageTransportError(db);},_handleSendMessageTimeout:function(db){var eb=this._getForAsyncRequest(db);eb.handleSendMessageTimeout(db);},_registerEndpoints:function(){var db=null;if(ba.msgrRegion)db={name:'X-MSGR-Region',value:ba.msgrRegion};var eb={'/ajax/mercury/thread_sync.php':{request_user_id:this._fbid,mode:ja.IDEMPOTENT,customHeader:db,handler:(function(fb,gb){return this.__handleUpdate(fb,gb);}).bind(this),connection_retries:3},'/ajax/mercury/thread_info.php':{request_user_id:this._fbid,mode:ja.BATCH_DEFERRED_MULTI,customHeader:db,batch_function:ta,handler:(function(fb,gb){return this.__handleUpdate(fb,gb);}).bind(this),error_handler:(function(fb){return this._handleThreadInfoError(fb);}).bind(this)},'/ajax/mercury/mark_folder_as_read.php':{request_user_id:this._fbid,mode:ja.IMMEDIATE,customHeader:db,handler:(function(fb,gb){return this.__handleUpdate(fb,gb);}).bind(this)},'/ajax/mercury/change_read_status.php':{request_user_id:this._fbid,mode:ja.BATCH_SUCCESSIVE,customHeader:db,batch_function:wa,handler:(function(fb,gb){return this.__handleUpdate(fb,gb);}).bind(this)},'/ajax/mercury/mark_seen.php':{request_user_id:this._fbid,mode:ja.BATCH_SUCCESSIVE,customHeader:db,batch_function:xa,handler:(function(fb,gb){return this.__handleUpdate(fb,gb);}).bind(this)},'/ajax/mercury/threadlist_info.php':{request_user_id:this._fbid,mode:ja.BATCH_SUCCESSIVE_UNIQUE,customHeader:db,batch_function:va,handler:(function(fb,gb){return this.__handleUpdate(fb,gb);}).bind(this)},'/ajax/mercury/mark_spam.php':{request_user_id:this._fbid,mode:ja.IMMEDIATE,customHeader:db,handler:(function(fb,gb){return this.__handleUpdate(fb,gb);}).bind(this)},'/ajax/mercury/unmark_spam.php':{request_user_id:this._fbid,mode:ja.IMMEDIATE,customHeader:db,handler:(function(fb,gb){return this.__handleUpdate(fb,gb);}).bind(this)},'/ajax/mercury/unread_threads.php':{request_user_id:this._fbid,mode:ja.BATCH_SUCCESSIVE_UNIQUE,customHeader:db,batch_function:ua,handler:(function(fb,gb){return this.__handleUpdate(fb,gb);}).bind(this)},'/ajax/chat/settings.php':{request_user_id:this._fbid,mode:ja.IMMEDIATE,customHeader:db},'/ajax/mercury/change_archived_status.php':{request_user_id:this._fbid,mode:ja.BATCH_SUCCESSIVE,customHeader:db,batch_function:za,handler:(function(fb,gb){return this.__handleUpdate(fb,gb);}).bind(this)},'/ajax/mercury/delete_thread.php':{request_user_id:this._fbid,mode:ja.BATCH_SUCCESSIVE,customHeader:db,batch_function:bb,handler:(function(fb,gb){return this.__handleUpdate(fb,gb);}).bind(this)},'/ajax/mercury/delete_messages.php':{request_user_id:this._fbid,mode:ja.IMMEDIATE,customHeader:db,handler:(function(fb,gb){return this.__handleUpdate(fb,gb);}).bind(this)},'/ajax/mercury/delivery_receipts.php':{request_user_id:this._fbid,mode:ja.IMMEDIATE,customHeader:db,handler:(function(fb,gb){return this.__handleUpdate(fb,gb);}).bind(this)},'/ajax/mercury/move_thread.php':{request_user_id:this._fbid,mode:ja.BATCH_SUCCESSIVE,customHeader:db,batch_function:ab,handler:(function(fb,gb){return this.__handleUpdate(fb,gb);}).bind(this)},'/ajax/mercury/change_mute_thread.php':{request_user_id:this._fbid,mode:ja.IMMEDIATE,customHeader:db,handler:(function(fb,gb){return this.__handleUpdate(fb,gb);}).bind(this)},'/mercury/pinned_threads/':{request_user_id:this._fbid,mode:ja.BATCH_SUCCESSIVE_UNIQUE,customHeader:db,handler:(function(fb,gb){return this.__handleUpdate(fb,gb);}).bind(this)},'/mercury/unpin_thread/':{request_user_id:this._fbid,mode:ja.IMMEDIATE,customHeader:db,handler:(function(fb,gb){return this.__handleUpdate(fb,gb);}).bind(this)}};ja.registerEndpoints(eb);},__sendRequest:function(db,eb,fb){ja.trySend(db,eb,fb,this._fbid);}});Object.assign(cb,da);f.exports=cb;},null);
__d('MercuryThreads',['EventEmitter','ImmutableObject','KeyedCallbackManager','LogHistory','Map','MercuryActionType','MercuryAPIArgsSource','MercuryAssert','MercuryAttachment','MercuryConfig','MercuryDispatcher','MercuryFolders','MercuryGlobalActionType','MercuryIDs','MercuryLogMessageType','MercuryLoggingHelper','MercuryPayloadSource','MercuryServerRequests','MercurySingletonProvider','MercuryThreadInfo','MercuryThreadInformer','MessagingTag','MercuryDisplayTimeFilterMessageRenderer','Set','emptyFunction','ifRequired','setImmediate'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba,ca,da,ea,fa,ga,ha){'use strict';if(c.__markCompiled)c.__markCompiled();var ia=new h(),ja=k.getInstance('mercury_threads');function ka(ma){this.$MercuryThreads1=ma;this.$MercuryThreads2=y.getForFBID(this.$MercuryThreads1);this.$MercuryThreads3=ba.getForFBID(this.$MercuryThreads1);this.$MercuryThreads4=u.getParticipantIDFromUserID(this.$MercuryThreads1);this.$MercuryThreads5=r.getForFBID(this.$MercuryThreads1);this.$MercuryThreads6=false;this.$MercuryThreads7=new j();this.$MercuryThreads8=new ea();this.$MercuryThreads9=false;this.$MercuryThreads10=new ea();this.$MercuryThreads11=new ea();this.$MercuryThreads12();}ka.getForFBID=function(ma){return la.getForFBID(ma);};ka.get=function(){return la.get();};ka.prototype.getThreadMetaNow=function(ma){o.isThreadID(ma);return this.$MercuryThreads7.getResource(ma);};ka.prototype.getOrFetch=function(ma){var na=this.getThreadMetaNow(ma);if(!na&&!this.$MercuryThreads11.has(ma))this.$MercuryThreads10.add(ma);if(this.$MercuryThreads10.size>0&&!this.$MercuryThreads9)this.$MercuryThreads13();return na;};ka.prototype.$MercuryThreads13=function(){if(this.$MercuryThreads9)return;this.$MercuryThreads9=true;ha((function(){this.$MercuryThreads9=false;this.$MercuryThreads10.forEach((function(ma){return this.$MercuryThreads11.add(ma);}).bind(this));this.getMultiThreadMeta(Array.from(this.$MercuryThreads10),(function(ma){for(var na in ma)ma.hasOwnProperty(na)&&this.$MercuryThreads11['delete'](na);}).bind(this));this.$MercuryThreads10.clear();}).bind(this));};ka.prototype.getThreadMeta=function(ma,na,oa){return this.getMultiThreadMeta([ma],function(pa){return na(pa[ma]);},oa);};ka.prototype.getMultiThreadMeta=function(ma,na,oa){o.allThreadID(ma);var pa=this.$MercuryThreads7.executeOrEnqueue(ma,na),qa=this.$MercuryThreads7.getUnavailableResources(pa);if(qa.length){var ra=[];for(var sa=0;sa<qa.length;sa++){var ta=qa[sa],ua=u.tokenize(ta),va=ua.type,wa=ua.value;if(va=='user'){var xa=u.getParticipantIDFromUserID(wa);this.createNewLocalThread(ta,xa===this.$MercuryThreads4?[this.$MercuryThreads4]:[this.$MercuryThreads4,xa]);}else ra.push(ta);}if(ra.length)this.$MercuryThreads2.fetchThreadData(ra,oa);}return pa;};ka.addListener=function(ma,na){return ia.addListener(ma,na);};ka.prototype.unsubscribe=function(ma){this.$MercuryThreads7.unsubscribe(ma);};ka.prototype.getCanonicalThreadToParticipant=function(ma,na,oa,pa){var qa=u.getThreadIDFromParticipantID(ma),ra=this.$MercuryThreads7.getResource(qa);if(typeof ra=='undefined'){ra=this.createNewLocalThread(qa,this.$MercuryThreads4===ma?[this.$MercuryThreads4]:[this.$MercuryThreads4,ma],na);!pa&&this.$MercuryThreads2.fetchThreadData([qa],oa);}return ra;};ka.prototype.createNewLocalThread=function(ma,na,oa){var pa=this.$MercuryThreads7.getResource(ma);if(!pa){var qa=u.tokenize(ma),ra=qa.type,sa=qa.value;pa=new i({thread_id:ma,participants:Array.from(na),name:'',snippet:'',snippet_has_attachment:false,snippet_sender:null,unread_count:oa?oa:0,message_count:0,image_src:null,timestamp_absolute:null,timestamp_relative:null,timestamp:null,other_user_fbid:ra==='user'?sa:null,is_canonical_user:ra=='user',is_canonical:this.$MercuryThreads14(na),is_subscribed:true,folder:ca.INBOX,is_archived:false});this.$MercuryThreads7.setResource(ma,pa);}return pa;};ka.prototype.isEmptyLocalThread=function(ma){var na=this.$MercuryThreads7.getResource(ma);if(!na)return false;return aa.isEmptyLocalThread(na);};ka.prototype.isNewEmptyLocalThread=function(ma){var na=this.$MercuryThreads7.getResource(ma);if(!na)return false;return aa.isNewEmptyLocalThread(na);};ka.prototype.$MercuryThreads15=function(ma,na){if(!ma||!ma.length)return;var oa=new l(),pa=new l(),qa=new l(),ra=[];for(var sa=0;sa<ma.length;sa++){var ta=ma[sa];if(ta.is_forward)continue;var ua=ta.action_type;if(ua==m.LOG_MESSAGE&&ta.log_message_type==v.SERVER_ERROR)continue;var va=!!(ta.sync_id||ta.action_id||ta.is_from_iris),wa=ta.thread_id;o.isThreadID(wa);var xa=this.$MercuryThreads7.getResource(wa);if(!xa&&!va&&ua==m.USER_GENERATED_MESSAGE){xa=this.$MercuryThreads16(ta);this.$MercuryThreads7.setResource(wa,xa);}if(!xa)continue;if(ua==m.LOG_MESSAGE||ua==m.USER_GENERATED_MESSAGE)va=!na;if(xa.server_timestamp&&ta.timestamp<=xa.server_timestamp&&va)continue;if(!qa.has(wa))qa.set(wa,babelHelpers._extends({},xa));this.$MercuryThreads17(qa.get(wa),ta,na);if(ua==m.USER_GENERATED_MESSAGE)oa.set(wa,ta);if(ua==m.USER_GENERATED_MESSAGE||ua==m.LOG_MESSAGE||ua==m.SEND_MESSAGE)if(ta&&ta.timestamp&&(!pa.has(wa)||ta.timestamp>pa.get(wa).timestamp))pa.set(wa,ta);}qa.forEach((function(ya,za){var ab=pa.get(za),bb=oa.get(za);if(bb){this.$MercuryThreads18(ya,bb);}else if(ab&&(ab.log_message_type==v.PHONE_CALL||ab.log_message_type==v.VIDEO_CALL)){var cb=babelHelpers._extends({},ab,{body:ab.log_message_body});this.$MercuryThreads18(ya,cb);}var db=ya.timestamp;if(ab){if(ab.timestamp>db)Object.assign(ya,{timestamp_absolute:ab.timestamp_absolute,timestamp_relative:ab.timestamp_relative,timestamp:ab.timestamp});var eb=ya.server_timestamp;if(!na&&ab.timestamp>eb)ya.server_timestamp=ab.timestamp;}var fb=new i(ya);this.$MercuryThreads7.setResource(za,fb);ra.push(w.obfuscateThread(fb));}).bind(this),this);ra.length&&this.$MercuryThreads6&&ja.debug('threads_updated',{threads:ra});};ka.prototype.$MercuryThreads17=function(ma,na,oa){var pa=na.action_type;if(pa==m.USER_GENERATED_MESSAGE||pa==m.LOG_MESSAGE){na.is_unread&&ma.unread_count++;ma.message_count++;ma.is_archived=false;}switch(pa){case m.DELETE_THREAD:ma.message_count=0;this.$MercuryThreads19(na.thread_id);break;case m.USER_GENERATED_MESSAGE:if(ma.last_read_timestamp>=na.timestamp)this.$MercuryThreads20(ma,na,true);if(ma.unread_count===0&&na.author===this.$MercuryThreads4&&na.timestamp>=ma.last_read_timestamp)ma.last_read_timestamp=na.timestamp;if(na.offline_threading_id!==na.message_id){ma.last_message_id=na.message_id;ma.last_message_timestamp=na.timestamp;}this.$MercuryThreads21(ma,na.author);break;case m.SEND_MESSAGE:var qa=na.log_message_type;if(qa==v.THREAD_IMAGE){ma.image_src=na.log_message_data.image?na.log_message_data.image.preview_url:null;this.$MercuryThreads22(na.thread_id);}if(qa!==v.SUBSCRIBE&&qa!==v.UNSUBSCRIBE)ma.snippet_attachments=na.attachments;break;case m.LOG_MESSAGE:var qa=na.log_message_type;if(qa==v.SUBSCRIBE){this.$MercuryThreads23(ma,na.log_message_data.added_participants);this.$MercuryThreads22(na.thread_id);}else if(qa==v.UNSUBSCRIBE){this.$MercuryThreads24(ma,na.log_message_data.removed_participants);this.$MercuryThreads22(na.thread_id);}else if(qa==v.THREAD_IMAGE){if(!oa)ma.image_src=na.log_message_data.image?na.log_message_data.image.preview_url:null;}else if(qa==v.THREAD_NAME){if(ma.name!==na.log_message_data.name)this.$MercuryThreads22(na.thread_id);ma.name=na.log_message_data.name;}else if(qa===v.GENERIC_ADMIN_TEXT)if(this.$MercuryThreads25(ma,na))this.$MercuryThreads22(na.thread_id);break;case m.CHANGE_READ_STATUS:var ra=this.$MercuryThreads20(ma,na,na.mark_as_read);if(ra)ma.last_read_timestamp=ma.last_message_timestamp;var sa=!ma.read_only&&ma.folder===ca.INBOX;if(ra&&oa)this.$MercuryThreads2.changeThreadReadStatus(ma.thread_id,na.mark_as_read,na.source,ma.last_read_timestamp,ma.titan_originated_thread_id,sa);break;case m.CHANGE_ARCHIVED_STATUS:if(ma.is_archived!=na.archived){ma.is_archived=na.archived;this.$MercuryThreads22(na.thread_id);}break;case m.CHANGE_FOLDER:if(ma.folder!=na.new_folder){ma.folder=na.new_folder;this.$MercuryThreads22(na.thread_id);}break;case m.DELETE_MESSAGES:if(oa){ma.snippet='...';ma.snippet_has_attachment=false;ma.snippet_attachments=null;ma.snippet_sender=null;this.$MercuryThreads22(na.thread_id);}else if(na.message_ids){ma.message_count-=na.message_ids.length;if(!q.MessengerGlobalDeleteGK)break;ga('MercuryMessages',(function(va){va=va.getForFBID(this.$MercuryThreads1);for(var wa=na.message_ids,xa=Array.isArray(wa),ya=0,wa=xa?wa:wa[typeof Symbol==='function'?Symbol.iterator:'@@iterator']();;){var za;if(xa){if(ya>=wa.length)break;za=wa[ya++];}else{ya=wa.next();if(ya.done)break;za=ya.value;}var ab=za,bb=va.getMessagesFromIDs([ab]),cb=bb[0];if(cb&&cb.timestamp>ma.last_read_timestamp)ma.unread_count=Math.max(0,ma.unread_count-1);}this.$MercuryThreads22(na.thread_id);}).bind(this),fa);}break;case m.UPDATE_SNIPPET:ga('MercuryMessages',(function(va){va=va.getForFBID(this.$MercuryThreads1);if(!q.MessengerGlobalDeleteGK)return;var wa=false;for(var xa=na.deleted_ids,ya=Array.isArray(xa),za=0,xa=ya?xa:xa[typeof Symbol==='function'?Symbol.iterator:'@@iterator']();;){var ab;if(ya){if(za>=xa.length)break;ab=xa[za++];}else{za=xa.next();if(za.done)break;ab=za.value;}var bb=ab;if(bb==ma.last_message_id){wa=true;break;}}if(!wa)return;var cb=0,db=1,eb=va.getThreadMessagesRangeNow(na.thread_id,cb,db),fb=eb[0];if(fb){ma.snippet=fb.body;ma.snippet_has_attachment=fb.has_attachment;ma.snippet_attachments=fb.attachments;ma.snippet_sender=fb.author;ma.last_message_id=va.getServerMessageID(fb.message_id);}else{ma.snippet='...';ma.snippet_has_attachment=false;ma.snippet_attachments=null;ma.snippet_sender=null;va.getThreadMessagesRange(na.thread_id,cb,db,(function(gb){if(gb.length)this.$MercuryThreads5.handleUpdate({from_client:true,actions:[{thread_id:na.thread_id,action_type:m.UPDATE_SNIPPET,deleted_ids:na.deleted_ids}]});}).bind(this));}this.$MercuryThreads22(na.thread_id);}).bind(this),fa);break;case m.UPDATE_BLOCKER_STATUS:ma.can_reply=!!(!na.message_blocked&&(na.is_blocked_by_recipient===undefined||!na.is_blocked_by_recipient)&&ma.is_subscribed&&!ma.has_email_participant&&!ma.read_only&&(ma.recipients_loadable||ma.recipients_loadable===undefined));this.$MercuryThreads22(na.thread_id);break;case m.UPDATE_BLOCKEE_STATUS:ma.can_reply=!!(!na.got_blocked&&ma.is_subscribed&&!ma.has_email_participant&&!ma.read_only&&(ma.recipients_loadable||ma.recipients_loadable===undefined));this.$MercuryThreads22(na.thread_id);break;case m.CHANGE_MUTE_SETTINGS:if(na.mute_settings!==undefined){var ta=this.$MercuryThreads1+'@facebook.com';if(ma.mute_settings){if(na.mute_settings){var ua={};ua[ta]=na.mute_settings;ma.mute_settings=babelHelpers._extends({},ma.mute_settings,ua);}else{ma.mute_settings=babelHelpers._extends({},ma.mute_settings);delete ma.mute_settings[ta];}this.$MercuryThreads22(ma.thread_id);}}break;case m.ADD_PARTICIPANTS:this.$MercuryThreads23(ma,na.participants);this.$MercuryThreads22(ma.thread_id);break;case m.CHANGE_FLAG:this.$MercuryThreads26(ma,na.mark_as_flag);this.$MercuryThreads22(ma.thread_id);break;case m.MOVE_PENDING_TO_INBOX:this.$MercuryThreads27(ma);this.$MercuryThreads22(ma.thread_id);break;}};ka.prototype.$MercuryThreads16=function(ma){var na=u.tokenize(ma.thread_id),oa=na.type,pa=na.value,qa=this.$MercuryThreads14(ma.specific_to_list);return new i({thread_id:ma.thread_id,participants:ma.specific_to_list,name:null,snippet:ma.body,snippet_has_attachment:false,snippet_attachments:[],snippet_sender:ma.author,unread_count:0,message_count:0,image_src:null,timestamp_absolute:ma.timestamp_absolute,timestamp_relative:ma.timestamp_relative,timestamp:ma.timestamp,other_user_fbid:oa==='user'?pa:null,is_canonical_user:oa==='user',is_canonical:qa,is_subscribed:true,folder:ca.INBOX,is_archived:false});};ka.prototype.$MercuryThreads20=function(ma,na,oa){if(na.timestamp)this.$MercuryThreads28(ma.thread_id,oa,na.timestamp);if(!ma||!ma.thread_id)return false;if(!ma.timestamp){this.$MercuryThreads8.add(ma.thread_id);return false;}var pa=!ma.unread_count;if(oa==pa)return false;ma.unread_count=oa?0:1;this.$MercuryThreads22(ma.thread_id);return true;};ka.prototype.$MercuryThreads29=function(ma){var na=this.$MercuryThreads7.getAllResources();for(var oa in na)if(na.hasOwnProperty(oa)){var pa=na[oa];if(pa.folder==ma){this.$MercuryThreads7.setResource(oa,i.setProperty(pa,'unread_count',0));this.$MercuryThreads22(oa);}}};ka.prototype.$MercuryThreads23=function(ma,na){var oa=new ea(ma.participants);ma.participants=Array.from(ma.participants);na.forEach((function(pa){if(!oa.has(pa)){ma.participants.push(pa);if(pa===this.$MercuryThreads4){ma.is_subscribed=true;ma.can_reply=true;ma.composer_enabled=true;this.$MercuryThreads2.fetchMissedMessages(s.getSupportedFolders(),n.MERCURYSYNC,ma.last_message_timestamp);}}}).bind(this));};ka.prototype.$MercuryThreads25=function(ma,na){if(na.log_message_data&&na.log_message_data.untypedData){var oa=parseInt(na.log_message_data.untypedData.ttl,10);if(oa!==null&&ma.ephemeral_ttl_mode!==oa){ma.ephemeral_ttl_mode=oa;return true;}}return false;};ka.prototype.$MercuryThreads24=function(ma,na){var oa=new ea(na);ma.participants=ma.participants.filter(function(pa){return !oa.has(pa);});if(oa.has(this.$MercuryThreads4))ma.is_subscribed=false;this.$MercuryThreads2.fetchThreadData([ma.thread_id]);};ka.prototype.$MercuryThreads21=function(ma,na){var oa=ma.participants.indexOf(na);if(oa>0)ma.participants=[na].concat(ma.participants.slice(0,oa),ma.participants.slice(oa+1));};ka.prototype.$MercuryThreads18=function(ma,na){var oa=na.body,pa=na.subject,qa='';if(pa){pa=pa.toLowerCase();if(oa.slice(0,pa.length).toLowerCase()==pa){qa=oa;}else if(oa){qa=pa+' \u00B7 '+oa;}else qa=pa;}else qa=oa;if(na.is_filtered_content)qa=da.renderFilteredContent(na);ma.snippet=qa;ma.snippet_has_attachment=na.has_attachment;if(na.raw_attachments&&na.raw_attachments.length>0){var ra=p.convertRaw(na.raw_attachments);ma.snippet_attachments=ra;}else ma.snippet_attachments=na.attachments;ma.snippet_sender=na.author;};ka.prototype.$MercuryThreads26=function(ma,na){ma.page_thread_info=babelHelpers._extends({},ma.page_thread_info,{flagged:na});};ka.prototype.$MercuryThreads27=function(ma){if(ma.folder!==ca.PENDING)return;ma.folder=ca.INBOX;};ka.prototype.$MercuryThreads14=function(ma){return ma.filter((function(na){return na!=this.$MercuryThreads4;}).bind(this)).length<=1;};ka.prototype.$MercuryThreads12=function(){this.$MercuryThreads5.subscribe('invalidate-thread-state',(function(ma,na){return this.$MercuryThreads30(na);}).bind(this));this.$MercuryThreads5.subscribe('update-threads',(function(ma,na){var oa=(na.actions||[]).filter(function(pa){return pa.thread_id;});if(na.threads&&na.payload_source==x.SERVER_FETCH_THREAD_INFO)na.threads.forEach((function(pa){var qa=pa.thread_id;if(this.$MercuryThreads8.has(qa)){this.$MercuryThreads8['delete'](qa);if(pa.unread_count)this.$MercuryThreads2.changeThreadReadStatus(pa.thread_id,true);}}).bind(this));this.$MercuryThreads31(na.threads);this.$MercuryThreads15(oa,na.from_client);na.threads&&na.threads.forEach((function(pa){this.$MercuryThreads22(pa.thread_id);}).bind(this));if(na.global_actions)na.global_actions.forEach((function(pa){if(pa.action_type==t.MARK_ALL_READ)this.$MercuryThreads29(pa.folder);}).bind(this));if(this.$MercuryThreads6){this.$MercuryThreads6=false;ia.emit('change');}}).bind(this));};ka.prototype.$MercuryThreads31=function(ma){if(!ma||!ma.length)return;var na={},oa=[];ma.forEach(function(pa){var qa=new i(pa);na[pa.thread_id]=qa;oa.push(w.obfuscateThread(qa));});oa.length&&ja.debug('threads_added',{threads:oa});this.$MercuryThreads7.addResourcesAndExecute(na);};ka.prototype.$MercuryThreads22=function(ma){this.$MercuryThreads6=true;this.$MercuryThreads3.updatedThread(ma);};ka.prototype.$MercuryThreads19=function(ma){this.$MercuryThreads6=true;this.$MercuryThreads3.deletedThread(ma);};ka.prototype.$MercuryThreads28=function(ma,na,oa){this.$MercuryThreads6=true;this.$MercuryThreads3.changedThreadReadState(ma,na,oa);};ka.prototype.$MercuryThreads30=function(ma){this.$MercuryThreads7.setResource(ma,undefined);};var la=new z(ka);f.exports=ka;},null);
__d('MercuryMessageObject',['BanzaiODS','MercuryActionStatus','MercuryActionType','MercuryIDs','MercuryLocalIDs','MercuryMessageClientState','MercuryMessageSourceTags','MercurySingletonProvider','MercurySourceType','MercuryThreads','MercuryTimePassed','MercurySendMessageFields','fbt','formatDate'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u){if(c.__markCompiled)c.__markCompiled();v.getForFBID=function(z){'use strict';return y.getForFBID(z);};v.get=function(){'use strict';return y.get();};function v(z){'use strict';this.$MercuryMessageObject1=z;this.$MercuryMessageObject2=q.getForFBID(z);}v.prototype.constructUserGeneratedMessageObject=function(z,aa,ba,ca,da){'use strict';var ea=w(this.$MercuryMessageObject1,j.USER_GENERATED_MESSAGE,aa,ba);if(typeof z=='string')z=z.replace(/^\s+/,'').replace(/\s+$/,'');ea.body=z;ea.has_attachment=false;ea.html_body=false;ea.attachments=[];ea.specific_to_list=ca||[];ea.creator_info=da;return ea;};v.prototype.constructStickerMessageObject=function(z,aa,ba){'use strict';var ca=w(this.$MercuryMessageObject1,j.USER_GENERATED_MESSAGE,aa,ba);ca.has_attachment=true;ca.html_body=false;ca.attachments=[];ca.sticker_id=z;ca.specific_to_list=[];return ca;};v.prototype.constructAttachmentMessageObject=function(z,aa){'use strict';var ba=w(this.$MercuryMessageObject1,j.USER_GENERATED_MESSAGE,z,aa);ba.attachments=[];ba.specific_to_list=[];return ba;};v.prototype.constructLogMessageObject=function(z,aa,ba,ca){'use strict';var da=w(this.$MercuryMessageObject1,j.LOG_MESSAGE,z,aa);da.log_message_type=ba;da.log_message_data=ca;if(ca&&ca.untypedData&&ca.untypedData.ttl)da.ephemeral_ttl_mode=ca.untypedData.ttl;return da;};v.prototype.normalizeNewMessage=function(z){'use strict';if(z.status===undefined)z.status=i.UNSENT;z.timestamp_absolute=t._("Today").toString();z.offline_threading_id=z.offline_threading_id||l.generateOfflineThreadingID(z.timestamp);if(!z.offline_threading_id)h.bumpEntityKey('chat.web','invalid_otid_generated');z.message_id=z.message_id||z.offline_threading_id;var aa=k.getParticipantIDFromUserID(this.$MercuryMessageObject1);z.specific_to_list=z.specific_to_list||[];if(z.specific_to_list.length&&z.specific_to_list.indexOf(aa)===-1)z.specific_to_list.push(aa);if(!z.thread_id){z.thread_id='root:'+z.offline_threading_id;}else{var ba=this.$MercuryMessageObject2.getThreadMetaNow(z.thread_id);if(ba&&ba.ephemeral_ttl_mode!==null&&z.ephemeral_ttl_mode===undefined)z.ephemeral_ttl_mode=ba.ephemeral_ttl_mode;}if(z.specific_to_list.length==1){z.thread_id='user:'+this.$MercuryMessageObject1;}else if(z.specific_to_list.length==2){var ca=z.specific_to_list[0]==aa?z.specific_to_list[1]:z.specific_to_list[0];z.thread_id=k.getThreadIDFromParticipantID(ca);}if(!z.specific_to_list.length){var da=k.tokenize(z.thread_id),ea=da.type,fa=da.value;if(ea=='user')z.specific_to_list=['fbid:'+fa,aa];}if(!z[s.MANUAL_RETRY_CNT])z[s.MANUAL_RETRY_CNT]=0;};v.prototype.normalizeResendMessage=function(z){'use strict';z.status=i.RESENDING;z.timestamp=Date.now();z[s.MANUAL_RETRY_CNT]+=1;};v.prototype.normalizeAddAttachmentPlaceholder=function(z,aa,ba){'use strict';if(ba.preview_attachments.length>0){z.has_attachment=true;z.preview_attachments=ba.preview_attachments;}z.client_state=m.DO_NOT_SEND_TO_SERVER;z.status=i.RESENDING;z.upload_id=aa;};function w(z,aa,ba,ca){var da=x(ba)?[n.CHAT]:[],ea=Date.now(),fa=u(new Date(ea),'g:ia'),ga={action_type:aa,thread_id:ca,author:k.getParticipantIDFromUserID(z),author_email:null,timestamp:ea,timestamp_absolute:new Date(ea).toLocaleDateString(),timestamp_relative:fa,timestamp_time_passed:r.TODAY,is_unread:false,is_forward:false,is_filtered_content:false,is_filtered_content_bh:false,is_filtered_content_account:false,is_filtered_content_quasar:false,is_filtered_content_invalid_app:false,is_spoof_warning:false,source:ba,source_tags:da};return ga;}function x(z){switch(z){case p.CHAT_WEB:case p.CHAT_JABBER:case p.CHAT_IPHONE:case p.CHAT_MEEBO:case p.CHAT_ORCA:case p.CHAT_TEST:case p.CHAT:case p.DESKTOP:return true;default:return false;}}var y=new o(v);f.exports=v;},null);
__d('MercuryViewer',['CurrentUser','MercuryAssert'],function a(b,c,d,e,f,g,h,i){'use strict';if(c.__markCompiled)c.__markCompiled();var j='fbid:'+h.getID(),k={getID:function(){return j;},isViewer:function(l){i.isParticipantID(l);return l===j;}};f.exports=k;},null);
__d("XMercuryInvalidateThreadStateController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/mercury\/invalidate_thread_state\/",{other_user_or_thread_fbid:{type:"Int",required:true}});},null,{});
__d("XNFXMessengerBlockActionController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/nfx\/block_messages\/",{thread_fbid:{type:"Int",required:true},av:{type:"Int"},location:{type:"Enum",required:true,enumType:1},__asyncDialog:{type:"Int"}});},null,{});
__d('MercuryThreadActions',['AsyncDialog','AsyncRequest','IrisProtocolMessageLifetime','MercuryActionType','MercuryAPIArgsSource','MercuryDispatcher','MercuryIDs','MercuryLogMessageType','MercuryMessengerBlockingUtils','MercuryPayloadSource','MercuryServerPayloadPreprocessor','MercuryServerRequests','MercurySingletonMixin','MercurySourceType','MercuryViewer','MessagingTag','XMercuryInvalidateThreadStateController','XNFXMessengerBlockActionController','URI','MercuryAssert','XMessengerNotificationsSettingsDialogController','MercuryMessageActions','MercuryMessageObject','MercuryThreads'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba){'use strict';if(c.__markCompiled)c.__markCompiled();var ca=c('MercuryMessageActions').get(),da=c('MercuryMessageObject').get(),ea=c('MercuryThreads').get();function fa(ga){this.$MercuryThreadActions1=ga;this.__serverRequests=s.getForFBID(this.$MercuryThreadActions1);this.__dispatcher=m.getForFBID(this.$MercuryThreadActions1);this.__payloadPreprocessor=r.getForFBID(this.$MercuryThreadActions1);}fa.prototype.markRead=function(ga,ha){this.batchMarkRead([ga],ha);};fa.prototype.batchMarkRead=function(ga,ha){this.__dispatcher.handleUpdate(this.$MercuryThreadActions2(ga,true,ha));};fa.prototype.markUnread=function(ga,ha){this.batchMarkUnread([ga],ha);};fa.prototype.batchMarkUnread=function(ga,ha){this.__dispatcher.handleUpdate(this.$MercuryThreadActions2(ga,false,ha));};fa.prototype.markSeen=function(ga,ha){this.__dispatcher.handleUpdate(this.__constructClientPayload([ga],k.MARK_THREAD_SEEN,q.CLIENT_MARK_THREAD_SEEN,{persistent:ha}));};fa.prototype.archive=function(ga,ha){this.batchArchive([ga],ha);};fa.prototype.batchArchive=function(ga,ha){ga.forEach((function(ia){this.__serverRequests.changeThreadArchivedStatus(ia,true,ha);}).bind(this));this.__dispatcher.handleUpdate(this.$MercuryThreadActions3(ga,true));};fa.prototype.unarchive=function(ga,ha){this.batchUnarchive([ga],ha);};fa.prototype.batchUnarchive=function(ga,ha){ga.forEach((function(ia){this.__serverRequests.changeThreadArchivedStatus(ia,false,ha);}).bind(this));this.__dispatcher.handleUpdate(this.$MercuryThreadActions3(ga,false));};fa.prototype.markSpam=function(ga,ha){this.batchMarkSpam([ga],ha);};fa.prototype.batchMarkSpam=function(ga,ha){ga.forEach((function(ia){this.__serverRequests.markThreadSpam(ia,ha);}).bind(this));this.__dispatcher.handleUpdate(this.$MercuryThreadActions4(ga,w.SPAM));};fa.prototype.unmarkSpam=function(ga,ha){this.batchUnmarkSpam([ga],ha);};fa.prototype.batchUnmarkSpam=function(ga,ha){ga.forEach((function(ia){this.__serverRequests.unmarkThreadSpam(ia,ha);}).bind(this));this.__dispatcher.handleUpdate(this.$MercuryThreadActions4(ga,w.INBOX));};fa.prototype.changeFolder=function(ga,ha){this.batchChangeFolder([ga],ha);};fa.prototype.batchChangeFolder=function(ga,ha){ga.forEach((function(ia){this.__serverRequests.changeThreadFolder(ia,ha);}).bind(this));this.__dispatcher.handleUpdate(this.$MercuryThreadActions4(ga,ha));};fa.prototype['delete']=function(ga,ha){this.batchDelete([ga],ha);};fa.prototype.batchDelete=function(ga,ha){ga.forEach((function(ia){this.__serverRequests.deleteThread(ia,ha);}).bind(this));this.__dispatcher.handleUpdate(this.__constructClientPayload(ga,k.DELETE_THREAD,q.CLIENT_DELETE_THREAD));};fa.prototype.openNotificationSettings=function(ga){aa.isThreadID(ga);this.__serverRequests.__threadIDMap.getServerIDFromClientID(ga,function(ha){var ia=ba.getURIBuilder().setString('thread_key_id',ha).setBool('modify',false).getURI();new i().setURI(ia).send();});};fa.prototype.unmute=function(ga){this.updateMuteSetting(ga,0);};fa.prototype.updateMuteSetting=function(ga,ha){this.__serverRequests.changeMutingOnThread(ga,ha);this.__dispatcher.handleUpdate(this.__constructClientPayload([ga],k.CHANGE_MUTE_SETTINGS,q.CLIENT_CHANGE_MUTE_SETTINGS,{mute_settings:ha}));};fa.prototype.blockMessages=function(ga){var ha=y.getURIBuilder().setInt('thread_fbid',n.getUserIDFromThreadID(ga)).setEnum('location','www_chat_head').getURI();h.send(new i(ha));};fa.prototype.unblockMessages=function(ga){var ha=JSON.stringify({reportable_ent_token:n.getUserIDFromThreadID(ga),initial_action_name:p.block_messages});new i(new z('/ajax/nfx/messenger_undo_block').addQueryData({story_location:'messenger',context:ha})).send();};fa.prototype.turnOffSecretMode=function(ga){if(ea.isEmptyLocalThread(ga))return;ca.send(da.constructLogMessageObject(u.TITAN_WEB,ga,o.GENERIC_ADMIN_TEXT,{untypedData:{ttl:j.TTL_OFF}}),null,l.WEBMESSENGER);};fa.prototype.turnOnSecretMode=function(ga){if(ea.isEmptyLocalThread(ga))return;ca.send(da.constructLogMessageObject(u.TITAN_WEB,ga,o.GENERIC_ADMIN_TEXT,{untypedData:{ttl:j.TTL_1HOUR}}),null,l.WEBMESSENGER);};fa.prototype.leaveGroup=function(ga){if(!ea.isEmptyLocalThread(ga))ca.send(da.constructLogMessageObject(u.TITAN_WEB,ga,o.UNSUBSCRIBE,{removed_participants:[v.getID()]}),null,l.WEBMESSENGER);};fa.prototype.addParticipants=function(ga,ha){this.__dispatcher.handleUpdate(this.__constructClientPayload([ga],k.ADD_PARTICIPANTS,q.CLIENT_ADD_PARTICIPANTS,{participants:ha}));};fa.prototype.unpinThread=function(ga){this.__serverRequests.unpinThread(ga);this.__dispatcher.handleUpdate(this.__constructClientPayload([ga],k.UNPIN_THREAD,q.CLIENT_UNPIN_THREAD));};fa.prototype.movePendingToInbox=function(ga){this.__dispatcher.handleUpdate(this.__constructClientPayload([ga],k.MOVE_PENDING_TO_INBOX,q.CLIENT_MOVE_PENDING_TO_INBOX));};fa.prototype.updateSnippet=function(ga,ha){this.__dispatcher.handleUpdate(this.__constructClientPayload([ga],k.UPDATE_SNIPPET,q.CLIENT_UPDATE_SNIPPET,{deleted_ids:ha}));};fa.prototype.invalidateState=function(ga,ha){var ia=x.getURIBuilder().setInt('other_user_or_thread_fbid',ga||ha).getURI();new i().setURI(ia).setHandler((function(ja){this.__payloadPreprocessor.handleUpdate(ja.getPayload());}).bind(this)).send();};fa.prototype.$MercuryThreadActions2=function(ga,ha,ia){return this.__constructClientPayload(ga,k.CHANGE_READ_STATUS,q.CLIENT_CHANGE_READ_STATUS,{mark_as_read:ha,source:ia});};fa.prototype.$MercuryThreadActions3=function(ga,ha){return this.__constructClientPayload(ga,k.CHANGE_ARCHIVED_STATUS,q.CLIENT_CHANGE_ARCHIVED_STATUS,{archived:ha});};fa.prototype.$MercuryThreadActions4=function(ga,ha){return this.__constructClientPayload(ga,k.CHANGE_FOLDER,q.CLIENT_CHANGE_FOLDER,{new_folder:ha});};fa.prototype.__constructClientPayload=function(ga,ha,ia,ja){return {actions:ga.map(function(ka){return babelHelpers._extends({action_type:ha,action_id:null,thread_id:ka},ja);}),from_client:true,payload_source:ia};};Object.assign(fa,t);f.exports=fa;},null);
__d('ImageSourceRequest',['CurrentUser','ImageSourceType','KeyedCallbackManager','PhotoResizeModeConst','MercuryServerDispatcher','arrayContains'],function a(b,c,d,e,f,g,h,i,j,k,l,m){if(c.__markCompiled)c.__markCompiled();function n(){'use strict';this._request={fbid:null,type:null,width:null,height:null,resize_mode:null};this._callback=null;}n.prototype.setFBID=function(r){'use strict';this._request.fbid=r;return this;};n.prototype.setType=function(r){'use strict';if(!m([i.PROFILE_PICTURE,i.IMAGE],r))throw new TypeError('ImageSourceRequest.setType: invalid type '+r);this._request.type=r;return this;};n.prototype.setDimensions=function(r,s){'use strict';this._request.width=r;this._request.height=s;return this;};n.prototype.setResizeMode=function(r){'use strict';if(!m([k.COVER,k.CONTAIN],r))throw new TypeError('ImageSourceRequest.setResizeMode: invalid resize mode '+r);this._request.resize_mode=r;return this;};n.prototype.setCallback=function(r){'use strict';this._callback=r;return this;};n.prototype.send=function(){'use strict';if(!this._request.fbid||!this._request.width||!this._request.height||!this._request.type||!this._request.resize_mode||!this._callback)throw new Error('ImageSourceRequest: You must set all the fields');var r=p(),s=q(this._request);r.executeOrEnqueue(s,this._callback);if(r.getUnavailableResourcesFromRequest(s).length===1){l.trySend('/ajax/image_source.php',{requests:[this._request]});return true;}return false;};var o=null;function p(){if(o)return o;var r=new j();o=r;l.registerEndpoints({'/ajax/image_source.php':{request_user_id:h.getID(),mode:l.BATCH_DEFERRED_MULTI,batch_function:function(s,t){var u;(u=s.requests).push.apply(u,t.requests);return s;},handler:function(s,t){var u=t.getData().requests;for(var v=0;v<u.length;++v)r.setResource(q(u[v]),s[v]);}}});return r;}function q(r){return [r.fbid,r.type,r.width,r.height,r.resize_mode].join('|');}f.exports=n;},null);
__d('MercuryParticipantFetcher',['LogHistory','MercuryIDs','MercuryPayloadSource','MercuryServerPayloadPreprocessor','Set','ShortProfiles','setImmediate'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n){'use strict';if(c.__markCompiled)c.__markCompiled();var o=h.getInstance('short_profiles');function p(r){this.$MercuryParticipantFetcher1=k.getForFBID(r);this.$MercuryParticipantFetcher2=false;this.$MercuryParticipantFetcher3=new l();this.$MercuryParticipantFetcher4=new l();}p.prototype.fetch=function(r){this.$MercuryParticipantFetcher5(r);this.$MercuryParticipantFetcher6();};p.prototype.fetchMulti=function(r){r.forEach((function(s){return this.$MercuryParticipantFetcher5(s);}).bind(this));this.$MercuryParticipantFetcher6();};p.prototype.$MercuryParticipantFetcher5=function(r){if(!this.$MercuryParticipantFetcher4.has(r))this.$MercuryParticipantFetcher3.add(r);};p.prototype.$MercuryParticipantFetcher6=function(){if(this.$MercuryParticipantFetcher2||this.$MercuryParticipantFetcher3.size===0)return;this.$MercuryParticipantFetcher2=true;n((function(){this.$MercuryParticipantFetcher2=false;this.$MercuryParticipantFetcher3.forEach((function(r){return this.$MercuryParticipantFetcher4.add(r);}).bind(this));this.$MercuryParticipantFetcher7(this.$MercuryParticipantFetcher3,(function(r){r.forEach((function(s){return this.$MercuryParticipantFetcher4['delete'](s.id);}).bind(this));this.$MercuryParticipantFetcher8(r);}).bind(this));this.$MercuryParticipantFetcher3.clear();}).bind(this));};p.prototype.$MercuryParticipantFetcher7=function(r,s){var t=[];r.forEach(function(u){var v=i.tokenize(u),w=v.type,x=v.value;w==='fbid'&&t.push(x);});if(t.length>0){m.getMulti(t,function(u){var v=[];for(var w in u)v.push(q(u[w],w));s(v);if(v.length!==t.length)o.error('server_fetch_participant_count_error',{expectedIDs:t,receivedIDs:Object.keys(u)});});o.debug('client_fetch_participants',{userIDs:t});}};p.prototype.$MercuryParticipantFetcher8=function(r){this.$MercuryParticipantFetcher1.handleUpdate({participants:r,from_client:false,payload_source:j.SERVER_FETCH_PARTICIPANTS});};function q(r,s){var t=babelHelpers._extends({gender:r.gender,fbid:r.id||s,href:r.uri,id:i.getParticipantIDFromUserID(r.id||s),image_src:r.thumbSrc,name:r.name,short_name:r.firstName,employee:r.employee,is_employee_away:r.is_employee_away,type:r.type,vanity:r.vanity,is_friend:r.is_friend,is_messenger_user:r.is_messenger_user,social_snippets:r.social_snippets},{});if(r.officeStatus){t.officeStatus=r.officeStatus;t.officeStatusStartDate=r.officeStatusStartDate;t.officeStatusEndDate=r.officeStatusEndDate;t.officeStatusComment=r.officeStatusComment;t.officeStatusLocation=r.officeStatusLocation;}return t;}f.exports=p;},null);
__d('MercuryTypingReceiver',['Arbiter','ChannelConstants','FBID','MercuryActionType','MercuryIDs','MercuryPayloadSource','MercuryDispatcher','MercurySingletonMixin','MercuryViewer','TypingStates','isEmpty','mixInEventEmitter','setTimeoutAcrossTransitions','MercuryThreadIDMap'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t){if(c.__markCompiled)c.__markCompiled();var u=c('MercuryThreadIDMap').get(),v=30000;function w(x){'use strict';this.$MercuryTypingReceiver1=null;this.$MercuryTypingReceiver2={};this.$MercuryTypingReceiver3=n.getForFBID(x);this.$MercuryTypingReceiver3.subscribe('update-typing-state',(function(z,aa){var ba=aa.payload_source;if(ba!=m.CLIENT_CHANNEL_MESSAGE)return;var ca=aa.actions;if(!ca||!ca.length)return;var da=k.USER_GENERATED_MESSAGE;ca.forEach((function(ea){if(ea.action_type==da&&ea.author!=p.getID())this.$MercuryTypingReceiver4(ea.thread_id,ea.author);}).bind(this));}).bind(this));var y;if(j.isUser(x)){y=[i.getArbiterType('typ'),i.getArbiterType('ttyp')];}else y=[i.getArbiterType('page_typing')];h.subscribe(y,(function(z,aa){var ba=aa.obj,ca=this.$MercuryTypingReceiver5(ba);if(ca){var da=l.getParticipantIDFromUserID(ba.from);if(ba.st==q.TYPING){this.$MercuryTypingReceiver2[ca]=this.$MercuryTypingReceiver2[ca]||{};var ea=this.$MercuryTypingReceiver2[ca][da];this.$MercuryTypingReceiver2[ca][da]=Date.now();if(!this.$MercuryTypingReceiver1)this.$MercuryTypingReceiver1=t((function(){this.$MercuryTypingReceiver6();}).bind(this),3000);!ea&&this.$MercuryTypingReceiver7(ca);}else if(ba.st==q.INACTIVE)this.$MercuryTypingReceiver4(ca,da);}}).bind(this));}w.prototype.$MercuryTypingReceiver8=function(x){'use strict';var y=this.$MercuryTypingReceiver2[x]||{},z=Object.keys(y);z.sort(function(aa,ba){return y[aa]-y[ba];});return z;};w.prototype.$MercuryTypingReceiver6=function(){'use strict';this.$MercuryTypingReceiver1=null;var x=Date.now(),y={},z=false;for(var aa in this.$MercuryTypingReceiver2){var ba=false;for(var ca in this.$MercuryTypingReceiver2[aa]||{})if(this.$MercuryTypingReceiver2[aa][ca]<x-v){delete this.$MercuryTypingReceiver2[aa][ca];ba=true;}else z=true;if(ba)y[aa]=this.$MercuryTypingReceiver8(aa);}if(!r(y))this.$MercuryTypingReceiver9(y);if(z)this.$MercuryTypingReceiver1=t((function(){this.$MercuryTypingReceiver6();}).bind(this),3000);};w.prototype.$MercuryTypingReceiver4=function(x,y){'use strict';if(x in this.$MercuryTypingReceiver2)if(y in this.$MercuryTypingReceiver2[x]){delete this.$MercuryTypingReceiver2[x][y];this.$MercuryTypingReceiver7(x);}};w.prototype.$MercuryTypingReceiver9=function(x){'use strict';this.releaseHeldEventType('state-changed');this.emitAndHold('state-changed',x);};w.prototype.$MercuryTypingReceiver7=function(x){'use strict';var y={};y[x]=this.$MercuryTypingReceiver8(x);this.$MercuryTypingReceiver9(y);};w.prototype.$MercuryTypingReceiver5=function(x){'use strict';if(x.thread_fbid)return u.getClientIDFromServerIDNow(x.thread_fbid.toString());if(x.type==='typ'||x.type==='page_typing')return l.getThreadIDFromUserID(x.from);return null;};s(w,{'state-changed':true});Object.assign(w,o);f.exports=w;},null);
__d('MessengerPhoto.react',['Image.react','MercuryAttachmentType','React','URI','cx','joinClasses'],function a(b,c,d,e,f,g,h,i,j,k,l,m){'use strict';if(c.__markCompiled)c.__markCompiled();var n=j.PropTypes,o=206,p=450;function q(u){if(u.metadata){if(u.attach_type===i.VIDEO)return u.metadata.inbox_preview;return new k('/ajax/mercury/attachments/photo.php').addQueryData({fbid:u.metadata.fbid,height:o,mode:'cover',request_user_id:u.metadata.pageid,width:o}).toString();}return null;}function r(u){if(u.preview_uploading)return {height:u.preview_height||o,src:u.preview_url,width:u.preview_width||o};var v=q(u);if(v)return babelHelpers._extends({src:v},u.metadata.inbox_size);if(u.preview_url)return {height:u.preview_height,src:u.preview_url,width:u.preview_width};if(u.media)return u.media.playable&&u.media.animated_image?babelHelpers._extends({},u.media.animated_image_size,{src:u.media.animated_image}):babelHelpers._extends({},u.media.image_size,{src:u.media.image});}function s(u,v){if(u.preview_uploading)return u.preview_url?0:o;var w=u.media?r(u):{height:u.preview_height,width:u.preview_width};return Math.min(w.height*Math.min(1,p/w.width),p);}var t=j.createClass({displayName:'MessengerPhoto',contextTypes:{width:n.number},propTypes:{attachment:n.object.isRequired,isSingle:n.bool.isRequired,onClick:n.func},render:function(){var u=this.props.attachment,v=r(u);if(!v)return null;var w=this._getImageFromMetadata(v),x={};if(v.src)x.backgroundImage='url('+v.src+')';if(this.props.isSingle){var y=s(u,this.context);if(y)x.minHeight=y;}var z=!!this.props.attachment.app_attribution;return (j.createElement('div',{className:m(this.props.className,"_4tsk"+(z?' '+"_mxz":'')+(this.props.isSingle&&!z?' '+"_52mr":'')+(u.preview_uploading&&!v.src?' '+"_3etv":'')),style:x,onClick:this._onClick},w,j.createElement('a',{className:"_4tsl",href:v.src},this.props.children)));},_onClick:function(u){u.preventDefault();if(this.props.onClick)this.props.onClick(this.props.attachment);},_getImageFromMetadata:function(u){if(this.props.attachment.preview_uploading&&!u.src)return null;if(this.props.isSingle)return j.createElement(h,{alt:'',src:u.src});return null;}});f.exports=t;},null);
__d('MessagesViewer',['AsyncRequest','Bootloader','DOM','MessagesViewerSetID','PhotoStore','React','ReactDOM','Run','emptyFunction','ge'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){if(c.__markCompiled)c.__markCompiled();var r={bootstrapWithElem:function(u){r.bootstrapWithConfig({fbid:u.getAttribute('data-fbid'),dimensions:u.getAttribute('data-dimensions'),src:u.getAttribute('href'),endpoint:u.getAttribute('data-endpoint'),disablePaging:u.getAttribute('data-disablepaging')},u);},bootstrapWithConfig:function(u,v){var w=u.setID;if(!w)w=k.MESSAGES;t(function(x,y){s(m.createElement(x,{actorid:u.actorid,dimensions:[u.dimensions],disablepaging:u.disablePaging,disableForward:u.disableForward,open:true,photoid:u.fbid,reverse:false,rootClassName:u.rootClassName,setid:w,snapToPhoto:u.snapToPhoto,thumbsrc:u.src}));if(!l.hasBeenCreated(w)&&u.endpoint){var z=new h(u.endpoint);if(v)z.setRelativeTo(v);z.send();}});},renderVideo:function(u){t(function(v,w){s(m.createElement(w,u));});},preload:function(){o.onAfterLoad(function(){return t(p);});}};function s(u){var v=q('messages_viewer');if(!v){v=j.create('div',{id:'messages_viewer'});document.body.appendChild(v);}u=n.render(u,v);u.subscribeOnce('close',function(){n.unmountComponentAtNode(v);});}function t(u){i.loadModules(["SpotlightMessagesViewer","MessagingVideoViewer.react"],u);}f.exports=r;},null);
__d('MessengerPhotosGroup.react',['ChatSpeakingSticker.react','MercuryAttachmentType','MercuryConfig','MessengerPhoto.react','MessengerVideo.react','MessagesViewer','ReactComponentWithPureRenderMixin','React','Vector','cx','joinClasses'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){'use strict';if(c.__markCompiled)c.__markCompiled();var s='empty-spacer',t=o.PropTypes,u=o.createClass({displayName:'MessengerPhotosGroup',mixins:[n],propTypes:{attachType:t.string,attachments:t.arrayOf(t.object).isRequired,message:t.object},componentDidMount:function(){m.preload();},render:function(){var v=this.props.attachments;return (o.createElement('div',{className:this._getRootClassNameFor(v)},this._rowsFor(v)));},_onChildClicked:function(v){if(v.preview_uploading)return;if(v.attach_type===i.VIDEO){m.renderVideo({disableForward:true,rootClassName:"_1j1h",videoID:v.metadata.fbid,videoSize:new p(v.metadata.dimensions.width,v.metadata.dimensions.height),videoURI:v.url});}else if(v.attach_type===i.PHOTO||v.attach_type===i.ANIMATED_IMAGE){m.bootstrapWithConfig({dimensions:v.metadata.dimensions,disablePaging:this.props.attachments.length===1,disableForward:!j.MessengerForwardingEnabled,endpoint:v.url,fbid:v.metadata.fbid,rootClassName:"_1j1h",snapToPhoto:true,src:v.preview_url});}else if(v.uri)window.open(v.uri);},_rowsFor:function(v){if(v.length===1)return [this._photo(v[0],true)];var w=3;if(v.length===2||v.length===4)w=2;var x=[];for(var y=0,z=v.length;y<z;y+=w){var aa=v.slice(y,y+w),ba=w-aa.length;while(ba>0){aa.push({attach_type:s,key:'ghost'+ba});ba--;}x.push(o.createElement('div',{className:"_2n8g",key:y},aa.map((function(ca){return this._photo(ca);}).bind(this))));}return x;},_photo:function(v,w){var x;if(v.deduplication_key){x=v.deduplication_key;}else if(v.metadata){x=v.metadata.fbid;}else x=v.upload_id;var y={attachment:v,isSingle:w||false,key:x,onClick:this._onChildClicked},z=this.props.attachType||v.attach_type;switch(z){case i.PHOTO:case i.ANIMATED_IMAGE:return o.createElement(k,y);case i.VIDEO:if(v.metadata&&v.metadata.render_as_sticker)return (o.createElement(h,{videoSize:v.metadata.dimensions,videoURI:v.url}));return o.createElement(l,y);case s:return (o.createElement('div',{key:v.key,className:"_4tsk _4rf-"}));default:throw v.attachType+' is not handled by MessengerPhotoGroup';}},_getRootClassNameFor:function(v){var w=v.length===2||v.length===4;return r(this.props.className,"_2n8h"+(v.length===1?' '+"_2n8i":'')+(w?' '+"_4ksk":'')+(v.length>1&&!w?' '+"_2n8k":''));}});f.exports=u;},null);
__d('MercuryBlockedParticipants',['MercuryIDs','MercuryActionType','MercuryDispatcher','MercurySingletonProvider','Set'],function a(b,c,d,e,f,g,h,i,j,k,l){'use strict';if(c.__markCompiled)c.__markCompiled();m.getForFBID=function(o){return n.getForFBID(o);};m.get=function(){return n.get();};function m(o){this.$MercuryBlockedParticipants1=o;this.$MercuryBlockedParticipants2=new l();this.$MercuryBlockedParticipants3=j.getForFBID(this.$MercuryBlockedParticipants1);this.$MercuryBlockedParticipants3.subscribe('update-blocked-users',(function(p,q){if(q.message_blocked_ids)this.$MercuryBlockedParticipants2=new l(q.message_blocked_ids);var r=q.actions||q.global_actions;for(var s=r,t=Array.isArray(s),u=0,s=t?s:s[typeof Symbol==='function'?Symbol.iterator:'@@iterator']();;){var v;if(t){if(u>=s.length)break;v=s[u++];}else{u=s.next();if(u.done)break;v=u.value;}var w=v;if(w.action_type!==i.UPDATE_BLOCKER_STATUS)continue;if(w.message_blocked){this.$MercuryBlockedParticipants4(w.thread_fbid);}else this.$MercuryBlockedParticipants5(w.thread_fbid);}}).bind(this));}m.prototype.getFBID=function(){return this.$MercuryBlockedParticipants1;};m.prototype.setIDs=function(o){this.$MercuryBlockedParticipants2=o;};m.prototype.getIDs=function(){return this.$MercuryBlockedParticipants6();};m.prototype.$MercuryBlockedParticipants6=function(){return this.$MercuryBlockedParticipants2;};m.prototype.$MercuryBlockedParticipants4=function(o){this.$MercuryBlockedParticipants2.add(h.getParticipantIDFromUserID(o));};m.prototype.$MercuryBlockedParticipants5=function(o){this.$MercuryBlockedParticipants2['delete'](h.getParticipantIDFromUserID(o));};m.prototype.isMessageBlocked=function(o){if(!o.is_canonical)return false;var p=o.participants.filter((function(q){return q!=h.getParticipantIDFromUserID(this.getFBID());}).bind(this));return !p.every((function(q){return !this.$MercuryBlockedParticipants2.has(q);}).bind(this));};m.prototype.isPresentInGroupThread=function(o){if(!o.is_canonical&&this.$MercuryBlockedParticipants7(o).length>0)return true;return false;};m.prototype.inGroupThread=function(o){if(o.is_canonical)return [];return this.$MercuryBlockedParticipants7(o);};m.prototype.$MercuryBlockedParticipants7=function(o){var p=o.participants.filter((function(r){return r!=h.getParticipantIDFromUserID(this.getFBID());}).bind(this)),q=p.filter((function(r){return this.$MercuryBlockedParticipants2.has(r)!==false;}).bind(this));return q;};var n=new k(m);f.exports=m;},null);
__d('MercuryUnseenState',['MercuryFolders','KeyedCallbackManager','LogHistory','MercuryActionType','MercuryDispatcher','MercurySingletonMixin','MercuryThreadInfo','MercuryThreadlistConstants','MercuryThreadIDMap','MessagingTag','MercuryServerRequests','MercuryThreadInformer','MercuryThreads','createObjectFrom','isEmpty'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v){if(c.__markCompiled)c.__markCompiled();var w=o.MAX_UNSEEN_COUNT,x='unseen_thread_hash',y='unseen_thread_list',z=j.getInstance('mercury_unseen_state');function aa(pa){this._fbid=pa;this._serverRequests=r.getForFBID(this._fbid);this._threadIDMap=p.getForFBID(this._fbid);this._threads=t.getForFBID(this._fbid);this._threadInformer=s.getForFBID(this._fbid);this._dispatcher=l.getForFBID(this._fbid);this._initialUnseenCount=null;this._lastSeenTimestamp=0;this._maxCount=false;this._pendingServerUpdates=false;this._unseenResources=new i();this._dispatcher.subscribe('update-unseen',(function(qa,ra){ga(this,ra);}).bind(this));this._dispatcher.subscribe('update-thread-ids',(function(qa,ra){ma(this,ra);}).bind(this));}Object.assign(aa.prototype,{getUnseenCount:function(){if(this.exceedsMaxCount()){z.error('unguarded_unseen_count_fetch',{});return 0;}return fa(this)||0;},exceedsMaxCount:function(){return this._maxCount||fa(this)>w;},markAsSeen:function(){var pa=fa(this);if(pa===null){this._pendingServerUpdates=true;}else if(pa>0||this._maxCount){this._serverRequests.markSeen();var qa=this._serverRequests.getLastActionTimestamp();ha(this,qa,[]);}}});Object.assign(aa,m);function ba(pa,qa,ra){var sa={};sa[qa]=0;ja(pa,sa,ra);}function ca(pa,qa){pa._unseenResources.setResource(x,qa);pa._unseenResources.setResource(y,Object.keys(qa));}function da(pa,qa){var ra=pa._unseenResources.executeOrEnqueue(x,qa),sa=pa._unseenResources.getUnavailableResources(ra);if(sa.length)pa._serverRequests.fetchUnseenThreadIDs();}function ea(pa){return pa._unseenResources.getResource(x);}function fa(pa){var qa=pa._unseenResources.getResource(y);if(qa){return qa.length;}else return pa._initialUnseenCount;}function ga(pa,qa){var ra=oa(qa);if(qa.unseen_thread_fbids){qa.unseen_thread_fbids.forEach(function(cb){if(cb.folder!=q.INBOX)return;var db=cb.thread_fbids||[];db=db.concat(cb.other_user_fbids||[]);var eb=la(pa,db),fb=pa._lastSeenTimestamp;if(ra&&ra.seen_timestamp)fb=ra.seen_timestamp;ha(pa,fb,eb);if(ra&&ra.unseen_count>w)pa._maxCount=true;});}else if(ra&&ra.seen_timestamp){pa._lastSeenTimestamp=ra.seen_timestamp;if(ra.unseen_count>w){pa._maxCount=true;ca(pa,{});}else{pa._initialUnseenCount=ra.unseen_count;if(pa._initialUnseenCount===0)ca(pa,{});}}else{if(pa._maxCount)return;var sa=qa.actions;if(!sa||!sa.length)return;var ta={},ua={};for(var va=0;va<sa.length;va++){var wa=sa[va];if(wa.is_forward)continue;var xa=wa.action_type,ya=wa.other_user_fbid?wa.other_user_fbid:wa.thread_fbid,za=wa.thread_id?wa.thread_id:ya;if(xa==k.MARK_THREAD_SEEN){ba(pa,za,wa.persistent);continue;}if(!na(pa,wa))continue;if(xa==k.USER_GENERATED_MESSAGE||xa==k.LOG_MESSAGE){var ab=ta[za]?wa.timestamp>ta[za]:false,bb=ab||!ta[za];if(wa.is_unread&&bb)pa._threads.getThreadMeta(za,function(cb){var db=false;if(cb&&cb.last_read_timestamp)if(cb.last_read_timestamp>=wa.timestamp)db=true;if(!n.isMuted(cb)&&!db)ta[za]=wa.timestamp;});}else if(xa==k.CHANGE_READ_STATUS&&wa.mark_as_read)ua[za]=wa.timestamp;}ia(pa,ta);ja(pa,ua);}if(pa._pendingServerUpdates){pa._pendingServerUpdates=false;pa.markAsSeen();}}function ha(pa,qa,ra){var sa=ea(pa);if(sa===undefined||qa>pa._lastSeenTimestamp||pa._maxCount){pa._lastSeenTimestamp=qa;ra=ra||[];if(ra.length<=w)pa._maxCount=false;var ta={},ua=ea(pa)||{};for(var va in ua)if(ua[va]!==true){var wa=ua[va];if(ka(pa,wa))ta[va]=wa;}var xa=Object.assign(u(ra,true),ta);ca(pa,xa);pa._threadInformer.updatedUnseenState();}}function ia(pa,qa){if(pa._maxCount)return;var ra={},sa=false;for(var ta in qa){var ua=qa[ta];if(ka(pa,ua)){ra[ta]=ua;sa=true;}}if(!sa)return;da(pa,function(va){for(var wa in ra){var xa=ra[wa];if(!va[wa]&&ka(pa,xa))va[wa]=ra[wa];}ca(pa,va);pa._threadInformer.updatedUnseenState();});}function ja(pa,qa,ra){var sa=false;if(!v(qa))sa=true;if(sa)da(pa,function(ta){var ua=false;for(var va in qa){var wa=qa[va],xa=wa>=ta[va];if(ta[va]&&(!wa||xa)){delete ta[va];ua=true;}}if(ua){ca(pa,ta);pa._threadInformer.updatedUnseenState();if(ra&&fa(pa)===0)pa._serverRequests.markSeen();}});}function ka(pa,qa){return qa>pa._lastSeenTimestamp;}function la(pa,qa){return qa.map(pa._threadIDMap.convertThreadIDIfAvailable,pa._threadIDMap);}function ma(pa,qa){var ra=ea(pa);if(!ra)return;for(var sa in qa){var ta=qa[sa];if(ra[sa]){ra[ta]=ra[sa];delete ra[sa];}}ca(pa,ra);}function na(pa,qa){var ra=qa.thread_id?pa._threads.getThreadMetaNow(qa.thread_id):null,sa=ra?h.getFromMeta(ra):qa.folder;return sa===q.INBOX||sa===undefined;}function oa(pa){var qa=pa.message_counts||[];for(var ra=0;ra<qa.length;ra++)if(qa[ra].folder==q.INBOX)return qa[ra];return null;}f.exports=aa;},null);
__d('MercuryMessages',['BanzaiODS','EventEmitter','ImmutableObject','LogHistory','Map','MercuryActionStatus','MercuryActionType','MercuryAssert','MercuryDispatcher','MercuryLogMessageType','MercuryMessageClientState','MercuryPayloadSource','MercurySingletonMixin','MercuryMessageActions','MercuryMessageIDs','RangedCallbackManager','MercurySendMessageFields','MercuryServerRequests','MercuryThreadActions','MercuryThreadInformer','MercuryThreads','URI','invariant','isMessengerDotComURI','mergeDeep','setImmediate'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba,ca,da,ea,fa,ga){'use strict';if(c.__markCompiled)c.__markCompiled();var ha=new i(),ia=k.getInstance('mercury_messages');function ja(sa,ta){var ua=ta;if(sa._localIdsMap[ta])ua=sa._localIdsMap[ta];return sa._messages.get(ua);}function ka(sa){switch(sa){case s.UNKNOWN:case s.SERVER_INITIAL_DATA:case s.SERVER_FETCH_THREAD_INFO:case s.SERVER_THREAD_SYNC:return true;}return false;}function la(sa,ta){if(!sa._threadsToMessages[ta])sa._threadsToMessages[ta]=new w(function(ua){return ja(sa,ua).timestamp;},function(ua,va){return va-ua;});return sa._threadsToMessages[ta];}function ma(sa,ta,ua){ta.forEach(function(va){var wa=la(sa,va);wa.setReachedEndOfArray();sa._emitReorderedChange(va,ua);});}function na(sa){this._fbid=sa;this._messageActions=u.getForFBID(this._fbid);this._serverRequests=y.getForFBID(this._fbid);this._threadInformer=aa.getForFBID(this._fbid);this._threads=ba.getForFBID(this._fbid);this._threadActions=z.getForFBID(this._fbid);this._dispatcher=p.getForFBID(this._fbid);this._didChange=false;this._failedHistoryFetchThreads={};this._threadsToMessages={};this._localTitanMessagesCount={};this._messages=new l();this._localIdsMap={};this._dispatcher.subscribe('update-messages',(function(ta,ua){var va=(ua.actions||[]).filter(function(xa){var ya=xa.action_type,za=(xa.is_forward||xa.thread_id)&&(ya==n.LOG_MESSAGE||ya==n.USER_GENERATED_MESSAGE||ya==n.SEND_MESSAGE||ya==n.DELETE_THREAD||ya==n.DELETE_MESSAGES||ya==n.MARK_MESSAGES_SPAM),ab=xa.upload_id&&xa.upload_data&&(ya==n.CANCEL_ATTACHMENT_PLACEHOLDER||ya==n.CONFIRM_ATTACHMENT_PLACEHOLDER),bb=xa.note&&ya==n.CREATE_PAGE_ADMIN_NOTE,cb=xa.replaced_message_id&&ya==n.REPLACE_MESSAGE;return za||ab||bb||cb;}),wa=ka(ua.payload_source);this.handleUpdates(va,wa,ua.payload_source,ua.from_client);if(ua.end_of_history)ma(this,ua.end_of_history,ua.payload_source);if(this._didChange){this._didChange=false;ha.emit('change');}}).bind(this));this._dispatcher.subscribe('invalidate-thread-state',(function(ta,ua){this._invalidateThreadState(ua);}).bind(this));ia.debug('constructed',{fbid:this._fbid});}Object.assign(na.prototype,{getMessagesFromIDs:function(sa){return (sa||[]).map(ja.bind(null,this)).filter(function(ta){return ta;});},getServerMessageID:function(sa){var ta=sa;if(this._localIdsMap[sa])ta=this._localIdsMap[sa];return ta;},hasLoadedNMessages:function(sa,ta){var ua=la(this,sa);return ua.hasReachedEndOfArray()||ua.getCurrentArraySize()>=ta;},hasLoadedExactlyNMessages:function(sa,ta){var ua=la(this,sa);return ua.getCurrentArraySize()==ta;},clearMercuryInternalState_DO_NOT_USE:function(){this._failedHistoryFetchThreads={};this._threadsToMessages={};this._localTitanMessagesCount={};this._messages=new l();this._localIdsMap={};},getThreadMessagesRange:function(sa,ta,ua,va,wa,xa){var ya=la(this,sa),za=(function(jb){va(oa(this,jb));}).bind(this),ab=ya.executeOrEnqueue(ta,ua,za),bb=ya.getUnavailableResources(ab),cb=this._failedHistoryFetchThreads[sa];if(bb.length&&!cb){var db=ya.getCurrentArraySize(),eb=this._localTitanMessagesCount[sa]||0,fb=db-eb,gb=bb.length+eb,hb=this.getCurrentlyLoadedMessages(sa),ib=hb.length?hb[0].timestamp:null;ia.debug('fetch_missing_messages',{threadID:sa,offset:ta,limit:ua,timestamp:ib,missingIndices:bb,messageCount:db,localMessageCount:eb});this._serverRequests.fetchThreadMessages(sa,fb,gb,ib,wa,xa);}else this._failedHistoryFetchThreads[sa]=false;return ab;},getThreadMessagesRangeNow:function(sa,ta,ua){var va=la(this,sa),wa=[];for(var xa=ta;xa<ta+ua;xa++){var ya=va.getResourceAtIndex(xa),za=ja(this,ya);za&&wa.push(za);}return wa;},getThreadMessagesSinceTimestamp:function(sa,ta){var ua=la(this,sa),va=ua.getElementsUntil(ta);return oa(this,va);},hasLoadedAllMessages:function(sa){return la(this,sa).hasReachedEndOfArray();},getCurrentlyLoadedMessages:function(sa){var ta=la(this,sa).getAllResources();return oa(this,ta);},unsubscribe:function(sa,ta){o.isThreadID(ta);var ua=la(this,ta);ua.unsubscribe(sa);},_addNewMessage:function(sa,ta){ra(ta);this._messages.set(sa,new j(ta));},_addNewPageAdminNote:function(sa,ta){var ua=this._messages.get(sa);if(ua){var va=ua.page_admin_notes?ua.page_admin_notes.slice():[],wa=false,xa=true;for(var ya=0;ya<va.length;++ya)if(va[ya].id===ta.id){wa=true;xa=false;break;}else if((va[ya].id===null||va[ya].id===undefined)&&va[ya].body===ta.body){wa=true;va[ya]=ta;}if(!wa)va.push(ta);if(xa){var za={};za.page_admin_notes=va;this._updateMessage(sa,ua,za);}}},_updateMessage:function(sa,ta,ua){var va=j.set(ta,ua);this._messages.set(sa,va);return va;},_shouldSortOutOfOrderMessages:function(sa,ta,ua){if(sa==s.CLIENT_CHANNEL_MESSAGE){var va=this.getThreadMessagesSinceTimestamp(ta,ua);if(va.length>0){h.bumpEntityKey('chat.web','channel.messages_reordered');return true;}}return false;},_preprocessIncomingAction:function(sa,ta){var ua=sa.action_type;if(ta==s.CLIENT_CHANNEL_MESSAGE&&ua==n.USER_GENERATED_MESSAGE&&sa.offline_threading_id&&this._localIdsMap[sa.offline_threading_id]===sa.offline_threading_id){sa.client_message_id=sa.offline_threading_id;sa.status=m.SUCCESS;sa.action_type=n.SEND_MESSAGE;ua=sa.action_type;}if(ta===s.CLIENT_CHANNEL_MESSAGE&&ua==n.USER_GENERATED_MESSAGE){var va=this._threads.getThreadMetaNow(sa.thread_id);if(va&&va.folder)sa.folder=va.folder;}return sa;},handleUpdates:function(sa,ta,ua,va){var wa,xa={};for(var ya=0;ya<sa.length;ya++){var za=this._preprocessIncomingAction(sa[ya],ua),ab=za.action_type,bb=ja(this,za.message_id);if(ab==n.LOG_MESSAGE)if(this.isLocalMessage(za))continue;if(za.is_forward||ua==s.SERVER_SEARCH){if(!this._messages.has(za.message_id))this._addNewMessage(za.message_id,za);continue;}else if(za.client_state===r.SEND_TO_SERVER){this._addNewMessage(za.message_id,za);continue;}else if(ab==n.SEND_MESSAGE){var cb=za.client_message_id;if(cb&&this._localIdsMap[cb]&&za.status){var db=ja(this,cb),eb=db.status;if(db.status==m.SUCCESS)continue;if(!xa[za.thread_id])xa[za.thread_id]=[];this._updateLocalMessage(za);if(typeof eb!==undefined||za.status==m.FAILED_UNKNOWN_REASON||za.status==m.UNABLE_TO_CONFIRM||za.status==m.SUCCESS||za.status==m.ERROR)this._emitUpdatedChange(za.thread_id,ja(this,cb).message_id,ua);}continue;}else if(ab==n.DELETE_THREAD){la(this,za.thread_id).removeAllResources();continue;}else if(ab==n.DELETE_MESSAGES){this._deleteMessages(za.thread_id,za.message_ids,ua);ga((function(){this._threadActions.updateSnippet(za.thread_id,za.message_ids);}).bind(this));continue;}else if(ab==n.CREATE_PAGE_ADMIN_NOTE){this._addNewPageAdminNote(za.message_id,za.note);this._emitUpdatedChange(za.thread_id,za.message_id,'link_shim');continue;}else if(za.offline_threading_id&&this._localIdsMap[za.offline_threading_id]||bb&&!bb.is_forward){if(bb&&za.ranges&&za.ranges.length>0){var fb=bb.message_id;this._updateMessage(this._localIdsMap[fb]||fb,bb,{ranges:sa.ranges});this._emitUpdatedChange(bb.thread_id,bb.message_id,'link_shim');}continue;}else if(ab===n.CONFIRM_ATTACHMENT_PLACEHOLDER){this._confirmAttachmentPlaceholder(za.upload_id,za.upload_data);continue;}else if(ab===n.CANCEL_ATTACHMENT_PLACEHOLDER){this._cancelAttachmentPlaceholder(za.upload_id,za.upload_data);continue;}else if(ab==n.REPLACE_MESSAGE){if(this._replaceMessage(za)){if(!xa[za.thread_id])xa[za.thread_id]=[];xa[za.thread_id].push(za.message_id);this._emitUpdatedChange(za.thread_id,za.replaced_message_id,ua);this._emitUpdatedChange(za.thread_id,za.message_id,ua);ta=true;}continue;}else{if(ua===s.CLIENT_SEND_MESSAGE){this._localIdsMap[za.message_id]=za.message_id;if(za.thread_id=='root:'+za.offline_threading_id)la(this,za.thread_id).setReachedEndOfArray();}if(ab==n.LOG_MESSAGE&&za.log_message_type==q.SERVER_ERROR)this._failedHistoryFetchThreads[za.thread_id]=true;if(za.client_state===r.DO_NOT_SEND_TO_SERVER&&za.upload_id)this._uploadMessages[za.upload_id]=za;if(!xa[za.thread_id])xa[za.thread_id]=[];xa[za.thread_id].push(za.message_id);this._addNewMessage(za.message_id,za);if(za.offline_threading_id&&za.offline_threading_id!=za.message_id){this._localIdsMap[za.offline_threading_id]=za.message_id;v.addServerID(za.offline_threading_id,za.message_id);if(za.threading_id)v.addServerID(za.threading_id,za.message_id);}if(za[x.MANUAL_RETRY_CNT]>0){wa=la(this,za.thread_id);wa.resortResources([za.message_id]);this._emitReorderedChange(za.thread_id,s.CLIENT_SEND_MESSAGE);}ta=ta||this._shouldSortOutOfOrderMessages(ua,za.thread_id,za.timestamp);if(!ta)this._emitReceivedChange(ja(this,za.message_id));continue;}}for(var gb in xa){wa=la(this,gb);var hb=wa.getAllResources(),ib=hb.filter((function(jb){var kb=this._messages.get(jb);if(!kb)return true;return kb.action_type==n.LOG_MESSAGE&&kb.log_message_type==q.SERVER_ERROR;}).bind(this));wa.removeResources(ib);if(va)pa(this,gb,xa[gb]);if(ta){wa.addResources(xa[gb]);this._emitReorderedChange(gb,ua);}else wa.addResourcesWithoutSorting(xa[gb].reverse(),0);this._threadInformer.updatedThread(gb);}this._didChange&&ia.debug('handle_updates',{localMessageCounts:fa(this._localTitanMessagesCount)});},isFirstMessage:function(sa){var ta=la(this,sa.thread_id);if(ta.getCurrentArraySize()===0)return false;var ua=ta.getResourceAtIndex(ta.getCurrentArraySize()-1),va=ja(this,ua).message_id,wa=ja(this,sa.message_id).message_id;return ta.hasReachedEndOfArray()&&va==wa;},isLocalMessage:function(sa){if(sa.offline_threading_id!==null&&sa.offline_threading_id===sa.message_id)return true;if(sa.threading_id!==null&&sa.threading_id===sa.message_id)return true;return false;},_deleteMessages:function(sa,ta,ua){if(!ta.length)return;this._deleteIndividualMessages(sa,ta,ua);if(ua!==s.CLIENT_CHANNEL_MESSAGE)this._serverRequests.deleteMessages(sa,ta);},_deleteIndividualMessages:function(sa,ta,ua){var va=ta.map(function(xa){return ja(this,xa).message_id;},this),wa=la(this,sa);wa.removeResources(va);this._emitReorderedChange(sa,ua);},_updateLocalMessage:function(sa){var ta=ja(this,sa.client_message_id),ua={};ua.status=sa.status;if(sa.status===m.SUCCESS||sa.error_data)ua.error_data=sa.error_data;var va=sa.message_id,wa=sa.client_message_id;if(this._messages.has(va)){this._updateMessage(va,ta,ua);return false;}if(sa.threading_id)ua.threading_id=sa.threading_id;if(sa.timestamp)ua.timestamp=sa.timestamp;if(sa.log_message_data)ua.log_message_data=sa.log_message_data;if(sa.ranges&&sa.ranges.length){ra(sa);ua.ranges=sa.ranges;}if(sa.attachments&&sa.attachments.length){ua.raw_attachments=null;ua.attachments=sa.attachments;}this._localIdsMap[wa]=va;v.addServerID(wa,va);var xa=this._updateMessage(va,ta,ua);this._messages.set(wa,new j());if(qa(xa))this._localTitanMessagesCount[xa.thread_id]--;return true;},_replaceMessage:function(sa){var ta=sa.replaced_message_id,ua=ja(this,ta);if(!ua)return false;var va={};va.status=sa.status;if(sa.timestamp)va.timestamp=sa.timestamp;if(sa.log_message_data)va.log_message_data=sa.log_message_data;if(sa.ranges&&sa.ranges.length){ra(sa);va.ranges=sa.ranges;}if(sa.attachments&&sa.attachments.length){va.raw_attachments=null;va.attachments=sa.attachments;}if(sa.body)va.body=sa.body;var wa=sa.message_id;v.addServerID(wa,wa);this._updateMessage(wa,ua,va);this._messages['delete'](ta);return true;},getNumberLocalMessages:function(sa){return this._localTitanMessagesCount[sa]||0;},_uploadMessages:{},_confirmAttachmentPlaceholder:function(sa,ta){var ua=this._popPendingAttachmentMessage(sa,ta);delete ua.preview_attachments;this._serverRequests.sendNewMessage(ua);},_cancelAttachmentPlaceholder:function(sa,ta){var ua=this._popPendingAttachmentMessage(sa,ta);this._deleteIndividualMessages(ua.thread_id,[ua.message_id]);if(this._localTitanMessagesCount[ua.thread_id])this._localTitanMessagesCount[ua.thread_id]--;},_popPendingAttachmentMessage:function(sa,ta){var ua=this._uploadMessages[sa];!ua?da(0):undefined;ua.image_ids=ta.image_ids;ua.file_ids=ta.file_ids;ua.audio_ids=ta.audio_ids;ua.gif_ids=ta.gif_ids;ua.video_ids=ta.video_ids;ua.client_state=r.SEND_TO_SERVER;delete this._uploadMessages[sa];return ua;},_emitUpdatedChange:function(sa,ta,ua){this._didChange=true;this._threadInformer.updatedMessage(sa,ta,ua);},_emitReceivedChange:function(sa){this._didChange=true;this._threadInformer.receivedMessage(sa);},_emitReorderedChange:function(sa,ta){this._didChange=true;this._threadInformer.reorderedMessages(sa,ta);},_invalidateThreadState:function(sa){if(!this._threadsToMessages[sa])return;var ta=this._threadsToMessages[sa].getAllResources();ta.forEach((function(ua){this._messages['delete'](ua);delete this._localIdsMap[ua];}).bind(this));delete this._threadsToMessages[sa];}});Object.assign(na,t,{addListener:function(sa,ta){return ha.addListener(sa,ta);}});function oa(sa,ta){var ua=ta.map(ja.bind(null,sa));return ua.reverse();}function pa(sa,ta,ua){var va=ua.filter(function(wa){return qa(ja(sa,wa));});if(!sa._localTitanMessagesCount[ta])sa._localTitanMessagesCount[ta]=0;sa._localTitanMessagesCount[ta]+=va.length;}function qa(sa){var ta=sa.action_type;if(ta==n.USER_GENERATED_MESSAGE)return true;switch(sa.log_message_type){case q.SUBSCRIBE:case q.UNSUBSCRIBE:case q.SERVER_ERROR:case q.LIVE_LISTEN:return false;default:return true;}}function ra(sa){if(!sa.ranges)return;sa.ranges.forEach(function(ta){if(!ta.entity||ta.entity.external||!ta.entity.url)return;var ua=new ca(ta.entity.url);if(ea(ca.getRequestURI())&&!ua.getDomain()){ua.setProtocol('https').setDomain('www.facebook.com');ta.entity.url=ua.toString();}});}f.exports=na;},null);
__d('MercuryChannelMessageTransformer',['MercuryActionType'],function a(b,c,d,e,f,g,h){'use strict';if(c.__markCompiled)c.__markCompiled();function i(j,k){var l={author:j.mercury_author_id,author_email:j.mercury_author_email,body:j.body,subject:j.subject,has_attachment:j.has_attachment,attachments:j.attachments,ephemeral_ttl_mode:j.ephemeral_ttl_mode,html_body:j.html_body,thread_id:j.tid,thread_fbid:j.thread_fbid&&j.thread_fbid.toString(),other_user_fbid:j.other_user_fbid&&j.other_user_fbid.toString(),offline_threading_id:j.offline_threading_id,message_id:j.mid,is_spoof_warning:j.is_spoof_warning,ranges:j.ranges,source:j.mercury_source,source_tags:j.mercury_source_tags,threading_id:j.threading_id,timestamp:j.timestamp,timestamp_absolute:j.timestamp_absolute,timestamp_relative:j.timestamp_relative,timestamp_datetime:j.timestamp_datetime,timestamp_time_passed:j.timestamp_time_passed,action_type:h.USER_GENERATED_MESSAGE,is_unread:j.is_unread,is_forward:false,forward_count:j.forward_count||j.forward,forward_message_ids:j.forward_msg_ids,folder:k,sync_id:undefined,action_id:undefined};if('sync_id' in j){l.sync_id=j.sync_id;}else l.action_id=j.action_id;return l;}f.exports={transform:i};},null);
__d('MercuryChannelHandler',['Arbiter','ChannelConstants','MercuryActionType','MercuryChannelMessageTransformer','MercuryConfig','MercuryDelayedDispatcher','MercuryGlobalActionType','MercuryLogMessageType','MercuryMessages','MercuryPayloadSource','MercuryServerPayloadPreprocessor','MercurySingletonMixin','MercuryThreadInformer','MercuryViewer','MessagingEvent','MessagingTag','PresenceUtil','mixin'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y){if(c.__markCompiled)c.__markCompiled();var z,aa;z=babelHelpers.inherits(ba,y(s));aa=z&&z.prototype;function ba(ca){'use strict';aa.constructor.call(this);this.$MercuryChannelHandler1=ca;this.__payloadPreprocessor=r.getForFBID(this.$MercuryChannelHandler1);this.$MercuryChannelHandler2=t.getForFBID(this.$MercuryChannelHandler1);this.$MercuryChannelHandler3=p.getForFBID(this.$MercuryChannelHandler1);this.__delayedDispatcher=m.getForFBID(this.$MercuryChannelHandler1);this.$MercuryChannelHandler4=[];}ba.prototype.getInstanceFBID=function(){'use strict';return this.$MercuryChannelHandler1;};ba.prototype.$MercuryChannelHandler5=function(ca,da){'use strict';if(!this.$MercuryChannelHandler6(ca)||!da.obj||!da.obj.message)return;var ea=da.obj.message,fa=ea.other_user_fbid?ea.other_user_fbid:ea.thread_fbid;fa=fa.toString();var ga=k.transform(ea,da.obj.folder);if(this.__shouldDropMessageBecauseOfSync(ea))return;var ha=[babelHelpers._extends({},ga)];ha=ha.concat(ea.forward_actions||[]);var ia=q.CLIENT_CHANNEL_MESSAGE;this.__delayedDispatcher.handleUpdateWaitForThread({actions:ha,payload_source:ia},fa);};ba.prototype.$MercuryChannelHandler7=function(ca,da){'use strict';if(l.WWWSyncDeliveryReceipt)return;var ea=da.obj.other_user_fbid,fa=da.obj.thread_fbid;if(!this.$MercuryChannelHandler6(ca)||!ea&&!fa)return;this.__payloadPreprocessor.handleUpdate({delivery_receipts:[{other_user_fbid:ea?ea.toString():'',thread_fbid:fa?fa.toString():'',time:da.obj.timestamp}]});};ba.prototype.$MercuryChannelHandler8=function(ca,da){'use strict';if(!this.$MercuryChannelHandler6(ca)||!da.obj||!da.obj.thread_fbids&&!da.obj.other_user_fbids)return;var ea=[],fa=da.obj.event==v.READ;if(fa&&l.WWWSyncMarkRead)return;(da.obj.thread_fbids||[]).forEach(function(ga){ea.push({action_type:j.CHANGE_READ_STATUS,action_id:null,thread_fbid:ga,mark_as_read:fa,timestamp:da.obj.timestamp||0,folder:da.obj.folder_info[ga]});});(da.obj.other_user_fbids||[]).forEach(function(ga){ea.push({action_type:j.CHANGE_READ_STATUS,action_id:null,other_user_fbid:ga,mark_as_read:fa,timestamp:da.obj.timestamp||0,folder:da.obj.folder_info[ga]});});this.__payloadPreprocessor.handleUpdate({actions:ea,payload_source:q.CLIENT_CHANNEL_MESSAGE});};ba.prototype.$MercuryChannelHandler9=function(ca,da){'use strict';if(!this.$MercuryChannelHandler6(ca)||!da.obj||!(da.obj.thread_fbids||da.obj.other_user_fbids))return;var ea=[];(da.obj.thread_fbids||[]).forEach(function(fa){ea.push({action_type:j.DELETE_THREAD,action_id:null,thread_fbid:fa});});(da.obj.other_user_fbids||[]).forEach(function(fa){ea.push({action_type:j.DELETE_THREAD,action_id:null,other_user_fbid:fa});});this.__payloadPreprocessor.handleUpdate({actions:ea,payload_source:q.CLIENT_CHANNEL_MESSAGE});};ba.prototype.$MercuryChannelHandler10=function(ca,da){'use strict';if(!this.$MercuryChannelHandler6(ca)||!da.obj||!da.obj.thread_fbids&&!da.obj.other_user_fbids||!da.obj.mids)return;var ea=da.obj.thread_fbids.length?da.obj.thread_fbids[0]:null,fa=da.obj.other_user_fbids.length?da.obj.other_user_fbids[0]:null,ga={action_type:j.DELETE_MESSAGES,action_id:null,thread_fbid:ea,other_user_fbid:fa,message_ids:da.obj.mids};if(l.MessengerGlobalDeleteGK){if(da.obj.updated_thread)return;this.__payloadPreprocessor.handleUpdate({actions:[ga],payload_source:q.CLIENT_CHANNEL_MESSAGE});return;}this.__payloadPreprocessor.handleUpdate({actions:[ga],payload_source:q.CLIENT_CHANNEL_MESSAGE});};ba.prototype.$MercuryChannelHandler11=function(ca,da){'use strict';if(!this.$MercuryChannelHandler6(ca)||!da.obj||!da.obj.folder)return;var ea={action_type:n.MARK_ALL_READ,action_id:da.obj.action_id,folder:da.obj.folder};this.__payloadPreprocessor.handleUpdate({global_actions:[ea]});};ba.prototype.$MercuryChannelHandler12=function(ca,da){'use strict';if(!this.$MercuryChannelHandler6(ca)||!da.obj.thread_fbids&&!da.obj.other_user_fbids)return;var ea=q.CLIENT_CHANNEL_MESSAGE;(da.obj.thread_fbids||[]).forEach(function(fa){var ga={action_type:j.CHANGE_ARCHIVED_STATUS,action_id:null,thread_fbid:fa.toString(),other_user_fbid:null,archived:da.obj.state};this.__delayedDispatcher.handleUpdateWaitForThread({actions:[babelHelpers._extends({},ga)],payload_source:ea},fa.toString());},this);(da.obj.other_user_fbids||[]).forEach(function(fa){var ga={action_type:j.CHANGE_ARCHIVED_STATUS,action_id:null,thread_fbid:null,other_user_fbid:fa.toString(),archived:da.obj.state};this.__delayedDispatcher.handleUpdateWaitForThread({actions:[babelHelpers._extends({},ga)],payload_source:ea},fa.toString());},this);};ba.prototype.$MercuryChannelHandler13=function(ca,da){'use strict';if(!this.$MercuryChannelHandler6(ca)||!da.obj.thread_fbids&&!da.obj.other_user_fbids)return;var ea=q.CLIENT_CHANNEL_MESSAGE,fa;(da.obj.thread_fbids||[]).forEach(function(ga){if(da.obj.event==v.TAG){fa=da.obj.tag;}else fa=da.obj.marked_as_spam?w.SPAM:w.INBOX;var ha={action_type:j.CHANGE_FOLDER,action_id:null,thread_fbid:ga.toString(),other_user_fbid:null,new_folder:fa};this.__delayedDispatcher.handleUpdateWaitForThread({actions:[babelHelpers._extends({},ha)],payload_source:ea},ga.toString());},this);(da.obj.other_user_fbids||[]).forEach(function(ga){if(da.obj.event==v.TAG){fa=da.obj.tag;}else fa=da.obj.marked_as_spam?w.SPAM:w.INBOX;var ha={action_type:j.CHANGE_FOLDER,action_id:null,other_user_fbid:ga.toString(),thread_fbid:null,new_folder:fa};this.__delayedDispatcher.handleUpdateWaitForThread({actions:[babelHelpers._extends({},ha)],payload_source:ea},ga.toString());},this);};ba.prototype.$MercuryChannelHandler14=function(ca,da){'use strict';if(!this.$MercuryChannelHandler6(ca)||!da.obj.tag)return;switch(da.obj.tag){case w.ACTION_ARCHIVED:this.$MercuryChannelHandler12(ca,da);break;case w.INBOX:case w.OTHER:this.$MercuryChannelHandler13(ca,da);break;}};ba.prototype.__markAsSeen=function(ca,da){'use strict';if(!this.$MercuryChannelHandler15(ca)||!da.obj||!da.obj.seen_timestamp)return;this.__payloadPreprocessor.handleUpdate({message_counts:[{seen_timestamp:da.obj.seen_timestamp,folder:w.INBOX}],unseen_thread_fbids:[{thread_fbids:[],other_user_fbids:[],folder:w.INBOX}],payload_source:q.CLIENT_CHANNEL_MESSAGE});};ba.prototype.__updateModelsFromMercuryPayload=function(ca,da){'use strict';if(!this.$MercuryChannelHandler16(ca)||!da.obj)return;this.$MercuryChannelHandler2.synchronizeInforms((function(){var ea=da.obj,fa=[];(ea.actions||[]).forEach(function(ga){var ha=j.USER_GENERATED_MESSAGE;if(ga.action_type==j.LOG_MESSAGE){if(this.__shouldDropLogMessageBecauseOfSync(ga))return;var ia=q.CLIENT_CHANNEL_MESSAGE,ja;ja=ga.other_user_fbid||ga.thread_fbid;this.__delayedDispatcher.handleUpdateWaitForThread({actions:[babelHelpers._extends({},ga)],payload_source:ia},ja);}else if(ga.action_type!=ha)fa.push(ga);},this);ea.actions=fa;ea.payload_source=q.CLIENT_CHANNEL_MESSAGE;this.__payloadPreprocessor.handleUpdate(ea);}).bind(this));};ba.prototype.$MercuryChannelHandler17=function(ca,da){'use strict';var ea,fa;if(l.WWWSyncReadReceipt)return;var ga=da.obj.time,ha=da.obj.reader,ia=da.obj.thread_fbid||'';this.__payloadPreprocessor.handleUpdate({roger:(fa={},fa[ia]=(ea={},ea[ha]=ga,ea),fa)});};ba.prototype.$MercuryChannelHandler18=function(ca,da){'use strict';if(!this.$MercuryChannelHandler6(ca)||!da.obj||da.obj.message_blocked===undefined||!da.obj.thread_fbid)return;var ea=j.UPDATE_BLOCKER_STATUS,fa=[{action_type:ea,action_id:null,thread_fbid:da.obj.thread_fbid,message_blocked:da.obj.message_blocked,is_blocked_by_recipient:da.obj.is_blocked_by_recipient}];this.__payloadPreprocessor.handleUpdate({actions:fa,payload_source:q.CLIENT_CHANNEL_MESSAGE});};ba.prototype.$MercuryChannelHandler19=function(ca,da){'use strict';if(!this.$MercuryChannelHandler6(ca)||!da.obj||da.obj.got_blocked===undefined||!da.obj.thread_fbid)return;var ea=j.UPDATE_BLOCKEE_STATUS,fa=[{action_type:ea,action_id:null,thread_fbid:da.obj.thread_fbid,got_blocked:da.obj.got_blocked}];this.__payloadPreprocessor.handleUpdate({actions:fa,payload_source:q.CLIENT_CHANNEL_MESSAGE});};ba.prototype.$MercuryChannelHandler20=function(ca,da){'use strict';if(!this.$MercuryChannelHandler6(ca)||!da.obj||da.obj.mute_settings===undefined||!da.obj.thread_fbid&&!da.obj.other_user_fbid)return;var ea=j.CHANGE_MUTE_SETTINGS,fa=[{action_type:ea,action_id:null,thread_fbid:da.obj.thread_fbid,other_user_fbid:da.obj.other_user_fbid,mute_settings:da.obj.mute_settings}];this.__payloadPreprocessor.handleUpdate({actions:fa,payload_source:q.CLIENT_CHANNEL_MESSAGE});};ba.prototype.__handleMessagingPayload=function(ca,da){'use strict';switch(da.obj.event){case v.DELIVER:this.$MercuryChannelHandler5(ca,da);break;case v.DELIVERY_RECEIPT:this.$MercuryChannelHandler7(ca,da);break;case v.READ:case v.UNREAD:this.$MercuryChannelHandler8(ca,da);break;case v.READ_ALL:this.$MercuryChannelHandler11(ca,da);break;case v.DELETE:this.$MercuryChannelHandler9(ca,da);break;case v.DELETE_MESSAGES:this.$MercuryChannelHandler10(ca,da);break;case v.TAG:this.$MercuryChannelHandler14(ca,da);break;case v.REPORT_SPAM:this.$MercuryChannelHandler13(ca,da);break;case v.READ_RECEIPT:this.$MercuryChannelHandler17(ca,da);break;case v.CHANGE_MUTE_SETTINGS:this.$MercuryChannelHandler20(ca,da);break;case v.UPDATE_BLOCKER_STATUS:this.$MercuryChannelHandler18(ca,da);break;case v.UPDATE_BLOCKEE_STATUS:this.$MercuryChannelHandler19(ca,da);break;}};ba.prototype.getRouting=function(){'use strict';return {mercury:this.__updateModelsFromMercuryPayload,messaging:this.__handleMessagingPayload,inbox:this.__markAsSeen};};ba.prototype.__getMessagingPayloadType=function(){'use strict';return i.getArbiterType('messaging');};ba.prototype.__getMercuryPayloadType=function(){'use strict';return i.getArbiterType('mercury');};ba.prototype.__getInboxPayloadType=function(){'use strict';return i.getArbiterType('inbox');};ba.prototype.$MercuryChannelHandler6=function(ca){'use strict';return ca==this.__getMessagingPayloadType();};ba.prototype.$MercuryChannelHandler16=function(ca){'use strict';return ca==this.__getMercuryPayloadType();};ba.prototype.$MercuryChannelHandler15=function(ca){'use strict';return ca==this.__getInboxPayloadType();};ba.prototype.turnOn=function(){'use strict';if(!this.$MercuryChannelHandler4.length){var ca=this.getRouting();for(var da in ca)this.$MercuryChannelHandler4.push(h.subscribe(i.getArbiterType(da),ca[da].bind(this)));}return this;};ba.prototype.turnOff=function(){'use strict';if(this.$MercuryChannelHandler4.length){this.$MercuryChannelHandler4.forEach(h.unsubscribe);this.$MercuryChannelHandler4=[];}return this;};ba.prototype.__shouldDropMessageBecauseOfSync=function(ca){'use strict';if(!ca.has_attachment&&l.WWWSyncMsgText){return true;}else if(ca.has_attachment&&l.WWWSyncMsgAttach)return true;return false;};ba.prototype.__shouldDropLogMessageBecauseOfSync=function(ca){'use strict';if(l.WWWSyncMsgLog)switch(ca.log_message_type){case o.UNSUBSCRIBE:case o.SUBSCRIBE:case o.THREAD_NAME:case o.VIDEO_CALL:case o.PHONE_CALL:return true;default:break;}return false;};Object.assign(ba,s);f.exports=ba;},null);
__d('MercuryOrderedThreadlist',['LogHistory','MercuryActionType','MercuryDispatcher','MercuryFilters','MercuryFolders','MercuryPayloadSource','MercurySingletonMixin','MercuryThreadIDMap','MessagingTag','PageMessageEnumTag','RangedCallbackManager','MercuryServerRequests','MercuryThreadInformer','MercuryThreads','arrayContains'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v){'use strict';if(c.__markCompiled)c.__markCompiled();var w=h.getInstance('ordered_threadlist_model'),x=k.getSupportedFilters().concat([k.ALL,p.GROUPS]),y=l.getSupportedFolders().concat([p.SPAM]);function z(ja,ka,la,ma){var na=[],oa=false,pa=false,qa=(ka||[]).filter(function(xa){var ya=xa.filter||k.ALL;return (xa.folder==la||!xa.folder&&la==p.INBOX)&&ya==ma;}),ra=ja._threadlistOrderMap[la][ma].getAllResources(),sa;qa.forEach(function(xa){na=na.concat(xa.thread_ids);if(xa.error){if(xa.end>ra.length)pa=xa.error;}else{var ya=xa.end-xa.start;if(xa.thread_ids.length<ya)oa=true;}if(!sa||xa.end>sa)sa=xa.end;});da(ja,na,la,ma);if(oa){ja._threadlistOrderMap[la][ma].setReachedEndOfArray();}else if(pa){ja._threadlistOrderMap[la][ma].setError(pa);}else{var ta=ja._threadlistOrderMap[la][ma].getCurrentArraySize();if(sa&&ta<sa){var ua={},va=ra.concat(na),wa=va.filter(function(xa){var ya=ua[xa];ua[xa]=true;return ya;});if(wa.length){w.warn('duplicate_threads',{folder:la,expected_final_size:sa,actual_final_size:ta,duplicate_thread_ids:wa});ja._serverRequests.fetchThreadlistInfo(sa,wa.length,la,ma==k.ALL?null:ma);}}}}function aa(ja,ka){y.forEach(function(la){x.forEach(function(ma){z(ja,ka,la,ma);});});}function ba(ja,ka){var la={};y.forEach(function(ma){la[ma]={};x.forEach(function(na){la[ma][na]={to_add:[],to_remove:[],to_remove_if_last_after_add:{}};});});ka.forEach(function(ma){if(ma.is_forward)return;var na=ma.thread_id,oa=ea(ja,na),pa=fa(ja,na);function qa(){pa.forEach(function(sa){if(!v(x,sa))return;la[oa][sa].to_add.push(na);if(!ja._threadlistOrderMap[oa][sa].hasReachedEndOfArray()&&!ja._threadlistOrderMap[oa][sa].hasResource(na))la[oa][sa].to_remove_if_last_after_add[na]=true;});}function ra(sa){if(v(x,sa))if(v(pa,sa)){la[oa][sa].to_add.push(na);}else la[oa][sa].to_remove.push(na);}if(!oa){if(ma.action_type===i.CHANGE_FOLDER||ma.action_type===i.CHANGE_ARCHIVED_STATUS)y.forEach(function(sa){if(sa!==oa)x.forEach(function(ta){ja._threadlistOrderMap[sa][ta].removeResources([na]);});});return;}switch(ma.action_type){case i.DELETE_THREAD:pa.forEach(function(sa){if(!v(x,sa))return;la[oa][sa].to_remove.push(na);});break;case i.CHANGE_ARCHIVED_STATUS:case i.CHANGE_FOLDER:qa();break;case i.CHANGE_READ_STATUS:ra(p.UNREAD);break;case i.USER_GENERATED_MESSAGE:case i.LOG_MESSAGE:pa.forEach(function(sa){if(!v(x,sa))return;if(ga(ja,na,oa,sa))la[oa][sa].to_add.push(na);});break;case i.CHANGE_FLAG:ra(q.FLAG);break;}});y.forEach(function(ma){x.forEach(function(na){var oa=ja._threadlistOrderMap[ma][na];da(ja,la[ma][na].to_add,ma,na);for(var pa=oa.getCurrentArraySize()-1;pa>=0;pa--){var qa=oa.getResourceAtIndex(pa);if(!la[ma][na].to_remove_if_last_after_add[qa])break;la[ma][na].to_remove.push(qa);}oa.removeResources(la[ma][na].to_remove);});});}function ca(ja,ka){var la={};y.forEach(function(ma){la[ma]={};x.forEach(function(na){la[ma][na]=[];});});ka.forEach(function(ma){var na=ea(ja,ma.thread_id),oa=fa(ja,ma.thread_id);if(na)oa.forEach(function(pa){if(ga(ja,ma.thread_id,na,pa))la[na][pa].push(ma.thread_id);});});y.forEach(function(ma){x.forEach(function(na){if(la[ma][na].length>0)da(ja,la[ma][na],ma,na);});});}function da(ja,ka,la,ma){ma=ma||k.ALL;ja._threadlistOrderMap[la][ma].addResources(ka);y.forEach(function(na){if(na!=la)ja._threadlistOrderMap[na][ma].removeResources(ka);});}function ea(ja,ka){var la=ja._threads.getThreadMetaNow(ka),ma=null;if(!la){ma='No thread metadata';}else if(!la.folder)ma='No thread folder';if(ma){var na={error:ma,tid:ka};w.warn('no_thread_folder',na);return null;}var oa=la.folder;if(la.is_archived)oa=p.ACTION_ARCHIVED;if(ja._threadlistOrderMap[oa]){return oa;}else return null;}function fa(ja,ka){var la=ja._threads.getThreadMetaNow(ka),ma=[k.ALL];if(!la){var na={error:'no_thread_metadata',tid:ka};w.warn('no_thread_metadata',na);return [];}if(la.unread_count)ma.push(p.UNREAD);if(!la.is_canonical)ma.push(p.GROUPS);var oa=la.page_thread_info;if(oa&&oa.flagged)ma.push(q.FLAG);return ma;}function ga(ja,ka,la,ma){var na=ja._threads.getThreadMetaNow(ka);return !!(na&&na.timestamp&&ea(ja,ka)==la&&v(fa(ja,ka),ma));}function ha(ja){this._fbid=ja;this._serverRequests=s.getForFBID(this._fbid);this._threadIDMap=o.getForFBID(this._fbid);this._threadInformer=t.getForFBID(this._fbid);this._threads=u.getForFBID(this._fbid);this._dispatcher=j.getForFBID(this._fbid);this._threadlistOrderMap={};y.forEach((function(ka){this._threadlistOrderMap[ka]={};x.forEach((function(la){this._threadlistOrderMap[ka][la]=new r((function(ma){return this._threads.getThreadMetaNow(ma).timestamp;}).bind(this),function(ma,na){return na-ma;},this._threadIDMap.canLinkExternally.bind(this._threadIDMap));}).bind(this));}).bind(this));this._dispatcher.subscribe('update-threadlist',(function(ka,la){if(!ia(la))return;var ma=la.ordered_threadlists;if(ma&&ma.length){aa(this,ma);}else{var na=(la.actions||[]).filter(function(oa){return oa.thread_id;});ca(this,la.threads||[]);ba(this,na);}this._threadInformer.updatedThreadlist();}).bind(this));}Object.assign(ha.prototype,{getThreadlistOrderMap:function(ja,ka){if(!this._threadlistOrderMap[ja][ka]){x=x.concat([ka]);y.forEach((function(la){this._threadlistOrderMap[la][ka]=new r((function(ma){return this._threads.getThreadMetaNow(ma).timestamp;}).bind(this),function(ma,na){return na-ma;},this._threadIDMap.canLinkExternally.bind(this._threadIDMap));}).bind(this));}return this._threadlistOrderMap[ja][ka];},getThreadlist:function(ja,ka,la,ma,na,oa){return this.getFilteredThreadlist(ja,ka,la,k.ALL,ma,na,oa);},getFilteredThreadlist:function(ja,ka,la,ma,na,oa,pa){var qa=this.getThreadlistOrderMap(la,ma),ra=qa.executeOrEnqueue(ja,ka,na,oa),sa=qa.getUnavailableResources(ra),ta=qa.getError(ja,ka,oa);if(sa.length||ta){if(qa.getCurrentArraySize()<ja){var ua={start:ja,limit:ka,filter:ma,resources_size:qa.getCurrentArraySize()};w.warn('range_with_gap',ua);}qa.setError(false);this._serverRequests.fetchThreadlistInfo(qa.getCurrentArraySize(),sa.length,la,ma==k.ALL?null:ma,pa);}return ra;},getThreadlistUntilTimestamp:function(ja,ka,la){la=la||k.ALL;return this.getThreadlistOrderMap(ka,la).getElementsUntil(ja);},getAvailableThreadlistNow:function(ja,ka){ka=ka||k.ALL;return this.getThreadlistOrderMap(ja,ka).getAllResources();},getThreadCount:function(ja,ka){ka=ka||k.ALL;return this.getThreadlistOrderMap(ja,ka).getCurrentArraySize();},hasLoadedThreadlist:function(ja,ka){ka=ka||k.ALL;return this.getThreadlistOrderMap(ja,ka).hasReachedEndOfArray();},unsubscribe:function(ja,ka,la){la=la||k.ALL;this.getThreadlistOrderMap(ka,la).unsubscribe(ja);}});Object.assign(ha,n);function ia(ja){switch(ja.payload_source){case m.CLIENT_CHANGE_ARCHIVED_STATUS:case m.CLIENT_CHANGE_READ_STATUS:case m.CLIENT_CHANGE_FOLDER:case m.CLIENT_CHANNEL_MESSAGE:case m.CLIENT_DELETE_MESSAGES:case m.CLIENT_DELETE_THREAD:case m.CLIENT_SEND_MESSAGE:case m.SERVER_SEND_MESSAGE:case m.SERVER_FETCH_THREADLIST_INFO:case m.SERVER_THREAD_SYNC:return true;case m.SERVER_INITIAL_DATA:return !!ja.ordered_threadlists;default:return false;}}f.exports=ha;},null);
__d('MercurySyncDeliveryReceiptTransformer',[],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();function h(i){return {delivery_receipts:[{other_user_fbid:i.threadKey.otherUserFbId?i.threadKey.otherUserFbId:'',thread_fbid:i.threadKey.threadFbId?i.threadKey.threadFbId:'',time:parseInt(i.deliveredWatermarkTimestampMs,10)}]};}f.exports={transform:h};},null);
__d('MercurySyncMarkReadTransformer',['MercuryActionType','MessagingTag'],function a(b,c,d,e,f,g,h,i){'use strict';if(c.__markCompiled)c.__markCompiled();function j(k){return k.threadKeys.map(function(l){return {action_type:h.CHANGE_READ_STATUS,action_id:null,other_user_fbid:l.otherUserFbId,thread_fbid:l.threadFbId,mark_as_read:true,timestamp:parseInt(k.watermarkTimestamp,10),folder:i.INBOX};});}f.exports={transform:j};},null);
__d('MercurySyncNewMessageTransformer',['IrisProtocolMessageLifetime','MercuryActionType','MercuryIDs','MercuryTimestamp','MessagingTag'],function a(b,c,d,e,f,g,h,i,j,k,l){'use strict';if(c.__markCompiled)c.__markCompiled();function m(n,o){var p=parseInt(o.messageMetadata.timestamp,10),q=k.getFormatedTimestamp(p),r=[];if(o.attachments)r=o.attachments.map(function(t){return t.mercury;});var s=o.messageMetadata.tags?o.messageMetadata.tags[0]:undefined;return {message_id:o.messageMetadata.messageId,threading_id:null,offline_threading_id:o.messageMetadata.offlineThreadingId,author:j.getParticipantIDFromUserID(o.messageMetadata.actorFbId),author_email:o.messageMetadata.actorFbId+'@facebook.com',ephemeral_ttl_mode:o.ttl?h[o.ttl]:0,timestamp:p,timestamp_absolute:q.absolute,timestamp_relative:q.relative,timestamp_datetime:q.relative,timestamp_time_passed:k.getTimeBucket(p),is_unread:n!==o.messageMetadata.actorFbId,is_forward:false,is_filtered_content:false,is_filtered_content_bh:false,is_filtered_content_account:false,is_filtered_content_quasar:false,is_filtered_content_invalid_app:false,forward_count:0,forward_message_ids:[],source:s,is_spoof_warning:false,folder:l.INBOX,thread_fbid:o.messageMetadata.threadKey.threadFbId,other_user_fbid:o.messageMetadata.threadKey.otherUserFbId,body:o.body!==undefined?o.body:'',html_body:null,subject:null,has_attachment:r.length>0,attachments:r,ranges:undefined,thread_id:null,action_id:null,action_type:i.USER_GENERATED_MESSAGE,is_from_iris:true};}f.exports={transform:m};},null);
__d('MercurySyncDispatcher',['Arbiter','Map','MercuryConfig','MercuryDelayedDispatcher','MercuryPayloadSource','MercuryServerPayloadPreprocessor','MercurySyncDeliveryReceiptTransformer','MercurySyncForcedFetchHandler','MercurySyncMarkReadTransformer','MercurySyncNewMessageTransformer','MercurySyncReadReceiptTransformer','MercurySyncParticipantLeftGroupThreadTransformer','MercurySyncParticipantsAddedToGroupThreadTransformer','MercurySyncRTCEventLogTransformer','MercurySyncThreadNameTransformer','MercurySyncReplaceMessageTransformer','MercurySyncDeltaTypes','MercurySingletonProvider'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y){'use strict';if(c.__markCompiled)c.__markCompiled();z.getForFBID=function(ba){return aa.getForFBID(ba);};z.get=function(){return aa.get();};function z(ba){this.$MercurySyncDispatcher1=ba;this.$MercurySyncDispatcher2=k.getForFBID(this.$MercurySyncDispatcher1);this.$MercurySyncDispatcher3=m.getForFBID(this.$MercurySyncDispatcher1);this.$MercurySyncDispatcher4=o.getForFBID(this.$MercurySyncDispatcher1);h.subscribe('channel/message:delta',(function(ca,da){var ea=da&&da.obj&&da.obj.delta;if(!ea)return;this.process(ea);}).bind(this));}z.prototype.process=function(ba){var ca;switch(ba['class']){case x.NewMessage:if(!this.$MercurySyncDispatcher5(ba))break;ca=q.transform(this.$MercurySyncDispatcher1,ba);this.$MercurySyncDispatcher6(ca);break;case x.ReplaceMessage:if(!this.$MercurySyncDispatcher5(ba))break;ca=w.transform(this.$MercurySyncDispatcher1,ba);this.$MercurySyncDispatcher6(ca);break;case x.DeliveryReceipt:if(!j.WWWSyncDeliveryReceipt)break;ca=n.transform(ba);this.$MercurySyncDispatcher3.handleUpdate(ca);break;case x.MarkRead:if(!j.WWWSyncMarkRead)break;ca=p.transform(ba);this.$MercurySyncDispatcher7(ca);break;case x.ParticipantLeftGroupThread:if(!j.WWWSyncMsgLog)break;ca=s.transform(this.$MercurySyncDispatcher1,ba);this.$MercurySyncDispatcher6(ca);break;case x.ParticipantsAddedToGroupThread:if(!j.WWWSyncMsgLog)break;ca=t.transform(this.$MercurySyncDispatcher1,ba);this.$MercurySyncDispatcher6(ca);break;case x.RTCEventLog:if(!j.WWWSyncMsgLog)break;ca=u.transform(this.$MercurySyncDispatcher1,ba);this.$MercurySyncDispatcher6(ca);break;case x.ThreadName:if(!j.WWWSyncMsgLog)break;ca=v.transform(this.$MercurySyncDispatcher1,ba);this.$MercurySyncDispatcher6(ca);break;case x.ReadReceipt:if(!j.WWWSyncReadReceipt)break;ca=r.transform(ba);this.$MercurySyncDispatcher3.handleUpdate(ca);break;case x.ForcedFetch:if(!j.WWWSyncMsgText)return;this.$MercurySyncDispatcher4.process(ba);break;default:break;}};z.prototype.$MercurySyncDispatcher5=function(ba){var ca=!!ba.stickerId||ba.attachments&&!!ba.attachments.length;if(!ca&&!j.WWWSyncMsgText){return false;}else if(ca&&!j.WWWSyncMsgAttach)return false;return true;};z.prototype.$MercurySyncDispatcher6=function(ba){var ca=ba.other_user_fbid||ba.thread_fbid;this.$MercurySyncDispatcher2.handleUpdateWaitForThread({actions:[ba],payload_source:l.CLIENT_CHANNEL_MESSAGE},ca);};z.prototype.$MercurySyncDispatcher7=function(ba){this.$MercurySyncDispatcher3.handleUpdate({actions:ba,payload_source:l.CLIENT_CHANNEL_MESSAGE});};var aa=new y(z);f.exports=z;},null);
__d('MercuryUnreadState',['MercuryFolders','LogHistory','KeyedCallbackManager','MercuryActionType','MercuryDispatcher','MercuryGlobalActionType','MercurySingletonMixin','MercuryThreadlistConstants','MercuryThreadIDMap','MessagingTag','MercuryServerRequests','MercuryThreadInformer','MercuryThreads','arrayContains','createObjectFrom'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v){if(c.__markCompiled)c.__markCompiled();var w=(h.getSupportedFolders()||[]).filter(function(oa){return oa!=q.ACTION_ARCHIVED;}),x='unread_thread_hash',y='unseen_thread_list',z=o.MAX_UNREAD_COUNT,aa=i.getInstance('mercury_unread_state');function ba(oa){this._fbid=oa;this._serverRequests=r.getForFBID(this._fbid);this._threadIDMap=p.getForFBID(this._fbid);this._threadInformer=s.getForFBID(this._fbid);this._threads=t.getForFBID(this._fbid);this._dispatcher=l.getForFBID(this._fbid);this._allReadTimestamp={};this._threadReadTimestamp={};this._initialUnreadCount={};this._maxCount={};this._unreadResources={};w.forEach((function(pa){this._initialUnreadCount[pa]=0;this._maxCount[pa]=false;this._unreadResources[pa]=new j();}).bind(this));this._dispatcher.subscribe('update-unread',(function(pa,qa){ga(this,qa);var ra=qa.global_actions||[];for(var sa=0;sa<ra.length;sa++){var ta=ra[sa];if(ta.action_type==m.MARK_ALL_READ)ja(this,ta.folder,ta.timestamp);}}).bind(this));this._dispatcher.subscribe('update-thread-ids',(function(pa,qa){la(this,qa);}).bind(this));}Object.assign(ba.prototype,{getUnreadCount:function(oa){if(this.exceedsMaxCount(oa)){aa.error('unguarded_unread_count_fetch',{});return 0;}return fa(this,oa);},exceedsMaxCount:function(oa){return this._maxCount[oa]||fa(this,oa)>z;},markFolderAsRead:function(oa){if(this._maxCount[oa]||fa(this,oa)>0)this._serverRequests.markFolderAsRead(oa);},getIsThreadUnread:function(oa,pa){var qa=pa||q.INBOX,ra=ea(this,qa);return ra&&ra[oa];}});Object.assign(ba,n);function ca(oa,pa,qa){oa._unreadResources[pa].setResource(x,qa);oa._unreadResources[pa].setResource(y,Object.keys(qa));}function da(oa,pa,qa){var ra=oa._unreadResources[pa].executeOrEnqueue(x,qa),sa=oa._unreadResources[pa].getUnavailableResources(ra);if(sa.length)oa._serverRequests.fetchUnreadThreadIDs(pa);}function ea(oa,pa){return oa._unreadResources[pa].getResource(x);}function fa(oa,pa){var qa=oa._unreadResources[pa].getResource(y);if(qa){return qa.length;}else return oa._initialUnreadCount[pa];}function ga(oa,pa){var qa;(pa.unread_thread_fbids||[]).forEach(function(ra){qa=ra.folder;if(!na(qa))return;var sa=ra.thread_fbids||[];sa=sa.concat(ra.other_user_fbids||[]);var ta=ka(oa,sa);ca(oa,qa,v(ta,true));if(ta.length>z)oa._maxCount[qa]=true;oa._threadInformer.updatedUnreadState();});(pa.message_counts||[]).forEach(function(ra){if(ra.unread_count===undefined)return;qa=ra.folder;if(ra.unread_count>z){oa._maxCount[qa]=true;ca(oa,qa,{});oa._threadInformer.updatedUnreadState();}else{oa._initialUnreadCount[qa]=ra.unread_count;if(oa._initialUnreadCount[qa]===0)ca(oa,qa,{});oa._threadInformer.updatedUnreadState();}});(pa.actions||[]).forEach(function(ra){if(ra.is_forward)return;var sa=k,ta=ra.other_user_fbid?ra.other_user_fbid:ra.thread_fbid,ua=ra.thread_id?ra.thread_id:ta;if(ra.action_type==sa.DELETE_THREAD){w.forEach(function(wa){ia(oa,wa,ua);});}else if(ra.action_type==sa.CHANGE_ARCHIVED_STATUS||ra.action_type==sa.CHANGE_FOLDER){var va=oa._threads.getThreadMetaNow(ra.thread_id);qa=h.getFromMeta(va);if(na(qa)&&va.unread_count>0)ha(oa,qa,ua);w.forEach(function(wa){if(wa!=qa)ia(oa,wa,ua);});}else{qa=ma(oa,ra);if(!na(qa))return;if(ra.action_type==sa.CHANGE_READ_STATUS){if(ra.mark_as_read){ia(oa,qa,ua,ra.timestamp);}else ha(oa,qa,ua,ra.timestamp);}else if(ra.action_type==sa.USER_GENERATED_MESSAGE||ra.action_type==sa.LOG_MESSAGE)if(ra.is_unread)ha(oa,qa,ua,ra.timestamp);}});}function ha(oa,pa,qa,ra){if(oa._maxCount[pa])return;da(oa,pa,function(sa){var ta=oa._allReadTimestamp[pa]||0,ua=oa._threadReadTimestamp[qa]||0,va=ra||Number.POSITIVE_INFINITY;if(va>=ta&&va>=ua&&!sa[qa]){sa[qa]=ra||0;ca(oa,pa,sa);oa._threadInformer.updatedUnreadState();}});}function ia(oa,pa,qa,ra){if(oa._maxCount[pa])return;da(oa,pa,function(sa){if(ra){var ta=oa._threadReadTimestamp[qa];if(!ta||ta<ra)oa._threadReadTimestamp[qa]=ra;}var ua=sa[qa];if(ra&&typeof ua=='number'&&ra<ua)return;if(qa in sa){delete sa[qa];ca(oa,pa,sa);oa._threadInformer.updatedUnreadState();}});}function ja(oa,pa,qa){oa._maxCount[pa]=false;ca(oa,pa,{});oa._allReadTimestamp[pa]=Math.max(oa._allReadTimestamp[pa]||0,qa||0);oa._threadInformer.updatedUnreadState();}function ka(oa,pa){return pa.map(oa._threadIDMap.convertThreadIDIfAvailable,oa._threadIDMap);}function la(oa,pa){w.forEach(function(qa){var ra=ea(oa,qa);if(!ra)return;for(var sa in pa){var ta=pa[sa];if(ra[sa]){ra[ta]=ra[sa];delete ra[sa];}}ca(oa,qa,ra);});}function ma(oa,pa){var qa=pa.thread_id?oa._threads.getThreadMetaNow(pa.thread_id):null;return qa?h.getFromMeta(qa):pa.folder;}function na(oa){return u(w,oa);}f.exports=ba;},null);
__d("CreditCardFormParam",[],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={ACCOUNT_ID:"account_id",ACCOUNT_COUNTRY_CODE:"account_country_code",APP_ID:"app_id",CARD_EXPIRATION:"exp",CARD_FBID:"cc_fbid",CARD_ID:"cc_id",CARD_TYPE:"cardType",CITY:"city",CONTEXT_ID:"context_id",COUNTRY:"country",CSC_LENGTH:"csc_length",EMAIL:"email",FIRST_NAME:"firstName",TRACKING_ID:"tracking_id",JSFAIL_SOURCE:"jsfail_source",KEYPRESS_TIMES:"kpts",LAST_NAME:"lastName",MONTH:"month",STATE:"state",STREET:"street",STREET_2:"street2",VALIDATE_ADDRESS:"validate_address",VALIDATE_NAME:"validate_name",VALIDATE_ZIP:"validate_zip",YEAR:"year",ZIP:"zip",VALIDATOR_CHECKS:"checks",CARD_NUMBER:"creditCardNumber",CSC:"csc",CARD_NUMBER_FIRST_6:"creditCardNumber_first6",CARD_NUMBER_LAST_4:"creditCardNumber_last4",CARD_NUMBER_TOKEN:"creditCardNumber_token",CSC_TOKEN:"csc_token",AUTH_LEVEL_FLAG:"auth_level",AUTH_AMOUNT:"auth_amount",AUTH_CURRENCY:"auth_currency",AUTO_EXPAND_AUTH_LEVEL_FLAG:"auto_expand_auth_level",PAYMENT_ITEM_TYPE:"payment_item_type",CREDENTIAL_ID:"credential_id",IS_STORED_BALANCE:"is_stored_balance",FLOW_TYPE:"flow_type",STORED_BALANCE_STATUS:"stored_balance_status"};},null,{});
__d("MessagingRealtimeConstants",[],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={VIEWER_FBID:"realtime_viewer_fbid"};},null,{});
__d('MercuryIDs',[],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h={isValid:function(i){if(!i||typeof i!=='string')return false;return (/^\w{3,12}:/.test(i));},isValidThreadID:function(i){if(!h.isValid(i))return false;var j=h.tokenize(i);switch(j.type){case 'user':case 'group':case 'thread':case 'root':case 'pending':return true;default:return false;}},tokenize:function(i){if(!this.isValid(i))throw 'bad_id_format '+i;var j=i.indexOf(':');return {type:i.substr(0,j),value:i.substr(j+1)};},getUserIDFromParticipantID:function(i){if(!this.isValid(i))throw 'bad_id_format '+i;var j=h.tokenize(i),k=j.type,l=j.value;if(k!='fbid')return null;return l;},getParticipantIDFromUserID:function(i){if(isNaN(i))throw 'Not a user ID: '+i;return 'fbid:'+i;},getUserIDFromThreadID:function(i){if(!this.isCanonical(i))return null;return this.tokenize(i).value;},getThreadIDFromUserID:function(i){return 'user:'+i;},getThreadIDFromThreadFBID:function(i){return 'thread:'+i;},getThreadIDFromParticipantID:function(i){var j=this.getUserIDFromParticipantID(i);return j?this.getThreadIDFromUserID(j):null;},getParticipantIDFromFromThreadID:function(i){return this.getParticipantIDFromUserID(this.getUserIDFromThreadID(i)||'');},isCanonical:function(i){return this.isValid(i)&&this.tokenize(i).type==='user';},isGroupChat:function(i){return this.isValid(i)&&this.tokenize(i).type!=='user';},isLocalThread:function(i){return this.isValid(i)&&this.tokenize(i).type==='root';}};f.exports=h;},null);
__d('MercuryAssert',['MercuryIDs'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();f.exports={isParticipantID:function(i){if(!h.isValid(i))throw 'bad_participant_id '+i;},allParticipantIDs:function(i){i.forEach(this.isParticipantID);},isUserParticipantID:function(i){var j=h.tokenize(i);if(j.type!='fbid')throw 'bad_user_id '+i;},isEmailParticipantID:function(i){var j=h.tokenize(i);if(j.type!='email')throw 'bad_email_id '+i;},allThreadID:function(i){i.forEach(this.isThreadID);},isThreadID:function(i){if(!h.isValid(i))throw 'bad_thread_id '+i;}};},null);
__d('MercuryPageServerRequests',['MercuryAPIArgsSource','MercuryAssert','MercuryServerRequests','PageMessageEnumTag','PagesMessengerThreadUtils','MercuryServerDispatcher'],function a(b,c,d,e,f,g,h,i,j,k,l,m){if(c.__markCompiled)c.__markCompiled();var n,o,p=h.MERCURY;n=babelHelpers.inherits(q,j);o=n&&n.prototype;function q(r){'use strict';o.constructor.call(this,r);var s={'/pages/messaging/thread_tag/add/':{request_user_id:r,mode:m.BATCH_SUCCESSIVE,batch_function:this.$MercuryPageServerRequests1,handler:(function(t,u){return this.__handleUpdate(t,u);}).bind(this)},'/pages/messaging/thread_tag/remove/':{request_user_id:r,mode:m.BATCH_SUCCESSIVE,batch_function:this.$MercuryPageServerRequests1,handler:(function(t,u){return this.__handleUpdate(t,u);}).bind(this)},'/pages/messaging/thread_tag/list/':{request_user_id:r,mode:m.IMMEDIATE,handler:(function(t,u){return this.__handleUpdate(t,u);}).bind(this)},'/pages/messaging/create_note/':{request_user_id:r,mode:m.IMMEDIATE,handler:(function(t,u){return this.__handleUpdate(t,u);}).bind(this)}};m.registerEndpoints(s);}q.prototype.$MercuryPageServerRequests1=function(r,s){'use strict';var t=r?r.tag_name:s.tag_name,u=r?r.thread_ids:[],v=s?s.thread_ids:[],w=u.concat(v),x={tag_name:t,thread_ids:w};return x;};q.prototype.addThreadFlag=function(r,s){'use strict';i.isThreadID(r);this.__threadIDMap.getServerIDFromClientID(r,(function(t){var u={thread_ids:[t],tag_name:k.FLAG};this.__sendRequest('/pages/messaging/thread_tag/add/',u);}).bind(this));};q.prototype.createNote=function(r,s,t){'use strict';i.isThreadID(t);this.__threadIDMap.getServerIDFromClientID(t,(function(u){var v={body:r,message_id:s,other_user_fbid:u};this.__sendRequest('/pages/messaging/create_note/',v);}).bind(this));};q.prototype.fetchThreadlistInfo=function(r,s,t,u,v){'use strict';if(l.isPageSpecficFilter(u)){v=v||p;var w={folder:t,tag_name:u,offset:r,limit:s};this.__sendRequest('/pages/messaging/thread_tag/list/',w);return;}o.fetchThreadlistInfo.call(this,r,s,t,u,v);};q.prototype.removeThreadFlag=function(r,s){'use strict';i.isThreadID(r);this.__threadIDMap.getServerIDFromClientID(r,(function(t){var u={thread_ids:[t],tag_name:k.FLAG};this.__sendRequest('/pages/messaging/thread_tag/remove/',u);}).bind(this));};q.prototype.toString=function(){'use strict';return 'MercuryPageServerRequests';};f.exports=q;},null);
__d('MercuryServerPayloadPreprocessor',['CurrentEnvironment','MercuryIDs','MercuryConfig','MercuryActionStatus','MercuryActionType','MercuryAttachment','MercuryDispatcher','MercurySendErrorLogger','MercurySingletonMixin','MercuryThreadIDMap','StoryAttachmentStyle','invariant','URI'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t){'use strict';if(c.__markCompiled)c.__markCompiled();function u(v){this.$MercuryServerPayloadPreprocessor1=v;this.$MercuryServerPayloadPreprocessor2=q.getForFBID(this.$MercuryServerPayloadPreprocessor1);this.$MercuryServerPayloadPreprocessor3=n.getForFBID(this.$MercuryServerPayloadPreprocessor1);}u.prototype.handleUpdate=function(v){var w={};!!v.from_client?s(0):undefined;(v.threads||[]).forEach((function(oa){this.$MercuryServerPayloadPreprocessor4(oa,w);var pa=this.$MercuryServerPayloadPreprocessor2.getServerIDFromClientIDNow(oa.thread_id);e(['MercuryServerRequests'],(function(qa){var ra=qa.getForFBID(this.$MercuryServerPayloadPreprocessor1);ra.markThreadFetched(oa.thread_id);ra.markThreadFetched(pa);ra.updateLastActionTimestamp(oa.timestamp);}).bind(this));}).bind(this));(v.ordered_threadlists||[]).forEach((function(oa){var pa=oa.thread_fbids||[];pa=pa.concat(oa.other_user_fbids||[]);oa.thread_ids=pa.map((function(qa){return this.$MercuryServerPayloadPreprocessor2.getClientIDFromServerIDNow(qa.toString());}).bind(this));}).bind(this));if(v.pinned_threads&&v.pinned_threads.thread_fbids)v.pinned_threads.thread_fbids=v.pinned_threads.thread_fbids.map((function(oa){return this.$MercuryServerPayloadPreprocessor2.getClientIDFromServerIDNow(oa);}).bind(this));if(v.delivery_receipts){var x={};for(var y=v.delivery_receipts,z=Array.isArray(y),aa=0,y=z?y:y[typeof Symbol==='function'?Symbol.iterator:'@@iterator']();;){var ba;if(z){if(aa>=y.length)break;ba=y[aa++];}else{aa=y.next();if(aa.done)break;ba=aa.value;}var ca=ba,da=ca.other_user_fbid?i.getThreadIDFromUserID(ca.other_user_fbid):this.$MercuryServerPayloadPreprocessor2.getClientIDFromServerIDNow(ca.thread_fbid);x[da]=ca.time;}v.delivery_receipts=x;}v.actions=v.actions||[];v.actions.forEach((function(oa){if(oa.action_type===l.SEND_MESSAGE&&oa.status===k.ERROR)o.log(oa);var pa=null,qa=null;if(oa.other_user_fbid){qa=i.getThreadIDFromUserID(oa.other_user_fbid);pa=oa.other_user_fbid;}else if(oa.thread_fbid){qa=i.getThreadIDFromThreadFBID(oa.thread_fbid);pa=oa.thread_fbid;}else if(oa.thread_id){qa=i.getThreadIDFromThreadFBID(oa.thread_id);pa=oa.thread_id;}else if(oa.status&&oa.status!=k.SUCCESS&&oa.client_thread_id){qa=oa.client_thread_id;}else s(0);pa=pa&&pa.toString();oa.thread_id=this.$MercuryServerPayloadPreprocessor2.hasClientIDForServerID(pa)?this.$MercuryServerPayloadPreprocessor2.getClientIDFromServerIDNow(pa):qa;if(oa.action_type==l.SEND_MESSAGE&&oa.client_thread_id&&pa){oa.thread_id=oa.client_thread_id;this.$MercuryServerPayloadPreprocessor2.forceSetServerIDToClientID(pa,oa.client_thread_id);w[pa]=oa.client_thread_id;}!oa.thread_id?s(0):undefined;if(!v.payload_source||!v.payload_source.startsWith('server'))e(['MercuryServerRequests'],(function(ra){ra.getForFBID(this.$MercuryServerPayloadPreprocessor1).updateLastActionTimestamp(oa.timestamp);}).bind(this));}).bind(this));this.$MercuryServerPayloadPreprocessor5(v);this.$MercuryServerPayloadPreprocessor6(v);if(v.end_of_history){var ea=[];for(var fa=0;fa<v.end_of_history.length;fa++){var ga=v.end_of_history[fa];if(ga.type=='user'){ea.push('user:'+ga.fbid);}else if(ga.type=='thread'&&this.$MercuryServerPayloadPreprocessor2.hasClientIDForServerID(ga.fbid))ea.push(this.$MercuryServerPayloadPreprocessor2.getClientIDFromServerIDNow(ga.fbid));}v.end_of_history=ea;}if(v.roger){var ha={};for(var ia in v.roger){var ja=Object.keys(v.roger[ia]),ka;if(ia){ka=this.$MercuryServerPayloadPreprocessor2.getClientIDFromServerIDNow(ia);}else if(ja.length===1)ka=i.getThreadIDFromUserID(ja[0]);if(ka){var la=v.roger[ia];ha[ka]={};for(var ma in la)if(la.hasOwnProperty(ma)){var na=i.getParticipantIDFromUserID(ma);ha[ka][na]=la[ma];}}}v.roger=ha;}v.newlyAddedClientIDs=w;v.preprocessed=true;this.$MercuryServerPayloadPreprocessor3.handleUpdate(v);};u.prototype.$MercuryServerPayloadPreprocessor4=function(v,w){var x=v.other_user_fbid?v.other_user_fbid:v.thread_fbid;!x?s(0):undefined;var y=this.$MercuryServerPayloadPreprocessor2.getClientIDFromServerIDNow(x);if(!y){y=v.other_user_fbid?i.getThreadIDFromUserID(v.other_user_fbid):i.getThreadIDFromThreadFBID(v.thread_fbid);this.$MercuryServerPayloadPreprocessor2.setServerIDToClientID(x,y);this.$MercuryServerPayloadPreprocessor2.setDeprecatedServerIDToClientID(v.thread_id,y);w[x]=y;}v.thread_id=y;};u.prototype.$MercuryServerPayloadPreprocessor5=function(v){v.actions.forEach(function(w){if(w.action_type===l.USER_GENERATED_MESSAGE){w.attachments=w.attachments||[];w.attachments.forEach(function(x){if(m.isShareAttachment(x)&&h.messengerdotcom){var y=new t(x.share.uri);if(!y.getDomain())x.share.uri=y.setDomain('facebook.com').setSubdomain(t.getRequestURI().getSubdomain()).setProtocol('https').toString();}});}});};u.prototype.$MercuryServerPayloadPreprocessor6=function(v){if(!j.MercuryGenieRendering)return;v.actions.forEach(function(w){if(w.action_type!==l.USER_GENERATED_MESSAGE)return;var x=w;if(!x.has_attachment||!x.attachments)return;for(var y=x.attachments.length-1;y>=0;y-=1){var z=x.attachments[y];if(!z.share||!z.share.style_list||z.share.style_list[0]!=r.GENIE_MESSAGE)continue;if(z.share.target.genie_id)x.author=i.getParticipantIDFromUserID(z.share.target.genie_id);if(z.share.target&&!z.share.target.attachment){x.attachments.splice(y,1);x.has_attachment=x.attachments.length>0;}}});};Object.assign(u,p);f.exports=u;},null);
__d('MercuryServerSendMessageQueue',['BanzaiODS','LogHistory','MercuryLoggingHelper','MercuryServerRequestsConfig','MercuryServerDispatcher','MercuryServerSendMessageQueueSimulatedError'],function a(b,c,d,e,f,g,h,i,j,k,l,m){if(c.__markCompiled)c.__markCompiled();var n='/ajax/mercury/send_messages.php',o=i.getInstance('mercury_server_send_message_queue');function p(q,r,s,t){'use strict';this.sender_id=q;this.queue_id=r;this.$MercuryServerSendMessageQueue1=s.success_handler;this.$MercuryServerSendMessageQueue2=s.error_handler;this.$MercuryServerSendMessageQueue3=s.transport_error_handler;this.$MercuryServerSendMessageQueue4=s.timeout_handler;this.client=t;var u=null;if(k.msgrRegion)u={name:'X-MSGR-Region',value:k.msgrRegion};var v={};v[n]={request_user_id:this.sender_id,endpoint_id:this.queue_id,mode:l.IMMEDIATE,customHeader:u,handler:this.handleSuccess.bind(this),error_handler:this.handleError.bind(this),transport_error_handler:this.handleTransportError.bind(this),timeout:s.timeout,timeout_handler:this.handleTimeout.bind(this),connection_retries:s.connection_retries};l.registerEndpoints(v);this.pending_message=null;this.queue=[];}p.prototype.enqueue=function(q){'use strict';this.queue.push(q);this.$MercuryServerSendMessageQueue5();};p.prototype.$MercuryServerSendMessageQueue5=function(){'use strict';if(this.pending_message||!this.queue.length){if(this.pending_message)this.$MercuryServerSendMessageQueue6();return;}this.pending_message=this.queue.shift();l.trySend(n,{message_batch:[this.pending_message],client:this.client},null,this.sender_id,this.queue_id);};p.prototype.$MercuryServerSendMessageQueue7=function(){'use strict';while(this.queue.length)this.$MercuryServerSendMessageQueue8(this.queue.shift());};p.prototype.$MercuryServerSendMessageQueue8=function(q){'use strict';this.$MercuryServerSendMessageQueue2(m.create(q));o.error('mark_as_failed',{fbid:this.sender_id,queue_id:this.queue_id,message:j.obfuscateMessage(q)});};p.prototype.handleSuccess=function(q,r){'use strict';this.$MercuryServerSendMessageQueue1(q,r);this.pending_message=null;this.$MercuryServerSendMessageQueue5();};p.prototype.handleError=function(q){'use strict';this.$MercuryServerSendMessageQueue2(q);this.$MercuryServerSendMessageQueue7();this.pending_message=null;};p.prototype.handleTransportError=function(q){'use strict';this.$MercuryServerSendMessageQueue3(q);this.$MercuryServerSendMessageQueue7();this.pending_message=null;};p.prototype.handleTimeout=function(q){'use strict';this.$MercuryServerSendMessageQueue4(q);this.$MercuryServerSendMessageQueue7();this.pending_message=null;};p.prototype.$MercuryServerSendMessageQueue6=function(){'use strict';o.debug('maybe_send_next_pending_message',{fbid:this.sender_id,queue_id:this.queue_id,pending_message:j.obfuscateMessage(this.pending_message),queue:this.queue.map(function(r){return j.obfuscateMessage(r);})});var q='send_queue.delayed.queue_length.'+this.queue.length.toString();h.bumpEntityKey('chat.web',q);};f.exports=p;},null);
__d('MercuryServerSendMessageQueueRouter',['BanzaiODS','LogHistory','Map','MercuryServerSendMessageQueue','MercurySingletonMixin'],function a(b,c,d,e,f,g,h,i,j,k,l){if(c.__markCompiled)c.__markCompiled();var m=i.getInstance('mercury_server_send_message_queue_router'),n='chat.web.send_queue_router';h.setEntitySample(n,.1);function o(p){'use strict';this.fbid=p;this.queues=new j();}o.prototype.enqueue=function(p,q,r,s){'use strict';if(!this.queues.has(p)){this.queues.set(p,new k(this.fbid,p,q,r));m.debug('added queue',{fbid:this.fbid,queue_id:p});h.bumpEntityKey(n,'new_queue');}this.queues.get(p).enqueue(s);};Object.assign(o,l);f.exports=o;},null);
__d('MercuryServerRequests',['Arbiter','AsyncResponse','BanzaiODS','ChannelConstants','CurrentUser','LogHistory','MercuryActionStatus','MercuryActionType','MercuryAPIArgsSource','MercuryAssert','MercuryDispatcher','MercuryThreadIDMap','MercuryErrorType','MercuryGlobalActionType','MercuryIDs','MercuryLogMessageType','MercuryMessageClientState','MercuryPayloadSource','MercurySendErrorLogger','MercuryServerPayloadPreprocessor','MercuryServerRequestsConfig','MercuryServerSendMessageQueueRouter','MercuryServerRequestSingletonMixin','MercurySourceType','MercuryThreadlistConstants','MercuryMessageIDs','MessagingConfig','MessagingTag','MercuryServerDispatcher','MercuryServerSendMessageQueueOptions','createObjectFrom','errorCode','invariant','setTimeoutAcrossTransitions'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba,ca,da,ea,fa,ga,ha,ia,ja,ka,la,ma,na,oa){'use strict';if(c.__markCompiled)c.__markCompiled();var pa=m.getInstance('mercury_server'),qa=p.MERCURY,ra=1000;function sa(db){return db.getError()?'_'+db.getError():'';}function ta(db,eb){var fb=babelHelpers._extends({},db),gb;if(eb.threads){if(!fb.threads)fb.threads={};for(gb in eb.threads)fb.threads[gb]=Object.keys(la((fb.threads[gb]||[]).concat(eb.threads[gb])));}if(eb.messages){if(!fb.messages)fb.messages={};for(gb in eb.messages){if(!fb.messages[gb])fb.messages[gb]={};for(var hb in eb.messages[gb])if(fb.messages[gb][hb]){fb.messages[gb][hb]=ya(fb.messages[gb][hb],eb.messages[gb][hb]);}else fb.messages[gb][hb]=eb.messages[gb][hb];}}fb.client=db.client||eb.client;return fb;}function ua(db,eb){var fb=Object.assign(la(db.folders,true),la(eb.folders,true)),gb=db.client||eb.client;return {folders:Object.keys(fb),client:gb};}function va(db,eb){for(var fb in eb)if(db[fb]&&typeof db[fb]==='object'){db[fb]=ya(db[fb],eb[fb]);}else if(eb[fb]&&typeof eb[fb]==='object'){var gb={};Object.assign(gb,eb[fb]);db[fb]=gb;}return db;}function wa(db,eb){var fb=babelHelpers._extends({},db.ids,eb.ids),gb=db.client||eb.client;return {ids:fb,client:gb};}function xa(db,eb){return eb;}function ya(db,eb){var fb=db.offset<eb.offset?db.offset:eb.offset,gb=db.offset+db.limit,hb=eb.offset+eb.limit,ib=gb>hb?gb:hb,jb=ib-fb,kb=db.timestamp>eb.timestamp?db.timestamp:eb.timestamp;return {offset:fb,limit:jb,timestamp:kb};}function za(db,eb){var fb=db.client||eb.client,gb={ids:{},client:fb};Object.assign(gb.ids,db.ids,eb.ids);return gb;}function ab(db,eb){var fb={},gb,hb=db.client||eb.client;delete db.client;delete eb.client;for(gb in db)Object.assign(fb,la(db[gb],gb));for(gb in eb)Object.assign(fb,la(eb[gb],gb));var ib={client:hb};for(var jb in fb){gb=fb[jb];if(!ib[gb])ib[gb]=[];ib[gb].push(jb);}return ib;}function bb(db,eb){var fb=db.client||eb.client,gb=la(db.ids,true),hb=la(eb.ids,true),ib=Object.assign(gb,hb);return {ids:Object.keys(ib),client:fb};}function cb(db){this._fbid=db;this._lastActionTimestamp=0;this._fetchingThreads={};this._sentMessagesTimestamp={};this.__threadIDMap=s.getForFBID(this._fbid);this._dispatcher=r.getForFBID(this._fbid);this._payloadPreprocessor=aa.getForFBID(this._fbid);this._sendMessageQueueOptions=new ka((function(eb,fb){return this.__handleUpdate(eb,fb);}).bind(this),(function(eb){return this._handleSendMessageError(eb);}).bind(this),(function(eb){return this._handleSendMessageTransportError(eb);}).bind(this),(function(eb){return this._handleSendMessageTimeout(eb);}).bind(this),ba.sendMessageTimeout,ha.SEND_CONNECTION_RETRIES);this._registerEndpoints();}Object.assign(cb.prototype,{fetchThreadlistInfo:function(db,eb,fb,gb,hb){fb=fb||ia.INBOX;hb=hb||qa;var ib=gb?ja.IMMEDIATE:null,jb={client:hb};jb[fb]={offset:db,limit:eb,filter:gb};this.__sendRequest('/ajax/mercury/threadlist_info.php',jb,ib);},fetchPinnedThreads:function(){this.__sendRequest('/mercury/pinned_threads/',{});},fetchUnseenThreadIDs:function(db,eb){eb=eb||qa;this.fetchThreadlistInfo(fa.RECENT_THREAD_OFFSET,fa.JEWEL_THREAD_COUNT,db,null,eb);},fetchUnreadThreadIDs:function(db,eb){eb=eb||qa;this.__sendRequest('/ajax/mercury/unread_threads.php',{folders:[db],client:eb});},fetchMissedMessages:function(db,eb,fb){eb=eb||qa;var gb={last_action_timestamp:fb||this._lastActionTimestamp,folders:db,client:eb};setTimeout((function(){this.__sendRequest('/ajax/mercury/thread_sync.php',gb);}).bind(this),ra);},fetchThreadData:function(db,eb){eb=eb||qa;q.allThreadID(db);var fb={threads:{},client:eb},gb=[],hb=[];db.forEach((function(jb){if(this._fetchingThreads[jb])return;this._fetchingThreads[jb]=true;var kb=this.__threadIDMap.getServerIDFromClientIDNow(jb),lb=v.tokenize(jb);if(lb.type=='user'){gb.push(lb.value);fb.threads.user_ids=gb;}else if(lb.type=='thread'){if(kb){hb.push(kb);}else hb.push(lb.value);fb.threads.thread_fbids=hb;}else if(lb.type=='root'){if(kb){hb.push(kb);fb.threads.thread_fbids=hb;}}else if(lb.type!='pending')throw new Error('Unknown thread type',lb);}).bind(this));this._dispatcher.inform("fetch-thread-data",fb);for(var ib in fb.threads){this.__sendRequest('/ajax/mercury/thread_info.php',fb);break;}},ensureThreadIsFetched:function(db,eb){eb=eb||qa;if(!this.__threadIDMap.getClientIDFromServerIDNow(db)&&!this._fetchingThreads[db]){this._fetchingThreads[db]=true;this.__sendRequest('/ajax/mercury/thread_info.php',{threads:{thread_fbids:[db]},client:eb});}},fetchThreadMessages:function(db,eb,fb,gb,hb,ib){q.isThreadID(db);ib=ib||qa;var jb,kb,lb=v.tokenize(db),mb=this.__threadIDMap.getServerIDFromClientIDNow(db),nb=false;if(mb){jb=mb;kb=lb.type=='user'?'user_ids':'thread_fbids';}else{jb=lb.value;switch(lb.type){case 'user':kb='user_ids';nb=true;break;case 'thread':kb='thread_fbids';break;}}var ob={messages:{},threads:{},client:ib};if(kb){ob.messages[kb]={};ob.messages[kb][jb]={offset:eb,timestamp:gb,limit:fb};if(nb)ob.threads[kb]=[jb];this.__sendRequest('/ajax/mercury/thread_info.php',ob,hb);}else this.__threadIDMap.getServerIDFromClientID(db,(function(pb){ob.messages.thread_fbids={};ob.messages.thread_fbids[pb]={offset:eb,timestamp:gb,limit:fb};this.__sendRequest('/ajax/mercury/thread_info.php',ob,hb);}).bind(this));},handleThreadInfoError:function(db){var eb=db.getRequest().getData(),fb=[];if(eb.messages){for(var gb in eb.messages.thread_fbids)fb.push(this._createServerErrorLogMessage(this.__threadIDMap.getClientIDFromServerIDNow(gb)));for(var hb in eb.messages.user_ids)fb.push(this._createServerErrorLogMessage('user:'+hb));for(var ib in eb.messages.group_ids)fb.push(this._createServerErrorLogMessage('group:'+ib));}if(fb.length)this._dispatcher.handleUpdate({actions:fb,from_client:true,payload_source:y.CLIENT_CHANNEL_MESSAGE});if(eb.threads&&(eb.threads.user_ids||eb.threads.group_ids||eb.threads.thread_ids)){var jb=5,kb=true;if(!eb.retry_count){eb.retry_count=0;if(eb.messages)delete eb.messages;}else if(eb.retry_count>=jb){kb=false;(eb.threads.thread_ids||[]).forEach((function(mb){if(mb in this._fetchingThreads)delete this._fetchingThreads[mb];}).bind(this));}if(kb){var lb=Math.pow(2,eb.retry_count)*1000;oa((function(){pa.log('retry_thread',eb);this.__sendRequest('/ajax/mercury/thread_info.php',eb);}).bind(this),lb);eb.retry_count++;}}},markFolderAsRead:function(db){this.__sendRequest('/ajax/mercury/mark_folder_as_read.php',{folder:db});var eb=[{action_type:u.MARK_ALL_READ,action_id:null,folder:db}];this._dispatcher.handleUpdate({global_actions:eb,from_client:true,payload_source:y.CLIENT_CHANGE_READ_STATUS});},changeThreadReadStatus:function(db,eb,fb,gb,hb,ib){q.isThreadID(db);this.__threadIDMap.getServerIDFromClientID(db,(function(jb){var kb,lb={ids:(kb={},kb[jb]=eb,kb),source:fb,watermarkTimestamp:gb,titanOriginatedThreadId:hb,shouldSendReadReceipt:ib};this.__sendRequest('/ajax/mercury/change_read_status.php',lb);}).bind(this));},changeThreadArchivedStatus:function(db,eb,fb){q.isThreadID(db);this.__threadIDMap.getServerIDFromClientID(db,(function(gb){var hb={ids:{},source:fb};hb.ids[gb]=eb;this.__sendRequest('/ajax/mercury/change_archived_status.php',hb);}).bind(this));},changeThreadFolder:function(db,eb){q.isThreadID(db);this.__threadIDMap.getServerIDFromClientID(db,(function(fb){var gb={};gb[eb]=[fb];this.__sendRequest('/ajax/mercury/move_thread.php',gb);}).bind(this));},changeMutingOnThread:function(db,eb){q.isThreadID(db);this.__threadIDMap.getServerIDFromClientID(db,(function(fb){this.__sendRequest('/ajax/mercury/change_mute_thread.php',{thread_fbid:fb,mute_settings:eb,payload_source:qa});}).bind(this));},markThreadSpam:function(db,eb){q.isThreadID(db);this.__threadIDMap.getServerIDFromClientID(db,(function(fb){this.__sendRequest('/ajax/mercury/mark_spam.php',{id:fb,source:eb});}).bind(this));},unmarkThreadSpam:function(db,eb){q.isThreadID(db);this.__threadIDMap.getServerIDFromClientID(db,(function(fb){this.__sendRequest('/ajax/mercury/unmark_spam.php',{id:fb,source:eb});}).bind(this));},deleteThread:function(db,eb){q.isThreadID(db);this.__threadIDMap.getServerIDFromClientID(db,(function(fb){var gb={ids:[fb],source:eb};this.__sendRequest('/ajax/mercury/delete_thread.php',gb);}).bind(this));},unpinThread:function(db){q.isThreadID(db);this.__threadIDMap.getServerIDFromClientID(db,(function(eb){this.__sendRequest('/mercury/unpin_thread/',{id:eb});}).bind(this));},deleteMessages:function(db,eb){ga.getServerIDs(eb||[],(function(fb){this.__sendRequest('/ajax/mercury/delete_messages.php',{message_ids:fb});}).bind(this));},sendDeliveryReceipts:function(db,eb){ga.getServerIDs(db||[],(function(fb){this.__sendRequest('/ajax/mercury/delivery_receipts.php',{message_ids:fb,thread_ids:eb});}).bind(this));},sendNewMessage:function(db,eb){eb=eb||qa;if(!db.offline_threading_id)j.bumpEntityKey('chat.web','missing_otid_on_send');if(db.client_state&&db.client_state!==x.SEND_TO_SERVER)return;var fb=v.tokenize(db.thread_id),gb=fb.type,hb=babelHelpers._extends({},db);hb.thread_id=null;if(gb=='user'){hb.other_user_fbid=fb.value;this._sendNewMessageToServer(hb,eb);}else if(gb=='thread'){hb.thread_fbid=fb.value;this._sendNewMessageToServer(hb,eb);}else if(gb=='root'&&fb.value==hb.offline_threading_id){hb.client_thread_id=db.thread_id;this._sendNewMessageToServer(hb,eb);}else{!v.isLocalThread(db.thread_id)?na(0):undefined;this.__threadIDMap.getServerIDFromClientID(db.thread_id,(function(ib){hb.thread_fbid=ib;this._sendNewMessageToServer(hb,eb);}).bind(this));}},_sendNewMessageToServer:function(db,eb){h.inform(k.ATTEMPT_RECONNECT);this._sentMessagesTimestamp[db.message_id]=Date.now();ca.getForFBID(this._fbid).enqueue(db.other_user_fbid||db.thread_fbid||db.client_thread_id,this._sendMessageQueueOptions,eb,db);},markSeen:function(){var db=this._lastActionTimestamp;this.__sendRequest('/ajax/mercury/mark_seen.php',{seen_timestamp:db});},_handleSendMessageErrorCommon:function(db,eb,fb,gb){pa.debug('handle_send_message_error_common',{reliability_error_status:fb,request_error_status:eb});var hb=db.getData(),ib=hb.message_batch,jb=ib.map(function(lb){var mb={action_type:o.SEND_MESSAGE,other_user_fbid:lb.other_user_fbid,thread_fbid:lb.thread_fbid,client_message_id:lb.message_id,message_id:lb.message_id,client_thread_id:lb.client_thread_id,status:eb,error_data:gb};return mb;});jb.forEach(function(lb){if(lb.action_type===o.SEND_MESSAGE&&lb.status===n.ERROR)z.log(lb);},this);var kb={actions:jb,payload_source:y.CLIENT_HANDLE_ERROR};this._payloadPreprocessor.handleUpdate(kb);},handleSendMessageError:function(db){var eb=db.getPayload(),fb=null,gb=null;if(eb&&eb.error_payload){fb=n.UNCONFIRMED;gb='send_error';}else{fb=n.ERROR;gb='request_error'+sa(db);}var hb=db.error;if(hb===1404102)i.verboseErrorHandler(db);var ib=/<.*>/.test(db.getErrorDescription())?db.getErrorSummary():db.getErrorDescription();this._handleSendMessageErrorCommon(db.getRequest(),fb,gb,{type:t.SERVER,code:db.getError(),description:ib,is_transient:db.isTransient()});},handleSendMessageTransportError:function(db){this._handleSendMessageErrorCommon(db.getRequest(),n.ERROR,'transport_error'+sa(db),{type:t.TRANSPORT,code:db.getError(),is_transient:true});},handleSendMessageTimeout:function(db){this._handleSendMessageErrorCommon(db,n.ERROR,'transport_timeout',{type:t.TIMEOUT,is_transient:true});},getLastActionTimestamp:function(){return this._lastActionTimestamp;},updateLastActionTimestamp:function(db){if(db)this._lastActionTimestamp=Math.max(this._lastActionTimestamp,db);},markThreadFetched:function(db){delete this._fetchingThreads[db];},_createServerErrorLogMessage:function(db){return {action_type:o.LOG_MESSAGE,thread_id:db,message_id:db,timestamp:Date.now(),timestamp_absolute:'',timestamp_relative:'',is_unread:false,source:ea.UNKNOWN,log_message_type:w.SERVER_ERROR,log_message_data:{}};},_getForAsyncRequest:function(db){var eb=db.getData(),fb=eb.request_user_id?eb.request_user_id:l.getID();return cb.getForFBID(fb);},__handleUpdate:function(db,eb){this._getForAsyncRequest(eb)._payloadPreprocessor.handleUpdate(db);},_handleThreadInfoError:function(db){var eb=this._getForAsyncRequest(db.getRequest());eb.handleThreadInfoError(db);},_handleSendMessageError:function(db){var eb=this._getForAsyncRequest(db.getRequest());eb.handleSendMessageError(db);},_handleSendMessageTransportError:function(db){var eb=this._getForAsyncRequest(db.getRequest());eb.handleSendMessageTransportError(db);},_handleSendMessageTimeout:function(db){var eb=this._getForAsyncRequest(db);eb.handleSendMessageTimeout(db);},_registerEndpoints:function(){var db=null;if(ba.msgrRegion)db={name:'X-MSGR-Region',value:ba.msgrRegion};var eb={'/ajax/mercury/thread_sync.php':{request_user_id:this._fbid,mode:ja.IDEMPOTENT,customHeader:db,handler:(function(fb,gb){return this.__handleUpdate(fb,gb);}).bind(this),connection_retries:3},'/ajax/mercury/thread_info.php':{request_user_id:this._fbid,mode:ja.BATCH_DEFERRED_MULTI,customHeader:db,batch_function:ta,handler:(function(fb,gb){return this.__handleUpdate(fb,gb);}).bind(this),error_handler:(function(fb){return this._handleThreadInfoError(fb);}).bind(this)},'/ajax/mercury/mark_folder_as_read.php':{request_user_id:this._fbid,mode:ja.IMMEDIATE,customHeader:db,handler:(function(fb,gb){return this.__handleUpdate(fb,gb);}).bind(this)},'/ajax/mercury/change_read_status.php':{request_user_id:this._fbid,mode:ja.BATCH_SUCCESSIVE,customHeader:db,batch_function:wa,handler:(function(fb,gb){return this.__handleUpdate(fb,gb);}).bind(this)},'/ajax/mercury/mark_seen.php':{request_user_id:this._fbid,mode:ja.BATCH_SUCCESSIVE,customHeader:db,batch_function:xa,handler:(function(fb,gb){return this.__handleUpdate(fb,gb);}).bind(this)},'/ajax/mercury/threadlist_info.php':{request_user_id:this._fbid,mode:ja.BATCH_SUCCESSIVE_UNIQUE,customHeader:db,batch_function:va,handler:(function(fb,gb){return this.__handleUpdate(fb,gb);}).bind(this)},'/ajax/mercury/mark_spam.php':{request_user_id:this._fbid,mode:ja.IMMEDIATE,customHeader:db,handler:(function(fb,gb){return this.__handleUpdate(fb,gb);}).bind(this)},'/ajax/mercury/unmark_spam.php':{request_user_id:this._fbid,mode:ja.IMMEDIATE,customHeader:db,handler:(function(fb,gb){return this.__handleUpdate(fb,gb);}).bind(this)},'/ajax/mercury/unread_threads.php':{request_user_id:this._fbid,mode:ja.BATCH_SUCCESSIVE_UNIQUE,customHeader:db,batch_function:ua,handler:(function(fb,gb){return this.__handleUpdate(fb,gb);}).bind(this)},'/ajax/chat/settings.php':{request_user_id:this._fbid,mode:ja.IMMEDIATE,customHeader:db},'/ajax/mercury/change_archived_status.php':{request_user_id:this._fbid,mode:ja.BATCH_SUCCESSIVE,customHeader:db,batch_function:za,handler:(function(fb,gb){return this.__handleUpdate(fb,gb);}).bind(this)},'/ajax/mercury/delete_thread.php':{request_user_id:this._fbid,mode:ja.BATCH_SUCCESSIVE,customHeader:db,batch_function:bb,handler:(function(fb,gb){return this.__handleUpdate(fb,gb);}).bind(this)},'/ajax/mercury/delete_messages.php':{request_user_id:this._fbid,mode:ja.IMMEDIATE,customHeader:db,handler:(function(fb,gb){return this.__handleUpdate(fb,gb);}).bind(this)},'/ajax/mercury/delivery_receipts.php':{request_user_id:this._fbid,mode:ja.IMMEDIATE,customHeader:db,handler:(function(fb,gb){return this.__handleUpdate(fb,gb);}).bind(this)},'/ajax/mercury/move_thread.php':{request_user_id:this._fbid,mode:ja.BATCH_SUCCESSIVE,customHeader:db,batch_function:ab,handler:(function(fb,gb){return this.__handleUpdate(fb,gb);}).bind(this)},'/ajax/mercury/change_mute_thread.php':{request_user_id:this._fbid,mode:ja.IMMEDIATE,customHeader:db,handler:(function(fb,gb){return this.__handleUpdate(fb,gb);}).bind(this)},'/mercury/pinned_threads/':{request_user_id:this._fbid,mode:ja.BATCH_SUCCESSIVE_UNIQUE,customHeader:db,handler:(function(fb,gb){return this.__handleUpdate(fb,gb);}).bind(this)},'/mercury/unpin_thread/':{request_user_id:this._fbid,mode:ja.IMMEDIATE,customHeader:db,handler:(function(fb,gb){return this.__handleUpdate(fb,gb);}).bind(this)}};ja.registerEndpoints(eb);},__sendRequest:function(db,eb,fb){ja.trySend(db,eb,fb,this._fbid);}});Object.assign(cb,da);f.exports=cb;},null);
__d('MercuryThreads',['EventEmitter','ImmutableObject','KeyedCallbackManager','LogHistory','Map','MercuryActionType','MercuryAPIArgsSource','MercuryAssert','MercuryAttachment','MercuryConfig','MercuryDispatcher','MercuryFolders','MercuryGlobalActionType','MercuryIDs','MercuryLogMessageType','MercuryLoggingHelper','MercuryPayloadSource','MercuryServerRequests','MercurySingletonProvider','MercuryThreadInfo','MercuryThreadInformer','MessagingTag','MercuryDisplayTimeFilterMessageRenderer','Set','emptyFunction','ifRequired','setImmediate'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba,ca,da,ea,fa,ga,ha){'use strict';if(c.__markCompiled)c.__markCompiled();var ia=new h(),ja=k.getInstance('mercury_threads');function ka(ma){this.$MercuryThreads1=ma;this.$MercuryThreads2=y.getForFBID(this.$MercuryThreads1);this.$MercuryThreads3=ba.getForFBID(this.$MercuryThreads1);this.$MercuryThreads4=u.getParticipantIDFromUserID(this.$MercuryThreads1);this.$MercuryThreads5=r.getForFBID(this.$MercuryThreads1);this.$MercuryThreads6=false;this.$MercuryThreads7=new j();this.$MercuryThreads8=new ea();this.$MercuryThreads9=false;this.$MercuryThreads10=new ea();this.$MercuryThreads11=new ea();this.$MercuryThreads12();}ka.getForFBID=function(ma){return la.getForFBID(ma);};ka.get=function(){return la.get();};ka.prototype.getThreadMetaNow=function(ma){o.isThreadID(ma);return this.$MercuryThreads7.getResource(ma);};ka.prototype.getOrFetch=function(ma){var na=this.getThreadMetaNow(ma);if(!na&&!this.$MercuryThreads11.has(ma))this.$MercuryThreads10.add(ma);if(this.$MercuryThreads10.size>0&&!this.$MercuryThreads9)this.$MercuryThreads13();return na;};ka.prototype.$MercuryThreads13=function(){if(this.$MercuryThreads9)return;this.$MercuryThreads9=true;ha((function(){this.$MercuryThreads9=false;this.$MercuryThreads10.forEach((function(ma){return this.$MercuryThreads11.add(ma);}).bind(this));this.getMultiThreadMeta(Array.from(this.$MercuryThreads10),(function(ma){for(var na in ma)ma.hasOwnProperty(na)&&this.$MercuryThreads11['delete'](na);}).bind(this));this.$MercuryThreads10.clear();}).bind(this));};ka.prototype.getThreadMeta=function(ma,na,oa){return this.getMultiThreadMeta([ma],function(pa){return na(pa[ma]);},oa);};ka.prototype.getMultiThreadMeta=function(ma,na,oa){o.allThreadID(ma);var pa=this.$MercuryThreads7.executeOrEnqueue(ma,na),qa=this.$MercuryThreads7.getUnavailableResources(pa);if(qa.length){var ra=[];for(var sa=0;sa<qa.length;sa++){var ta=qa[sa],ua=u.tokenize(ta),va=ua.type,wa=ua.value;if(va=='user'){var xa=u.getParticipantIDFromUserID(wa);this.createNewLocalThread(ta,xa===this.$MercuryThreads4?[this.$MercuryThreads4]:[this.$MercuryThreads4,xa]);}else ra.push(ta);}if(ra.length)this.$MercuryThreads2.fetchThreadData(ra,oa);}return pa;};ka.addListener=function(ma,na){return ia.addListener(ma,na);};ka.prototype.unsubscribe=function(ma){this.$MercuryThreads7.unsubscribe(ma);};ka.prototype.getCanonicalThreadToParticipant=function(ma,na,oa,pa){var qa=u.getThreadIDFromParticipantID(ma),ra=this.$MercuryThreads7.getResource(qa);if(typeof ra=='undefined'){ra=this.createNewLocalThread(qa,this.$MercuryThreads4===ma?[this.$MercuryThreads4]:[this.$MercuryThreads4,ma],na);!pa&&this.$MercuryThreads2.fetchThreadData([qa],oa);}return ra;};ka.prototype.createNewLocalThread=function(ma,na,oa){var pa=this.$MercuryThreads7.getResource(ma);if(!pa){var qa=u.tokenize(ma),ra=qa.type,sa=qa.value;pa=new i({thread_id:ma,participants:Array.from(na),name:'',snippet:'',snippet_has_attachment:false,snippet_sender:null,unread_count:oa?oa:0,message_count:0,image_src:null,timestamp_absolute:null,timestamp_relative:null,timestamp:null,other_user_fbid:ra==='user'?sa:null,is_canonical_user:ra=='user',is_canonical:this.$MercuryThreads14(na),is_subscribed:true,folder:ca.INBOX,is_archived:false});this.$MercuryThreads7.setResource(ma,pa);}return pa;};ka.prototype.isEmptyLocalThread=function(ma){var na=this.$MercuryThreads7.getResource(ma);if(!na)return false;return aa.isEmptyLocalThread(na);};ka.prototype.isNewEmptyLocalThread=function(ma){var na=this.$MercuryThreads7.getResource(ma);if(!na)return false;return aa.isNewEmptyLocalThread(na);};ka.prototype.$MercuryThreads15=function(ma,na){if(!ma||!ma.length)return;var oa=new l(),pa=new l(),qa=new l(),ra=[];for(var sa=0;sa<ma.length;sa++){var ta=ma[sa];if(ta.is_forward)continue;var ua=ta.action_type;if(ua==m.LOG_MESSAGE&&ta.log_message_type==v.SERVER_ERROR)continue;var va=!!(ta.sync_id||ta.action_id||ta.is_from_iris),wa=ta.thread_id;o.isThreadID(wa);var xa=this.$MercuryThreads7.getResource(wa);if(!xa&&!va&&ua==m.USER_GENERATED_MESSAGE){xa=this.$MercuryThreads16(ta);this.$MercuryThreads7.setResource(wa,xa);}if(!xa)continue;if(ua==m.LOG_MESSAGE||ua==m.USER_GENERATED_MESSAGE)va=!na;if(xa.server_timestamp&&ta.timestamp<=xa.server_timestamp&&va)continue;if(!qa.has(wa))qa.set(wa,babelHelpers._extends({},xa));this.$MercuryThreads17(qa.get(wa),ta,na);if(ua==m.USER_GENERATED_MESSAGE)oa.set(wa,ta);if(ua==m.USER_GENERATED_MESSAGE||ua==m.LOG_MESSAGE||ua==m.SEND_MESSAGE)if(ta&&ta.timestamp&&(!pa.has(wa)||ta.timestamp>pa.get(wa).timestamp))pa.set(wa,ta);}qa.forEach((function(ya,za){var ab=pa.get(za),bb=oa.get(za);if(bb){this.$MercuryThreads18(ya,bb);}else if(ab&&(ab.log_message_type==v.PHONE_CALL||ab.log_message_type==v.VIDEO_CALL)){var cb=babelHelpers._extends({},ab,{body:ab.log_message_body});this.$MercuryThreads18(ya,cb);}var db=ya.timestamp;if(ab){if(ab.timestamp>db)Object.assign(ya,{timestamp_absolute:ab.timestamp_absolute,timestamp_relative:ab.timestamp_relative,timestamp:ab.timestamp});var eb=ya.server_timestamp;if(!na&&ab.timestamp>eb)ya.server_timestamp=ab.timestamp;}var fb=new i(ya);this.$MercuryThreads7.setResource(za,fb);ra.push(w.obfuscateThread(fb));}).bind(this),this);ra.length&&this.$MercuryThreads6&&ja.debug('threads_updated',{threads:ra});};ka.prototype.$MercuryThreads17=function(ma,na,oa){var pa=na.action_type;if(pa==m.USER_GENERATED_MESSAGE||pa==m.LOG_MESSAGE){na.is_unread&&ma.unread_count++;ma.message_count++;ma.is_archived=false;}switch(pa){case m.DELETE_THREAD:ma.message_count=0;this.$MercuryThreads19(na.thread_id);break;case m.USER_GENERATED_MESSAGE:if(ma.last_read_timestamp>=na.timestamp)this.$MercuryThreads20(ma,na,true);if(ma.unread_count===0&&na.author===this.$MercuryThreads4&&na.timestamp>=ma.last_read_timestamp)ma.last_read_timestamp=na.timestamp;if(na.offline_threading_id!==na.message_id){ma.last_message_id=na.message_id;ma.last_message_timestamp=na.timestamp;}this.$MercuryThreads21(ma,na.author);break;case m.SEND_MESSAGE:var qa=na.log_message_type;if(qa==v.THREAD_IMAGE){ma.image_src=na.log_message_data.image?na.log_message_data.image.preview_url:null;this.$MercuryThreads22(na.thread_id);}if(qa!==v.SUBSCRIBE&&qa!==v.UNSUBSCRIBE)ma.snippet_attachments=na.attachments;break;case m.LOG_MESSAGE:var qa=na.log_message_type;if(qa==v.SUBSCRIBE){this.$MercuryThreads23(ma,na.log_message_data.added_participants);this.$MercuryThreads22(na.thread_id);}else if(qa==v.UNSUBSCRIBE){this.$MercuryThreads24(ma,na.log_message_data.removed_participants);this.$MercuryThreads22(na.thread_id);}else if(qa==v.THREAD_IMAGE){if(!oa)ma.image_src=na.log_message_data.image?na.log_message_data.image.preview_url:null;}else if(qa==v.THREAD_NAME){if(ma.name!==na.log_message_data.name)this.$MercuryThreads22(na.thread_id);ma.name=na.log_message_data.name;}else if(qa===v.GENERIC_ADMIN_TEXT)if(this.$MercuryThreads25(ma,na))this.$MercuryThreads22(na.thread_id);break;case m.CHANGE_READ_STATUS:var ra=this.$MercuryThreads20(ma,na,na.mark_as_read);if(ra)ma.last_read_timestamp=ma.last_message_timestamp;var sa=!ma.read_only&&ma.folder===ca.INBOX;if(ra&&oa)this.$MercuryThreads2.changeThreadReadStatus(ma.thread_id,na.mark_as_read,na.source,ma.last_read_timestamp,ma.titan_originated_thread_id,sa);break;case m.CHANGE_ARCHIVED_STATUS:if(ma.is_archived!=na.archived){ma.is_archived=na.archived;this.$MercuryThreads22(na.thread_id);}break;case m.CHANGE_FOLDER:if(ma.folder!=na.new_folder){ma.folder=na.new_folder;this.$MercuryThreads22(na.thread_id);}break;case m.DELETE_MESSAGES:if(oa){ma.snippet='...';ma.snippet_has_attachment=false;ma.snippet_attachments=null;ma.snippet_sender=null;this.$MercuryThreads22(na.thread_id);}else if(na.message_ids){ma.message_count-=na.message_ids.length;if(!q.MessengerGlobalDeleteGK)break;ga('MercuryMessages',(function(va){va=va.getForFBID(this.$MercuryThreads1);for(var wa=na.message_ids,xa=Array.isArray(wa),ya=0,wa=xa?wa:wa[typeof Symbol==='function'?Symbol.iterator:'@@iterator']();;){var za;if(xa){if(ya>=wa.length)break;za=wa[ya++];}else{ya=wa.next();if(ya.done)break;za=ya.value;}var ab=za,bb=va.getMessagesFromIDs([ab]),cb=bb[0];if(cb&&cb.timestamp>ma.last_read_timestamp)ma.unread_count=Math.max(0,ma.unread_count-1);}this.$MercuryThreads22(na.thread_id);}).bind(this),fa);}break;case m.UPDATE_SNIPPET:ga('MercuryMessages',(function(va){va=va.getForFBID(this.$MercuryThreads1);if(!q.MessengerGlobalDeleteGK)return;var wa=false;for(var xa=na.deleted_ids,ya=Array.isArray(xa),za=0,xa=ya?xa:xa[typeof Symbol==='function'?Symbol.iterator:'@@iterator']();;){var ab;if(ya){if(za>=xa.length)break;ab=xa[za++];}else{za=xa.next();if(za.done)break;ab=za.value;}var bb=ab;if(bb==ma.last_message_id){wa=true;break;}}if(!wa)return;var cb=0,db=1,eb=va.getThreadMessagesRangeNow(na.thread_id,cb,db),fb=eb[0];if(fb){ma.snippet=fb.body;ma.snippet_has_attachment=fb.has_attachment;ma.snippet_attachments=fb.attachments;ma.snippet_sender=fb.author;ma.last_message_id=va.getServerMessageID(fb.message_id);}else{ma.snippet='...';ma.snippet_has_attachment=false;ma.snippet_attachments=null;ma.snippet_sender=null;va.getThreadMessagesRange(na.thread_id,cb,db,(function(gb){if(gb.length)this.$MercuryThreads5.handleUpdate({from_client:true,actions:[{thread_id:na.thread_id,action_type:m.UPDATE_SNIPPET,deleted_ids:na.deleted_ids}]});}).bind(this));}this.$MercuryThreads22(na.thread_id);}).bind(this),fa);break;case m.UPDATE_BLOCKER_STATUS:ma.can_reply=!!(!na.message_blocked&&(na.is_blocked_by_recipient===undefined||!na.is_blocked_by_recipient)&&ma.is_subscribed&&!ma.has_email_participant&&!ma.read_only&&(ma.recipients_loadable||ma.recipients_loadable===undefined));this.$MercuryThreads22(na.thread_id);break;case m.UPDATE_BLOCKEE_STATUS:ma.can_reply=!!(!na.got_blocked&&ma.is_subscribed&&!ma.has_email_participant&&!ma.read_only&&(ma.recipients_loadable||ma.recipients_loadable===undefined));this.$MercuryThreads22(na.thread_id);break;case m.CHANGE_MUTE_SETTINGS:if(na.mute_settings!==undefined){var ta=this.$MercuryThreads1+'@facebook.com';if(ma.mute_settings){if(na.mute_settings){var ua={};ua[ta]=na.mute_settings;ma.mute_settings=babelHelpers._extends({},ma.mute_settings,ua);}else{ma.mute_settings=babelHelpers._extends({},ma.mute_settings);delete ma.mute_settings[ta];}this.$MercuryThreads22(ma.thread_id);}}break;case m.ADD_PARTICIPANTS:this.$MercuryThreads23(ma,na.participants);this.$MercuryThreads22(ma.thread_id);break;case m.CHANGE_FLAG:this.$MercuryThreads26(ma,na.mark_as_flag);this.$MercuryThreads22(ma.thread_id);break;case m.MOVE_PENDING_TO_INBOX:this.$MercuryThreads27(ma);this.$MercuryThreads22(ma.thread_id);break;}};ka.prototype.$MercuryThreads16=function(ma){var na=u.tokenize(ma.thread_id),oa=na.type,pa=na.value,qa=this.$MercuryThreads14(ma.specific_to_list);return new i({thread_id:ma.thread_id,participants:ma.specific_to_list,name:null,snippet:ma.body,snippet_has_attachment:false,snippet_attachments:[],snippet_sender:ma.author,unread_count:0,message_count:0,image_src:null,timestamp_absolute:ma.timestamp_absolute,timestamp_relative:ma.timestamp_relative,timestamp:ma.timestamp,other_user_fbid:oa==='user'?pa:null,is_canonical_user:oa==='user',is_canonical:qa,is_subscribed:true,folder:ca.INBOX,is_archived:false});};ka.prototype.$MercuryThreads20=function(ma,na,oa){if(na.timestamp)this.$MercuryThreads28(ma.thread_id,oa,na.timestamp);if(!ma||!ma.thread_id)return false;if(!ma.timestamp){this.$MercuryThreads8.add(ma.thread_id);return false;}var pa=!ma.unread_count;if(oa==pa)return false;ma.unread_count=oa?0:1;this.$MercuryThreads22(ma.thread_id);return true;};ka.prototype.$MercuryThreads29=function(ma){var na=this.$MercuryThreads7.getAllResources();for(var oa in na)if(na.hasOwnProperty(oa)){var pa=na[oa];if(pa.folder==ma){this.$MercuryThreads7.setResource(oa,i.setProperty(pa,'unread_count',0));this.$MercuryThreads22(oa);}}};ka.prototype.$MercuryThreads23=function(ma,na){var oa=new ea(ma.participants);ma.participants=Array.from(ma.participants);na.forEach((function(pa){if(!oa.has(pa)){ma.participants.push(pa);if(pa===this.$MercuryThreads4){ma.is_subscribed=true;ma.can_reply=true;ma.composer_enabled=true;this.$MercuryThreads2.fetchMissedMessages(s.getSupportedFolders(),n.MERCURYSYNC,ma.last_message_timestamp);}}}).bind(this));};ka.prototype.$MercuryThreads25=function(ma,na){if(na.log_message_data&&na.log_message_data.untypedData){var oa=parseInt(na.log_message_data.untypedData.ttl,10);if(oa!==null&&ma.ephemeral_ttl_mode!==oa){ma.ephemeral_ttl_mode=oa;return true;}}return false;};ka.prototype.$MercuryThreads24=function(ma,na){var oa=new ea(na);ma.participants=ma.participants.filter(function(pa){return !oa.has(pa);});if(oa.has(this.$MercuryThreads4))ma.is_subscribed=false;this.$MercuryThreads2.fetchThreadData([ma.thread_id]);};ka.prototype.$MercuryThreads21=function(ma,na){var oa=ma.participants.indexOf(na);if(oa>0)ma.participants=[na].concat(ma.participants.slice(0,oa),ma.participants.slice(oa+1));};ka.prototype.$MercuryThreads18=function(ma,na){var oa=na.body,pa=na.subject,qa='';if(pa){pa=pa.toLowerCase();if(oa.slice(0,pa.length).toLowerCase()==pa){qa=oa;}else if(oa){qa=pa+' \u00B7 '+oa;}else qa=pa;}else qa=oa;if(na.is_filtered_content)qa=da.renderFilteredContent(na);ma.snippet=qa;ma.snippet_has_attachment=na.has_attachment;if(na.raw_attachments&&na.raw_attachments.length>0){var ra=p.convertRaw(na.raw_attachments);ma.snippet_attachments=ra;}else ma.snippet_attachments=na.attachments;ma.snippet_sender=na.author;};ka.prototype.$MercuryThreads26=function(ma,na){ma.page_thread_info=babelHelpers._extends({},ma.page_thread_info,{flagged:na});};ka.prototype.$MercuryThreads27=function(ma){if(ma.folder!==ca.PENDING)return;ma.folder=ca.INBOX;};ka.prototype.$MercuryThreads14=function(ma){return ma.filter((function(na){return na!=this.$MercuryThreads4;}).bind(this)).length<=1;};ka.prototype.$MercuryThreads12=function(){this.$MercuryThreads5.subscribe('invalidate-thread-state',(function(ma,na){return this.$MercuryThreads30(na);}).bind(this));this.$MercuryThreads5.subscribe('update-threads',(function(ma,na){var oa=(na.actions||[]).filter(function(pa){return pa.thread_id;});if(na.threads&&na.payload_source==x.SERVER_FETCH_THREAD_INFO)na.threads.forEach((function(pa){var qa=pa.thread_id;if(this.$MercuryThreads8.has(qa)){this.$MercuryThreads8['delete'](qa);if(pa.unread_count)this.$MercuryThreads2.changeThreadReadStatus(pa.thread_id,true);}}).bind(this));this.$MercuryThreads31(na.threads);this.$MercuryThreads15(oa,na.from_client);na.threads&&na.threads.forEach((function(pa){this.$MercuryThreads22(pa.thread_id);}).bind(this));if(na.global_actions)na.global_actions.forEach((function(pa){if(pa.action_type==t.MARK_ALL_READ)this.$MercuryThreads29(pa.folder);}).bind(this));if(this.$MercuryThreads6){this.$MercuryThreads6=false;ia.emit('change');}}).bind(this));};ka.prototype.$MercuryThreads31=function(ma){if(!ma||!ma.length)return;var na={},oa=[];ma.forEach(function(pa){var qa=new i(pa);na[pa.thread_id]=qa;oa.push(w.obfuscateThread(qa));});oa.length&&ja.debug('threads_added',{threads:oa});this.$MercuryThreads7.addResourcesAndExecute(na);};ka.prototype.$MercuryThreads22=function(ma){this.$MercuryThreads6=true;this.$MercuryThreads3.updatedThread(ma);};ka.prototype.$MercuryThreads19=function(ma){this.$MercuryThreads6=true;this.$MercuryThreads3.deletedThread(ma);};ka.prototype.$MercuryThreads28=function(ma,na,oa){this.$MercuryThreads6=true;this.$MercuryThreads3.changedThreadReadState(ma,na,oa);};ka.prototype.$MercuryThreads30=function(ma){this.$MercuryThreads7.setResource(ma,undefined);};var la=new z(ka);f.exports=ka;},null);
__d('MercuryMessageObject',['BanzaiODS','MercuryActionStatus','MercuryActionType','MercuryIDs','MercuryLocalIDs','MercuryMessageClientState','MercuryMessageSourceTags','MercurySingletonProvider','MercurySourceType','MercuryThreads','MercuryTimePassed','MercurySendMessageFields','fbt','formatDate'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u){if(c.__markCompiled)c.__markCompiled();v.getForFBID=function(z){'use strict';return y.getForFBID(z);};v.get=function(){'use strict';return y.get();};function v(z){'use strict';this.$MercuryMessageObject1=z;this.$MercuryMessageObject2=q.getForFBID(z);}v.prototype.constructUserGeneratedMessageObject=function(z,aa,ba,ca,da){'use strict';var ea=w(this.$MercuryMessageObject1,j.USER_GENERATED_MESSAGE,aa,ba);if(typeof z=='string')z=z.replace(/^\s+/,'').replace(/\s+$/,'');ea.body=z;ea.has_attachment=false;ea.html_body=false;ea.attachments=[];ea.specific_to_list=ca||[];ea.creator_info=da;return ea;};v.prototype.constructStickerMessageObject=function(z,aa,ba){'use strict';var ca=w(this.$MercuryMessageObject1,j.USER_GENERATED_MESSAGE,aa,ba);ca.has_attachment=true;ca.html_body=false;ca.attachments=[];ca.sticker_id=z;ca.specific_to_list=[];return ca;};v.prototype.constructAttachmentMessageObject=function(z,aa){'use strict';var ba=w(this.$MercuryMessageObject1,j.USER_GENERATED_MESSAGE,z,aa);ba.attachments=[];ba.specific_to_list=[];return ba;};v.prototype.constructLogMessageObject=function(z,aa,ba,ca){'use strict';var da=w(this.$MercuryMessageObject1,j.LOG_MESSAGE,z,aa);da.log_message_type=ba;da.log_message_data=ca;if(ca&&ca.untypedData&&ca.untypedData.ttl)da.ephemeral_ttl_mode=ca.untypedData.ttl;return da;};v.prototype.normalizeNewMessage=function(z){'use strict';if(z.status===undefined)z.status=i.UNSENT;z.timestamp_absolute=t._("Today").toString();z.offline_threading_id=z.offline_threading_id||l.generateOfflineThreadingID(z.timestamp);if(!z.offline_threading_id)h.bumpEntityKey('chat.web','invalid_otid_generated');z.message_id=z.message_id||z.offline_threading_id;var aa=k.getParticipantIDFromUserID(this.$MercuryMessageObject1);z.specific_to_list=z.specific_to_list||[];if(z.specific_to_list.length&&z.specific_to_list.indexOf(aa)===-1)z.specific_to_list.push(aa);if(!z.thread_id){z.thread_id='root:'+z.offline_threading_id;}else{var ba=this.$MercuryMessageObject2.getThreadMetaNow(z.thread_id);if(ba&&ba.ephemeral_ttl_mode!==null&&z.ephemeral_ttl_mode===undefined)z.ephemeral_ttl_mode=ba.ephemeral_ttl_mode;}if(z.specific_to_list.length==1){z.thread_id='user:'+this.$MercuryMessageObject1;}else if(z.specific_to_list.length==2){var ca=z.specific_to_list[0]==aa?z.specific_to_list[1]:z.specific_to_list[0];z.thread_id=k.getThreadIDFromParticipantID(ca);}if(!z.specific_to_list.length){var da=k.tokenize(z.thread_id),ea=da.type,fa=da.value;if(ea=='user')z.specific_to_list=['fbid:'+fa,aa];}if(!z[s.MANUAL_RETRY_CNT])z[s.MANUAL_RETRY_CNT]=0;};v.prototype.normalizeResendMessage=function(z){'use strict';z.status=i.RESENDING;z.timestamp=Date.now();z[s.MANUAL_RETRY_CNT]+=1;};v.prototype.normalizeAddAttachmentPlaceholder=function(z,aa,ba){'use strict';if(ba.preview_attachments.length>0){z.has_attachment=true;z.preview_attachments=ba.preview_attachments;}z.client_state=m.DO_NOT_SEND_TO_SERVER;z.status=i.RESENDING;z.upload_id=aa;};function w(z,aa,ba,ca){var da=x(ba)?[n.CHAT]:[],ea=Date.now(),fa=u(new Date(ea),'g:ia'),ga={action_type:aa,thread_id:ca,author:k.getParticipantIDFromUserID(z),author_email:null,timestamp:ea,timestamp_absolute:new Date(ea).toLocaleDateString(),timestamp_relative:fa,timestamp_time_passed:r.TODAY,is_unread:false,is_forward:false,is_filtered_content:false,is_filtered_content_bh:false,is_filtered_content_account:false,is_filtered_content_quasar:false,is_filtered_content_invalid_app:false,is_spoof_warning:false,source:ba,source_tags:da};return ga;}function x(z){switch(z){case p.CHAT_WEB:case p.CHAT_JABBER:case p.CHAT_IPHONE:case p.CHAT_MEEBO:case p.CHAT_ORCA:case p.CHAT_TEST:case p.CHAT:case p.DESKTOP:return true;default:return false;}}var y=new o(v);f.exports=v;},null);
__d('MercuryViewer',['CurrentUser','MercuryAssert'],function a(b,c,d,e,f,g,h,i){'use strict';if(c.__markCompiled)c.__markCompiled();var j='fbid:'+h.getID(),k={getID:function(){return j;},isViewer:function(l){i.isParticipantID(l);return l===j;}};f.exports=k;},null);
__d("XMercuryInvalidateThreadStateController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/mercury\/invalidate_thread_state\/",{other_user_or_thread_fbid:{type:"Int",required:true}});},null,{});
__d("XNFXMessengerBlockActionController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/nfx\/block_messages\/",{thread_fbid:{type:"Int",required:true},av:{type:"Int"},location:{type:"Enum",required:true,enumType:1},__asyncDialog:{type:"Int"}});},null,{});
__d('MercuryThreadActions',['AsyncDialog','AsyncRequest','IrisProtocolMessageLifetime','MercuryActionType','MercuryAPIArgsSource','MercuryDispatcher','MercuryIDs','MercuryLogMessageType','MercuryMessengerBlockingUtils','MercuryPayloadSource','MercuryServerPayloadPreprocessor','MercuryServerRequests','MercurySingletonMixin','MercurySourceType','MercuryViewer','MessagingTag','XMercuryInvalidateThreadStateController','XNFXMessengerBlockActionController','URI','MercuryAssert','XMessengerNotificationsSettingsDialogController','MercuryMessageActions','MercuryMessageObject','MercuryThreads'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba){'use strict';if(c.__markCompiled)c.__markCompiled();var ca=c('MercuryMessageActions').get(),da=c('MercuryMessageObject').get(),ea=c('MercuryThreads').get();function fa(ga){this.$MercuryThreadActions1=ga;this.__serverRequests=s.getForFBID(this.$MercuryThreadActions1);this.__dispatcher=m.getForFBID(this.$MercuryThreadActions1);this.__payloadPreprocessor=r.getForFBID(this.$MercuryThreadActions1);}fa.prototype.markRead=function(ga,ha){this.batchMarkRead([ga],ha);};fa.prototype.batchMarkRead=function(ga,ha){this.__dispatcher.handleUpdate(this.$MercuryThreadActions2(ga,true,ha));};fa.prototype.markUnread=function(ga,ha){this.batchMarkUnread([ga],ha);};fa.prototype.batchMarkUnread=function(ga,ha){this.__dispatcher.handleUpdate(this.$MercuryThreadActions2(ga,false,ha));};fa.prototype.markSeen=function(ga,ha){this.__dispatcher.handleUpdate(this.__constructClientPayload([ga],k.MARK_THREAD_SEEN,q.CLIENT_MARK_THREAD_SEEN,{persistent:ha}));};fa.prototype.archive=function(ga,ha){this.batchArchive([ga],ha);};fa.prototype.batchArchive=function(ga,ha){ga.forEach((function(ia){this.__serverRequests.changeThreadArchivedStatus(ia,true,ha);}).bind(this));this.__dispatcher.handleUpdate(this.$MercuryThreadActions3(ga,true));};fa.prototype.unarchive=function(ga,ha){this.batchUnarchive([ga],ha);};fa.prototype.batchUnarchive=function(ga,ha){ga.forEach((function(ia){this.__serverRequests.changeThreadArchivedStatus(ia,false,ha);}).bind(this));this.__dispatcher.handleUpdate(this.$MercuryThreadActions3(ga,false));};fa.prototype.markSpam=function(ga,ha){this.batchMarkSpam([ga],ha);};fa.prototype.batchMarkSpam=function(ga,ha){ga.forEach((function(ia){this.__serverRequests.markThreadSpam(ia,ha);}).bind(this));this.__dispatcher.handleUpdate(this.$MercuryThreadActions4(ga,w.SPAM));};fa.prototype.unmarkSpam=function(ga,ha){this.batchUnmarkSpam([ga],ha);};fa.prototype.batchUnmarkSpam=function(ga,ha){ga.forEach((function(ia){this.__serverRequests.unmarkThreadSpam(ia,ha);}).bind(this));this.__dispatcher.handleUpdate(this.$MercuryThreadActions4(ga,w.INBOX));};fa.prototype.changeFolder=function(ga,ha){this.batchChangeFolder([ga],ha);};fa.prototype.batchChangeFolder=function(ga,ha){ga.forEach((function(ia){this.__serverRequests.changeThreadFolder(ia,ha);}).bind(this));this.__dispatcher.handleUpdate(this.$MercuryThreadActions4(ga,ha));};fa.prototype['delete']=function(ga,ha){this.batchDelete([ga],ha);};fa.prototype.batchDelete=function(ga,ha){ga.forEach((function(ia){this.__serverRequests.deleteThread(ia,ha);}).bind(this));this.__dispatcher.handleUpdate(this.__constructClientPayload(ga,k.DELETE_THREAD,q.CLIENT_DELETE_THREAD));};fa.prototype.openNotificationSettings=function(ga){aa.isThreadID(ga);this.__serverRequests.__threadIDMap.getServerIDFromClientID(ga,function(ha){var ia=ba.getURIBuilder().setString('thread_key_id',ha).setBool('modify',false).getURI();new i().setURI(ia).send();});};fa.prototype.unmute=function(ga){this.updateMuteSetting(ga,0);};fa.prototype.updateMuteSetting=function(ga,ha){this.__serverRequests.changeMutingOnThread(ga,ha);this.__dispatcher.handleUpdate(this.__constructClientPayload([ga],k.CHANGE_MUTE_SETTINGS,q.CLIENT_CHANGE_MUTE_SETTINGS,{mute_settings:ha}));};fa.prototype.blockMessages=function(ga){var ha=y.getURIBuilder().setInt('thread_fbid',n.getUserIDFromThreadID(ga)).setEnum('location','www_chat_head').getURI();h.send(new i(ha));};fa.prototype.unblockMessages=function(ga){var ha=JSON.stringify({reportable_ent_token:n.getUserIDFromThreadID(ga),initial_action_name:p.block_messages});new i(new z('/ajax/nfx/messenger_undo_block').addQueryData({story_location:'messenger',context:ha})).send();};fa.prototype.turnOffSecretMode=function(ga){if(ea.isEmptyLocalThread(ga))return;ca.send(da.constructLogMessageObject(u.TITAN_WEB,ga,o.GENERIC_ADMIN_TEXT,{untypedData:{ttl:j.TTL_OFF}}),null,l.WEBMESSENGER);};fa.prototype.turnOnSecretMode=function(ga){if(ea.isEmptyLocalThread(ga))return;ca.send(da.constructLogMessageObject(u.TITAN_WEB,ga,o.GENERIC_ADMIN_TEXT,{untypedData:{ttl:j.TTL_1HOUR}}),null,l.WEBMESSENGER);};fa.prototype.leaveGroup=function(ga){if(!ea.isEmptyLocalThread(ga))ca.send(da.constructLogMessageObject(u.TITAN_WEB,ga,o.UNSUBSCRIBE,{removed_participants:[v.getID()]}),null,l.WEBMESSENGER);};fa.prototype.addParticipants=function(ga,ha){this.__dispatcher.handleUpdate(this.__constructClientPayload([ga],k.ADD_PARTICIPANTS,q.CLIENT_ADD_PARTICIPANTS,{participants:ha}));};fa.prototype.unpinThread=function(ga){this.__serverRequests.unpinThread(ga);this.__dispatcher.handleUpdate(this.__constructClientPayload([ga],k.UNPIN_THREAD,q.CLIENT_UNPIN_THREAD));};fa.prototype.movePendingToInbox=function(ga){this.__dispatcher.handleUpdate(this.__constructClientPayload([ga],k.MOVE_PENDING_TO_INBOX,q.CLIENT_MOVE_PENDING_TO_INBOX));};fa.prototype.updateSnippet=function(ga,ha){this.__dispatcher.handleUpdate(this.__constructClientPayload([ga],k.UPDATE_SNIPPET,q.CLIENT_UPDATE_SNIPPET,{deleted_ids:ha}));};fa.prototype.invalidateState=function(ga,ha){var ia=x.getURIBuilder().setInt('other_user_or_thread_fbid',ga||ha).getURI();new i().setURI(ia).setHandler((function(ja){this.__payloadPreprocessor.handleUpdate(ja.getPayload());}).bind(this)).send();};fa.prototype.$MercuryThreadActions2=function(ga,ha,ia){return this.__constructClientPayload(ga,k.CHANGE_READ_STATUS,q.CLIENT_CHANGE_READ_STATUS,{mark_as_read:ha,source:ia});};fa.prototype.$MercuryThreadActions3=function(ga,ha){return this.__constructClientPayload(ga,k.CHANGE_ARCHIVED_STATUS,q.CLIENT_CHANGE_ARCHIVED_STATUS,{archived:ha});};fa.prototype.$MercuryThreadActions4=function(ga,ha){return this.__constructClientPayload(ga,k.CHANGE_FOLDER,q.CLIENT_CHANGE_FOLDER,{new_folder:ha});};fa.prototype.__constructClientPayload=function(ga,ha,ia,ja){return {actions:ga.map(function(ka){return babelHelpers._extends({action_type:ha,action_id:null,thread_id:ka},ja);}),from_client:true,payload_source:ia};};Object.assign(fa,t);f.exports=fa;},null);
__d('ImageSourceRequest',['CurrentUser','ImageSourceType','KeyedCallbackManager','PhotoResizeModeConst','MercuryServerDispatcher','arrayContains'],function a(b,c,d,e,f,g,h,i,j,k,l,m){if(c.__markCompiled)c.__markCompiled();function n(){'use strict';this._request={fbid:null,type:null,width:null,height:null,resize_mode:null};this._callback=null;}n.prototype.setFBID=function(r){'use strict';this._request.fbid=r;return this;};n.prototype.setType=function(r){'use strict';if(!m([i.PROFILE_PICTURE,i.IMAGE],r))throw new TypeError('ImageSourceRequest.setType: invalid type '+r);this._request.type=r;return this;};n.prototype.setDimensions=function(r,s){'use strict';this._request.width=r;this._request.height=s;return this;};n.prototype.setResizeMode=function(r){'use strict';if(!m([k.COVER,k.CONTAIN],r))throw new TypeError('ImageSourceRequest.setResizeMode: invalid resize mode '+r);this._request.resize_mode=r;return this;};n.prototype.setCallback=function(r){'use strict';this._callback=r;return this;};n.prototype.send=function(){'use strict';if(!this._request.fbid||!this._request.width||!this._request.height||!this._request.type||!this._request.resize_mode||!this._callback)throw new Error('ImageSourceRequest: You must set all the fields');var r=p(),s=q(this._request);r.executeOrEnqueue(s,this._callback);if(r.getUnavailableResourcesFromRequest(s).length===1){l.trySend('/ajax/image_source.php',{requests:[this._request]});return true;}return false;};var o=null;function p(){if(o)return o;var r=new j();o=r;l.registerEndpoints({'/ajax/image_source.php':{request_user_id:h.getID(),mode:l.BATCH_DEFERRED_MULTI,batch_function:function(s,t){var u;(u=s.requests).push.apply(u,t.requests);return s;},handler:function(s,t){var u=t.getData().requests;for(var v=0;v<u.length;++v)r.setResource(q(u[v]),s[v]);}}});return r;}function q(r){return [r.fbid,r.type,r.width,r.height,r.resize_mode].join('|');}f.exports=n;},null);
__d('MercuryParticipantFetcher',['LogHistory','MercuryIDs','MercuryPayloadSource','MercuryServerPayloadPreprocessor','Set','ShortProfiles','setImmediate'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n){'use strict';if(c.__markCompiled)c.__markCompiled();var o=h.getInstance('short_profiles');function p(r){this.$MercuryParticipantFetcher1=k.getForFBID(r);this.$MercuryParticipantFetcher2=false;this.$MercuryParticipantFetcher3=new l();this.$MercuryParticipantFetcher4=new l();}p.prototype.fetch=function(r){this.$MercuryParticipantFetcher5(r);this.$MercuryParticipantFetcher6();};p.prototype.fetchMulti=function(r){r.forEach((function(s){return this.$MercuryParticipantFetcher5(s);}).bind(this));this.$MercuryParticipantFetcher6();};p.prototype.$MercuryParticipantFetcher5=function(r){if(!this.$MercuryParticipantFetcher4.has(r))this.$MercuryParticipantFetcher3.add(r);};p.prototype.$MercuryParticipantFetcher6=function(){if(this.$MercuryParticipantFetcher2||this.$MercuryParticipantFetcher3.size===0)return;this.$MercuryParticipantFetcher2=true;n((function(){this.$MercuryParticipantFetcher2=false;this.$MercuryParticipantFetcher3.forEach((function(r){return this.$MercuryParticipantFetcher4.add(r);}).bind(this));this.$MercuryParticipantFetcher7(this.$MercuryParticipantFetcher3,(function(r){r.forEach((function(s){return this.$MercuryParticipantFetcher4['delete'](s.id);}).bind(this));this.$MercuryParticipantFetcher8(r);}).bind(this));this.$MercuryParticipantFetcher3.clear();}).bind(this));};p.prototype.$MercuryParticipantFetcher7=function(r,s){var t=[];r.forEach(function(u){var v=i.tokenize(u),w=v.type,x=v.value;w==='fbid'&&t.push(x);});if(t.length>0){m.getMulti(t,function(u){var v=[];for(var w in u)v.push(q(u[w],w));s(v);if(v.length!==t.length)o.error('server_fetch_participant_count_error',{expectedIDs:t,receivedIDs:Object.keys(u)});});o.debug('client_fetch_participants',{userIDs:t});}};p.prototype.$MercuryParticipantFetcher8=function(r){this.$MercuryParticipantFetcher1.handleUpdate({participants:r,from_client:false,payload_source:j.SERVER_FETCH_PARTICIPANTS});};function q(r,s){var t=babelHelpers._extends({gender:r.gender,fbid:r.id||s,href:r.uri,id:i.getParticipantIDFromUserID(r.id||s),image_src:r.thumbSrc,name:r.name,short_name:r.firstName,employee:r.employee,is_employee_away:r.is_employee_away,type:r.type,vanity:r.vanity,is_friend:r.is_friend,is_messenger_user:r.is_messenger_user,social_snippets:r.social_snippets},{});if(r.officeStatus){t.officeStatus=r.officeStatus;t.officeStatusStartDate=r.officeStatusStartDate;t.officeStatusEndDate=r.officeStatusEndDate;t.officeStatusComment=r.officeStatusComment;t.officeStatusLocation=r.officeStatusLocation;}return t;}f.exports=p;},null);
__d('MercuryTypingReceiver',['Arbiter','ChannelConstants','FBID','MercuryActionType','MercuryIDs','MercuryPayloadSource','MercuryDispatcher','MercurySingletonMixin','MercuryViewer','TypingStates','isEmpty','mixInEventEmitter','setTimeoutAcrossTransitions','MercuryThreadIDMap'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t){if(c.__markCompiled)c.__markCompiled();var u=c('MercuryThreadIDMap').get(),v=30000;function w(x){'use strict';this.$MercuryTypingReceiver1=null;this.$MercuryTypingReceiver2={};this.$MercuryTypingReceiver3=n.getForFBID(x);this.$MercuryTypingReceiver3.subscribe('update-typing-state',(function(z,aa){var ba=aa.payload_source;if(ba!=m.CLIENT_CHANNEL_MESSAGE)return;var ca=aa.actions;if(!ca||!ca.length)return;var da=k.USER_GENERATED_MESSAGE;ca.forEach((function(ea){if(ea.action_type==da&&ea.author!=p.getID())this.$MercuryTypingReceiver4(ea.thread_id,ea.author);}).bind(this));}).bind(this));var y;if(j.isUser(x)){y=[i.getArbiterType('typ'),i.getArbiterType('ttyp')];}else y=[i.getArbiterType('page_typing')];h.subscribe(y,(function(z,aa){var ba=aa.obj,ca=this.$MercuryTypingReceiver5(ba);if(ca){var da=l.getParticipantIDFromUserID(ba.from);if(ba.st==q.TYPING){this.$MercuryTypingReceiver2[ca]=this.$MercuryTypingReceiver2[ca]||{};var ea=this.$MercuryTypingReceiver2[ca][da];this.$MercuryTypingReceiver2[ca][da]=Date.now();if(!this.$MercuryTypingReceiver1)this.$MercuryTypingReceiver1=t((function(){this.$MercuryTypingReceiver6();}).bind(this),3000);!ea&&this.$MercuryTypingReceiver7(ca);}else if(ba.st==q.INACTIVE)this.$MercuryTypingReceiver4(ca,da);}}).bind(this));}w.prototype.$MercuryTypingReceiver8=function(x){'use strict';var y=this.$MercuryTypingReceiver2[x]||{},z=Object.keys(y);z.sort(function(aa,ba){return y[aa]-y[ba];});return z;};w.prototype.$MercuryTypingReceiver6=function(){'use strict';this.$MercuryTypingReceiver1=null;var x=Date.now(),y={},z=false;for(var aa in this.$MercuryTypingReceiver2){var ba=false;for(var ca in this.$MercuryTypingReceiver2[aa]||{})if(this.$MercuryTypingReceiver2[aa][ca]<x-v){delete this.$MercuryTypingReceiver2[aa][ca];ba=true;}else z=true;if(ba)y[aa]=this.$MercuryTypingReceiver8(aa);}if(!r(y))this.$MercuryTypingReceiver9(y);if(z)this.$MercuryTypingReceiver1=t((function(){this.$MercuryTypingReceiver6();}).bind(this),3000);};w.prototype.$MercuryTypingReceiver4=function(x,y){'use strict';if(x in this.$MercuryTypingReceiver2)if(y in this.$MercuryTypingReceiver2[x]){delete this.$MercuryTypingReceiver2[x][y];this.$MercuryTypingReceiver7(x);}};w.prototype.$MercuryTypingReceiver9=function(x){'use strict';this.releaseHeldEventType('state-changed');this.emitAndHold('state-changed',x);};w.prototype.$MercuryTypingReceiver7=function(x){'use strict';var y={};y[x]=this.$MercuryTypingReceiver8(x);this.$MercuryTypingReceiver9(y);};w.prototype.$MercuryTypingReceiver5=function(x){'use strict';if(x.thread_fbid)return u.getClientIDFromServerIDNow(x.thread_fbid.toString());if(x.type==='typ'||x.type==='page_typing')return l.getThreadIDFromUserID(x.from);return null;};s(w,{'state-changed':true});Object.assign(w,o);f.exports=w;},null);
__d('MessengerPhoto.react',['Image.react','MercuryAttachmentType','React','URI','cx','joinClasses'],function a(b,c,d,e,f,g,h,i,j,k,l,m){'use strict';if(c.__markCompiled)c.__markCompiled();var n=j.PropTypes,o=206,p=450;function q(u){if(u.metadata){if(u.attach_type===i.VIDEO)return u.metadata.inbox_preview;return new k('/ajax/mercury/attachments/photo.php').addQueryData({fbid:u.metadata.fbid,height:o,mode:'cover',request_user_id:u.metadata.pageid,width:o}).toString();}return null;}function r(u){if(u.preview_uploading)return {height:u.preview_height||o,src:u.preview_url,width:u.preview_width||o};var v=q(u);if(v)return babelHelpers._extends({src:v},u.metadata.inbox_size);if(u.preview_url)return {height:u.preview_height,src:u.preview_url,width:u.preview_width};if(u.media)return u.media.playable&&u.media.animated_image?babelHelpers._extends({},u.media.animated_image_size,{src:u.media.animated_image}):babelHelpers._extends({},u.media.image_size,{src:u.media.image});}function s(u,v){if(u.preview_uploading)return u.preview_url?0:o;var w=u.media?r(u):{height:u.preview_height,width:u.preview_width};return Math.min(w.height*Math.min(1,p/w.width),p);}var t=j.createClass({displayName:'MessengerPhoto',contextTypes:{width:n.number},propTypes:{attachment:n.object.isRequired,isSingle:n.bool.isRequired,onClick:n.func},render:function(){var u=this.props.attachment,v=r(u);if(!v)return null;var w=this._getImageFromMetadata(v),x={};if(v.src)x.backgroundImage='url('+v.src+')';if(this.props.isSingle){var y=s(u,this.context);if(y)x.minHeight=y;}var z=!!this.props.attachment.app_attribution;return (j.createElement('div',{className:m(this.props.className,"_4tsk"+(z?' '+"_mxz":'')+(this.props.isSingle&&!z?' '+"_52mr":'')+(u.preview_uploading&&!v.src?' '+"_3etv":'')),style:x,onClick:this._onClick},w,j.createElement('a',{className:"_4tsl",href:v.src},this.props.children)));},_onClick:function(u){u.preventDefault();if(this.props.onClick)this.props.onClick(this.props.attachment);},_getImageFromMetadata:function(u){if(this.props.attachment.preview_uploading&&!u.src)return null;if(this.props.isSingle)return j.createElement(h,{alt:'',src:u.src});return null;}});f.exports=t;},null);
__d('MessagesViewer',['AsyncRequest','Bootloader','DOM','MessagesViewerSetID','PhotoStore','React','ReactDOM','Run','emptyFunction','ge'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){if(c.__markCompiled)c.__markCompiled();var r={bootstrapWithElem:function(u){r.bootstrapWithConfig({fbid:u.getAttribute('data-fbid'),dimensions:u.getAttribute('data-dimensions'),src:u.getAttribute('href'),endpoint:u.getAttribute('data-endpoint'),disablePaging:u.getAttribute('data-disablepaging')},u);},bootstrapWithConfig:function(u,v){var w=u.setID;if(!w)w=k.MESSAGES;t(function(x,y){s(m.createElement(x,{actorid:u.actorid,dimensions:[u.dimensions],disablepaging:u.disablePaging,disableForward:u.disableForward,open:true,photoid:u.fbid,reverse:false,rootClassName:u.rootClassName,setid:w,snapToPhoto:u.snapToPhoto,thumbsrc:u.src}));if(!l.hasBeenCreated(w)&&u.endpoint){var z=new h(u.endpoint);if(v)z.setRelativeTo(v);z.send();}});},renderVideo:function(u){t(function(v,w){s(m.createElement(w,u));});},preload:function(){o.onAfterLoad(function(){return t(p);});}};function s(u){var v=q('messages_viewer');if(!v){v=j.create('div',{id:'messages_viewer'});document.body.appendChild(v);}u=n.render(u,v);u.subscribeOnce('close',function(){n.unmountComponentAtNode(v);});}function t(u){i.loadModules(["SpotlightMessagesViewer","MessagingVideoViewer.react"],u);}f.exports=r;},null);
__d('MessengerPhotosGroup.react',['ChatSpeakingSticker.react','MercuryAttachmentType','MercuryConfig','MessengerPhoto.react','MessengerVideo.react','MessagesViewer','ReactComponentWithPureRenderMixin','React','Vector','cx','joinClasses'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){'use strict';if(c.__markCompiled)c.__markCompiled();var s='empty-spacer',t=o.PropTypes,u=o.createClass({displayName:'MessengerPhotosGroup',mixins:[n],propTypes:{attachType:t.string,attachments:t.arrayOf(t.object).isRequired,message:t.object},componentDidMount:function(){m.preload();},render:function(){var v=this.props.attachments;return (o.createElement('div',{className:this._getRootClassNameFor(v)},this._rowsFor(v)));},_onChildClicked:function(v){if(v.preview_uploading)return;if(v.attach_type===i.VIDEO){m.renderVideo({disableForward:true,rootClassName:"_1j1h",videoID:v.metadata.fbid,videoSize:new p(v.metadata.dimensions.width,v.metadata.dimensions.height),videoURI:v.url});}else if(v.attach_type===i.PHOTO||v.attach_type===i.ANIMATED_IMAGE){m.bootstrapWithConfig({dimensions:v.metadata.dimensions,disablePaging:this.props.attachments.length===1,disableForward:!j.MessengerForwardingEnabled,endpoint:v.url,fbid:v.metadata.fbid,rootClassName:"_1j1h",snapToPhoto:true,src:v.preview_url});}else if(v.uri)window.open(v.uri);},_rowsFor:function(v){if(v.length===1)return [this._photo(v[0],true)];var w=3;if(v.length===2||v.length===4)w=2;var x=[];for(var y=0,z=v.length;y<z;y+=w){var aa=v.slice(y,y+w),ba=w-aa.length;while(ba>0){aa.push({attach_type:s,key:'ghost'+ba});ba--;}x.push(o.createElement('div',{className:"_2n8g",key:y},aa.map((function(ca){return this._photo(ca);}).bind(this))));}return x;},_photo:function(v,w){var x;if(v.deduplication_key){x=v.deduplication_key;}else if(v.metadata){x=v.metadata.fbid;}else x=v.upload_id;var y={attachment:v,isSingle:w||false,key:x,onClick:this._onChildClicked},z=this.props.attachType||v.attach_type;switch(z){case i.PHOTO:case i.ANIMATED_IMAGE:return o.createElement(k,y);case i.VIDEO:if(v.metadata&&v.metadata.render_as_sticker)return (o.createElement(h,{videoSize:v.metadata.dimensions,videoURI:v.url}));return o.createElement(l,y);case s:return (o.createElement('div',{key:v.key,className:"_4tsk _4rf-"}));default:throw v.attachType+' is not handled by MessengerPhotoGroup';}},_getRootClassNameFor:function(v){var w=v.length===2||v.length===4;return r(this.props.className,"_2n8h"+(v.length===1?' '+"_2n8i":'')+(w?' '+"_4ksk":'')+(v.length>1&&!w?' '+"_2n8k":''));}});f.exports=u;},null);
__d('MercuryBlockedParticipants',['MercuryIDs','MercuryActionType','MercuryDispatcher','MercurySingletonProvider','Set'],function a(b,c,d,e,f,g,h,i,j,k,l){'use strict';if(c.__markCompiled)c.__markCompiled();m.getForFBID=function(o){return n.getForFBID(o);};m.get=function(){return n.get();};function m(o){this.$MercuryBlockedParticipants1=o;this.$MercuryBlockedParticipants2=new l();this.$MercuryBlockedParticipants3=j.getForFBID(this.$MercuryBlockedParticipants1);this.$MercuryBlockedParticipants3.subscribe('update-blocked-users',(function(p,q){if(q.message_blocked_ids)this.$MercuryBlockedParticipants2=new l(q.message_blocked_ids);var r=q.actions||q.global_actions;for(var s=r,t=Array.isArray(s),u=0,s=t?s:s[typeof Symbol==='function'?Symbol.iterator:'@@iterator']();;){var v;if(t){if(u>=s.length)break;v=s[u++];}else{u=s.next();if(u.done)break;v=u.value;}var w=v;if(w.action_type!==i.UPDATE_BLOCKER_STATUS)continue;if(w.message_blocked){this.$MercuryBlockedParticipants4(w.thread_fbid);}else this.$MercuryBlockedParticipants5(w.thread_fbid);}}).bind(this));}m.prototype.getFBID=function(){return this.$MercuryBlockedParticipants1;};m.prototype.setIDs=function(o){this.$MercuryBlockedParticipants2=o;};m.prototype.getIDs=function(){return this.$MercuryBlockedParticipants6();};m.prototype.$MercuryBlockedParticipants6=function(){return this.$MercuryBlockedParticipants2;};m.prototype.$MercuryBlockedParticipants4=function(o){this.$MercuryBlockedParticipants2.add(h.getParticipantIDFromUserID(o));};m.prototype.$MercuryBlockedParticipants5=function(o){this.$MercuryBlockedParticipants2['delete'](h.getParticipantIDFromUserID(o));};m.prototype.isMessageBlocked=function(o){if(!o.is_canonical)return false;var p=o.participants.filter((function(q){return q!=h.getParticipantIDFromUserID(this.getFBID());}).bind(this));return !p.every((function(q){return !this.$MercuryBlockedParticipants2.has(q);}).bind(this));};m.prototype.isPresentInGroupThread=function(o){if(!o.is_canonical&&this.$MercuryBlockedParticipants7(o).length>0)return true;return false;};m.prototype.inGroupThread=function(o){if(o.is_canonical)return [];return this.$MercuryBlockedParticipants7(o);};m.prototype.$MercuryBlockedParticipants7=function(o){var p=o.participants.filter((function(r){return r!=h.getParticipantIDFromUserID(this.getFBID());}).bind(this)),q=p.filter((function(r){return this.$MercuryBlockedParticipants2.has(r)!==false;}).bind(this));return q;};var n=new k(m);f.exports=m;},null);
__d('MercuryUnseenState',['MercuryFolders','KeyedCallbackManager','LogHistory','MercuryActionType','MercuryDispatcher','MercurySingletonMixin','MercuryThreadInfo','MercuryThreadlistConstants','MercuryThreadIDMap','MessagingTag','MercuryServerRequests','MercuryThreadInformer','MercuryThreads','createObjectFrom','isEmpty'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v){if(c.__markCompiled)c.__markCompiled();var w=o.MAX_UNSEEN_COUNT,x='unseen_thread_hash',y='unseen_thread_list',z=j.getInstance('mercury_unseen_state');function aa(pa){this._fbid=pa;this._serverRequests=r.getForFBID(this._fbid);this._threadIDMap=p.getForFBID(this._fbid);this._threads=t.getForFBID(this._fbid);this._threadInformer=s.getForFBID(this._fbid);this._dispatcher=l.getForFBID(this._fbid);this._initialUnseenCount=null;this._lastSeenTimestamp=0;this._maxCount=false;this._pendingServerUpdates=false;this._unseenResources=new i();this._dispatcher.subscribe('update-unseen',(function(qa,ra){ga(this,ra);}).bind(this));this._dispatcher.subscribe('update-thread-ids',(function(qa,ra){ma(this,ra);}).bind(this));}Object.assign(aa.prototype,{getUnseenCount:function(){if(this.exceedsMaxCount()){z.error('unguarded_unseen_count_fetch',{});return 0;}return fa(this)||0;},exceedsMaxCount:function(){return this._maxCount||fa(this)>w;},markAsSeen:function(){var pa=fa(this);if(pa===null){this._pendingServerUpdates=true;}else if(pa>0||this._maxCount){this._serverRequests.markSeen();var qa=this._serverRequests.getLastActionTimestamp();ha(this,qa,[]);}}});Object.assign(aa,m);function ba(pa,qa,ra){var sa={};sa[qa]=0;ja(pa,sa,ra);}function ca(pa,qa){pa._unseenResources.setResource(x,qa);pa._unseenResources.setResource(y,Object.keys(qa));}function da(pa,qa){var ra=pa._unseenResources.executeOrEnqueue(x,qa),sa=pa._unseenResources.getUnavailableResources(ra);if(sa.length)pa._serverRequests.fetchUnseenThreadIDs();}function ea(pa){return pa._unseenResources.getResource(x);}function fa(pa){var qa=pa._unseenResources.getResource(y);if(qa){return qa.length;}else return pa._initialUnseenCount;}function ga(pa,qa){var ra=oa(qa);if(qa.unseen_thread_fbids){qa.unseen_thread_fbids.forEach(function(cb){if(cb.folder!=q.INBOX)return;var db=cb.thread_fbids||[];db=db.concat(cb.other_user_fbids||[]);var eb=la(pa,db),fb=pa._lastSeenTimestamp;if(ra&&ra.seen_timestamp)fb=ra.seen_timestamp;ha(pa,fb,eb);if(ra&&ra.unseen_count>w)pa._maxCount=true;});}else if(ra&&ra.seen_timestamp){pa._lastSeenTimestamp=ra.seen_timestamp;if(ra.unseen_count>w){pa._maxCount=true;ca(pa,{});}else{pa._initialUnseenCount=ra.unseen_count;if(pa._initialUnseenCount===0)ca(pa,{});}}else{if(pa._maxCount)return;var sa=qa.actions;if(!sa||!sa.length)return;var ta={},ua={};for(var va=0;va<sa.length;va++){var wa=sa[va];if(wa.is_forward)continue;var xa=wa.action_type,ya=wa.other_user_fbid?wa.other_user_fbid:wa.thread_fbid,za=wa.thread_id?wa.thread_id:ya;if(xa==k.MARK_THREAD_SEEN){ba(pa,za,wa.persistent);continue;}if(!na(pa,wa))continue;if(xa==k.USER_GENERATED_MESSAGE||xa==k.LOG_MESSAGE){var ab=ta[za]?wa.timestamp>ta[za]:false,bb=ab||!ta[za];if(wa.is_unread&&bb)pa._threads.getThreadMeta(za,function(cb){var db=false;if(cb&&cb.last_read_timestamp)if(cb.last_read_timestamp>=wa.timestamp)db=true;if(!n.isMuted(cb)&&!db)ta[za]=wa.timestamp;});}else if(xa==k.CHANGE_READ_STATUS&&wa.mark_as_read)ua[za]=wa.timestamp;}ia(pa,ta);ja(pa,ua);}if(pa._pendingServerUpdates){pa._pendingServerUpdates=false;pa.markAsSeen();}}function ha(pa,qa,ra){var sa=ea(pa);if(sa===undefined||qa>pa._lastSeenTimestamp||pa._maxCount){pa._lastSeenTimestamp=qa;ra=ra||[];if(ra.length<=w)pa._maxCount=false;var ta={},ua=ea(pa)||{};for(var va in ua)if(ua[va]!==true){var wa=ua[va];if(ka(pa,wa))ta[va]=wa;}var xa=Object.assign(u(ra,true),ta);ca(pa,xa);pa._threadInformer.updatedUnseenState();}}function ia(pa,qa){if(pa._maxCount)return;var ra={},sa=false;for(var ta in qa){var ua=qa[ta];if(ka(pa,ua)){ra[ta]=ua;sa=true;}}if(!sa)return;da(pa,function(va){for(var wa in ra){var xa=ra[wa];if(!va[wa]&&ka(pa,xa))va[wa]=ra[wa];}ca(pa,va);pa._threadInformer.updatedUnseenState();});}function ja(pa,qa,ra){var sa=false;if(!v(qa))sa=true;if(sa)da(pa,function(ta){var ua=false;for(var va in qa){var wa=qa[va],xa=wa>=ta[va];if(ta[va]&&(!wa||xa)){delete ta[va];ua=true;}}if(ua){ca(pa,ta);pa._threadInformer.updatedUnseenState();if(ra&&fa(pa)===0)pa._serverRequests.markSeen();}});}function ka(pa,qa){return qa>pa._lastSeenTimestamp;}function la(pa,qa){return qa.map(pa._threadIDMap.convertThreadIDIfAvailable,pa._threadIDMap);}function ma(pa,qa){var ra=ea(pa);if(!ra)return;for(var sa in qa){var ta=qa[sa];if(ra[sa]){ra[ta]=ra[sa];delete ra[sa];}}ca(pa,ra);}function na(pa,qa){var ra=qa.thread_id?pa._threads.getThreadMetaNow(qa.thread_id):null,sa=ra?h.getFromMeta(ra):qa.folder;return sa===q.INBOX||sa===undefined;}function oa(pa){var qa=pa.message_counts||[];for(var ra=0;ra<qa.length;ra++)if(qa[ra].folder==q.INBOX)return qa[ra];return null;}f.exports=aa;},null);
__d('MercuryMessages',['BanzaiODS','EventEmitter','ImmutableObject','LogHistory','Map','MercuryActionStatus','MercuryActionType','MercuryAssert','MercuryDispatcher','MercuryLogMessageType','MercuryMessageClientState','MercuryPayloadSource','MercurySingletonMixin','MercuryMessageActions','MercuryMessageIDs','RangedCallbackManager','MercurySendMessageFields','MercuryServerRequests','MercuryThreadActions','MercuryThreadInformer','MercuryThreads','URI','invariant','isMessengerDotComURI','mergeDeep','setImmediate'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba,ca,da,ea,fa,ga){'use strict';if(c.__markCompiled)c.__markCompiled();var ha=new i(),ia=k.getInstance('mercury_messages');function ja(sa,ta){var ua=ta;if(sa._localIdsMap[ta])ua=sa._localIdsMap[ta];return sa._messages.get(ua);}function ka(sa){switch(sa){case s.UNKNOWN:case s.SERVER_INITIAL_DATA:case s.SERVER_FETCH_THREAD_INFO:case s.SERVER_THREAD_SYNC:return true;}return false;}function la(sa,ta){if(!sa._threadsToMessages[ta])sa._threadsToMessages[ta]=new w(function(ua){return ja(sa,ua).timestamp;},function(ua,va){return va-ua;});return sa._threadsToMessages[ta];}function ma(sa,ta,ua){ta.forEach(function(va){var wa=la(sa,va);wa.setReachedEndOfArray();sa._emitReorderedChange(va,ua);});}function na(sa){this._fbid=sa;this._messageActions=u.getForFBID(this._fbid);this._serverRequests=y.getForFBID(this._fbid);this._threadInformer=aa.getForFBID(this._fbid);this._threads=ba.getForFBID(this._fbid);this._threadActions=z.getForFBID(this._fbid);this._dispatcher=p.getForFBID(this._fbid);this._didChange=false;this._failedHistoryFetchThreads={};this._threadsToMessages={};this._localTitanMessagesCount={};this._messages=new l();this._localIdsMap={};this._dispatcher.subscribe('update-messages',(function(ta,ua){var va=(ua.actions||[]).filter(function(xa){var ya=xa.action_type,za=(xa.is_forward||xa.thread_id)&&(ya==n.LOG_MESSAGE||ya==n.USER_GENERATED_MESSAGE||ya==n.SEND_MESSAGE||ya==n.DELETE_THREAD||ya==n.DELETE_MESSAGES||ya==n.MARK_MESSAGES_SPAM),ab=xa.upload_id&&xa.upload_data&&(ya==n.CANCEL_ATTACHMENT_PLACEHOLDER||ya==n.CONFIRM_ATTACHMENT_PLACEHOLDER),bb=xa.note&&ya==n.CREATE_PAGE_ADMIN_NOTE,cb=xa.replaced_message_id&&ya==n.REPLACE_MESSAGE;return za||ab||bb||cb;}),wa=ka(ua.payload_source);this.handleUpdates(va,wa,ua.payload_source,ua.from_client);if(ua.end_of_history)ma(this,ua.end_of_history,ua.payload_source);if(this._didChange){this._didChange=false;ha.emit('change');}}).bind(this));this._dispatcher.subscribe('invalidate-thread-state',(function(ta,ua){this._invalidateThreadState(ua);}).bind(this));ia.debug('constructed',{fbid:this._fbid});}Object.assign(na.prototype,{getMessagesFromIDs:function(sa){return (sa||[]).map(ja.bind(null,this)).filter(function(ta){return ta;});},getServerMessageID:function(sa){var ta=sa;if(this._localIdsMap[sa])ta=this._localIdsMap[sa];return ta;},hasLoadedNMessages:function(sa,ta){var ua=la(this,sa);return ua.hasReachedEndOfArray()||ua.getCurrentArraySize()>=ta;},hasLoadedExactlyNMessages:function(sa,ta){var ua=la(this,sa);return ua.getCurrentArraySize()==ta;},clearMercuryInternalState_DO_NOT_USE:function(){this._failedHistoryFetchThreads={};this._threadsToMessages={};this._localTitanMessagesCount={};this._messages=new l();this._localIdsMap={};},getThreadMessagesRange:function(sa,ta,ua,va,wa,xa){var ya=la(this,sa),za=(function(jb){va(oa(this,jb));}).bind(this),ab=ya.executeOrEnqueue(ta,ua,za),bb=ya.getUnavailableResources(ab),cb=this._failedHistoryFetchThreads[sa];if(bb.length&&!cb){var db=ya.getCurrentArraySize(),eb=this._localTitanMessagesCount[sa]||0,fb=db-eb,gb=bb.length+eb,hb=this.getCurrentlyLoadedMessages(sa),ib=hb.length?hb[0].timestamp:null;ia.debug('fetch_missing_messages',{threadID:sa,offset:ta,limit:ua,timestamp:ib,missingIndices:bb,messageCount:db,localMessageCount:eb});this._serverRequests.fetchThreadMessages(sa,fb,gb,ib,wa,xa);}else this._failedHistoryFetchThreads[sa]=false;return ab;},getThreadMessagesRangeNow:function(sa,ta,ua){var va=la(this,sa),wa=[];for(var xa=ta;xa<ta+ua;xa++){var ya=va.getResourceAtIndex(xa),za=ja(this,ya);za&&wa.push(za);}return wa;},getThreadMessagesSinceTimestamp:function(sa,ta){var ua=la(this,sa),va=ua.getElementsUntil(ta);return oa(this,va);},hasLoadedAllMessages:function(sa){return la(this,sa).hasReachedEndOfArray();},getCurrentlyLoadedMessages:function(sa){var ta=la(this,sa).getAllResources();return oa(this,ta);},unsubscribe:function(sa,ta){o.isThreadID(ta);var ua=la(this,ta);ua.unsubscribe(sa);},_addNewMessage:function(sa,ta){ra(ta);this._messages.set(sa,new j(ta));},_addNewPageAdminNote:function(sa,ta){var ua=this._messages.get(sa);if(ua){var va=ua.page_admin_notes?ua.page_admin_notes.slice():[],wa=false,xa=true;for(var ya=0;ya<va.length;++ya)if(va[ya].id===ta.id){wa=true;xa=false;break;}else if((va[ya].id===null||va[ya].id===undefined)&&va[ya].body===ta.body){wa=true;va[ya]=ta;}if(!wa)va.push(ta);if(xa){var za={};za.page_admin_notes=va;this._updateMessage(sa,ua,za);}}},_updateMessage:function(sa,ta,ua){var va=j.set(ta,ua);this._messages.set(sa,va);return va;},_shouldSortOutOfOrderMessages:function(sa,ta,ua){if(sa==s.CLIENT_CHANNEL_MESSAGE){var va=this.getThreadMessagesSinceTimestamp(ta,ua);if(va.length>0){h.bumpEntityKey('chat.web','channel.messages_reordered');return true;}}return false;},_preprocessIncomingAction:function(sa,ta){var ua=sa.action_type;if(ta==s.CLIENT_CHANNEL_MESSAGE&&ua==n.USER_GENERATED_MESSAGE&&sa.offline_threading_id&&this._localIdsMap[sa.offline_threading_id]===sa.offline_threading_id){sa.client_message_id=sa.offline_threading_id;sa.status=m.SUCCESS;sa.action_type=n.SEND_MESSAGE;ua=sa.action_type;}if(ta===s.CLIENT_CHANNEL_MESSAGE&&ua==n.USER_GENERATED_MESSAGE){var va=this._threads.getThreadMetaNow(sa.thread_id);if(va&&va.folder)sa.folder=va.folder;}return sa;},handleUpdates:function(sa,ta,ua,va){var wa,xa={};for(var ya=0;ya<sa.length;ya++){var za=this._preprocessIncomingAction(sa[ya],ua),ab=za.action_type,bb=ja(this,za.message_id);if(ab==n.LOG_MESSAGE)if(this.isLocalMessage(za))continue;if(za.is_forward||ua==s.SERVER_SEARCH){if(!this._messages.has(za.message_id))this._addNewMessage(za.message_id,za);continue;}else if(za.client_state===r.SEND_TO_SERVER){this._addNewMessage(za.message_id,za);continue;}else if(ab==n.SEND_MESSAGE){var cb=za.client_message_id;if(cb&&this._localIdsMap[cb]&&za.status){var db=ja(this,cb),eb=db.status;if(db.status==m.SUCCESS)continue;if(!xa[za.thread_id])xa[za.thread_id]=[];this._updateLocalMessage(za);if(typeof eb!==undefined||za.status==m.FAILED_UNKNOWN_REASON||za.status==m.UNABLE_TO_CONFIRM||za.status==m.SUCCESS||za.status==m.ERROR)this._emitUpdatedChange(za.thread_id,ja(this,cb).message_id,ua);}continue;}else if(ab==n.DELETE_THREAD){la(this,za.thread_id).removeAllResources();continue;}else if(ab==n.DELETE_MESSAGES){this._deleteMessages(za.thread_id,za.message_ids,ua);ga((function(){this._threadActions.updateSnippet(za.thread_id,za.message_ids);}).bind(this));continue;}else if(ab==n.CREATE_PAGE_ADMIN_NOTE){this._addNewPageAdminNote(za.message_id,za.note);this._emitUpdatedChange(za.thread_id,za.message_id,'link_shim');continue;}else if(za.offline_threading_id&&this._localIdsMap[za.offline_threading_id]||bb&&!bb.is_forward){if(bb&&za.ranges&&za.ranges.length>0){var fb=bb.message_id;this._updateMessage(this._localIdsMap[fb]||fb,bb,{ranges:sa.ranges});this._emitUpdatedChange(bb.thread_id,bb.message_id,'link_shim');}continue;}else if(ab===n.CONFIRM_ATTACHMENT_PLACEHOLDER){this._confirmAttachmentPlaceholder(za.upload_id,za.upload_data);continue;}else if(ab===n.CANCEL_ATTACHMENT_PLACEHOLDER){this._cancelAttachmentPlaceholder(za.upload_id,za.upload_data);continue;}else if(ab==n.REPLACE_MESSAGE){if(this._replaceMessage(za)){if(!xa[za.thread_id])xa[za.thread_id]=[];xa[za.thread_id].push(za.message_id);this._emitUpdatedChange(za.thread_id,za.replaced_message_id,ua);this._emitUpdatedChange(za.thread_id,za.message_id,ua);ta=true;}continue;}else{if(ua===s.CLIENT_SEND_MESSAGE){this._localIdsMap[za.message_id]=za.message_id;if(za.thread_id=='root:'+za.offline_threading_id)la(this,za.thread_id).setReachedEndOfArray();}if(ab==n.LOG_MESSAGE&&za.log_message_type==q.SERVER_ERROR)this._failedHistoryFetchThreads[za.thread_id]=true;if(za.client_state===r.DO_NOT_SEND_TO_SERVER&&za.upload_id)this._uploadMessages[za.upload_id]=za;if(!xa[za.thread_id])xa[za.thread_id]=[];xa[za.thread_id].push(za.message_id);this._addNewMessage(za.message_id,za);if(za.offline_threading_id&&za.offline_threading_id!=za.message_id){this._localIdsMap[za.offline_threading_id]=za.message_id;v.addServerID(za.offline_threading_id,za.message_id);if(za.threading_id)v.addServerID(za.threading_id,za.message_id);}if(za[x.MANUAL_RETRY_CNT]>0){wa=la(this,za.thread_id);wa.resortResources([za.message_id]);this._emitReorderedChange(za.thread_id,s.CLIENT_SEND_MESSAGE);}ta=ta||this._shouldSortOutOfOrderMessages(ua,za.thread_id,za.timestamp);if(!ta)this._emitReceivedChange(ja(this,za.message_id));continue;}}for(var gb in xa){wa=la(this,gb);var hb=wa.getAllResources(),ib=hb.filter((function(jb){var kb=this._messages.get(jb);if(!kb)return true;return kb.action_type==n.LOG_MESSAGE&&kb.log_message_type==q.SERVER_ERROR;}).bind(this));wa.removeResources(ib);if(va)pa(this,gb,xa[gb]);if(ta){wa.addResources(xa[gb]);this._emitReorderedChange(gb,ua);}else wa.addResourcesWithoutSorting(xa[gb].reverse(),0);this._threadInformer.updatedThread(gb);}this._didChange&&ia.debug('handle_updates',{localMessageCounts:fa(this._localTitanMessagesCount)});},isFirstMessage:function(sa){var ta=la(this,sa.thread_id);if(ta.getCurrentArraySize()===0)return false;var ua=ta.getResourceAtIndex(ta.getCurrentArraySize()-1),va=ja(this,ua).message_id,wa=ja(this,sa.message_id).message_id;return ta.hasReachedEndOfArray()&&va==wa;},isLocalMessage:function(sa){if(sa.offline_threading_id!==null&&sa.offline_threading_id===sa.message_id)return true;if(sa.threading_id!==null&&sa.threading_id===sa.message_id)return true;return false;},_deleteMessages:function(sa,ta,ua){if(!ta.length)return;this._deleteIndividualMessages(sa,ta,ua);if(ua!==s.CLIENT_CHANNEL_MESSAGE)this._serverRequests.deleteMessages(sa,ta);},_deleteIndividualMessages:function(sa,ta,ua){var va=ta.map(function(xa){return ja(this,xa).message_id;},this),wa=la(this,sa);wa.removeResources(va);this._emitReorderedChange(sa,ua);},_updateLocalMessage:function(sa){var ta=ja(this,sa.client_message_id),ua={};ua.status=sa.status;if(sa.status===m.SUCCESS||sa.error_data)ua.error_data=sa.error_data;var va=sa.message_id,wa=sa.client_message_id;if(this._messages.has(va)){this._updateMessage(va,ta,ua);return false;}if(sa.threading_id)ua.threading_id=sa.threading_id;if(sa.timestamp)ua.timestamp=sa.timestamp;if(sa.log_message_data)ua.log_message_data=sa.log_message_data;if(sa.ranges&&sa.ranges.length){ra(sa);ua.ranges=sa.ranges;}if(sa.attachments&&sa.attachments.length){ua.raw_attachments=null;ua.attachments=sa.attachments;}this._localIdsMap[wa]=va;v.addServerID(wa,va);var xa=this._updateMessage(va,ta,ua);this._messages.set(wa,new j());if(qa(xa))this._localTitanMessagesCount[xa.thread_id]--;return true;},_replaceMessage:function(sa){var ta=sa.replaced_message_id,ua=ja(this,ta);if(!ua)return false;var va={};va.status=sa.status;if(sa.timestamp)va.timestamp=sa.timestamp;if(sa.log_message_data)va.log_message_data=sa.log_message_data;if(sa.ranges&&sa.ranges.length){ra(sa);va.ranges=sa.ranges;}if(sa.attachments&&sa.attachments.length){va.raw_attachments=null;va.attachments=sa.attachments;}if(sa.body)va.body=sa.body;var wa=sa.message_id;v.addServerID(wa,wa);this._updateMessage(wa,ua,va);this._messages['delete'](ta);return true;},getNumberLocalMessages:function(sa){return this._localTitanMessagesCount[sa]||0;},_uploadMessages:{},_confirmAttachmentPlaceholder:function(sa,ta){var ua=this._popPendingAttachmentMessage(sa,ta);delete ua.preview_attachments;this._serverRequests.sendNewMessage(ua);},_cancelAttachmentPlaceholder:function(sa,ta){var ua=this._popPendingAttachmentMessage(sa,ta);this._deleteIndividualMessages(ua.thread_id,[ua.message_id]);if(this._localTitanMessagesCount[ua.thread_id])this._localTitanMessagesCount[ua.thread_id]--;},_popPendingAttachmentMessage:function(sa,ta){var ua=this._uploadMessages[sa];!ua?da(0):undefined;ua.image_ids=ta.image_ids;ua.file_ids=ta.file_ids;ua.audio_ids=ta.audio_ids;ua.gif_ids=ta.gif_ids;ua.video_ids=ta.video_ids;ua.client_state=r.SEND_TO_SERVER;delete this._uploadMessages[sa];return ua;},_emitUpdatedChange:function(sa,ta,ua){this._didChange=true;this._threadInformer.updatedMessage(sa,ta,ua);},_emitReceivedChange:function(sa){this._didChange=true;this._threadInformer.receivedMessage(sa);},_emitReorderedChange:function(sa,ta){this._didChange=true;this._threadInformer.reorderedMessages(sa,ta);},_invalidateThreadState:function(sa){if(!this._threadsToMessages[sa])return;var ta=this._threadsToMessages[sa].getAllResources();ta.forEach((function(ua){this._messages['delete'](ua);delete this._localIdsMap[ua];}).bind(this));delete this._threadsToMessages[sa];}});Object.assign(na,t,{addListener:function(sa,ta){return ha.addListener(sa,ta);}});function oa(sa,ta){var ua=ta.map(ja.bind(null,sa));return ua.reverse();}function pa(sa,ta,ua){var va=ua.filter(function(wa){return qa(ja(sa,wa));});if(!sa._localTitanMessagesCount[ta])sa._localTitanMessagesCount[ta]=0;sa._localTitanMessagesCount[ta]+=va.length;}function qa(sa){var ta=sa.action_type;if(ta==n.USER_GENERATED_MESSAGE)return true;switch(sa.log_message_type){case q.SUBSCRIBE:case q.UNSUBSCRIBE:case q.SERVER_ERROR:case q.LIVE_LISTEN:return false;default:return true;}}function ra(sa){if(!sa.ranges)return;sa.ranges.forEach(function(ta){if(!ta.entity||ta.entity.external||!ta.entity.url)return;var ua=new ca(ta.entity.url);if(ea(ca.getRequestURI())&&!ua.getDomain()){ua.setProtocol('https').setDomain('www.facebook.com');ta.entity.url=ua.toString();}});}f.exports=na;},null);
__d('MercuryChannelMessageTransformer',['MercuryActionType'],function a(b,c,d,e,f,g,h){'use strict';if(c.__markCompiled)c.__markCompiled();function i(j,k){var l={author:j.mercury_author_id,author_email:j.mercury_author_email,body:j.body,subject:j.subject,has_attachment:j.has_attachment,attachments:j.attachments,ephemeral_ttl_mode:j.ephemeral_ttl_mode,html_body:j.html_body,thread_id:j.tid,thread_fbid:j.thread_fbid&&j.thread_fbid.toString(),other_user_fbid:j.other_user_fbid&&j.other_user_fbid.toString(),offline_threading_id:j.offline_threading_id,message_id:j.mid,is_spoof_warning:j.is_spoof_warning,ranges:j.ranges,source:j.mercury_source,source_tags:j.mercury_source_tags,threading_id:j.threading_id,timestamp:j.timestamp,timestamp_absolute:j.timestamp_absolute,timestamp_relative:j.timestamp_relative,timestamp_datetime:j.timestamp_datetime,timestamp_time_passed:j.timestamp_time_passed,action_type:h.USER_GENERATED_MESSAGE,is_unread:j.is_unread,is_forward:false,forward_count:j.forward_count||j.forward,forward_message_ids:j.forward_msg_ids,folder:k,sync_id:undefined,action_id:undefined};if('sync_id' in j){l.sync_id=j.sync_id;}else l.action_id=j.action_id;return l;}f.exports={transform:i};},null);
__d('MercuryChannelHandler',['Arbiter','ChannelConstants','MercuryActionType','MercuryChannelMessageTransformer','MercuryConfig','MercuryDelayedDispatcher','MercuryGlobalActionType','MercuryLogMessageType','MercuryMessages','MercuryPayloadSource','MercuryServerPayloadPreprocessor','MercurySingletonMixin','MercuryThreadInformer','MercuryViewer','MessagingEvent','MessagingTag','PresenceUtil','mixin'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y){if(c.__markCompiled)c.__markCompiled();var z,aa;z=babelHelpers.inherits(ba,y(s));aa=z&&z.prototype;function ba(ca){'use strict';aa.constructor.call(this);this.$MercuryChannelHandler1=ca;this.__payloadPreprocessor=r.getForFBID(this.$MercuryChannelHandler1);this.$MercuryChannelHandler2=t.getForFBID(this.$MercuryChannelHandler1);this.$MercuryChannelHandler3=p.getForFBID(this.$MercuryChannelHandler1);this.__delayedDispatcher=m.getForFBID(this.$MercuryChannelHandler1);this.$MercuryChannelHandler4=[];}ba.prototype.getInstanceFBID=function(){'use strict';return this.$MercuryChannelHandler1;};ba.prototype.$MercuryChannelHandler5=function(ca,da){'use strict';if(!this.$MercuryChannelHandler6(ca)||!da.obj||!da.obj.message)return;var ea=da.obj.message,fa=ea.other_user_fbid?ea.other_user_fbid:ea.thread_fbid;fa=fa.toString();var ga=k.transform(ea,da.obj.folder);if(this.__shouldDropMessageBecauseOfSync(ea))return;var ha=[babelHelpers._extends({},ga)];ha=ha.concat(ea.forward_actions||[]);var ia=q.CLIENT_CHANNEL_MESSAGE;this.__delayedDispatcher.handleUpdateWaitForThread({actions:ha,payload_source:ia},fa);};ba.prototype.$MercuryChannelHandler7=function(ca,da){'use strict';if(l.WWWSyncDeliveryReceipt)return;var ea=da.obj.other_user_fbid,fa=da.obj.thread_fbid;if(!this.$MercuryChannelHandler6(ca)||!ea&&!fa)return;this.__payloadPreprocessor.handleUpdate({delivery_receipts:[{other_user_fbid:ea?ea.toString():'',thread_fbid:fa?fa.toString():'',time:da.obj.timestamp}]});};ba.prototype.$MercuryChannelHandler8=function(ca,da){'use strict';if(!this.$MercuryChannelHandler6(ca)||!da.obj||!da.obj.thread_fbids&&!da.obj.other_user_fbids)return;var ea=[],fa=da.obj.event==v.READ;if(fa&&l.WWWSyncMarkRead)return;(da.obj.thread_fbids||[]).forEach(function(ga){ea.push({action_type:j.CHANGE_READ_STATUS,action_id:null,thread_fbid:ga,mark_as_read:fa,timestamp:da.obj.timestamp||0,folder:da.obj.folder_info[ga]});});(da.obj.other_user_fbids||[]).forEach(function(ga){ea.push({action_type:j.CHANGE_READ_STATUS,action_id:null,other_user_fbid:ga,mark_as_read:fa,timestamp:da.obj.timestamp||0,folder:da.obj.folder_info[ga]});});this.__payloadPreprocessor.handleUpdate({actions:ea,payload_source:q.CLIENT_CHANNEL_MESSAGE});};ba.prototype.$MercuryChannelHandler9=function(ca,da){'use strict';if(!this.$MercuryChannelHandler6(ca)||!da.obj||!(da.obj.thread_fbids||da.obj.other_user_fbids))return;var ea=[];(da.obj.thread_fbids||[]).forEach(function(fa){ea.push({action_type:j.DELETE_THREAD,action_id:null,thread_fbid:fa});});(da.obj.other_user_fbids||[]).forEach(function(fa){ea.push({action_type:j.DELETE_THREAD,action_id:null,other_user_fbid:fa});});this.__payloadPreprocessor.handleUpdate({actions:ea,payload_source:q.CLIENT_CHANNEL_MESSAGE});};ba.prototype.$MercuryChannelHandler10=function(ca,da){'use strict';if(!this.$MercuryChannelHandler6(ca)||!da.obj||!da.obj.thread_fbids&&!da.obj.other_user_fbids||!da.obj.mids)return;var ea=da.obj.thread_fbids.length?da.obj.thread_fbids[0]:null,fa=da.obj.other_user_fbids.length?da.obj.other_user_fbids[0]:null,ga={action_type:j.DELETE_MESSAGES,action_id:null,thread_fbid:ea,other_user_fbid:fa,message_ids:da.obj.mids};if(l.MessengerGlobalDeleteGK){if(da.obj.updated_thread)return;this.__payloadPreprocessor.handleUpdate({actions:[ga],payload_source:q.CLIENT_CHANNEL_MESSAGE});return;}this.__payloadPreprocessor.handleUpdate({actions:[ga],payload_source:q.CLIENT_CHANNEL_MESSAGE});};ba.prototype.$MercuryChannelHandler11=function(ca,da){'use strict';if(!this.$MercuryChannelHandler6(ca)||!da.obj||!da.obj.folder)return;var ea={action_type:n.MARK_ALL_READ,action_id:da.obj.action_id,folder:da.obj.folder};this.__payloadPreprocessor.handleUpdate({global_actions:[ea]});};ba.prototype.$MercuryChannelHandler12=function(ca,da){'use strict';if(!this.$MercuryChannelHandler6(ca)||!da.obj.thread_fbids&&!da.obj.other_user_fbids)return;var ea=q.CLIENT_CHANNEL_MESSAGE;(da.obj.thread_fbids||[]).forEach(function(fa){var ga={action_type:j.CHANGE_ARCHIVED_STATUS,action_id:null,thread_fbid:fa.toString(),other_user_fbid:null,archived:da.obj.state};this.__delayedDispatcher.handleUpdateWaitForThread({actions:[babelHelpers._extends({},ga)],payload_source:ea},fa.toString());},this);(da.obj.other_user_fbids||[]).forEach(function(fa){var ga={action_type:j.CHANGE_ARCHIVED_STATUS,action_id:null,thread_fbid:null,other_user_fbid:fa.toString(),archived:da.obj.state};this.__delayedDispatcher.handleUpdateWaitForThread({actions:[babelHelpers._extends({},ga)],payload_source:ea},fa.toString());},this);};ba.prototype.$MercuryChannelHandler13=function(ca,da){'use strict';if(!this.$MercuryChannelHandler6(ca)||!da.obj.thread_fbids&&!da.obj.other_user_fbids)return;var ea=q.CLIENT_CHANNEL_MESSAGE,fa;(da.obj.thread_fbids||[]).forEach(function(ga){if(da.obj.event==v.TAG){fa=da.obj.tag;}else fa=da.obj.marked_as_spam?w.SPAM:w.INBOX;var ha={action_type:j.CHANGE_FOLDER,action_id:null,thread_fbid:ga.toString(),other_user_fbid:null,new_folder:fa};this.__delayedDispatcher.handleUpdateWaitForThread({actions:[babelHelpers._extends({},ha)],payload_source:ea},ga.toString());},this);(da.obj.other_user_fbids||[]).forEach(function(ga){if(da.obj.event==v.TAG){fa=da.obj.tag;}else fa=da.obj.marked_as_spam?w.SPAM:w.INBOX;var ha={action_type:j.CHANGE_FOLDER,action_id:null,other_user_fbid:ga.toString(),thread_fbid:null,new_folder:fa};this.__delayedDispatcher.handleUpdateWaitForThread({actions:[babelHelpers._extends({},ha)],payload_source:ea},ga.toString());},this);};ba.prototype.$MercuryChannelHandler14=function(ca,da){'use strict';if(!this.$MercuryChannelHandler6(ca)||!da.obj.tag)return;switch(da.obj.tag){case w.ACTION_ARCHIVED:this.$MercuryChannelHandler12(ca,da);break;case w.INBOX:case w.OTHER:this.$MercuryChannelHandler13(ca,da);break;}};ba.prototype.__markAsSeen=function(ca,da){'use strict';if(!this.$MercuryChannelHandler15(ca)||!da.obj||!da.obj.seen_timestamp)return;this.__payloadPreprocessor.handleUpdate({message_counts:[{seen_timestamp:da.obj.seen_timestamp,folder:w.INBOX}],unseen_thread_fbids:[{thread_fbids:[],other_user_fbids:[],folder:w.INBOX}],payload_source:q.CLIENT_CHANNEL_MESSAGE});};ba.prototype.__updateModelsFromMercuryPayload=function(ca,da){'use strict';if(!this.$MercuryChannelHandler16(ca)||!da.obj)return;this.$MercuryChannelHandler2.synchronizeInforms((function(){var ea=da.obj,fa=[];(ea.actions||[]).forEach(function(ga){var ha=j.USER_GENERATED_MESSAGE;if(ga.action_type==j.LOG_MESSAGE){if(this.__shouldDropLogMessageBecauseOfSync(ga))return;var ia=q.CLIENT_CHANNEL_MESSAGE,ja;ja=ga.other_user_fbid||ga.thread_fbid;this.__delayedDispatcher.handleUpdateWaitForThread({actions:[babelHelpers._extends({},ga)],payload_source:ia},ja);}else if(ga.action_type!=ha)fa.push(ga);},this);ea.actions=fa;ea.payload_source=q.CLIENT_CHANNEL_MESSAGE;this.__payloadPreprocessor.handleUpdate(ea);}).bind(this));};ba.prototype.$MercuryChannelHandler17=function(ca,da){'use strict';var ea,fa;if(l.WWWSyncReadReceipt)return;var ga=da.obj.time,ha=da.obj.reader,ia=da.obj.thread_fbid||'';this.__payloadPreprocessor.handleUpdate({roger:(fa={},fa[ia]=(ea={},ea[ha]=ga,ea),fa)});};ba.prototype.$MercuryChannelHandler18=function(ca,da){'use strict';if(!this.$MercuryChannelHandler6(ca)||!da.obj||da.obj.message_blocked===undefined||!da.obj.thread_fbid)return;var ea=j.UPDATE_BLOCKER_STATUS,fa=[{action_type:ea,action_id:null,thread_fbid:da.obj.thread_fbid,message_blocked:da.obj.message_blocked,is_blocked_by_recipient:da.obj.is_blocked_by_recipient}];this.__payloadPreprocessor.handleUpdate({actions:fa,payload_source:q.CLIENT_CHANNEL_MESSAGE});};ba.prototype.$MercuryChannelHandler19=function(ca,da){'use strict';if(!this.$MercuryChannelHandler6(ca)||!da.obj||da.obj.got_blocked===undefined||!da.obj.thread_fbid)return;var ea=j.UPDATE_BLOCKEE_STATUS,fa=[{action_type:ea,action_id:null,thread_fbid:da.obj.thread_fbid,got_blocked:da.obj.got_blocked}];this.__payloadPreprocessor.handleUpdate({actions:fa,payload_source:q.CLIENT_CHANNEL_MESSAGE});};ba.prototype.$MercuryChannelHandler20=function(ca,da){'use strict';if(!this.$MercuryChannelHandler6(ca)||!da.obj||da.obj.mute_settings===undefined||!da.obj.thread_fbid&&!da.obj.other_user_fbid)return;var ea=j.CHANGE_MUTE_SETTINGS,fa=[{action_type:ea,action_id:null,thread_fbid:da.obj.thread_fbid,other_user_fbid:da.obj.other_user_fbid,mute_settings:da.obj.mute_settings}];this.__payloadPreprocessor.handleUpdate({actions:fa,payload_source:q.CLIENT_CHANNEL_MESSAGE});};ba.prototype.__handleMessagingPayload=function(ca,da){'use strict';switch(da.obj.event){case v.DELIVER:this.$MercuryChannelHandler5(ca,da);break;case v.DELIVERY_RECEIPT:this.$MercuryChannelHandler7(ca,da);break;case v.READ:case v.UNREAD:this.$MercuryChannelHandler8(ca,da);break;case v.READ_ALL:this.$MercuryChannelHandler11(ca,da);break;case v.DELETE:this.$MercuryChannelHandler9(ca,da);break;case v.DELETE_MESSAGES:this.$MercuryChannelHandler10(ca,da);break;case v.TAG:this.$MercuryChannelHandler14(ca,da);break;case v.REPORT_SPAM:this.$MercuryChannelHandler13(ca,da);break;case v.READ_RECEIPT:this.$MercuryChannelHandler17(ca,da);break;case v.CHANGE_MUTE_SETTINGS:this.$MercuryChannelHandler20(ca,da);break;case v.UPDATE_BLOCKER_STATUS:this.$MercuryChannelHandler18(ca,da);break;case v.UPDATE_BLOCKEE_STATUS:this.$MercuryChannelHandler19(ca,da);break;}};ba.prototype.getRouting=function(){'use strict';return {mercury:this.__updateModelsFromMercuryPayload,messaging:this.__handleMessagingPayload,inbox:this.__markAsSeen};};ba.prototype.__getMessagingPayloadType=function(){'use strict';return i.getArbiterType('messaging');};ba.prototype.__getMercuryPayloadType=function(){'use strict';return i.getArbiterType('mercury');};ba.prototype.__getInboxPayloadType=function(){'use strict';return i.getArbiterType('inbox');};ba.prototype.$MercuryChannelHandler6=function(ca){'use strict';return ca==this.__getMessagingPayloadType();};ba.prototype.$MercuryChannelHandler16=function(ca){'use strict';return ca==this.__getMercuryPayloadType();};ba.prototype.$MercuryChannelHandler15=function(ca){'use strict';return ca==this.__getInboxPayloadType();};ba.prototype.turnOn=function(){'use strict';if(!this.$MercuryChannelHandler4.length){var ca=this.getRouting();for(var da in ca)this.$MercuryChannelHandler4.push(h.subscribe(i.getArbiterType(da),ca[da].bind(this)));}return this;};ba.prototype.turnOff=function(){'use strict';if(this.$MercuryChannelHandler4.length){this.$MercuryChannelHandler4.forEach(h.unsubscribe);this.$MercuryChannelHandler4=[];}return this;};ba.prototype.__shouldDropMessageBecauseOfSync=function(ca){'use strict';if(!ca.has_attachment&&l.WWWSyncMsgText){return true;}else if(ca.has_attachment&&l.WWWSyncMsgAttach)return true;return false;};ba.prototype.__shouldDropLogMessageBecauseOfSync=function(ca){'use strict';if(l.WWWSyncMsgLog)switch(ca.log_message_type){case o.UNSUBSCRIBE:case o.SUBSCRIBE:case o.THREAD_NAME:case o.VIDEO_CALL:case o.PHONE_CALL:return true;default:break;}return false;};Object.assign(ba,s);f.exports=ba;},null);
__d('MercuryOrderedThreadlist',['LogHistory','MercuryActionType','MercuryDispatcher','MercuryFilters','MercuryFolders','MercuryPayloadSource','MercurySingletonMixin','MercuryThreadIDMap','MessagingTag','PageMessageEnumTag','RangedCallbackManager','MercuryServerRequests','MercuryThreadInformer','MercuryThreads','arrayContains'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v){'use strict';if(c.__markCompiled)c.__markCompiled();var w=h.getInstance('ordered_threadlist_model'),x=k.getSupportedFilters().concat([k.ALL,p.GROUPS]),y=l.getSupportedFolders().concat([p.SPAM]);function z(ja,ka,la,ma){var na=[],oa=false,pa=false,qa=(ka||[]).filter(function(xa){var ya=xa.filter||k.ALL;return (xa.folder==la||!xa.folder&&la==p.INBOX)&&ya==ma;}),ra=ja._threadlistOrderMap[la][ma].getAllResources(),sa;qa.forEach(function(xa){na=na.concat(xa.thread_ids);if(xa.error){if(xa.end>ra.length)pa=xa.error;}else{var ya=xa.end-xa.start;if(xa.thread_ids.length<ya)oa=true;}if(!sa||xa.end>sa)sa=xa.end;});da(ja,na,la,ma);if(oa){ja._threadlistOrderMap[la][ma].setReachedEndOfArray();}else if(pa){ja._threadlistOrderMap[la][ma].setError(pa);}else{var ta=ja._threadlistOrderMap[la][ma].getCurrentArraySize();if(sa&&ta<sa){var ua={},va=ra.concat(na),wa=va.filter(function(xa){var ya=ua[xa];ua[xa]=true;return ya;});if(wa.length){w.warn('duplicate_threads',{folder:la,expected_final_size:sa,actual_final_size:ta,duplicate_thread_ids:wa});ja._serverRequests.fetchThreadlistInfo(sa,wa.length,la,ma==k.ALL?null:ma);}}}}function aa(ja,ka){y.forEach(function(la){x.forEach(function(ma){z(ja,ka,la,ma);});});}function ba(ja,ka){var la={};y.forEach(function(ma){la[ma]={};x.forEach(function(na){la[ma][na]={to_add:[],to_remove:[],to_remove_if_last_after_add:{}};});});ka.forEach(function(ma){if(ma.is_forward)return;var na=ma.thread_id,oa=ea(ja,na),pa=fa(ja,na);function qa(){pa.forEach(function(sa){if(!v(x,sa))return;la[oa][sa].to_add.push(na);if(!ja._threadlistOrderMap[oa][sa].hasReachedEndOfArray()&&!ja._threadlistOrderMap[oa][sa].hasResource(na))la[oa][sa].to_remove_if_last_after_add[na]=true;});}function ra(sa){if(v(x,sa))if(v(pa,sa)){la[oa][sa].to_add.push(na);}else la[oa][sa].to_remove.push(na);}if(!oa){if(ma.action_type===i.CHANGE_FOLDER||ma.action_type===i.CHANGE_ARCHIVED_STATUS)y.forEach(function(sa){if(sa!==oa)x.forEach(function(ta){ja._threadlistOrderMap[sa][ta].removeResources([na]);});});return;}switch(ma.action_type){case i.DELETE_THREAD:pa.forEach(function(sa){if(!v(x,sa))return;la[oa][sa].to_remove.push(na);});break;case i.CHANGE_ARCHIVED_STATUS:case i.CHANGE_FOLDER:qa();break;case i.CHANGE_READ_STATUS:ra(p.UNREAD);break;case i.USER_GENERATED_MESSAGE:case i.LOG_MESSAGE:pa.forEach(function(sa){if(!v(x,sa))return;if(ga(ja,na,oa,sa))la[oa][sa].to_add.push(na);});break;case i.CHANGE_FLAG:ra(q.FLAG);break;}});y.forEach(function(ma){x.forEach(function(na){var oa=ja._threadlistOrderMap[ma][na];da(ja,la[ma][na].to_add,ma,na);for(var pa=oa.getCurrentArraySize()-1;pa>=0;pa--){var qa=oa.getResourceAtIndex(pa);if(!la[ma][na].to_remove_if_last_after_add[qa])break;la[ma][na].to_remove.push(qa);}oa.removeResources(la[ma][na].to_remove);});});}function ca(ja,ka){var la={};y.forEach(function(ma){la[ma]={};x.forEach(function(na){la[ma][na]=[];});});ka.forEach(function(ma){var na=ea(ja,ma.thread_id),oa=fa(ja,ma.thread_id);if(na)oa.forEach(function(pa){if(ga(ja,ma.thread_id,na,pa))la[na][pa].push(ma.thread_id);});});y.forEach(function(ma){x.forEach(function(na){if(la[ma][na].length>0)da(ja,la[ma][na],ma,na);});});}function da(ja,ka,la,ma){ma=ma||k.ALL;ja._threadlistOrderMap[la][ma].addResources(ka);y.forEach(function(na){if(na!=la)ja._threadlistOrderMap[na][ma].removeResources(ka);});}function ea(ja,ka){var la=ja._threads.getThreadMetaNow(ka),ma=null;if(!la){ma='No thread metadata';}else if(!la.folder)ma='No thread folder';if(ma){var na={error:ma,tid:ka};w.warn('no_thread_folder',na);return null;}var oa=la.folder;if(la.is_archived)oa=p.ACTION_ARCHIVED;if(ja._threadlistOrderMap[oa]){return oa;}else return null;}function fa(ja,ka){var la=ja._threads.getThreadMetaNow(ka),ma=[k.ALL];if(!la){var na={error:'no_thread_metadata',tid:ka};w.warn('no_thread_metadata',na);return [];}if(la.unread_count)ma.push(p.UNREAD);if(!la.is_canonical)ma.push(p.GROUPS);var oa=la.page_thread_info;if(oa&&oa.flagged)ma.push(q.FLAG);return ma;}function ga(ja,ka,la,ma){var na=ja._threads.getThreadMetaNow(ka);return !!(na&&na.timestamp&&ea(ja,ka)==la&&v(fa(ja,ka),ma));}function ha(ja){this._fbid=ja;this._serverRequests=s.getForFBID(this._fbid);this._threadIDMap=o.getForFBID(this._fbid);this._threadInformer=t.getForFBID(this._fbid);this._threads=u.getForFBID(this._fbid);this._dispatcher=j.getForFBID(this._fbid);this._threadlistOrderMap={};y.forEach((function(ka){this._threadlistOrderMap[ka]={};x.forEach((function(la){this._threadlistOrderMap[ka][la]=new r((function(ma){return this._threads.getThreadMetaNow(ma).timestamp;}).bind(this),function(ma,na){return na-ma;},this._threadIDMap.canLinkExternally.bind(this._threadIDMap));}).bind(this));}).bind(this));this._dispatcher.subscribe('update-threadlist',(function(ka,la){if(!ia(la))return;var ma=la.ordered_threadlists;if(ma&&ma.length){aa(this,ma);}else{var na=(la.actions||[]).filter(function(oa){return oa.thread_id;});ca(this,la.threads||[]);ba(this,na);}this._threadInformer.updatedThreadlist();}).bind(this));}Object.assign(ha.prototype,{getThreadlistOrderMap:function(ja,ka){if(!this._threadlistOrderMap[ja][ka]){x=x.concat([ka]);y.forEach((function(la){this._threadlistOrderMap[la][ka]=new r((function(ma){return this._threads.getThreadMetaNow(ma).timestamp;}).bind(this),function(ma,na){return na-ma;},this._threadIDMap.canLinkExternally.bind(this._threadIDMap));}).bind(this));}return this._threadlistOrderMap[ja][ka];},getThreadlist:function(ja,ka,la,ma,na,oa){return this.getFilteredThreadlist(ja,ka,la,k.ALL,ma,na,oa);},getFilteredThreadlist:function(ja,ka,la,ma,na,oa,pa){var qa=this.getThreadlistOrderMap(la,ma),ra=qa.executeOrEnqueue(ja,ka,na,oa),sa=qa.getUnavailableResources(ra),ta=qa.getError(ja,ka,oa);if(sa.length||ta){if(qa.getCurrentArraySize()<ja){var ua={start:ja,limit:ka,filter:ma,resources_size:qa.getCurrentArraySize()};w.warn('range_with_gap',ua);}qa.setError(false);this._serverRequests.fetchThreadlistInfo(qa.getCurrentArraySize(),sa.length,la,ma==k.ALL?null:ma,pa);}return ra;},getThreadlistUntilTimestamp:function(ja,ka,la){la=la||k.ALL;return this.getThreadlistOrderMap(ka,la).getElementsUntil(ja);},getAvailableThreadlistNow:function(ja,ka){ka=ka||k.ALL;return this.getThreadlistOrderMap(ja,ka).getAllResources();},getThreadCount:function(ja,ka){ka=ka||k.ALL;return this.getThreadlistOrderMap(ja,ka).getCurrentArraySize();},hasLoadedThreadlist:function(ja,ka){ka=ka||k.ALL;return this.getThreadlistOrderMap(ja,ka).hasReachedEndOfArray();},unsubscribe:function(ja,ka,la){la=la||k.ALL;this.getThreadlistOrderMap(ka,la).unsubscribe(ja);}});Object.assign(ha,n);function ia(ja){switch(ja.payload_source){case m.CLIENT_CHANGE_ARCHIVED_STATUS:case m.CLIENT_CHANGE_READ_STATUS:case m.CLIENT_CHANGE_FOLDER:case m.CLIENT_CHANNEL_MESSAGE:case m.CLIENT_DELETE_MESSAGES:case m.CLIENT_DELETE_THREAD:case m.CLIENT_SEND_MESSAGE:case m.SERVER_SEND_MESSAGE:case m.SERVER_FETCH_THREADLIST_INFO:case m.SERVER_THREAD_SYNC:return true;case m.SERVER_INITIAL_DATA:return !!ja.ordered_threadlists;default:return false;}}f.exports=ha;},null);
__d('MercurySyncDeliveryReceiptTransformer',[],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();function h(i){return {delivery_receipts:[{other_user_fbid:i.threadKey.otherUserFbId?i.threadKey.otherUserFbId:'',thread_fbid:i.threadKey.threadFbId?i.threadKey.threadFbId:'',time:parseInt(i.deliveredWatermarkTimestampMs,10)}]};}f.exports={transform:h};},null);
__d('MercurySyncMarkReadTransformer',['MercuryActionType','MessagingTag'],function a(b,c,d,e,f,g,h,i){'use strict';if(c.__markCompiled)c.__markCompiled();function j(k){return k.threadKeys.map(function(l){return {action_type:h.CHANGE_READ_STATUS,action_id:null,other_user_fbid:l.otherUserFbId,thread_fbid:l.threadFbId,mark_as_read:true,timestamp:parseInt(k.watermarkTimestamp,10),folder:i.INBOX};});}f.exports={transform:j};},null);
__d('MercurySyncNewMessageTransformer',['IrisProtocolMessageLifetime','MercuryActionType','MercuryIDs','MercuryTimestamp','MessagingTag'],function a(b,c,d,e,f,g,h,i,j,k,l){'use strict';if(c.__markCompiled)c.__markCompiled();function m(n,o){var p=parseInt(o.messageMetadata.timestamp,10),q=k.getFormatedTimestamp(p),r=[];if(o.attachments)r=o.attachments.map(function(t){return t.mercury;});var s=o.messageMetadata.tags?o.messageMetadata.tags[0]:undefined;return {message_id:o.messageMetadata.messageId,threading_id:null,offline_threading_id:o.messageMetadata.offlineThreadingId,author:j.getParticipantIDFromUserID(o.messageMetadata.actorFbId),author_email:o.messageMetadata.actorFbId+'@facebook.com',ephemeral_ttl_mode:o.ttl?h[o.ttl]:0,timestamp:p,timestamp_absolute:q.absolute,timestamp_relative:q.relative,timestamp_datetime:q.relative,timestamp_time_passed:k.getTimeBucket(p),is_unread:n!==o.messageMetadata.actorFbId,is_forward:false,is_filtered_content:false,is_filtered_content_bh:false,is_filtered_content_account:false,is_filtered_content_quasar:false,is_filtered_content_invalid_app:false,forward_count:0,forward_message_ids:[],source:s,is_spoof_warning:false,folder:l.INBOX,thread_fbid:o.messageMetadata.threadKey.threadFbId,other_user_fbid:o.messageMetadata.threadKey.otherUserFbId,body:o.body!==undefined?o.body:'',html_body:null,subject:null,has_attachment:r.length>0,attachments:r,ranges:undefined,thread_id:null,action_id:null,action_type:i.USER_GENERATED_MESSAGE,is_from_iris:true};}f.exports={transform:m};},null);
__d('MercurySyncDispatcher',['Arbiter','Map','MercuryConfig','MercuryDelayedDispatcher','MercuryPayloadSource','MercuryServerPayloadPreprocessor','MercurySyncDeliveryReceiptTransformer','MercurySyncForcedFetchHandler','MercurySyncMarkReadTransformer','MercurySyncNewMessageTransformer','MercurySyncReadReceiptTransformer','MercurySyncParticipantLeftGroupThreadTransformer','MercurySyncParticipantsAddedToGroupThreadTransformer','MercurySyncRTCEventLogTransformer','MercurySyncThreadNameTransformer','MercurySyncReplaceMessageTransformer','MercurySyncDeltaTypes','MercurySingletonProvider'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y){'use strict';if(c.__markCompiled)c.__markCompiled();z.getForFBID=function(ba){return aa.getForFBID(ba);};z.get=function(){return aa.get();};function z(ba){this.$MercurySyncDispatcher1=ba;this.$MercurySyncDispatcher2=k.getForFBID(this.$MercurySyncDispatcher1);this.$MercurySyncDispatcher3=m.getForFBID(this.$MercurySyncDispatcher1);this.$MercurySyncDispatcher4=o.getForFBID(this.$MercurySyncDispatcher1);h.subscribe('channel/message:delta',(function(ca,da){var ea=da&&da.obj&&da.obj.delta;if(!ea)return;this.process(ea);}).bind(this));}z.prototype.process=function(ba){var ca;switch(ba['class']){case x.NewMessage:if(!this.$MercurySyncDispatcher5(ba))break;ca=q.transform(this.$MercurySyncDispatcher1,ba);this.$MercurySyncDispatcher6(ca);break;case x.ReplaceMessage:if(!this.$MercurySyncDispatcher5(ba))break;ca=w.transform(this.$MercurySyncDispatcher1,ba);this.$MercurySyncDispatcher6(ca);break;case x.DeliveryReceipt:if(!j.WWWSyncDeliveryReceipt)break;ca=n.transform(ba);this.$MercurySyncDispatcher3.handleUpdate(ca);break;case x.MarkRead:if(!j.WWWSyncMarkRead)break;ca=p.transform(ba);this.$MercurySyncDispatcher7(ca);break;case x.ParticipantLeftGroupThread:if(!j.WWWSyncMsgLog)break;ca=s.transform(this.$MercurySyncDispatcher1,ba);this.$MercurySyncDispatcher6(ca);break;case x.ParticipantsAddedToGroupThread:if(!j.WWWSyncMsgLog)break;ca=t.transform(this.$MercurySyncDispatcher1,ba);this.$MercurySyncDispatcher6(ca);break;case x.RTCEventLog:if(!j.WWWSyncMsgLog)break;ca=u.transform(this.$MercurySyncDispatcher1,ba);this.$MercurySyncDispatcher6(ca);break;case x.ThreadName:if(!j.WWWSyncMsgLog)break;ca=v.transform(this.$MercurySyncDispatcher1,ba);this.$MercurySyncDispatcher6(ca);break;case x.ReadReceipt:if(!j.WWWSyncReadReceipt)break;ca=r.transform(ba);this.$MercurySyncDispatcher3.handleUpdate(ca);break;case x.ForcedFetch:if(!j.WWWSyncMsgText)return;this.$MercurySyncDispatcher4.process(ba);break;default:break;}};z.prototype.$MercurySyncDispatcher5=function(ba){var ca=!!ba.stickerId||ba.attachments&&!!ba.attachments.length;if(!ca&&!j.WWWSyncMsgText){return false;}else if(ca&&!j.WWWSyncMsgAttach)return false;return true;};z.prototype.$MercurySyncDispatcher6=function(ba){var ca=ba.other_user_fbid||ba.thread_fbid;this.$MercurySyncDispatcher2.handleUpdateWaitForThread({actions:[ba],payload_source:l.CLIENT_CHANNEL_MESSAGE},ca);};z.prototype.$MercurySyncDispatcher7=function(ba){this.$MercurySyncDispatcher3.handleUpdate({actions:ba,payload_source:l.CLIENT_CHANNEL_MESSAGE});};var aa=new y(z);f.exports=z;},null);
__d('MercuryUnreadState',['MercuryFolders','LogHistory','KeyedCallbackManager','MercuryActionType','MercuryDispatcher','MercuryGlobalActionType','MercurySingletonMixin','MercuryThreadlistConstants','MercuryThreadIDMap','MessagingTag','MercuryServerRequests','MercuryThreadInformer','MercuryThreads','arrayContains','createObjectFrom'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v){if(c.__markCompiled)c.__markCompiled();var w=(h.getSupportedFolders()||[]).filter(function(oa){return oa!=q.ACTION_ARCHIVED;}),x='unread_thread_hash',y='unseen_thread_list',z=o.MAX_UNREAD_COUNT,aa=i.getInstance('mercury_unread_state');function ba(oa){this._fbid=oa;this._serverRequests=r.getForFBID(this._fbid);this._threadIDMap=p.getForFBID(this._fbid);this._threadInformer=s.getForFBID(this._fbid);this._threads=t.getForFBID(this._fbid);this._dispatcher=l.getForFBID(this._fbid);this._allReadTimestamp={};this._threadReadTimestamp={};this._initialUnreadCount={};this._maxCount={};this._unreadResources={};w.forEach((function(pa){this._initialUnreadCount[pa]=0;this._maxCount[pa]=false;this._unreadResources[pa]=new j();}).bind(this));this._dispatcher.subscribe('update-unread',(function(pa,qa){ga(this,qa);var ra=qa.global_actions||[];for(var sa=0;sa<ra.length;sa++){var ta=ra[sa];if(ta.action_type==m.MARK_ALL_READ)ja(this,ta.folder,ta.timestamp);}}).bind(this));this._dispatcher.subscribe('update-thread-ids',(function(pa,qa){la(this,qa);}).bind(this));}Object.assign(ba.prototype,{getUnreadCount:function(oa){if(this.exceedsMaxCount(oa)){aa.error('unguarded_unread_count_fetch',{});return 0;}return fa(this,oa);},exceedsMaxCount:function(oa){return this._maxCount[oa]||fa(this,oa)>z;},markFolderAsRead:function(oa){if(this._maxCount[oa]||fa(this,oa)>0)this._serverRequests.markFolderAsRead(oa);},getIsThreadUnread:function(oa,pa){var qa=pa||q.INBOX,ra=ea(this,qa);return ra&&ra[oa];}});Object.assign(ba,n);function ca(oa,pa,qa){oa._unreadResources[pa].setResource(x,qa);oa._unreadResources[pa].setResource(y,Object.keys(qa));}function da(oa,pa,qa){var ra=oa._unreadResources[pa].executeOrEnqueue(x,qa),sa=oa._unreadResources[pa].getUnavailableResources(ra);if(sa.length)oa._serverRequests.fetchUnreadThreadIDs(pa);}function ea(oa,pa){return oa._unreadResources[pa].getResource(x);}function fa(oa,pa){var qa=oa._unreadResources[pa].getResource(y);if(qa){return qa.length;}else return oa._initialUnreadCount[pa];}function ga(oa,pa){var qa;(pa.unread_thread_fbids||[]).forEach(function(ra){qa=ra.folder;if(!na(qa))return;var sa=ra.thread_fbids||[];sa=sa.concat(ra.other_user_fbids||[]);var ta=ka(oa,sa);ca(oa,qa,v(ta,true));if(ta.length>z)oa._maxCount[qa]=true;oa._threadInformer.updatedUnreadState();});(pa.message_counts||[]).forEach(function(ra){if(ra.unread_count===undefined)return;qa=ra.folder;if(ra.unread_count>z){oa._maxCount[qa]=true;ca(oa,qa,{});oa._threadInformer.updatedUnreadState();}else{oa._initialUnreadCount[qa]=ra.unread_count;if(oa._initialUnreadCount[qa]===0)ca(oa,qa,{});oa._threadInformer.updatedUnreadState();}});(pa.actions||[]).forEach(function(ra){if(ra.is_forward)return;var sa=k,ta=ra.other_user_fbid?ra.other_user_fbid:ra.thread_fbid,ua=ra.thread_id?ra.thread_id:ta;if(ra.action_type==sa.DELETE_THREAD){w.forEach(function(wa){ia(oa,wa,ua);});}else if(ra.action_type==sa.CHANGE_ARCHIVED_STATUS||ra.action_type==sa.CHANGE_FOLDER){var va=oa._threads.getThreadMetaNow(ra.thread_id);qa=h.getFromMeta(va);if(na(qa)&&va.unread_count>0)ha(oa,qa,ua);w.forEach(function(wa){if(wa!=qa)ia(oa,wa,ua);});}else{qa=ma(oa,ra);if(!na(qa))return;if(ra.action_type==sa.CHANGE_READ_STATUS){if(ra.mark_as_read){ia(oa,qa,ua,ra.timestamp);}else ha(oa,qa,ua,ra.timestamp);}else if(ra.action_type==sa.USER_GENERATED_MESSAGE||ra.action_type==sa.LOG_MESSAGE)if(ra.is_unread)ha(oa,qa,ua,ra.timestamp);}});}function ha(oa,pa,qa,ra){if(oa._maxCount[pa])return;da(oa,pa,function(sa){var ta=oa._allReadTimestamp[pa]||0,ua=oa._threadReadTimestamp[qa]||0,va=ra||Number.POSITIVE_INFINITY;if(va>=ta&&va>=ua&&!sa[qa]){sa[qa]=ra||0;ca(oa,pa,sa);oa._threadInformer.updatedUnreadState();}});}function ia(oa,pa,qa,ra){if(oa._maxCount[pa])return;da(oa,pa,function(sa){if(ra){var ta=oa._threadReadTimestamp[qa];if(!ta||ta<ra)oa._threadReadTimestamp[qa]=ra;}var ua=sa[qa];if(ra&&typeof ua=='number'&&ra<ua)return;if(qa in sa){delete sa[qa];ca(oa,pa,sa);oa._threadInformer.updatedUnreadState();}});}function ja(oa,pa,qa){oa._maxCount[pa]=false;ca(oa,pa,{});oa._allReadTimestamp[pa]=Math.max(oa._allReadTimestamp[pa]||0,qa||0);oa._threadInformer.updatedUnreadState();}function ka(oa,pa){return pa.map(oa._threadIDMap.convertThreadIDIfAvailable,oa._threadIDMap);}function la(oa,pa){w.forEach(function(qa){var ra=ea(oa,qa);if(!ra)return;for(var sa in pa){var ta=pa[sa];if(ra[sa]){ra[ta]=ra[sa];delete ra[sa];}}ca(oa,qa,ra);});}function ma(oa,pa){var qa=pa.thread_id?oa._threads.getThreadMetaNow(pa.thread_id):null;return qa?h.getFromMeta(qa):pa.folder;}function na(oa){return u(w,oa);}f.exports=ba;},null);
__d('MessengerContextBannerContainer.react',['DOMDimensions','immutable','MercuryIDs','MercuryParticipants','MercuryThreads','MessengerContextBanner.react','MessengerContextInformationStore','ReactComponentWithPureRenderMixin','React','ReactDOM','StoreAndPropBasedStateMixin'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){'use strict';if(c.__markCompiled)c.__markCompiled();var s=p.PropTypes,t=p.createClass({displayName:'MessengerContextBannerContainer',mixins:[o,r(k,l,n)],propTypes:{location:s.string.isRequired,onResize:s.func,otherUserFBIDs:s.arrayOf(s.string),threadID:s.string,viewer:s.string.isRequired},statics:{calculateState:function(u){var v=null,w=null;if(u.threadID){v=l.getForFBID(u.viewer).getOrFetch(u.threadID);w=v&&v.participants;}else if(u.otherUserFBIDs&&u.otherUserFBIDs.length===1)w=u.otherUserFBIDs.map(function(z){return k.getIDFromVanityOrFBID(z);});var x=i.Map();if(w)x=x.withMutations(function(z){w&&w.forEach(function(aa){z.set(aa,k.getOrFetch(aa));});});var y=null;if(v){y=x.get(j.getParticipantIDFromFromThreadID(v.thread_id));}else y=w&&x.get(w[0]);return babelHelpers._extends({contact:y,participantIDs:w,participants:x,thread:v},t.getContextInformation(y&&y.fbid&&y.fbid.toString()));},getContextInformation:function(u){var v;if(u)v=n.getOrFetch(u.toString());return v||{connectionContext:'',contextItems:[]};}},componentDidUpdate:function(){var u=q.findDOMNode(this);if(!u)return;var v=h.getElementDimensions(u).height;if(this.props.onResize)this.props.onResize(v);},render:function(){if(!this.state.contact||this.state.contact.type==='page')return null;return (p.createElement(m,{contactName:this.state.contact.name,connectionContext:this.state.connectionContext,contextItems:this.state.contextItems,location:this.props.location,participantIDs:this.state.participantIDs,participants:this.state.participants,style:this.props.style,thread:this.state.thread,viewer:this.props.viewer}));}});f.exports=t;},null);
__d('MessengerLogMessageBody.react',['immutable','ImmutableObject','MercuryIDs','MercuryParticipants','MercuryLogMessageType','P2PMercuryLogMessage.react','ReactComponentWithPureRenderMixin','React','StoreAndPropBasedStateMixin','fbt'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){if(c.__markCompiled)c.__markCompiled();var r=o.PropTypes,s=o.createClass({displayName:'MessengerLogMessageBody',_viewer:'',mixins:[n,p(k)],propTypes:{message:r.instanceOf(i).isRequired,viewer:r.string.isRequired},statics:{calculateState:function(t){var u=[],v=t.message,w=v.log_message_data,x=v.log_message_type;switch(x){case l.SUBSCRIBE:u=w.added_participants;break;case l.UNSUBSCRIBE:u=w.removed_participants;break;case l.ORION:u.push(w.senderId,w.receiverId);break;}if(!u||!u.length)return {};var y=h.Map().withMutations(function(z){u.forEach(function(aa){z.set(aa,k.getOrFetch(aa)||{});});});return {extraParticipants:y};}},render:function(){var t=this.props.message.log_message_type;this._viewer=j.getParticipantIDFromUserID(this.props.viewer);if(this._viewer!==this.props.message.author&&t!==l.ORION)return null;switch(t){case l.SUBSCRIBE:return (o.createElement('span',null,this._renderSubscribeMessage(this.props.message)));case l.UNSUBSCRIBE:return (o.createElement('span',null,this._renderUnsubscribeMessage(this.props.message)));case l.THREAD_NAME:var u=this.props.message.log_message_data;if(!u.name)return (o.createElement('span',null,q._("You removed the group name.")));return (o.createElement('span',null,q._("You named the group {the new name of the group}.",[q.param('the new name of the group',u.name)])));case l.THREAD_IMAGE:return (o.createElement('span',null,q._("You changed the group photo.")));case l.ORION:return this._renderP2PLogMessage(this.props.message);default:return null;}},_renderP2PLogMessage:function(t){var u=t.log_message_data,v=u.senderId,w=u.receiverId,x=this.state.extraParticipants,y=x.get(v),z=x.get(w);return (o.createElement(m,{amount:u.formattedAmount,receiver:z,sender:y,subtype:u.subtype,threadFBID:t.thread_fbid,threadID:t.thread_id,transferID:u.transfer_id}));},_renderSubscribeMessage:function(t){var u=this._moveCurrentUserToFront(t.log_message_data.added_participants),v=this.state.extraParticipants;switch(u.length){case 1:return q._("You added {subscriber1}.",[q.param('subscriber1',v.get(u[0]).name)]);case 2:return q._("You added {subscriber1} and {subscriber2}.",[q.param('subscriber1',v.get(u[0]).name),q.param('subscriber2',v.get(u[1]).name)]);case 3:return q._("You added {subscriber1}, {subscriber2} and {subscriber3}.",[q.param('subscriber1',v.get(u[0]).name),q.param('subscriber2',v.get(u[1]).name),q.param('subscriber3',v.get(u[2]).name)]);default:var w=u.map(function(x){return v.get(x);});return q._("You added {subscriber1}, {subscriber2} and {num} other people.",[q.param('subscriber1',w[0].name),q.param('subscriber2',w[1].name),q.param('num',w.slice(2).length)]);}},_renderUnsubscribeMessage:function(t){var u=this.state.extraParticipants,v=t.log_message_data.removed_participants[0],w=u.get(v);if(!v||v===t.author){return q._("You left the conversation.");}else return q._("You removed {name} from the conversation.",[q.param('name',w.name)]);},_moveCurrentUserToFront:function(t){var u=this._viewer,v=t.indexOf(u);if(v>0){var w=t.filter(function(x){return x!==u;});return [u].concat(w);}return t;}});f.exports=s;},null);
__d('MessengerSearchSource',['ChatSearchSource','MercuryIDs','MercuryParticipants','MercuryParticipantTypes','MercurySingletonProvider','MessengerConfig','OrderedFriendsList','SearchableEntry','emptyFunction'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){if(c.__markCompiled)c.__markCompiled();var q,r;'use strict';var s=50;q=babelHelpers.inherits(t,h);r=q&&q.prototype;t.getForFBID=function(v){return u.getForFBID(v);};t.get=function(){return u.get();};function t(v){r.constructor.call(this,{queryRequests:[{uri:'/ajax/mercury/composer_query.php'}]});n.getSearchableEntries(s,(function(x){this.$MessengerSearchSource1=x;r.addLocalEntries.call(this,x);}).bind(this));var w=i.getParticipantIDFromUserID(v);j.get(w,(function(x){r.addLocalEntries.call(this,[new o({uniqueID:x.fbid.toString(),title:x.name,type:k.FRIEND,photo:x.big_image_src||x.image_src,uri:x.href,auxiliaryData:{isMessengerUser:x.is_messenger_user}})]);}).bind(this));}t.prototype.bootstrapImpl=function(v){r.bootstrapImpl.call(this,p);v();};t.prototype.searchImpl=function(v,w,x){x=x||{};if(v===''&&x.showDefaultEntries){w(this.$MessengerSearchSource1,v);var y=x&&x.onQueryFinished;y&&y(v);return;}x.threadLimit=m.MaxThreadResults;r.searchImpl.call(this,v,w,x);};var u=new l(t);f.exports=t;},null);
__d('MessengerThreadImage.react',['immutable','ImmutableObject','MercuryIDs','MercuryThreadImage.react','MessengerProfileImageWrapper.react','ReactComponentWithPureRenderMixin','React'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n){'use strict';if(c.__markCompiled)c.__markCompiled();var o=n.PropTypes,p=n.createClass({displayName:'MessengerThreadImage',mixins:[m],propTypes:{participants:o.instanceOf(h.Map).isRequired,showBadge:o.bool,size:o.number,thread:o.instanceOf(i).isRequired,viewer:o.string.isRequired},getDefaultProps:function(){return {showBadge:true};},render:function(){return (n.createElement(l,{className:this.props.className,isMessengerUser:this._getIsMessengerUser(),size:this.props.size,showBadge:this.props.showBadge&&j.isCanonical(this.props.thread.thread_id)},n.createElement(k,{size:this.props.size,thread:this.props.thread,viewer:this.props.viewer,useBackground:true})));},_getIsMessengerUser:function(){if(!j.isCanonical(this.props.thread.thread_id)||this.props.participants.size===0)return null;var q=this.props.thread.other_user_fbid,r=j.getParticipantIDFromUserID(q),s=this.props.participants.get(r);return s&&s.is_messenger_user;}});f.exports=p;},null);
__d('MessengerDetailViewHeader.react',['Event','immutable','ImmutableObject','Link.react','MercuryParticipantTypes','MercuryThreadTitle.react','MessengerConfig','MessengerDomIDs','MessengerInfoPanelVisibility','MessengerPresenceStatus.react','MessengerRTCCallButton.react','ReactComponentWithPureRenderMixin','FBRTCSupport','React','ReactDOM','Style','cx','fbt','debounce'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z){'use strict';if(c.__markCompiled)c.__markCompiled();var aa=u.PropTypes,ba=u.createClass({displayName:'MessengerDetailViewHeader',mixins:[s],propTypes:{contactData:aa.object,infoPanelVisibility:aa.number.isRequired,onInfoPanelToggle:aa.func.isRequired,participants:aa.instanceOf(i.Map).isRequired,thread:aa.instanceOf(j),viewer:aa.string.isRequired},componentDidMount:function(){this._resizeCallback=h.listen(window,'resize',z(this._calculateTruncationState,20,this));},componentWillUnmount:function(){this._resizeCallback.remove();},componentDidUpdate:function(){this._calculateTruncationState();},render:function(){var ca=this.props,da=ca.thread,ea=ca.viewer,fa=ca.infoPanelVisibility,ga=ca.onInfoPanelToggle;if(!da)return null;var ha=y._("Conversation Information"),ia=this._renderPresenceStatus();return (u.createElement('div',{className:"_5742"+(ia===null?' '+"_1_fz":''),ref:'root'},u.createElement('div',{className:"_5743",key:'threadTitle',ref:'title'},u.createElement('h2',{className:"_17w2",id:o.THREAD_TITLE},u.createElement(m,{className:"_3oh-",ref:'mercuryTitle',thread:da,viewer:ea})),ia),u.createElement('ul',{className:"_fl2",key:'buttonsContainer',ref:'buttons'},this._renderAudioCallButton(),this._renderVideoCallButton(),u.createElement('li',null,u.createElement(k,{'aria-expanded':fa===p.VISIBLE,'aria-label':ha,className:"_fl3"+(fa===p.AUTO?' '+"_20na":'')+(fa===p.HIDDEN?' '+"_20nb":'')+(' '+"_30yy"),onClick:ga,role:'button',title:ha}),u.createElement('div',{'aria-owns':o.THREAD_INFO_PANEL})))));},_renderAudioCallButton:function(){if(this._shouldShowCallButton())return (u.createElement('li',null,u.createElement(r,{className:"_30yy",isVideo:false,calleeID:this.props.thread.other_user_fbid,calleeName:this.props.contactData.contact.name})));},_renderVideoCallButton:function(){if(this._shouldShowCallButton())return (u.createElement('li',null,u.createElement(r,{className:"_30yy",isVideo:true,calleeID:this.props.thread.other_user_fbid,calleeName:this.props.contactData.contact.name})));},_shouldShowCallButton:function(){var ca=this.props.thread;return !!(t.isWebrtcSupported()&&t.isOSSupported()&&this.props.contactData&&this.props.contactData.contact.type!==l.PAGE&&n.EnableRtcGK&&ca&&ca.is_canonical&&ca.participants.length>1);},_renderPresenceStatus:function(){if(!this.props.contactData)return null;return (u.createElement(q,{className:"_2v6o",isUserActive:this.props.contactData.isUserActive,lastActive:this.props.contactData.lastActive,platform:this.props.contactData.platform}));},_calculateTruncationState:function(){var ca=v.findDOMNode(this.refs.root),da=v.findDOMNode(this.refs.title),ea=v.findDOMNode(this.refs.buttons),fa=v.findDOMNode(this.refs.mercuryTitle);if(!fa||!da)return;var ga=Math.ceil(.5*(ca.offsetWidth+fa.offsetWidth)),ha=ca.offsetWidth-ea.offsetWidth-12;if(ga<=ha&&!n.IsMessengerDesktop){w.set(ca,'text-align','center');w.set(da,'width','auto');}else{w.set(ca,'text-align','left');var ia=Math.max(ca.offsetWidth-ea.offsetWidth-11,0);w.set(da,'width',ia+'px');}}});f.exports=ba;},null);
__d('MessengerPresenceStatusUtils',['AvailableListConstants','LastMobileActiveTimes','MercuryIDs','PresenceStatus','fbt'],function a(b,c,d,e,f,g,h,i,j,k,l){'use strict';if(c.__markCompiled)c.__markCompiled();var m={getStatusFromCanonicalThread:function(n,o){var p=null;if(o&&o.is_canonical){var q=n.get(j.getParticipantIDFromFromThreadID(o.thread_id));if(q){var r=k.get(q.fbid),s,t,u=q.is_messenger_user?l._("Messenger"):l._("Facebook");if(r!==h.ACTIVE){s=i.get(q.fbid);t=i.getShortDisplay(q.fbid);}p={contact:q,platform:u,isUserActive:r===h.ACTIVE,lastActiveTS:s,lastActive:t};}}return p;}};f.exports=m;},null);
__d('MessengerSharedPhoto.react',['ReactComponentWithPureRenderMixin','React','cx'],function a(b,c,d,e,f,g,h,i,j){'use strict';if(c.__markCompiled)c.__markCompiled();var k=i.PropTypes,l=i.createClass({displayName:'MessengerSharedPhoto',mixins:[h],propTypes:{fbid:k.string.isRequired,onClick:k.func.isRequired,uri:k.string.isRequired},render:function(){return (i.createElement('a',{className:"_3m31",href:'#',onClick:this._handleClick,style:{backgroundImage:'url('+this.props.uri+')'}}));},_handleClick:function(){this.props.onClick(this.props.fbid);}});f.exports=l;},null);
__d('MessengerSharedPhotos.react',['MessengerSharedPhoto.react','MessengerSpinner.react','MessagesViewer','MessagesViewerSetID','React','URI','cancelAnimationFrame','cx','requestAnimationFrame'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){'use strict';if(c.__markCompiled)c.__markCompiled();var q=l.PropTypes,r=10,s=l.createClass({displayName:'MessengerSharedPhotos',propTypes:{allPhotosDisplayed:q.bool.isRequired,isLoadingImages:q.bool.isRequired,onAllPhotosDisplayed:q.func.isRequired,sharedPhotos:q.object.isRequired,threadFBID:q.string.isRequired},_rafID:null,getInitialState:function(){return {imagesLoaded:r};},componentDidMount:function(){this._graduallyLoadPhotos();},componentWillReceiveProps:function(t){if(t.threadFBID!==this.props.threadFBID)this.setState({imagesLoaded:r});},componentDidUpdate:function(){this._graduallyLoadPhotos();},componentWillUnmount:function(){n(this._rafID);},_graduallyLoadPhotos:function(){n(this._rafID);var t=this.props.sharedPhotos.message_images.edges;if(this.state.imagesLoaded<t.length){this._rafID=p((function(){this.setState({imagesLoaded:Math.min(this.props.sharedPhotos.message_images.edges.length,this.state.imagesLoaded+r)});}).bind(this));}else if(!this.props.allPhotosDisplayed)this.props.onAllPhotosDisplayed();},_viewFullImage:function(t){var u=this.props,v=u.threadFBID,w=u.sharedPhotos.message_images,x=new m('/ajax/messaging/attachments/sharedphotos.php').setQueryData({thread_id:v,image_id:t}),y=w.edges.find(function(z){var aa=z.node;return aa.legacy_attachment_id===t;}).node;j.bootstrapWithConfig({dimensions:y.original_dimensions.x+','+y.original_dimensions.y,disablePaging:w.edges.length===1,fbid:t,snapToPhoto:true,src:y.image.uri,endpoint:x,setID:k.MESSAGES_VIEW_ALL_IN_THREAD});},render:function(){var t=this.props,u=t.isLoadingImages,v=t.sharedPhotos.message_images.edges,w=this.state.imagesLoaded,x;if(u)x=l.createElement('div',{className:"_2n20"},l.createElement(i,null));return (l.createElement('div',null,l.createElement('div',{className:"_40jj _5l-3"},v.slice(0,w).map((function(y){var z=y.node;return (l.createElement(h,{fbid:z.legacy_attachment_id,key:z.legacy_attachment_id,onClick:this._viewFullImage,uri:z.image.uri}));}).bind(this))),x));}});f.exports=s;},null);
__d('MessengerThreadInfoPanel.react',['ImageBlock.react','immutable','ImmutableObject','Link.react','MercuryThreadInfo','MessengerActions','MessengerAddToConversationDialog.react','MessengerContactAdapters','MessengerConfig','MessengerContactList.react','MessengerDomIDs','MessengerInfoPanelContactActions.react','MessengerInfoPanelMuteSettingsContainer.react','MessengerInfoPanelNameSection.react','MessengerSharedPhotosContainer.react','ReactComponentWithPureRenderMixin','React','cx','fbt'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z){'use strict';if(c.__markCompiled)c.__markCompiled();var aa=x.PropTypes,ba=x.createClass({displayName:'MessengerThreadInfoPanel',mixins:[w],propTypes:{contact:aa.instanceOf(j),getIsScrolledToBottom:aa.func.isRequired,getScrollableHeight:aa.func.isRequired,isUserActive:aa.bool.isRequired,lastActive:aa.string,onArchive:aa.func.isRequired,onContactAction:aa.func.isRequired,onContactSelect:aa.func.isRequired,onDelete:aa.func.isRequired,onLeaveGroup:aa.func,onMarkRead:aa.func.isRequired,onMarkSpam:aa.func.isRequired,onMarkUnread:aa.func.isRequired,onMute:aa.func.isRequired,onMuteChange:aa.func.isRequired,onPeopleSectionToggle:aa.func.isRequired,onPhotosSectionToggle:aa.func.isRequired,onThreadNameChange:aa.func.isRequired,onThreadPhotoChange:aa.func.isRequired,onUnmute:aa.func.isRequired,participants:aa.instanceOf(i.Map).isRequired,peopleSectionCollapsed:aa.bool.isRequired,photosSectionCollapsed:aa.bool.isRequired,platform:aa.string,prevIsScrolledToBottom:aa.bool.isRequired,prevScrollableHeight:aa.number.isRequired,showLeaveGroup:aa.bool.isRequired,thread:aa.instanceOf(j).isRequired,viewer:aa.string.isRequired},render:function(){var ca;if(p.SharedPhotos)ca=this._renderSharedPhotos();return (x.createElement('div',{className:"_3tkv",id:r.THREAD_INFO_PANEL},x.createElement('h3',{className:"accessible_elem"},z._("Conversation Information")),x.createElement(u,{contact:this.props.contact,isUnread:this.props.isUnread,isUserActive:this.props.isUserActive,lastActive:this.props.lastActive,onArchive:this.props.onArchive,onDelete:this.props.onDelete,onLeaveGroup:this.props.onLeaveGroup,onMarkRead:this.props.onMarkRead,onMarkSpam:this.props.onMarkSpam,onMarkUnread:this.props.onMarkUnread,onMute:this.props.onMute,onThreadNameChange:this.props.onThreadNameChange,onThreadPhotoChange:this.props.onThreadPhotoChange,onUnmute:this.props.onUnmute,participants:this.props.participants,platform:this.props.platform,showLeaveGroup:this.props.showLeaveGroup,thread:this.props.thread,viewer:this.props.viewer}),this._renderOptions(),this.props.thread.is_canonical?this._renderFacebookProfile():this._renderMembers(),ca));},_renderOptions:function(){if(!this.props.thread.is_subscribed)return null;return (x.createElement('div',null,x.createElement('div',{className:"_502q"}),x.createElement('div',{className:"_3tl1 _502r"},x.createElement(t,{thread:this.props.thread,onChange:this.props.onMuteChange}))));},_renderSharedPhotos:function(){var ca=this.props,da=ca.getIsScrolledToBottom,ea=ca.getScrollableHeight,fa=ca.onPhotosSectionToggle,ga=ca.photosSectionCollapsed,ha=ca.thread;return (x.createElement(v,{getIsScrolledToBottom:da,getScrollableHeight:ea,isCollapsed:ga,onToggle:fa,threadFBID:ha.thread_fbid}));},_renderMembers:function(){var ca=this.props,da=ca.peopleSectionCollapsed,ea=ca.onPeopleSectionToggle;return (x.createElement('div',null,x.createElement('div',{className:"_502q"}),x.createElement('h4',{className:"_3tl0 _2ds5"},z._("People"),x.createElement('div',{className:"_2ds6 _30yy"},x.createElement('div',{onClick:ea},da?z._("Show"):z._("Hide")))),x.createElement('div',{className:(da?"hidden_elem":'')+(' '+"_3tl1")},x.createElement(q,{actionsClass:s,className:"_4wc-",contactAdapter:o.fromMercuryParticipant,disableRole:true,extraActionsEnabled:this.props.thread.is_subscribed,listSections:i.OrderedMap([[null,this.props.participants.filter(function(fa){return !!fa;}).toArray()]]),onSelect:this._handleContactSelect,onAction:this._handleContactAction,viewer:this.props.viewer}),this._renderAddPeopleLink())));},_renderAddPeopleLink:function(){if(!l.canReply(this.props.thread))return null;return (x.createElement(k,{className:"_4rph",onClick:this._handleAddPeopleClick},x.createElement(h,null,x.createElement('div',{className:"_4rpi"}),x.createElement('div',{className:"_4rpj"},z._("Add People")))));},_renderFacebookProfile:function(){if(!this.props.contact||!this.props.contact.href||this.props.contact.fbid.toString()===p.MoneyPennyFBID)return null;var ca=this.props.contact.href,da=this.props.contact.type==='page'?z._("Facebook Page"):z._("Facebook Profile");return (x.createElement('div',null,x.createElement('div',{className:"_502q"}),x.createElement('h4',{className:"_3tl0"},da),x.createElement('div',{className:"_3tl1"},x.createElement(k,{className:"_3oh-",href:ca,target:'_blank'},ca.replace('www.','')))));},_handleContactSelect:function(ca){this.props.onContactSelect(o.fromMercuryParticipant(ca));},_handleContactAction:function(ca,da){this.props.onContactAction(ca,o.fromMercuryParticipant(da));},_handleAddPeopleClick:function(event){event.preventDefault();m.showDialog(n,{thread:this.props.thread,viewer:this.props.viewer});}});f.exports=ba;},null);
__d('MessengerThreadInfoPanelContainer.react',['AsyncRequest','immutable','ImmutableObject','MercuryAPIArgsSource','MercuryIDs','MercuryLogMessageType','MercuryMessageActions','MercuryMessageObject','MercurySourceType','MercuryThreadActions','MercuryThreadInfo','MessengerActions','MessengerConfirmLeaveGroupDialog.react','MessengerContactActions','MessengerThreadInfoPanelScrollableArea.react','MessengerSettingsActions','MessengerSettingsStore','MessengerThreadInfoPanel.react','ReactComponentWithPureRenderMixin','React','StoreAndPropBasedStateMixin','URI'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba,ca){'use strict';if(c.__markCompiled)c.__markCompiled();var da=aa.PropTypes,ea=aa.createClass({displayName:'MessengerThreadInfoPanelContainer',mixins:[z,ba(x)],propTypes:{contactData:da.object,participants:da.instanceOf(i.Map).isRequired,thread:da.instanceOf(j).isRequired,viewer:da.string.isRequired},statics:{calculateState:function(){var fa=x.getSettings(),ga=fa.people_section_collapsed,ha=fa.photos_section_collapsed;return {people_section_collapsed:ga,photos_section_collapsed:ha};}},render:function(){var fa=this.props.contactData||{},ga=this.state,ha=ga.people_section_collapsed,ia=ga.photos_section_collapsed;return (aa.createElement(v,{className:this.props.className},(function(ja,ka,la,ma){return (aa.createElement(y,{contact:fa.contact,getIsScrolledToBottom:la,getScrollableHeight:ma,isUserActive:fa.isUserActive||false,lastActive:fa.lastActive,onArchive:this._handleArchive,onContactAction:this._handleContactAction,onContactSelect:this._handleContactSelect,onDelete:this._handleDelete,onLeaveGroup:this._handleLeaveGroup,onMarkRead:this._handleMarkRead,onMarkSpam:this._handleMarkSpam,onMarkUnread:this._handleMarkUnread,onMute:this._handleMute,onMuteChange:this._handleMuteChange,onPeopleSectionToggle:this._handlePeopleSectionToggle,onPhotosSectionToggle:this._handlePhotosSectionToggle,onThreadNameChange:this._handleThreadNameChange,onThreadPhotoChange:this._handleThreadPhotoChange,onUnmute:this._handleUnmute,participants:this.props.participants,peopleSectionCollapsed:ha,photosSectionCollapsed:ia,platform:fa.platform,prevIsScrolledToBottom:ka,prevScrollableHeight:ja,showLeaveGroup:this.props.thread.is_subscribed&&!this.props.thread.is_canonical,thread:this.props.thread,viewer:this.props.viewer}));}).bind(this)));},_handleArchive:function(){this._getThreadActions().archive(this.props.thread.thread_id);s.selectThread(null);},_handleDelete:function(){this._getThreadActions()['delete'](this.props.thread.thread_id);s.selectThread(null);},_handleMarkRead:function(){this._getThreadActions().markRead(this.props.thread.thread_id);},_handleMarkSpam:function(){this._getThreadActions().markSpam(this.props.thread.thread_id);s.selectThread(null);},_handleMarkUnread:function(){this._getThreadActions().markUnread(this.props.thread.thread_id);},_handleMute:function(fa){this._getThreadActions().updateMuteSetting(this.props.thread.thread_id,fa);},_handleUnmute:function(){this._getThreadActions().unmute(this.props.thread.thread_id);},_handleMuteChange:function(fa){this._getThreadActions().updateMuteSetting(this.props.thread.thread_id,fa);},_handleContactSelect:function(fa){if(l.getUserIDFromParticipantID(fa.uid)!==this.props.viewer){var ga=l.getThreadIDFromParticipantID(fa.uid);ga&&s.selectThread(ga);}},_handleContactAction:function(fa,ga){if(l.getUserIDFromParticipantID(ga.uid)!==this.props.viewer)switch(fa){case u.MESSAGE:this._handleContactSelect(ga);break;case u.PROFILE:var ha=this.props.participants.get(ga.uid);if(ha&&ha.href){window.open(ha.href);}else this._handleContactSelect(ga);break;case u.REMOVE:if(!r.isEmptyLocalThread(this.props.thread)){var ia=new ca('/chat/remove_participants/');ia.addQueryData({uid:l.getUserIDFromParticipantID(ga.uid),tid:this.props.thread.thread_fbid});var ja=new h(ia);ja.send();}break;}},_handleLeaveGroup:function(){s.showDialog(t,{onLeave:this._onLeaveGroupConfirm});},_onLeaveGroupConfirm:function(){if(!r.isEmptyLocalThread(this.props.thread)){var fa=this._getMessageObject().constructLogMessageObject(p.MESSENGER_WEB,this.props.thread.thread_id,m.UNSUBSCRIBE,{removed_participants:[l.getParticipantIDFromUserID(this.props.viewer)]});this._getMessageActions().send(fa);}},_handleThreadNameChange:function(fa){this._getMessageActions().send(this._getMessageObject().constructLogMessageObject(p.MESSENGER_WEB,this.props.thread.thread_id,m.THREAD_NAME,{name:fa}),null,k.MESSENGER);},_handleThreadPhotoChange:function(fa,ga){this._getMessageActions().send(this._getMessageObject().constructLogMessageObject(p.MESSENGER_WEB,fa,m.THREAD_IMAGE,{image:ga.metadata[0]}));},_handlePeopleSectionToggle:function(){w.changeSettings({people_section_collapsed:!this.state.people_section_collapsed});},_handlePhotosSectionToggle:function(){w.changeSettings({photos_section_collapsed:!this.state.photos_section_collapsed});},_getThreadActions:function(){return q.getForFBID(this.props.viewer);},_getMessageActions:function(){return n.getForFBID(this.props.viewer);},_getMessageObject:function(){return o.getForFBID(this.props.viewer);}});f.exports=ea;},null);
__d('MessengerDetailView.react',['DataTransfer','immutable','MercuryIDs','MercuryParticipants','MercuryThreadActions','MercuryThreadInfo','MercuryThreads','MessengerComposerStore','MessengerComposerContainer.react','MessengerConversationContainer.react','MessengerDetailViewHeaderContainer.react','MessengerDomIDs','MessengerInfoPanelVisibility','MessengerPresenceStatusUtils','MessengerStateStore','MessengerThreadInfoPanelContainer.react','MessengerView','PresenceStatus','ReactComponentWithPureRenderMixin','React','StoreAndPropBasedStateMixin','cssVar','cx','fbt','invariant','AvailableList'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba,ca,da,ea,fa){'use strict';if(c.__markCompiled)c.__markCompiled();c('AvailableList');var ga=aa.PropTypes,ha=aa.createClass({displayName:'MessengerDetailView',mixins:[z,ba(o,v,n,k,y)],propTypes:{activeThreadID:ga.string,view:ga.string,viewer:ga.string.isRequired},statics:{calculateState:function(ia){var ja=ia.activeThreadID,ka=n.getForFBID(ia.viewer),la=ja?ka.getOrFetch(ja):null,ma=i.Map();if(la)ma=ma.withMutations(function(na){la&&la.participants&&la.participants.forEach(function(oa){na.set(oa,k.getOrFetch(oa));});});return {composerState:o.getState(),messengerState:v.getState(),contactData:u.getStatusFromCanonicalThread(ma,la),activeThread:la,participants:ma};}},getInitialState:function(){return {dropTargetOverlayVisible:false,infoPanelVisibility:t.AUTO};},render:function(){var ia=this._getThreadID(),ja=this._getMainLabelDetails();return (aa.createElement('div',{'aria-labelledby':ja.labelIDs,className:"_1q5-",role:'main'},aa.createElement('div',{className:"hidden_elem",id:s.MAIN_LABEL},ja.labelText),aa.createElement(r,{contactData:this.state.contactData,recipients:this.state.composerState.recipients,participants:this.state.participants,thread:this.state.activeThread,view:this.props.view,viewer:this.props.viewer,onResize:this._handleResize,onInfoPanelToggle:this._handleInfoPanelToggle,infoPanelVisibility:this.state.infoPanelVisibility}),aa.createElement('div',{className:"_20bp"},this._renderInfoPanel(),aa.createElement('div',{className:"_4_j4",onClick:this._handleConversationClick,onDragEnter:this._showDropTargetOverlay,onDragLeave:this._hideDropTargetOverlay,onDragOver:this._showDropTargetOverlay,onDrop:this._handleDrop},this._renderMainView(ia),this._renderFooterView(ia),aa.createElement('div',{className:(!this.state.dropTargetOverlayVisible?"hidden_elem":'')+(' '+"_2fg6")})))));},_renderMainView:function(ia){if(!ia)return aa.createElement('div',{className:"_1ut7"});return (aa.createElement(q,{className:"_1wfr",contact:this.state.contactData?this.state.contactData.contact:null,onMarkRead:this._handleMarkRead,participants:this.state.participants,ref:'conversationContainer',thread:this.state.activeThread,threadID:ia,viewer:this.props.viewer}));},_renderFooterView:function(ia){return (aa.createElement(p,{canReply:!!(this.props.view===x.DETAIL.COMPOSE||this.state.activeThread&&m.canReply(this.state.activeThread)),onResize:this._handleResize,participants:this.state.participants,recipients:this.state.composerState.recipients,ref:'composer',threadID:ia,threadFBID:this.state.activeThread?this.state.activeThread.thread_fbid:null,thread:this.state.activeThread,view:this.props.view,viewer:this.props.viewer}));},_renderInfoPanel:function(){var ia=this.state,ja=ia.activeThread,ka=ia.contactData,la=ia.infoPanelVisibility,ma=ia.participants;if(!ja||!ma)return null;return (aa.createElement('div',{className:(la===t.HIDDEN?"hidden_elem":'')+(la===t.AUTO?' '+"_4t9y":'')+(' '+"_4_j5")},aa.createElement(w,{className:"_4_j9",contactData:ka,participants:ma,thread:ja,viewer:this.props.viewer})));},_getMainLabelDetails:function(){if(this.props.view===x.DETAIL.COMPOSE)return {labelText:ea._("New Message"),labelIDs:s.MAIN_LABEL};return {labelText:ea._("Conversation with"),labelIDs:s.MAIN_LABEL+' '+s.THREAD_TITLE};},_handleConversationClick:function(ia){if(this.props.activeThreadID&&this.refs.conversationContainer&&this.refs.conversationContainer.isScrolledToBottom())this._handleMarkRead(this.props.activeThreadID);if(window.getSelection().toString()!=='')return;!(typeof ia.target.nodeName==='string')?fa(0):undefined;if(ia.target.nodeName.toLowerCase()==='a')return;this.refs.composer.focusInput();},_showDropTargetOverlay:function(ia){ia&&ia.preventDefault();this.setState({dropTargetOverlayVisible:true});},_hideDropTargetOverlay:function(ia){ia&&ia.preventDefault();this.setState({dropTargetOverlayVisible:false});this.refs.composer.resetDrag();},_handleDrop:function(ia){this._hideDropTargetOverlay(ia);!(ia.nativeEvent.dataTransfer instanceof Object)?fa(0):undefined;var ja=new h(ia.nativeEvent.dataTransfer),ka=ja.getFiles();if(ka.length){this.refs.composer.handleFileUpload(ka);}else{var la=ja.getText();if(la)this.refs.composer.handleTextDropped(la);}},_handleResize:function(){var ia=this.refs.conversationContainer,ja=this.refs.emptyContainer;if(ia){ia.handleResize();}else if(ja)ja.recalculateHeight();},_getThreadID:function(){var ia=this.state.composerState.recipients;if(this.props.view===x.DETAIL.COMPOSE&&ia.size===1)return j.getThreadIDFromUserID(ia.first().getUniqueID());if(this.props.view===x.DETAIL.THREAD)return this.props.activeThreadID;return null;},_handleInfoPanelToggle:function(){var ia=this.state.infoPanelVisibility,ja;if(ia===t.AUTO){var ka=parseInt("1211px",10);ja=window.innerWidth<=ka?t.VISIBLE:t.HIDDEN;}else ja=ia===t.VISIBLE?t.HIDDEN:t.VISIBLE;this.setState({infoPanelVisibility:ja});},_handleMarkRead:function(ia){l.getForFBID(this.props.viewer).markRead(ia);}});f.exports=ha;},null);
__d('MessengerContactListContainer.react',['AvailableList','AllChatFriendsList','immutable','MercuryIDs','MercuryParticipants','MessengerActions','MessengerContactList.react','MessengerContactAdapters','MessengerFlexScrollableArea.react','PresencePrivacy','PresenceStatus','React','MessengerProgressiveRendererListSlicerMixin','SubscriptionsHandler','fbt','MercuryThreads'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v){'use strict';if(c.__markCompiled)c.__markCompiled();var w=c('MercuryThreads').get(),x=s.PropTypes,y=60,z=s.createClass({displayName:'MessengerContactListContainer',mixins:[t],propTypes:{viewer:x.string.isRequired},_orderedList:[],getInitialState:function(){return {contacts:j.Map(),limit:y/2,loadedContacts:false};},componentWillMount:function(){var aa=new u();aa.addSubscriptions(h.subscribe(h.ON_AVAILABILITY_CHANGED,this._setContacts),q.subscribe('privacy-changed',this._setContacts));this._subscriptions=aa;},componentWillUnmount:function(){this._subscriptions&&this._subscriptions.release();},render:function(){return (s.createElement(p,{onScroll:this._handleScroll,ref:'scrollable'},s.createElement(n,{contactAdapter:o.fromMercuryParticipant,isLoading:!this.state.loadedContacts||this.state.contacts.size>this.state.limit,listSections:this._loadContacts(),onSelect:this._handleSelect,showPresence:false,viewer:this.props.viewer})));},_handleScroll:function(){if(!this.refs.scrollable.isScrolledToBottom())return;if(this.state.contacts.size>this.state.limit)this.setState({limit:this.state.limit+y});},_handleSelect:function(aa){w.getThreadMeta(k.getThreadIDFromUserID(aa.fbid),function(ba){m.selectThread(ba.thread_id);});},_setContacts:function(){this._orderedList=i.all_friends.filter(function(aa){return (q.getFriendVisibility(aa)!==q.BLACKLISTED);}).filter(function(aa){return r.isMobileUser(aa);}).map(function(aa){return k.getParticipantIDFromUserID(aa);});l.getMulti(this._orderedList,(function(aa){this.setState({contacts:j.Map(aa),loadedContacts:true});}).bind(this));},_loadContacts:function(){var aa=this._orderedList.slice(0,5).map((function(ca){return this.state.contacts.get(ca);}).bind(this)).filter(function(ca){return !!ca;}),ba=this._sortContactsIntoAlphaOrderedGroups(this.state.contacts);return this._getListSections(ba,aa);},_sortContactsIntoAlphaOrderedGroups:function(aa){var ba={};aa.forEach(function(da){var ea=da.name.charAt(0);if(!ba[ea])ba[ea]=[];ba[ea].push(da);});for(var ca in ba)ba[ca].sort(function(da,ea){return da.name>ea.name?1:-1;});return j.Map(ba);},_getListSections:function(aa,ba){var ca=[];if(ba.length)ca.push({header:v._("Favorites"),contacts:ba});var da=0,ea=Object.keys(aa.toObject()).sort();ea.forEach((function(fa){var ga=aa.get(fa)||[];if(!this.state.limit||da<this.state.limit){ga=this._maybeSlice(ga,da);if(ga.length)ca.push({header:fa,contacts:ga});da+=ga.length;}}).bind(this));return j.OrderedMap(ca.map(function(fa){return [fa.header,fa.contacts];}));}});f.exports=z;},null);
__d('MessengerActiveUsersList.react',['ImmutableObject','MercuryIDs','MessengerActions','MessengerContactListRowContainer.react','MessengerViewerCard.react','ReactComponentWithPureRenderMixin','React','MessengerProgressiveRendererListSlicerMixin','cx','fbt','MercuryThreads'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){'use strict';if(c.__markCompiled)c.__markCompiled();var r=c('MercuryThreads').get(),s=n.PropTypes,t=n.createClass({displayName:'MessengerActiveUsersList',mixins:[m,o],propTypes:{contactAdapter:s.func.isRequired,contacts:s.array.isRequired,isUserAvailable:s.bool.isRequired,onAvailabilityChange:s.func,renderOnly:s.number,viewer:s.string.isRequired,viewerData:s.instanceOf(h)},render:function(){var u;if(this.props.isUserAvailable)u=n.createElement('div',null,n.createElement('div',{className:"_3ggt"},q._("Active Facebook Friends ({number_of_contacts})",[q.param('number_of_contacts',this.props.contacts.length)])),n.createElement('ul',null,this._maybeSlice(this.props.contacts,0).map((function(v){return (n.createElement(k,{contactAdapter:this.props.contactAdapter,extraActionsEnabled:false,key:v.id,onSelect:this._handleSelect,rawContact:v,showPresence:true,viewer:this.props.viewer}));}).bind(this))),this._getIncrementalDisplaySpinner(this.props.contacts.length));return (n.createElement('div',null,n.createElement(l,{isUserAvailable:this.props.isUserAvailable,onAvailabilityChange:this.props.onAvailabilityChange,viewerData:this.props.viewerData}),u));},_handleSelect:function(u){r.getThreadMeta(i.getThreadIDFromUserID(u.fbid),function(v){j.selectThread(v.thread_id);});}});f.exports=t;},null);
__d('P2PAPI',['AsyncRequest','CreditCardFormParam','P2PActions','P2PAPIUtils','P2PPasswordProtectionParam','P2PPaymentCampaignNames','P2PPaymentRequestStatus','P2PPaymentRequestsStore','P2PTransferParam','PaymentTokenProxyUtils','ImmutableObject','XMoneypennyPaymentsCreateController','XP2PAddressesController','XP2PAddressCreateController','XP2PBannerDismissalsUpdateController','XP2PBannerStatesController','XP2PBannerViewsUpdateController','XP2PCardBINValidateController','XP2PCreditCardDeleteController','XP2PCreditCardUpdateController','XP2PCreditCardCreateController','XP2PCreditCardVerifyController','XP2PCreditCardsController','XP2PCurrentUserProfileDataController','XP2PExtensiveTransferDetailsController','XP2PFriendPickerController','XP2PPasswordProtectionStatusController','XP2PPasswordProtectionStatusUpdateController','XP2PPaymentRequestCreateController','XP2PPaymentRequestDeclineController','XP2PPlatformMsgrCommerceCartCreateController','XP2PPlatformSetShippingAddressController','XP2PPresetCreditCardSetController','XP2PProductItemBannerController','XP2PProductItemBannerDismissalController','XP2PProductItemBannerMarkSoldController','XP2PTransactionsCampaignCreateController','XP2PTransactionsCancelController','XP2PTransactionsCreateController','XP2PTransactionsController','XP2PTransactionsDeclineController','XP2PUserEligibilityController','emptyFunction','isEmpty'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba,ca,da,ea,fa,ga,ha,ia,ja,ka,la,ma,na,oa,pa,qa,ra,sa,ta,ua,va,wa,xa,ya){'use strict';if(c.__markCompiled)c.__markCompiled();var za={getAllCreditCards:function(){var ab=da.getURIBuilder().getURI();new h().setURI(ab).setMethod('GET').setReadOnly(true).setAllowCrossPageTransition(true).setHandler((function(bb){var cb=bb.getPayload();if(!cb.error)j.updateCreditCards(cb);}).bind(this)).send();},createTransaction:function(ab){var bb=ta.getURIBuilder().getURI(),cb={},db=ab.formData,eb=ab.success||xa,fb=ab.error||xa;cb[i.CREDENTIAL_ID]=db[i.CREDENTIAL_ID];cb.amount=db.amount;cb.receiver_id=db.receiverId;cb.offline_threading_id=k.genOfflineThreadingID();cb.group_thread_fbid=db.group_thread_fbid;cb.platform_context_id=db.platform_context_id;cb.shipping_address_id=db.shippingAddressID;cb.shipping_option_id=db.shippingOptionID;cb.memo_text=db.memoText;cb.payment_request_id=db.paymentRequestID;new h().setData(cb).setMethod('POST').setURI(bb).setAllowCrossPageTransition(true).setHandler((function(gb){var hb=gb?gb.getPayload():{};if(hb.error){fb(hb.error);}else{eb(hb);this.getAllCreditCards();if(cb.payment_request_id){var ib=o.getPaymentRequestByID(cb.payment_request_id);if(ib){ib=ib.set('currentStatus',n.TRANSFER_COMPLETED);j.paymentRequestUpdated(ib);}}}}).bind(this)).setErrorHandler((function(){fb({message:k.getUncaughtErrorMessage()});}).bind(this)).send();},addCreditCard:function(ab){j.ignoreCreditCardChannelEvents();var bb=ba.getURIBuilder().getURI().getPath(),cb=ab.onSuccess||xa,db=ab.onError||xa,eb=q.getURI({tpe:bb});ab=k.prepareCardMutationData(ab);var fb=new r(ab),gb=ab.platformContext;j.creditCardSaving();new h().setAllowCrossOrigin(true).setURI(eb).setData(ab).setMethod('POST').setHandler((function(hb){var ib=hb.getPayload();if(!ib.errors){fb=r.set(fb,ib);j.addCreditCard(fb);if(ib.isPreset)j.transferAccepted();if(gb)j.checkoutCreditCardSelected(ib[i.CREDENTIAL_ID]);cb();}else{j.addCreditCardError(babelHelpers._extends({requestID:fb.requestID},ib));db(ib);}j.allowCreditCardChannelEvents();}).bind(this)).setErrorHandler((function(){j.addCreditCardError({requestID:fb.requestID,errors:{general:{message:k.getUncaughtErrorMessage()}}});j.allowCreditCardChannelEvents();}).bind(this)).send();},getTransactions:function(ab){ab=ab||{};var bb={},cb=ab,db=ua.getURIBuilder().getURI(),eb=new r(cb);if(cb.since)bb.since=cb.since;return new h().setData(bb).setURI(db).setMethod('GET').setReadOnly(true).setHandler((function(fb){var gb=fb.getPayload();if(!gb.error){j.updateTransfers(gb);}else j.updateTransfersError(babelHelpers._extends({requestID:eb.requestID},gb));}).bind(this)).setErrorHandler((function(){j.updateTransfersError({error:{message:k.getUncaughtErrorMessage()},requestID:eb.requestID});}).bind(this)).send();},getExtensiveTransferDetailsByID:function(ab){var bb=fa.getURIBuilder().setString('id',ab).getURI();new h().setURI(bb).setMethod('GET').setReadOnly(true).setHandler((function(cb){var db=cb.getPayload();if(!db.error)j.extensiveTransferDetailsLoaded(db);}).bind(this)).send();},getNUXTransactions:function(){var ab=new Date(),bb=Math.round(ab.setDate(ab.getDate()-15)/1000),cb=ua.getURIBuilder().getURI();return new h().setData({since:bb}).setURI(cb).setMethod('GET').setReadOnly(true).setHandler((function(db){var eb=db.getPayload();if(!eb.error)j.updateNUXTransfers(eb);}).bind(this)).send();},updatePresetCreditCard:function(ab){var bb=na.getURIBuilder().getURI();new h().setData(ab).setURI(bb).setMethod('POST').setHandler((function(cb){var db=cb.getPayload();if(!db.error){j.updatePresetCreditCard(babelHelpers._extends({},db,{requestID:ab.requestID}));j.transferAccepted();}else j.updatePresetCreditCardError(babelHelpers._extends({},db,{requestID:ab.requestID}));}).bind(this)).setErrorHandler((function(){j.updatePresetCreditCardError({error:{message:k.getUncaughtErrorMessage()},requestID:ab.requestID});}).bind(this)).send();},updateCreditCard:function(ab){j.ignoreCreditCardChannelEvents();var bb=aa.getURIBuilder().getURI().getPath(),cb=q.getURI({tpe:bb});ab=k.prepareCardMutationData(ab);var db=new r(ab);new h().setAllowCrossOrigin(true).setURI(cb).setData(ab).setMethod('POST').setHandler((function(eb){var fb=eb.getPayload();if(!fb.errors){j.updateCreditCard(db);}else j.updateCreditCardError(babelHelpers._extends({},fb,{requestID:db.requestID}));j.allowCreditCardChannelEvents();}).bind(this)).setErrorHandler((function(){j.updateCreditCardError({errors:{general:{message:k.getUncaughtErrorMessage()}},requestID:db.requestID});j.allowCreditCardChannelEvents();}).bind(this)).send();},deleteCreditCard:function(ab){var bb=z.getURIBuilder().getURI();new h().setData(ab).setMethod('POST').setURI(bb).setHandler((function(cb){var db=cb.getPayload();if(!db.error){j.deleteCreditCard(babelHelpers._extends({},db,{requestID:ab.requestID}));}else j.deleteCreditCardError(babelHelpers._extends({},db,{requestID:ab.requestID}));}).bind(this)).setErrorHandler((function(){j.deleteCreditCardError({error:{message:k.getUncaughtErrorMessage()},requestID:ab.requestID});}).bind(this)).send();},getPasswordProtectionSetting:function(ab){var bb=ha.getURIBuilder().getURI(),cb=ab.success||xa,db=ab.error||xa;new h().setURI(bb).setMethod('GET').setReadOnly(true).setHandler((function(eb){var fb=eb?eb.getPayload():[];if(fb.error){db();}else cb(fb);}).bind(this)).setErrorHandler((function(){db();}).bind(this)).send();},setPasswordProtectionSetting:function(ab){var bb=ia.getURIBuilder().getURI(),cb=ab.formData,db=ab.success||xa,eb=ab.error||xa,fb={};fb[l.STATUS]=cb[l.STATUS];new h().setData(fb).setURI(bb).setMethod('POST').setHandler((function(gb){var hb=gb?gb.getPayload():{};if(hb.error){eb(hb.error);}else db();}).bind(this)).setErrorHandler((function(){eb();}).bind(this)).send();},declineTransaction:function(ab){var bb=va.getURIBuilder().getURI(),cb=ab.formData,db=ab.success||xa,eb=ab.error||xa,fb={};fb[p.TRANSFER_ID]=cb[p.TRANSFER_ID];new h().setData(fb).setURI(bb).setMethod('POST').setHandler((function(gb){var hb=gb?gb.getPayload():{},ib={};if(hb.error){eb(hb.error);}else{db();ib[p.TRANSFER_ID]=fb[p.TRANSFER_ID];j.transferDeclined(ib);}}).bind(this)).setErrorHandler((function(){eb();}).bind(this)).send();},cancelTransaction:function(ab){var bb=sa.getURIBuilder().getURI(),cb=ab.formData,db=ab.success||xa,eb=ab.error||xa,fb={};fb[p.TRANSFER_ID]=cb[p.TRANSFER_ID];new h().setData(fb).setURI(bb).setMethod('POST').setHandler((function(gb){var hb=gb?gb.getPayload():{};if(hb.error){eb(hb.error);}else db();}).bind(this)).setErrorHandler((function(){eb();}).bind(this)).send();},verifyCreditCard:function(ab){var bb=ca.getURIBuilder().getURI().getPath(),cb=q.getURI({tpe:bb});new h().setAllowCrossOrigin(true).setURI(cb).setData(ab).setMethod('POST').setHandler((function(db){var eb=db.getPayload();if(!eb.error){j.verifyCreditCard(babelHelpers._extends({},eb,{requestID:ab.requestID}));}else j.verifyCreditCardError(babelHelpers._extends({},eb,{requestID:ab.requestID}));}).bind(this)).setErrorHandler((function(){j.verifyCreditCardError({error:{message:k.getUncaughtErrorMessage()},requestID:ab.requestID});}).bind(this)).send();},validateBINNumber:function(ab){ab=ab||{};var bb=new r(ab),cb=y.getURIBuilder().setString('bin_number',ab.binNumber).getURI();return new h().setURI(cb).setMethod('GET').setReadOnly(true).setHandler((function(db){var eb=db.getPayload();if(!eb.error){j.binNumberValidated(babelHelpers._extends({},eb,{requestID:ab.requestID}));}else j.binNumberValidatedError(babelHelpers._extends({},eb,{requestID:bb.requestID}));}).bind(this)).send();},getUserEligibility:function(ab){ab=ab||{};var bb=wa.getURIBuilder().setStringVector('user_ids',ab.userIDs).getURI();return new h().setURI(bb).setMethod('GET').setReadOnly(true).setAllowCrossPageTransition(true).setHandler((function(cb){var db=cb.getPayload();if(!db.error)j.userEligibilityUpdated(db);}).bind(this)).send();},getFriendsList:function(ab,bb){var cb=ga.getURIBuilder().setInt('limit',ab).setString('query',bb).getURI();return new h().setURI(cb).setMethod('GET').setReadOnly(true).setHandler((function(db){var eb=db.getPayload();if(!eb.error)j.friendsListUpdated(eb);}).bind(this)).send();},getBannerStates:function(){var ab=w.getURIBuilder().getURI();new h().setURI(ab).setMethod('GET').setReadOnly(true).setHandler((function(bb){var cb=bb.getPayload();if(!cb.error)j.bannerStatesUpdated(cb);}).bind(this)).send();},incrementBannerViews:function(ab){var bb=x.getURIBuilder().setString('banner_type',ab).getURI();new h().setMethod('POST').setURI(bb).send();},incrementBannerDismissals:function(ab){var bb;j.bannerDismissed(ab);bb=v.getURIBuilder().setString('banner_type',ab).getURI();new h().setMethod('POST').setURI(bb).send();},createMoneypennyTransfer:function(ab){var bb=s.getURIBuilder().getURI();new h().setMethod('POST').setURI(bb).setData({item_id:ab.item_id,credential_id:ab.credential_id,amount:ab.amount,external_request_id:ab.external_request_id}).setHandler((function(cb){var db=cb.getPayload();if(!db.error){j.moneypennyTransferCreated(babelHelpers._extends({},db,{requestID:ab.requestID}));this.getAllCreditCards();}else j.moneypennyTransferCreatedError(babelHelpers._extends({},db,{requestID:ab.requestID}));}).bind(this)).setErrorHandler(function(){j.moneypennyTransferCreatedError({error:{message:k.getUncaughtErrorMessage()},requestID:ab.requestID});}).send();},createFinancialIncentivesTransfer:function(ab){var bb=ra.getURIBuilder().getURI(),cb=ab.success||xa,db=ab.error||xa,eb={};eb[i.CREDENTIAL_ID]=ab.credential_id;eb.external_request_id=k.genOfflineThreadingID();eb.campaign_name=m.SEVIPER;new h().setData(eb).setURI(bb).setMethod('POST').setHandler(function(fb){var gb=fb.getPayload();if(gb.error){db(gb.error);}else cb();}).send();},getPlatformContextByOtherUserID:function(ab){ab=ab||{};var bb=oa.getURIBuilder().setString('other_user_id',ab.otherUserID).getURI();return new h().setURI(bb).setMethod('GET').setReadOnly(true).setAllowCrossPageTransition(true).setHandler((function(cb){var db=cb.getPayload();if(!db.error&&!ya(db))j.addPlatformContext(db);}).bind(this)).send();},dismissPlatformContextBanner:function(ab){var bb;j.platformContextBannerDismissed(ab);bb=pa.getURIBuilder().setString('platform_context_id',ab).getURI();new h().setMethod('POST').setURI(bb).send();},markSoldPlatformContextProductItem:function(ab){var bb;j.platformContextProductItemSold(ab);bb=qa.getURIBuilder().setString('platform_context_id',ab).getURI();new h().setMethod('POST').setURI(bb).send();},getAddresses:function(){var ab=t.getURIBuilder().getURI();return new h().setURI(ab).setMethod('GET').setReadOnly(true).setAllowCrossPageTransition(true).setHandler(function(bb){var cb=bb.getPayload();if(!cb.error)j.updateAddresses(cb);}).send();},addAddress:function(){var ab=arguments.length<=0||arguments[0]===undefined?{}:arguments[0],bb=u.getURIBuilder().getURI(),cb,db=ab.platformContext,eb=ab.onSuccess||xa,fb=ab.onError||xa;cb={label:ab.label,care_of:ab.care_of,city:ab.city,street1:ab.street1,street2:ab.street2,state:ab.state,zip:ab.zip};j.addressSaving();return new h().setData(cb).setURI(bb).setMethod('POST').setHandler((function(gb){var hb=gb.getPayload();if(!hb.errors){j.addAddress(babelHelpers._extends({},hb,cb,{requestID:ab.requestID}));if(db){j.checkoutAddressSelected(hb.id);this.setPlatformContextShippingAddress({platformContextID:db.id,shippingAddressID:hb.id});}eb();}else{j.addAddressError(babelHelpers._extends({},hb,{requestID:ab.requestID}));fb(hb);}}).bind(this)).setErrorHandler(function(){j.addAddressError({errors:{general:{message:k.getUncaughtErrorMessage()}},requestID:ab.requestID});}).send();},createMCCart:function(ab){var bb=la.getURIBuilder().getURI(),cb,db=ab.productItemID;ab=ab||{};cb={item_id:db};j.checkoutCartInitiated();return new h().setData(cb).setURI(bb).setMethod('POST').setHandler(function(eb){var fb=eb.getPayload();if(!fb.error){j.addPlatformContext(babelHelpers._extends({},fb));j.checkoutCartCreated({sellerID:ab.sellerID,productItemID:db});}else j.addPlatformContextError(babelHelpers._extends({itemID:db},fb));}).setErrorHandler(function(){j.addPlatformContextError({itemID:db,error:{message:k.getUncaughtErrorMessage()}});}).send();},setPlatformContextShippingAddress:function(ab){var bb=ma.getURIBuilder().getURI(),cb,db=ab.platformContextID,eb=ab.shippingAddressID;ab=ab||{};cb={platform_context_id:db,shipping_address_id:eb};j.checkoutProcessing(true);return new h().setData(cb).setURI(bb).setMethod('POST').setHandler(function(fb){j.checkoutProcessing(false);var gb=fb.getPayload();if(!gb.error)j.addPlatformContext(babelHelpers._extends({},gb));}).send();},getCurrentUserProfileData:function(){var ab=ea.getURIBuilder().getURI();return new h().setURI(ab).setMethod('GET').setReadOnly(true).setAllowCrossPageTransition(true).setHandler(function(bb){var cb=bb.getPayload();if(!cb.error){j.checkoutBuyerProfileUpdated(cb);}else j.checkoutBuyerProfileUpdated({});}).setErrorHandler(function(){j.checkoutBuyerProfileUpdated({});}).send();},createPaymentRequest:function(ab){var bb=ja.getURIBuilder().getURI(),cb=ab.formData,db=cb.amount,eb=cb.requesteeID,fb=cb.memoText,gb=cb.group_thread_fbid,hb={amount:db,memo_text:fb,offline_threading_id:k.genOfflineThreadingID(),requestee_id:eb,group_thread_fbid:gb};j.paymentRequestInitiated();return new h().setData(hb).setURI(bb).setMethod('POST').setHandler(function(ib){var jb=ib.getPayload();if(!jb.error){j.paymentRequestCreated(babelHelpers._extends({},jb,{amount:db,memoText:fb,requesteeID:eb}));ab.success();}else{j.paymentRequestCreatedError(jb);ab.error(jb);}}).setErrorHandler(function(){var ib={error:{message:k.getUncaughtErrorMessage()}};j.addPlatformContextError(ib);ab.error(ib);}).send();},declinePaymentRequest:function(ab){var bb=ka.getURIBuilder().getURI(),cb=ab.paymentRequestID,db={payment_request_id:cb};j.paymentRequestDeclineInitiated();return new h().setData(db).setURI(bb).setMethod('POST').setHandler(function(eb){var fb=eb.getPayload();if(!fb.error){j.paymentRequestDeclined(cb);j.hideDialog();}else j.paymentRequestDeclineError(fb);}).setErrorHandler(function(){var eb={error:{message:k.getUncaughtErrorMessage()}};j.paymentRequestDeclineError(eb);}).send();}};f.exports=za;},null);
__d('MessengerThreadlistRowSeenHead.react',['Image.react','immutable','ImmutableObject','MercuryIDs','MercuryMessageInfo','ReactComponentWithPureRenderMixin','React','cx','joinClasses'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){'use strict';if(c.__markCompiled)c.__markCompiled();var q=n.PropTypes,r=n.createClass({displayName:'MessengerThreadlistRowSeenHead',mixins:[m],propTypes:{isHidden:q.bool,lastMessage:q.instanceOf(j),participants:q.instanceOf(i.Map).isRequired,readReceipts:q.instanceOf(i.OrderedMap).isRequired,thread:q.instanceOf(j).isRequired,viewer:q.string.isRequired},render:function(){if(this.props.isHidden||!this.props.thread.is_canonical)return null;var t=this.props,u=t.lastMessage,v=t.participants,w=t.readReceipts,x=t.thread,y=t.viewer,z=k.getParticipantIDFromUserID(y),aa=k.getParticipantIDFromUserID(x.other_user_fbid),ba=w.get(aa),ca=v.get(aa);if(!ca||!s(z,ba,x,u))return null;return (n.createElement(h,{className:p(this.props.className,"_2_a2"),src:ca.image_src,title:ca.name}));}});function s(t,u,v,w){if(w){return (w.author===t&&u>=w.timestamp&&!l.isSending(w)&&!l.hasError(w));}else return (v.snippet_sender===t&&u>=v.timestamp);}f.exports=r;},null);
({"__ar":1,"payload":{"actions":[{"client_thread_id":null,"message_id":"mid.1447693147594:fbcd5b6241a231db83","client_message_id":"6072065156738023495","status":1,"timestamp":1447693147595,"timestamp_absolute":"Today","timestamp_relative":"4:59pm","timestamp_datetime":"4:59pm","timestamp_time_passed":0,"attachments":[],"thread_id":null,"thread_fbid":null,"other_user_fbid":"100000680200678","action_id":null,"action_type":"ma-type:send-message"}],"payload_source":"server_send_message"},"bootloadable":{},"ixData":{},"lid":"6217794721245499287"})
fbid:100000680200678
({"__ar":1,"payload":{"actions":[{"message_id":"mid.1447106750417:cf5c8122792ddf7245","threading_id":null,"offline_threading_id":"6069605629308267553","author":"fbid:1743460630","author_email":"1743460630\u0040facebook.com","ephemeral_ttl_mode":null,"timestamp":1447106750421,"timestamp_absolute":"November 9","timestamp_relative":"Mon","timestamp_datetime":"November 9th, 10:05pm","timestamp_time_passed":3,"is_unread":false,"is_forward":false,"is_filtered_content":false,"is_filtered_content_bh":false,"is_filtered_content_account":false,"is_filtered_content_quasar":false,"is_filtered_content_invalid_app":false,"forward_count":0,"forward_message_ids":[],"source":"source:chat:web","source_tags":["source:chat"],"is_spoof_warning":false,"folder":"inbox","thread_fbid":"1743460630","other_user_fbid":"1743460630","body":"mas achei que ias gostar de saber que estes tipos existem xD","subject":null,"has_attachment":false,"attachments":[],"raw_attachments":null,"ranges":[],"thread_id":"mid.1384005816145:04aa2b90e69c6f3832","action_id":null,"action_type":"ma-type:user-generated-message"},{"message_id":"mid.1447106989912:8e442991a6e1cd1442","threading_id":null,"offline_threading_id":"6069606685562341021","author":"fbid:100000075573403","author_email":"100000075573403\u0040facebook.com","ephemeral_ttl_mode":null,"timestamp":1447106989917,"timestamp_absolute":"November 9","timestamp_relative":"Mon","timestamp_datetime":"November 9th, 10:09pm","timestamp_time_passed":3,"is_unread":false,"is_forward":false,"is_filtered_content":false,"is_filtered_content_bh":false,"is_filtered_content_account":false,"is_filtered_content_quasar":false,"is_filtered_content_invalid_app":false,"forward_count":0,"forward_message_ids":[],"source":"source:chat:web","source_tags":["source:chat"],"is_spoof_warning":false,"folder":"inbox","thread_fbid":"1743460630","other_user_fbid":"1743460630","body":"n fazia puto xD","subject":null,"has_attachment":false,"attachments":[],"raw_attachments":null,"ranges":[],"thread_id":"mid.1384005816145:04aa2b90e69c6f3832","action_id":null,"action_type":"ma-type:user-generated-message"},{"message_id":"mid.1447107046106:17ca572c4d65b25e41","threading_id":null,"offline_threading_id":"6069606869513739009","author":"fbid:1743460630","author_email":"1743460630\u0040facebook.com","ephemeral_ttl_mode":null,"timestamp":1447107046110,"timestamp_absolute":"November 9","timestamp_relative":"Mon","timestamp_datetime":"November 9th, 10:10pm","timestamp_time_passed":3,"is_unread":false,"is_forward":false,"is_filtered_content":false,"is_filtered_content_bh":false,"is_filtered_content_account":false,"is_filtered_content_quasar":false,"is_filtered_content_invalid_app":false,"forward_count":0,"forward_message_ids":[],"source":"source:chat:web","source_tags":["source:chat"],"is_spoof_warning":false,"folder":"inbox","thread_fbid":"1743460630","other_user_fbid":"1743460630","body":"pois eu suspeitei xD","subject":null,"has_attachment":false,"attachments":[],"raw_attachments":null,"ranges":[],"thread_id":"mid.1384005816145:04aa2b90e69c6f3832","action_id":null,"action_type":"ma-type:user-generated-message"},{"message_id":"mid.1447107208773:b3e13f08389f956d68","threading_id":null,"offline_threading_id":"6069607551850542891","author":"fbid:1743460630","author_email":"1743460630\u0040facebook.com","ephemeral_ttl_mode":null,"timestamp":1447107208823,"timestamp_absolute":"November 9","timestamp_relative":"Mon","timestamp_datetime":"November 9th, 10:13pm","timestamp_time_passed":3,"is_unread":false,"is_forward":false,"is_filtered_content":false,"is_filtered_content_bh":false,"is_filtered_content_account":false,"is_filtered_content_quasar":false,"is_filtered_content_invalid_app":false,"forward_count":0,"forward_message_ids":[],"source":"source:chat:web","source_tags":["source:chat"],"is_spoof_warning":false,"folder":"inbox","thread_fbid":"1743460630","other_user_fbid":"1743460630","body":"","subject":null,"has_attachment":true,"attachments":[{"app_attribution":null,"attach_type":"photo","name":"image-10201081669400900","url":"\/ajax\/mercury\/attachments\/photo\/view\/?message=mid.1447107208773\u00253Ab3e13f08389f956d68&fbid=10201081669400900&hash=AQB4vfPqfDxf5A0V","rel":"async","preview_url":"https:\/\/scontent.xx.fbcdn.net\/hphotos-xfa1\/v\/t34.0-0\/p206x206\/12212049_10201081669400900_716914115_n.jpg?oh=67f8be8d7b2ea32f6016cf02adde1059&oe=564BE6F1","preview_width":274,"preview_height":206,"preview_class":null,"icon_type":"attach:image","metadata":{"fbid":"10201081669400900","dimensions":"960,720"},"thumbnail_url":"https:\/\/scontent.xx.fbcdn.net\/hphotos-xfa1\/v\/t34.0-0\/s64x64\/12212049_10201081669400900_716914115_n.jpg?oh=0b52f9120a0c42300e3b807fd462db68&oe=564CF069","hires_url":"https:\/\/scontent.xx.fbcdn.net\/hphotos-xfa1\/v\/t34.0-12\/12212049_10201081669400900_716914115_n.jpg?oh=3da01167c70078571305f210aa4950b7&oe=564BE90F"}],"raw_attachments":null,"ranges":[],"thread_id":"mid.1384005816145:04aa2b90e69c6f3832","action_id":null,"action_type":"ma-type:user-generated-message"},{"message_id":"mid.1447107246566:e3645456c018bb1184","threading_id":null,"offline_threading_id":"6069607762060796126","author":"fbid:100000075573403","author_email":"100000075573403\u0040facebook.com","ephemeral_ttl_mode":null,"timestamp":1447107246573,"timestamp_absolute":"November 9","timestamp_relative":"Mon","timestamp_datetime":"November 9th, 10:14pm","timestamp_time_passed":3,"is_unread":false,"is_forward":false,"is_filtered_content":false,"is_filtered_content_bh":false,"is_filtered_content_account":false,"is_filtered_content_quasar":false,"is_filtered_content_invalid_app":false,"forward_count":0,"forward_message_ids":[],"source":"source:chat:web","source_tags":["source:chat"],"is_spoof_warning":false,"folder":"inbox","thread_fbid":"1743460630","other_user_fbid":"1743460630","body":"eh pa ta sossegado que j\u00e1 andei a ver a thread toda outra vez xD","subject":null,"has_attachment":false,"attachments":[],"raw_attachments":null,"ranges":[],"thread_id":"mid.1384005816145:04aa2b90e69c6f3832","action_id":null,"action_type":"ma-type:user-generated-message"},{"message_id":"mid.1447107256697:87a80c4225bf8cc815","threading_id":null,"offline_threading_id":"6069607752869166772","author":"fbid:1743460630","author_email":"1743460630\u0040facebook.com","ephemeral_ttl_mode":null,"timestamp":1447107256700,"timestamp_absolute":"November 9","timestamp_relative":"Mon","timestamp_datetime":"November 9th, 10:14pm","timestamp_time_passed":3,"is_unread":false,"is_forward":false,"is_filtered_content":false,"is_filtered_content_bh":false,"is_filtered_content_account":false,"is_filtered_content_quasar":false,"is_filtered_content_invalid_app":false,"forward_count":0,"forward_message_ids":[],"source":"source:chat:web","source_tags":["source:chat"],"is_spoof_warning":false,"folder":"inbox","thread_fbid":"1743460630","other_user_fbid":"1743460630","body":"ahaha","subject":null,"has_attachment":false,"attachments":[],"raw_attachments":null,"ranges":[],"thread_id":"mid.1384005816145:04aa2b90e69c6f3832","action_id":null,"action_type":"ma-type:user-generated-message"},{"message_id":"mid.1447190525472:717f8a6fd4bd3b5320","threading_id":null,"offline_threading_id":"6069957008958638307","author":"fbid:100000075573403","author_email":"100000075573403\u0040facebook.com","ephemeral_ttl_mode":null,"timestamp":1447190525493,"timestamp_absolute":"Tuesday","timestamp_relative":"Tue","timestamp_datetime":"Tuesday 9:22pm","timestamp_time_passed":1,"is_unread":false,"is_forward":false,"is_filtered_content":false,"is_filtered_content_bh":false,"is_filtered_content_account":false,"is_filtered_content_quasar":false,"is_filtered_content_invalid_app":false,"forward_count":0,"forward_message_ids":[],"source":"source:chat:web","source_tags":["source:chat"],"is_spoof_warning":false,"folder":"inbox","thread_fbid":"1743460630","other_user_fbid":"1743460630","body":"tive a ver o 1\u00ba ep da 2a season","subject":null,"has_attachment":false,"attachments":[],"raw_attachments":null,"ranges":[],"thread_id":"mid.1384005816145:04aa2b90e69c6f3832","action_id":null,"action_type":"ma-type:user-generated-message"},{"message_id":"mid.1447190559180:2cd432398fa0789660","threading_id":null,"offline_threading_id":"6069957150432645514","author":"fbid:100000075573403","author_email":"100000075573403\u0040facebook.com","ephemeral_ttl_mode":null,"timestamp":1447190559233,"timestamp_absolute":"Tuesday","timestamp_relative":"Tue","timestamp_datetime":"Tuesday 9:22pm","timestamp_time_passed":1,"is_unread":false,"is_forward":false,"is_filtered_content":false,"is_filtered_content_bh":false,"is_filtered_content_account":false,"is_filtered_content_quasar":false,"is_filtered_content_invalid_app":false,"forward_count":0,"forward_message_ids":[],"source":"source:chat:web","source_tags":["source:chat"],"is_spoof_warning":false,"folder":"inbox","thread_fbid":"1743460630","other_user_fbid":"1743460630","body":"ri bastante com o detalhe dos bot\u00f5es de punho no fim lol","subject":null,"has_attachment":false,"attachments":[],"raw_attachments":null,"ranges":[],"thread_id":"mid.1384005816145:04aa2b90e69c6f3832","action_id":null,"action_type":"ma-type:user-generated-message"},{"message_id":"mid.1447194244096:b7a63698e48ec27e49","threading_id":null,"offline_threading_id":"6069972605852066747","author":"fbid:1743460630","author_email":"1743460630\u0040facebook.com","ephemeral_ttl_mode":null,"timestamp":1447194244136,"timestamp_absolute":"Tuesday","timestamp_relative":"Tue","timestamp_datetime":"Tuesday 10:24pm","timestamp_time_passed":1,"is_unread":false,"is_forward":false,"is_filtered_content":false,"is_filtered_content_bh":false,"is_filtered_content_account":false,"is_filtered_content_quasar":false,"is_filtered_content_invalid_app":false,"forward_count":0,"forward_message_ids":[],"source":"source:chat:web","source_tags":["source:chat"],"is_spoof_warning":false,"folder":"inbox","thread_fbid":"1743460630","other_user_fbid":"1743460630","body":"ahah ya","subject":null,"has_attachment":false,"attachments":[],"raw_attachments":null,"ranges":[],"thread_id":"mid.1384005816145:04aa2b90e69c6f3832","action_id":null,"action_type":"ma-type:user-generated-message"},{"message_id":"mid.1447413971571:0201b0785003ff2245","threading_id":null,"offline_threading_id":"6070894218815379956","author":"fbid:100000075573403","author_email":"100000075573403\u0040facebook.com","ephemeral_ttl_mode":null,"timestamp":1447413971603,"timestamp_absolute":"Friday","timestamp_relative":"Fri","timestamp_datetime":"Friday 11:26am","timestamp_time_passed":1,"is_unread":false,"is_forward":false,"is_filtered_content":false,"is_filtered_content_bh":false,"is_filtered_content_account":false,"is_filtered_content_quasar":false,"is_filtered_content_invalid_app":false,"forward_count":0,"forward_message_ids":[],"source":"source:chat:web","source_tags":["source:chat"],"is_spoof_warning":false,"folder":"inbox","thread_fbid":"1743460630","other_user_fbid":"1743460630","body":"yeca","subject":null,"has_attachment":false,"attachments":[],"raw_attachments":null,"ranges":[],"thread_id":"mid.1384005816145:04aa2b90e69c6f3832","action_id":null,"action_type":"ma-type:user-generated-message"},{"message_id":"mid.1447413977954:28b4ec4237581f2e37","threading_id":null,"offline_threading_id":"6070894245691987265","author":"fbid:100000075573403","author_email":"100000075573403\u0040facebook.com","ephemeral_ttl_mode":null,"timestamp":1447413977956,"timestamp_absolute":"Friday","timestamp_relative":"Fri","timestamp_datetime":"Friday 11:26am","timestamp_time_passed":1,"is_unread":false,"is_forward":false,"is_filtered_content":false,"is_filtered_content_bh":false,"is_filtered_content_account":false,"is_filtered_content_quasar":false,"is_filtered_content_invalid_app":false,"forward_count":0,"forward_message_ids":[],"source":"source:chat:web","source_tags":["source:chat"],"is_spoof_warning":false,"folder":"inbox","thread_fbid":"1743460630","other_user_fbid":"1743460630","body":"almo\u00e7amos por volta da uma?","subject":null,"has_attachment":false,"attachments":[],"raw_attachments":null,"ranges":[],"thread_id":"mid.1384005816145:04aa2b90e69c6f3832","action_id":null,"action_type":"ma-type:user-generated-message"},{"message_id":"mid.1447415336651:9ef99191e798b37789","threading_id":null,"offline_threading_id":"6070899945614488394","author":"fbid:1743460630","author_email":"1743460630\u0040facebook.com","ephemeral_ttl_mode":null,"timestamp":1447415336689,"timestamp_absolute":"Friday","timestamp_relative":"Fri","timestamp_datetime":"Friday 11:48am","timestamp_time_passed":1,"is_unread":false,"is_forward":false,"is_filtered_content":false,"is_filtered_content_bh":false,"is_filtered_content_account":false,"is_filtered_content_quasar":false,"is_filtered_content_invalid_app":false,"forward_count":0,"forward_message_ids":[],"source":"source:chat:web","source_tags":["source:chat"],"is_spoof_warning":false,"folder":"inbox","thread_fbid":"1743460630","other_user_fbid":"1743460630","body":"hoje n\u00e3o pude ir, vim tratar do anivers\u00e1rio do meu irm\u00e3o e depois vou para casa","subject":null,"has_attachment":false,"attachments":[],"raw_attachments":null,"ranges":[],"thread_id":"mid.1384005816145:04aa2b90e69c6f3832","action_id":null,"action_type":"ma-type:user-generated-message"},{"message_id":"mid.1447415463952:a1f4b3dd6c81aee587","threading_id":null,"offline_threading_id":"6070900478376061975","author":"fbid:100000075573403","author_email":"100000075573403\u0040facebook.com","ephemeral_ttl_mode":null,"timestamp":1447415463954,"timestamp_absolute":"Friday","timestamp_relative":"Fri","timestamp_datetime":"Friday 11:51am","timestamp_time_passed":1,"is_unread":false,"is_forward":false,"is_filtered_content":false,"is_filtered_content_bh":false,"is_filtered_content_account":false,"is_filtered_content_quasar":false,"is_filtered_content_invalid_app":false,"forward_count":0,"forward_message_ids":[],"source":"source:chat:web","source_tags":["source:chat"],"is_spoof_warning":false,"folder":"inbox","thread_fbid":"1743460630","other_user_fbid":"1743460630","body":"ah ta bom ta bom","subject":null,"has_attachment":false,"attachments":[],"raw_attachments":null,"ranges":[],"thread_id":"mid.1384005816145:04aa2b90e69c6f3832","action_id":null,"action_type":"ma-type:user-generated-message"},{"message_id":"mid.1447635284340:eaa613b1fb6a742f29","threading_id":null,"offline_threading_id":"6071822463636626624","author":"fbid:1743460630","author_email":"1743460630\u0040facebook.com","ephemeral_ttl_mode":null,"timestamp":1447635284394,"timestamp_absolute":"Today","timestamp_relative":"12:54am","timestamp_datetime":"12:54am","timestamp_time_passed":0,"is_unread":false,"is_forward":false,"is_filtered_content":false,"is_filtered_content_bh":false,"is_filtered_content_account":false,"is_filtered_content_quasar":false,"is_filtered_content_invalid_app":false,"forward_count":0,"forward_message_ids":[],"source":"source:titan:m_touch","source_tags":["source:mobile"],"is_spoof_warning":false,"folder":"inbox","thread_fbid":"1743460630","other_user_fbid":"1743460630","body":"Amanh\u00e3 n\u00e3o viu de manh\u00e3. Vemo-nos no tagus","subject":null,"has_attachment":false,"attachments":[],"raw_attachments":null,"ranges":[],"thread_id":"mid.1384005816145:04aa2b90e69c6f3832","action_id":null,"action_type":"ma-type:user-generated-message"},{"message_id":"mid.1447639028870:c269652f26d65adc68","threading_id":null,"offline_threading_id":"6071838170784414519","author":"fbid:100000075573403","author_email":"100000075573403\u0040facebook.com","ephemeral_ttl_mode":null,"timestamp":1447639028872,"timestamp_absolute":"Today","timestamp_relative":"1:57am","timestamp_datetime":"1:57am","timestamp_time_passed":0,"is_unread":false,"is_forward":false,"is_filtered_content":false,"is_filtered_content_bh":false,"is_filtered_content_account":false,"is_filtered_content_quasar":false,"is_filtered_content_invalid_app":false,"forward_count":0,"forward_message_ids":[],"source":"source:chat:orca","source_tags":["source:messenger","source:chat","source:mobile"],"is_spoof_warning":false,"folder":"inbox","thread_fbid":"1743460630","other_user_fbid":"1743460630","body":"T\u00e1-se bem, vais almo\u00e7ar l\u00e1? S\u00f3 para saber que shuttle apanho","subject":null,"has_attachment":false,"attachments":[],"raw_attachments":null,"ranges":[],"thread_id":"mid.1384005816145:04aa2b90e69c6f3832","action_id":null,"action_type":"ma-type:user-generated-message"},{"message_id":"mid.1447640232698:adb6cd07ccc04bb336","threading_id":null,"offline_threading_id":"6071843218556236443","author":"fbid:1743460630","author_email":"1743460630\u0040facebook.com","ephemeral_ttl_mode":null,"timestamp":1447640232712,"timestamp_absolute":"Today","timestamp_relative":"2:17am","timestamp_datetime":"2:17am","timestamp_time_passed":0,"is_unread":false,"is_forward":false,"is_filtered_content":false,"is_filtered_content_bh":false,"is_filtered_content_account":false,"is_filtered_content_quasar":false,"is_filtered_content_invalid_app":false,"forward_count":0,"forward_message_ids":[],"source":"source:titan:m_tablet","source_tags":[],"is_spoof_warning":false,"folder":"inbox","thread_fbid":"1743460630","other_user_fbid":"1743460630","body":"Devo almo\u00e7ar em casa mas confirmo amanh\u00e3","subject":null,"has_attachment":false,"attachments":[],"raw_attachments":null,"ranges":[],"thread_id":"mid.1384005816145:04aa2b90e69c6f3832","action_id":null,"action_type":"ma-type:user-generated-message"},{"message_id":"mid.1447670965669:ed464e284618b47606","threading_id":null,"offline_threading_id":"6071972131157517954","author":"fbid:1743460630","author_email":"1743460630\u0040facebook.com","ephemeral_ttl_mode":null,"timestamp":1447670965729,"timestamp_absolute":"Today","timestamp_relative":"10:49am","timestamp_datetime":"10:49am","timestamp_time_passed":0,"is_unread":false,"is_forward":false,"is_filtered_content":false,"is_filtered_content_bh":false,"is_filtered_content_account":false,"is_filtered_content_quasar":false,"is_filtered_content_invalid_app":false,"forward_count":0,"forward_message_ids":[],"source":"source:chat:web","source_tags":["source:chat"],"is_spoof_warning":false,"folder":"inbox","thread_fbid":"1743460630","other_user_fbid":"1743460630","body":"vou comer aqui em casa","subject":null,"has_attachment":false,"attachments":[],"raw_attachments":null,"ranges":[],"thread_id":"mid.1384005816145:04aa2b90e69c6f3832","action_id":null,"action_type":"ma-type:user-generated-message"},{"message_id":"mid.1447671401052:fe47e42656bcae5399","threading_id":null,"offline_threading_id":"6071973951466432572","author":"fbid:100000075573403","author_email":"100000075573403\u0040facebook.com","ephemeral_ttl_mode":null,"timestamp":1447671401054,"timestamp_absolute":"Today","timestamp_relative":"10:56am","timestamp_datetime":"10:56am","timestamp_time_passed":0,"is_unread":false,"is_forward":false,"is_filtered_content":false,"is_filtered_content_bh":false,"is_filtered_content_account":false,"is_filtered_content_quasar":false,"is_filtered_content_invalid_app":false,"forward_count":0,"forward_message_ids":[],"source":"source:chat:orca","source_tags":["source:messenger","source:chat","source:mobile"],"is_spoof_warning":false,"folder":"inbox","thread_fbid":"1743460630","other_user_fbid":"1743460630","body":"Roger","subject":null,"has_attachment":false,"attachments":[],"raw_attachments":null,"ranges":[],"thread_id":"mid.1384005816145:04aa2b90e69c6f3832","action_id":null,"action_type":"ma-type:user-generated-message"},{"message_id":"mid.1447682200114:582e06d0fdd9b6ff25","threading_id":null,"offline_threading_id":"6072019245141471136","author":"fbid:100000075573403","author_email":"100000075573403\u0040facebook.com","ephemeral_ttl_mode":null,"timestamp":1447682200117,"timestamp_absolute":"Today","timestamp_relative":"1:56pm","timestamp_datetime":"1:56pm","timestamp_time_passed":0,"is_unread":false,"is_forward":false,"is_filtered_content":false,"is_filtered_content_bh":false,"is_filtered_content_account":false,"is_filtered_content_quasar":false,"is_filtered_content_invalid_app":false,"forward_count":0,"forward_message_ids":[],"source":"source:chat:web","source_tags":["source:chat"],"is_spoof_warning":false,"folder":"inbox","thread_fbid":"1743460630","other_user_fbid":"1743460630","body":"tou na sala do neiist","subject":null,"has_attachment":false,"attachments":[],"raw_attachments":null,"ranges":[],"thread_id":"mid.1384005816145:04aa2b90e69c6f3832","action_id":null,"action_type":"ma-type:user-generated-message"},{"message_id":"mid.1447684175873:f58333f672ead72710","threading_id":null,"offline_threading_id":"6072027538344346995","author":"fbid:1743460630","author_email":"1743460630\u0040facebook.com","ephemeral_ttl_mode":null,"timestamp":1447684175934,"timestamp_absolute":"Today","timestamp_relative":"2:29pm","timestamp_datetime":"2:29pm","timestamp_time_passed":0,"is_unread":false,"is_forward":false,"is_filtered_content":false,"is_filtered_content_bh":false,"is_filtered_content_account":false,"is_filtered_content_quasar":false,"is_filtered_content_invalid_app":false,"forward_count":0,"forward_message_ids":[],"source":"source:chat:web","source_tags":["source:chat"],"is_spoof_warning":false,"folder":"inbox","thread_fbid":"1743460630","other_user_fbid":"1743460630","body":"ok eu j\u00e1 estou a ir para o tagus","subject":null,"has_attachment":false,"attachments":[],"raw_attachments":null,"ranges":[],"thread_id":"mid.1384005816145:04aa2b90e69c6f3832","action_id":null,"action_type":"ma-type:user-generated-message"}],"roger":{"1743460630":{"1743460630":1447684175934},"mid.1384005816145:04aa2b90e69c6f3832":{"1743460630":1447684175934}},"message_blocked_ids":[],"payload_source":"server_fetch_thread_info"},"bootloadable":{},"ixData":{},"lid":"6217794738737747001"})
({"__ar":1,"payload":{"actions":[{"thread_id":null,"thread_fbid":null,"other_user_fbid":"100000680200678","action_id":null,"action_type":"ma-type:update-action-id"}],"payload_source":"server_change_read_status"},"bootloadable":{},"ixData":{},"lid":"6217794764386010538"})
fbid=21743460630a
.$fbid=21743460630
fbid:1000000755734035b
fbid:1000000755734035b
fbid:1000000755734035b
fbid:1000000755734035b
for (;;); {"t":"msg","seq":9,"u":100000075573403,"ms":[{"folder":"inbox","thread_row":"","is_unread":true,"sequence_id":300178,"msg_body":"","new_participants":"","unread_counts":{},"html":"","type":"messaging","message":{"attachments":[],"ranges":[],"share_map":[],"subject":null,"mercury_author_id":"fbid:100000680200678","timestamp_relative":null,"mid":"mid.1447693151936:24bae3065406d84d53","sender_name":"David Duarte","has_attachment":false,"source":"source:unknown","body":"RAMAS_IS_LIFE","tid":null,"mercury_source_tags":[],"timestamp_datetime":null,"mercury_author_email":"100000680200678@facebook.com","replyActionType":0,"other_user_fbid":100000680200678,"timestamp":1447693151940,"timestamp_time_passed":null,"offline_threading_id":"6072065176457387548","mercury_source":"source:unknown","group_thread_info":null,"html_body":"","forward":0,"threading_id":"<1447693151583:0-3787051c3785cf89@mail.projektitan.com>","timestamp_absolute":null,"short_source":1,"tags":"source:messenger:web,cg-enabled,inbox","is_spoof_warning":false,"ephemeral_ttl_mode":0,"sender":"100000680200678@facebook.com","is_unread":true,"api_tags":["inbox","source:web"],"sender_fbid":100000680200678,"attachmentIds":[],"prev_last_visible_action_id":-1,"attachment_map":[]},"event":"deliver"},{"st":0,"from":100000680200678,"to":100000075573403,"from_mobile":false,"realtime_viewer_fbid":100000075573403,"type":"typ"}]}B
fbid:100000680200678
other_user_fbid[
sender_fbid
realtime_viewer_fbid
fbid:100000075573403
fbid:1000000755734035b
fbid:100000075573403
fbid:100000075573403H
fbid8
fbid:100000680200678
for (;;); {"t":"msg","seq":12,"u":100000075573403,"ms":[{"overlay":{"100000680200678":{"a":0,"ol":-1,"s":"push","p":{"status":"offline","webStatus":"offline","fbAppStatus":"offline","messengerStatus":"offline","otherStatus":"offline"},"vc":8,"la":1447693150}},"type":"buddylist_overlay"},{"unread":2,"unseen":1,"other_unseen":0,"other_unread":0,"seen_timestamp":0,"realtime_viewer_fbid":100000075573403,"type":"inbox"},{"overlay":{"100000680200678":{"a":0,"ol":-1,"s":"push","p":{"status":"offline","webStatus":"offline","fbAppStatus":"offline","messengerStatus":"offline","otherStatus":"offline"},"vc":8,"la":1447693151}},"type":"buddylist_overlay"}]}
realtime_viewer_fbid
fbid:1000000755734035b
fbid:1000000755734035b
for (;;); {"t":"msg","seq":13,"u":100000075573403,"ms":[{"unread":2,"unseen":0,"other_unseen":0,"other_unread":0,"seen_timestamp":1447693151940,"realtime_viewer_fbid":100000075573403,"type":"inbox"}]}
realtime_viewer_fbid
fbid:1000000755734035b
fbid:1000000755734035b
fbid:1000000755734035b
fbid
fbid
fbid:1000000755734035b
fbid:100000075573403
fbid:1000000755734035b
fbid:1000000755734035b
fbid:100000075573403
$map_fbid:100000680200678
$map_fbid:100000680200678p
$map_fbid:100000075573403
$map_fbid:100000075573403b
$map_fbid:100000075573403
$map_fbid:100000075573403
fbid:1000000755734035b
fbid:100000075573403
fbid:1000000755734035b
fbid:1000000755734035b
fbid:1000000755734035b
$map_fbid:100000680200678
$map_fbid:1000006802006788#
$map_fbid:100000075573403
$map_fbid:100000075573403
$map_fbid:100000075573403
$map_fbid:100000075573403
$map_fbid:100000680200678
fbid:100000075573403
({"__ar":1,"payload":{"actions":[{"message_id":"mid.1447106750417:cf5c8122792ddf7245","threading_id":null,"offline_threading_id":"6069605629308267553","author":"fbid:1743460630","author_email":"1743460630\u0040facebook.com","ephemeral_ttl_mode":null,"timestamp":1447106750421,"timestamp_absolute":"November 9","timestamp_relative":"Mon","timestamp_datetime":"November 9th, 10:05pm","timestamp_time_passed":3,"is_unread":false,"is_forward":false,"is_filtered_content":false,"is_filtered_content_bh":false,"is_filtered_content_account":false,"is_filtered_content_quasar":false,"is_filtered_content_invalid_app":false,"forward_count":0,"forward_message_ids":[],"source":"source:chat:web","source_tags":["source:chat"],"is_spoof_warning":false,"folder":"inbox","thread_fbid":"1743460630","other_user_fbid":"1743460630","body":"mas achei que ias gostar de saber que estes tipos existem xD","subject":null,"has_attachment":false,"attachments":[],"raw_attachments":null,"ranges":[],"thread_id":"mid.1384005816145:04aa2b90e69c6f3832","action_id":null,"action_type":"ma-type:user-generated-message"},{"message_id":"mid.1447106989912:8e442991a6e1cd1442","threading_id":null,"offline_threading_id":"6069606685562341021","author":"fbid:100000075573403","author_email":"100000075573403\u0040facebook.com","ephemeral_ttl_mode":null,"timestamp":1447106989917,"timestamp_absolute":"November 9","timestamp_relative":"Mon","timestamp_datetime":"November 9th, 10:09pm","timestamp_time_passed":3,"is_unread":false,"is_forward":false,"is_filtered_content":false,"is_filtered_content_bh":false,"is_filtered_content_account":false,"is_filtered_content_quasar":false,"is_filtered_content_invalid_app":false,"forward_count":0,"forward_message_ids":[],"source":"source:chat:web","source_tags":["source:chat"],"is_spoof_warning":false,"folder":"inbox","thread_fbid":"1743460630","other_user_fbid":"1743460630","body":"n fazia puto xD","subject":null,"has_attachment":false,"attachments":[],"raw_attachments":null,"ranges":[],"thread_id":"mid.1384005816145:04aa2b90e69c6f3832","action_id":null,"action_type":"ma-type:user-generated-message"},{"message_id":"mid.1447107046106:17ca572c4d65b25e41","threading_id":null,"offline_threading_id":"6069606869513739009","author":"fbid:1743460630","author_email":"1743460630\u0040facebook.com","ephemeral_ttl_mode":null,"timestamp":1447107046110,"timestamp_absolute":"November 9","timestamp_relative":"Mon","timestamp_datetime":"November 9th, 10:10pm","timestamp_time_passed":3,"is_unread":false,"is_forward":false,"is_filtered_content":false,"is_filtered_content_bh":false,"is_filtered_content_account":false,"is_filtered_content_quasar":false,"is_filtered_content_invalid_app":false,"forward_count":0,"forward_message_ids":[],"source":"source:chat:web","source_tags":["source:chat"],"is_spoof_warning":false,"folder":"inbox","thread_fbid":"1743460630","other_user_fbid":"1743460630","body":"pois eu suspeitei xD","subject":null,"has_attachment":false,"attachments":[],"raw_attachments":null,"ranges":[],"thread_id":"mid.1384005816145:04aa2b90e69c6f3832","action_id":null,"action_type":"ma-type:user-generated-message"},{"message_id":"mid.1447107208773:b3e13f08389f956d68","threading_id":null,"offline_threading_id":"6069607551850542891","author":"fbid:1743460630","author_email":"1743460630\u0040facebook.com","ephemeral_ttl_mode":null,"timestamp":1447107208823,"timestamp_absolute":"November 9","timestamp_relative":"Mon","timestamp_datetime":"November 9th, 10:13pm","timestamp_time_passed":3,"is_unread":false,"is_forward":false,"is_filtered_content":false,"is_filtered_content_bh":false,"is_filtered_content_account":false,"is_filtered_content_quasar":false,"is_filtered_content_invalid_app":false,"forward_count":0,"forward_message_ids":[],"source":"source:chat:web","source_tags":["source:chat"],"is_spoof_warning":false,"folder":"inbox","thread_fbid":"1743460630","other_user_fbid":"1743460630","body":"","subject":null,"has_attachment":true,"attachments":[{"app_attribution":null,"attach_type":"photo","name":"image-10201081669400900","url":"\/ajax\/mercury\/attachments\/photo\/view\/?message=mid.1447107208773\u00253Ab3e13f08389f956d68&fbid=10201081669400900&hash=AQB4vfPqfDxf5A0V","rel":"async","preview_url":"https:\/\/scontent.xx.fbcdn.net\/hphotos-xfa1\/v\/t34.0-0\/p206x206\/12212049_10201081669400900_716914115_n.jpg?oh=67f8be8d7b2ea32f6016cf02adde1059&oe=564BE6F1","preview_width":274,"preview_height":206,"preview_class":null,"icon_type":"attach:image","metadata":{"fbid":"10201081669400900","dimensions":"960,720"},"thumbnail_url":"https:\/\/scontent.xx.fbcdn.net\/hphotos-xfa1\/v\/t34.0-0\/s64x64\/12212049_10201081669400900_716914115_n.jpg?oh=0b52f9120a0c42300e3b807fd462db68&oe=564CF069","hires_url":"https:\/\/scontent.xx.fbcdn.net\/hphotos-xfa1\/v\/t34.0-12\/12212049_10201081669400900_716914115_n.jpg?oh=3da01167c70078571305f210aa4950b7&oe=564BE90F"}],"raw_attachments":null,"ranges":[],"thread_id":"mid.1384005816145:04aa2b90e69c6f3832","action_id":null,"action_type":"ma-type:user-generated-message"},{"message_id":"mid.1447107246566:e3645456c018bb1184","threading_id":null,"offline_threading_id":"6069607762060796126","author":"fbid:100000075573403","author_email":"100000075573403\u0040facebook.com","ephemeral_ttl_mode":null,"timestamp":1447107246573,"timestamp_absolute":"November 9","timestamp_relative":"Mon","timestamp_datetime":"November 9th, 10:14pm","timestamp_time_passed":3,"is_unread":false,"is_forward":false,"is_filtered_content":false,"is_filtered_content_bh":false,"is_filtered_content_account":false,"is_filtered_content_quasar":false,"is_filtered_content_invalid_app":false,"forward_count":0,"forward_message_ids":[],"source":"source:chat:web","source_tags":["source:chat"],"is_spoof_warning":false,"folder":"inbox","thread_fbid":"1743460630","other_user_fbid":"1743460630","body":"eh pa ta sossegado que j\u00e1 andei a ver a thread toda outra vez xD","subject":null,"has_attachment":false,"attachments":[],"raw_attachments":null,"ranges":[],"thread_id":"mid.1384005816145:04aa2b90e69c6f3832","action_id":null,"action_type":"ma-type:user-generated-message"},{"message_id":"mid.1447107256697:87a80c4225bf8cc815","threading_id":null,"offline_threading_id":"6069607752869166772","author":"fbid:1743460630","author_email":"1743460630\u0040facebook.com","ephemeral_ttl_mode":null,"timestamp":1447107256700,"timestamp_absolute":"November 9","timestamp_relative":"Mon","timestamp_datetime":"November 9th, 10:14pm","timestamp_time_passed":3,"is_unread":false,"is_forward":false,"is_filtered_content":false,"is_filtered_content_bh":false,"is_filtered_content_account":false,"is_filtered_content_quasar":false,"is_filtered_content_invalid_app":false,"forward_count":0,"forward_message_ids":[],"source":"source:chat:web","source_tags":["source:chat"],"is_spoof_warning":false,"folder":"inbox","thread_fbid":"1743460630","other_user_fbid":"1743460630","body":"ahaha","subject":null,"has_attachment":false,"attachments":[],"raw_attachments":null,"ranges":[],"thread_id":"mid.1384005816145:04aa2b90e69c6f3832","action_id":null,"action_type":"ma-type:user-generated-message"},{"message_id":"mid.1447190525472:717f8a6fd4bd3b5320","threading_id":null,"offline_threading_id":"6069957008958638307","author":"fbid:100000075573403","author_email":"100000075573403\u0040facebook.com","ephemeral_ttl_mode":null,"timestamp":1447190525493,"timestamp_absolute":"Tuesday","timestamp_relative":"Tue","timestamp_datetime":"Tuesday 9:22pm","timestamp_time_passed":1,"is_unread":false,"is_forward":false,"is_filtered_content":false,"is_filtered_content_bh":false,"is_filtered_content_account":false,"is_filtered_content_quasar":false,"is_filtered_content_invalid_app":false,"forward_count":0,"forward_message_ids":[],"source":"source:chat:web","source_tags":["source:chat"],"is_spoof_warning":false,"folder":"inbox","thread_fbid":"1743460630","other_user_fbid":"1743460630","body":"tive a ver o 1\u00ba ep da 2a season","subject":null,"has_attachment":false,"attachments":[],"raw_attachments":null,"ranges":[],"thread_id":"mid.1384005816145:04aa2b90e69c6f3832","action_id":null,"action_type":"ma-type:user-generated-message"},{"message_id":"mid.1447190559180:2cd432398fa0789660","threading_id":null,"offline_threading_id":"6069957150432645514","author":"fbid:100000075573403","author_email":"100000075573403\u0040facebook.com","ephemeral_ttl_mode":null,"timestamp":1447190559233,"timestamp_absolute":"Tuesday","timestamp_relative":"Tue","timestamp_datetime":"Tuesday 9:22pm","timestamp_time_passed":1,"is_unread":false,"is_forward":false,"is_filtered_content":false,"is_filtered_content_bh":false,"is_filtered_content_account":false,"is_filtered_content_quasar":false,"is_filtered_content_invalid_app":false,"forward_count":0,"forward_message_ids":[],"source":"source:chat:web","source_tags":["source:chat"],"is_spoof_warning":false,"folder":"inbox","thread_fbid":"1743460630","other_user_fbid":"1743460630","body":"ri bastante com o detalhe dos bot\u00f5es de punho no fim lol","subject":null,"has_attachment":false,"attachments":[],"raw_attachments":null,"ranges":[],"thread_id":"mid.1384005816145:04aa2b90e69c6f3832","action_id":null,"action_type":"ma-type:user-generated-message"},{"message_id":"mid.1447194244096:b7a63698e48ec27e49","threading_id":null,"offline_threading_id":"6069972605852066747","author":"fbid:1743460630","author_email":"1743460630\u0040facebook.com","ephemeral_ttl_mode":null,"timestamp":1447194244136,"timestamp_absolute":"Tuesday","timestamp_relative":"Tue","timestamp_datetime":"Tuesday 10:24pm","timestamp_time_passed":1,"is_unread":false,"is_forward":false,"is_filtered_content":false,"is_filtered_content_bh":false,"is_filtered_content_account":false,"is_filtered_content_quasar":false,"is_filtered_content_invalid_app":false,"forward_count":0,"forward_message_ids":[],"source":"source:chat:web","source_tags":["source:chat"],"is_spoof_warning":false,"folder":"inbox","thread_fbid":"1743460630","other_user_fbid":"1743460630","body":"ahah ya","subject":null,"has_attachment":false,"attachments":[],"raw_attachments":null,"ranges":[],"thread_id":"mid.1384005816145:04aa2b90e69c6f3832","action_id":null,"action_type":"ma-type:user-generated-message"},{"message_id":"mid.1447413971571:0201b0785003ff2245","threading_id":null,"offline_threading_id":"6070894218815379956","author":"fbid:100000075573403","author_email":"100000075573403\u0040facebook.com","ephemeral_ttl_mode":null,"timestamp":1447413971603,"timestamp_absolute":"Friday","timestamp_relative":"Fri","timestamp_datetime":"Friday 11:26am","timestamp_time_passed":1,"is_unread":false,"is_forward":false,"is_filtered_content":false,"is_filtered_content_bh":false,"is_filtered_content_account":false,"is_filtered_content_quasar":false,"is_filtered_content_invalid_app":false,"forward_count":0,"forward_message_ids":[],"source":"source:chat:web","source_tags":["source:chat"],"is_spoof_warning":false,"folder":"inbox","thread_fbid":"1743460630","other_user_fbid":"1743460630","body":"yeca","subject":null,"has_attachment":false,"attachments":[],"raw_attachments":null,"ranges":[],"thread_id":"mid.1384005816145:04aa2b90e69c6f3832","action_id":null,"action_type":"ma-type:user-generated-message"},{"message_id":"mid.1447413977954:28b4ec4237581f2e37","threading_id":null,"offline_threading_id":"6070894245691987265","author":"fbid:100000075573403","author_email":"100000075573403\u0040facebook.com","ephemeral_ttl_mode":null,"timestamp":1447413977956,"timestamp_absolute":"Friday","timestamp_relative":"Fri","timestamp_datetime":"Friday 11:26am","timestamp_time_passed":1,"is_unread":false,"is_forward":false,"is_filtered_content":false,"is_filtered_content_bh":false,"is_filtered_content_account":false,"is_filtered_content_quasar":false,"is_filtered_content_invalid_app":false,"forward_count":0,"forward_message_ids":[],"source":"source:chat:web","source_tags":["source:chat"],"is_spoof_warning":false,"folder":"inbox","thread_fbid":"1743460630","other_user_fbid":"1743460630","body":"almo\u00e7amos por volta da uma?","subject":null,"has_attachment":false,"attachments":[],"raw_attachments":null,"ranges":[],"thread_id":"mid.1384005816145:04aa2b90e69c6f3832","action_id":null,"action_type":"ma-type:user-generated-message"},{"message_id":"mid.1447415336651:9ef99191e798b37789","threading_id":null,"offline_threading_id":"6070899945614488394","author":"fbid:1743460630","author_email":"1743460630\u0040facebook.com","ephemeral_ttl_mode":null,"timestamp":1447415336689,"timestamp_absolute":"Friday","timestamp_relative":"Fri","timestamp_datetime":"Friday 11:48am","timestamp_time_passed":1,"is_unread":false,"is_forward":false,"is_filtered_content":false,"is_filtered_content_bh":false,"is_filtered_content_account":false,"is_filtered_content_quasar":false,"is_filtered_content_invalid_app":false,"forward_count":0,"forward_message_ids":[],"source":"source:chat:web","source_tags":["source:chat"],"is_spoof_warning":false,"folder":"inbox","thread_fbid":"1743460630","other_user_fbid":"1743460630","body":"hoje n\u00e3o pude ir, vim tratar do anivers\u00e1rio do meu irm\u00e3o e depois vou para casa","subject":null,"has_attachment":false,"attachments":[],"raw_attachments":null,"ranges":[],"thread_id":"mid.1384005816145:04aa2b90e69c6f3832","action_id":null,"action_type":"ma-type:user-generated-message"},{"message_id":"mid.1447415463952:a1f4b3dd6c81aee587","threading_id":null,"offline_threading_id":"6070900478376061975","author":"fbid:100000075573403","author_email":"100000075573403\u0040facebook.com","ephemeral_ttl_mode":null,"timestamp":1447415463954,"timestamp_absolute":"Friday","timestamp_relative":"Fri","timestamp_datetime":"Friday 11:51am","timestamp_time_passed":1,"is_unread":false,"is_forward":false,"is_filtered_content":false,"is_filtered_content_bh":false,"is_filtered_content_account":false,"is_filtered_content_quasar":false,"is_filtered_content_invalid_app":false,"forward_count":0,"forward_message_ids":[],"source":"source:chat:web","source_tags":["source:chat"],"is_spoof_warning":false,"folder":"inbox","thread_fbid":"1743460630","other_user_fbid":"1743460630","body":"ah ta bom ta bom","subject":null,"has_attachment":false,"attachments":[],"raw_attachments":null,"ranges":[],"thread_id":"mid.1384005816145:04aa2b90e69c6f3832","action_id":null,"action_type":"ma-type:user-generated-message"},{"message_id":"mid.1447635284340:eaa613b1fb6a742f29","threading_id":null,"offline_threading_id":"6071822463636626624","author":"fbid:1743460630","author_email":"1743460630\u0040facebook.com","ephemeral_ttl_mode":null,"timestamp":1447635284394,"timestamp_absolute":"Today","timestamp_relative":"12:54am","timestamp_datetime":"12:54am","timestamp_time_passed":0,"is_unread":false,"is_forward":false,"is_filtered_content":false,"is_filtered_content_bh":false,"is_filtered_content_account":false,"is_filtered_content_quasar":false,"is_filtered_content_invalid_app":false,"forward_count":0,"forward_message_ids":[],"source":"source:titan:m_touch","source_tags":["source:mobile"],"is_spoof_warning":false,"folder":"inbox","thread_fbid":"1743460630","other_user_fbid":"1743460630","body":"Amanh\u00e3 n\u00e3o viu de manh\u00e3. Vemo-nos no tagus","subject":null,"has_attachment":false,"attachments":[],"raw_attachments":null,"ranges":[],"thread_id":"mid.1384005816145:04aa2b90e69c6f3832","action_id":null,"action_type":"ma-type:user-generated-message"},{"message_id":"mid.1447639028870:c269652f26d65adc68","threading_id":null,"offline_threading_id":"6071838170784414519","author":"fbid:100000075573403","author_email":"100000075573403\u0040facebook.com","ephemeral_ttl_mode":null,"timestamp":1447639028872,"timestamp_absolute":"Today","timestamp_relative":"1:57am","timestamp_datetime":"1:57am","timestamp_time_passed":0,"is_unread":false,"is_forward":false,"is_filtered_content":false,"is_filtered_content_bh":false,"is_filtered_content_account":false,"is_filtered_content_quasar":false,"is_filtered_content_invalid_app":false,"forward_count":0,"forward_message_ids":[],"source":"source:chat:orca","source_tags":["source:messenger","source:chat","source:mobile"],"is_spoof_warning":false,"folder":"inbox","thread_fbid":"1743460630","other_user_fbid":"1743460630","body":"T\u00e1-se bem, vais almo\u00e7ar l\u00e1? S\u00f3 para saber que shuttle apanho","subject":null,"has_attachment":false,"attachments":[],"raw_attachments":null,"ranges":[],"thread_id":"mid.1384005816145:04aa2b90e69c6f3832","action_id":null,"action_type":"ma-type:user-generated-message"},{"message_id":"mid.1447640232698:adb6cd07ccc04bb336","threading_id":null,"offline_threading_id":"6071843218556236443","author":"fbid:1743460630","author_email":"1743460630\u0040facebook.com","ephemeral_ttl_mode":null,"timestamp":1447640232712,"timestamp_absolute":"Today","timestamp_relative":"2:17am","timestamp_datetime":"2:17am","timestamp_time_passed":0,"is_unread":false,"is_forward":false,"is_filtered_content":false,"is_filtered_content_bh":false,"is_filtered_content_account":false,"is_filtered_content_quasar":false,"is_filtered_content_invalid_app":false,"forward_count":0,"forward_message_ids":[],"source":"source:titan:m_tablet","source_tags":[],"is_spoof_warning":false,"folder":"inbox","thread_fbid":"1743460630","other_user_fbid":"1743460630","body":"Devo almo\u00e7ar em casa mas confirmo amanh\u00e3","subject":null,"has_attachment":false,"attachments":[],"raw_attachments":null,"ranges":[],"thread_id":"mid.1384005816145:04aa2b90e69c6f3832","action_id":null,"action_type":"ma-type:user-generated-message"},{"message_id":"mid.1447670965669:ed464e284618b47606","threading_id":null,"offline_threading_id":"6071972131157517954","author":"fbid:1743460630","author_email":"1743460630\u0040facebook.com","ephemeral_ttl_mode":null,"timestamp":1447670965729,"timestamp_absolute":"Today","timestamp_relative":"10:49am","timestamp_datetime":"10:49am","timestamp_time_passed":0,"is_unread":false,"is_forward":false,"is_filtered_content":false,"is_filtered_content_bh":false,"is_filtered_content_account":false,"is_filtered_content_quasar":false,"is_filtered_content_invalid_app":false,"forward_count":0,"forward_message_ids":[],"source":"source:chat:web","source_tags":["source:chat"],"is_spoof_warning":false,"folder":"inbox","thread_fbid":"1743460630","other_user_fbid":"1743460630","body":"vou comer aqui em casa","subject":null,"has_attachment":false,"attachments":[],"raw_attachments":null,"ranges":[],"thread_id":"mid.1384005816145:04aa2b90e69c6f3832","action_id":null,"action_type":"ma-type:user-generated-message"},{"message_id":"mid.1447671401052:fe47e42656bcae5399","threading_id":null,"offline_threading_id":"6071973951466432572","author":"fbid:100000075573403","author_email":"100000075573403\u0040facebook.com","ephemeral_ttl_mode":null,"timestamp":1447671401054,"timestamp_absolute":"Today","timestamp_relative":"10:56am","timestamp_datetime":"10:56am","timestamp_time_passed":0,"is_unread":false,"is_forward":false,"is_filtered_content":false,"is_filtered_content_bh":false,"is_filtered_content_account":false,"is_filtered_content_quasar":false,"is_filtered_content_invalid_app":false,"forward_count":0,"forward_message_ids":[],"source":"source:chat:orca","source_tags":["source:messenger","source:chat","source:mobile"],"is_spoof_warning":false,"folder":"inbox","thread_fbid":"1743460630","other_user_fbid":"1743460630","body":"Roger","subject":null,"has_attachment":false,"attachments":[],"raw_attachments":null,"ranges":[],"thread_id":"mid.1384005816145:04aa2b90e69c6f3832","action_id":null,"action_type":"ma-type:user-generated-message"},{"message_id":"mid.1447682200114:582e06d0fdd9b6ff25","threading_id":null,"offline_threading_id":"6072019245141471136","author":"fbid:100000075573403","author_email":"100000075573403\u0040facebook.com","ephemeral_ttl_mode":null,"timestamp":1447682200117,"timestamp_absolute":"Today","timestamp_relative":"1:56pm","timestamp_datetime":"1:56pm","timestamp_time_passed":0,"is_unread":false,"is_forward":false,"is_filtered_content":false,"is_filtered_content_bh":false,"is_filtered_content_account":false,"is_filtered_content_quasar":false,"is_filtered_content_invalid_app":false,"forward_count":0,"forward_message_ids":[],"source":"source:chat:web","source_tags":["source:chat"],"is_spoof_warning":false,"folder":"inbox","thread_fbid":"1743460630","other_user_fbid":"1743460630","body":"tou na sala do neiist","subject":null,"has_attachment":false,"attachments":[],"raw_attachments":null,"ranges":[],"thread_id":"mid.1384005816145:04aa2b90e69c6f3832","action_id":null,"action_type":"ma-type:user-generated-message"},{"message_id":"mid.1447684175873:f58333f672ead72710","threading_id":null,"offline_threading_id":"6072027538344346995","author":"fbid:1743460630","author_email":"1743460630\u0040facebook.com","ephemeral_ttl_mode":null,"timestamp":1447684175934,"timestamp_absolute":"Today","timestamp_relative":"2:29pm","timestamp_datetime":"2:29pm","timestamp_time_passed":0,"is_unread":false,"is_forward":false,"is_filtered_content":false,"is_filtered_content_bh":false,"is_filtered_content_account":false,"is_filtered_content_quasar":false,"is_filtered_content_invalid_app":false,"forward_count":0,"forward_message_ids":[],"source":"source:chat:web","source_tags":["source:chat"],"is_spoof_warning":false,"folder":"inbox","thread_fbid":"1743460630","other_user_fbid":"1743460630","body":"ok eu j\u00e1 estou a ir para o tagus","subject":null,"has_attachment":false,"attachments":[],"raw_attachments":null,"ranges":[],"thread_id":"mid.1384005816145:04aa2b90e69c6f3832","action_id":null,"action_type":"ma-type:user-generated-message"}],"roger":{"1743460630":{"1743460630":1447684175934},"mid.1384005816145:04aa2b90e69c6f3832":{"1743460630":1447684175934}},"message_blocked_ids":[],"payload_source":"server_fetch_thread_info"},"bootloadable":{},"ixData":{},"lid":"6217794738737747001"})
fbid:100000680200678
fbid:1000000755734035b
fbid:100000075573403
fbid:100000075573403
fbid:1000000755734035b
fbid:1000000755734035b
fbid:100000075573403
fbid:1000000755734035b
fbid:100000075573403
fbid:100000075573403
({"__ar":1,"payload":{"actions":[{"thread_id":null,"thread_fbid":null,"other_user_fbid":"100000680200678","action_id":null,"action_type":"ma-type:update-action-id"}],"payload_source":"server_change_read_status"},"bootloadable":{},"ixData":{},"lid":"6217794764386010538"})
for (;;); {"t":"msg","seq":15,"u":100000075573403,"ms":[{"event":"read","tids":["mid.1414028124846:ddce568db74c17b061"],"thread_fbids":[],"other_user_fbids":[100000680200678],"chat_ids":[100000680200678],"mark_as_read":true,"folder_info":[],"timestamp":1447693151940,"realtime_viewer_fbid":100000075573403,"type":"messaging"}]}<
thread_fbids
other_user_fbidsp
realtime_viewer_fbid
fbid:1000000755734035b
fbid:100000075573403
fbid:100000075573403
fbid:1000000755734035b
fbid:1000000755734035b
fbid:100000075573403
for (;;); {"t":"msg","seq":16,"u":100000075573403,"ms":[{"unread":1,"unseen":0,"other_unseen":0,"other_unread":0,"seen_timestamp":0,"realtime_viewer_fbid":100000075573403,"type":"inbox"}]}
realtime_viewer_fbid
fbid:1000000755734035b
fbid:1000000755734035b
fbid:1000000755734035b
realtime_viewer_fbid
fbid:
unseen_thread_fbids
_fbid
other_user_or_thread_fbid
3n6({"__ar":1,"payload":{"threads":[{"thread_id":"mid.1414028124846:ddce568db74c17b061","thread_fbid":"100000680200678","other_user_fbid":"100000680200678","participants":["fbid:100000680200678","fbid:100000075573403"],"former_participants":[],"name":"","snippet":"RAMAS_IS_THE_WORD","snippet_has_attachment":false,"snippet_attachments":[],"snippet_sender":"fbid:100000680200678","unread_count":0,"message_count":776,"image_src":null,"timestamp_absolute":"Today","timestamp_datetime":"4:54pm","timestamp_relative":"4:54pm","timestamp_time_passed":0,"timestamp":1447692891832,"server_timestamp":1447692891832,"mute_settings":[],"is_canonical_user":true,"is_canonical":true,"is_subscribed":true,"folder":"inbox","is_archived":false,"recipients_loadable":true,"name_conversation_sheet_dismissed":false,"has_email_participant":false,"read_only":false,"can_reply":true,"composer_enabled":true,"last_message_id":"mid.1447692891827:b7807521a52f2bbc89","last_message_timestamp":1447692891832,"last_read_timestamp":1447692891832,"ephemeral_ttl_mode":0,"custom_like_icon":null,"titan_originated_thread_id":"\u003C1414028124518:199292367-4078056338\u0040mail.projektitan.com>"},{"thread_id":"mid.1425588143162:c152b2d07a65597f77","thread_fbid":"100008908081924","other_user_fbid":"100008908081924","participants":["fbid:100008908081924","fbid:100000075573403"],"former_participants":[],"name":"","snippet":"holanda","snippet_has_attachment":false,"snippet_attachments":[],"snippet_sender":"fbid:100008908081924","unread_count":1,"message_count":3983,"image_src":null,"timestamp_absolute":"Today","timestamp_datetime":"4:18pm","timestamp_relative":"4:18pm","timestamp_time_passed":0,"timestamp":1447690710419,"server_timestamp":1447690710419,"mute_settings":[],"is_canonical_user":true,"is_canonical":true,"is_subscribed":true,"folder":"inbox","is_archived":false,"recipients_loadable":true,"name_conversation_sheet_dismissed":false,"has_email_participant":false,"read_only":false,"can_reply":true,"composer_enabled":true,"last_message_id":"mid.1447690710393:34dd670eedad047a44","last_message_timestamp":1447690710419,"last_read_timestamp":1447632739222,"ephemeral_ttl_mode":0,"custom_like_icon":null,"titan_originated_thread_id":"\u003C1425588143279:1609183252-19714479\u0040mail.projektitan.com>"},{"thread_id":"mid.1447678410350:3dbe03ef645a833f65","thread_fbid":"1200993648","other_user_fbid":"1200993648","participants":["fbid:100000075573403","fbid:1200993648"],"former_participants":[],"name":"","snippet":"ok ok, thanks :)","snippet_has_attachment":false,"snippet_attachments":[],"snippet_sender":"fbid:100000075573403","unread_count":0,"message_count":6,"image_src":null,"timestamp_absolute":"Today","timestamp_datetime":"4:17pm","timestamp_relative":"4:17pm","timestamp_time_passed":0,"timestamp":1447690643051,"server_timestamp":1447690643051,"mute_settings":[],"is_canonical_user":true,"is_canonical":true,"is_subscribed":true,"folder":"inbox","is_archived":false,"recipients_loadable":true,"name_conversation_sheet_dismissed":false,"has_email_participant":false,"read_only":false,"can_reply":true,"composer_enabled":true,"last_message_id":"mid.1447690643029:c7fdd4f303b1724719","last_message_timestamp":1447690643051,"last_read_timestamp":1447690643051,"ephemeral_ttl_mode":0,"custom_like_icon":null,"titan_originated_thread_id":"\u003C1447678410922:0-21bca3e13bdcc739\u0040mail.projektitan.com>"},{"thread_id":"id.1658786171075059","thread_fbid":"1658786171075059","other_user_fbid":null,"participants":["fbid:100000075573403","fbid:1177521907","fbid:1743460630"],"former_participants":[],"name":"deep dark research","snippet":"marcadores amarelos? que paneleiro","snippet_has_attachment":false,"snippet_attachments":[],"snippet_sender":"fbid:100000075573403","unread_count":0,"message_count":1370,"image_src":null,"timestamp_absolute":"Today","timestamp_datetime":"2:57pm","timestamp_relative":"2:57pm","timestamp_time_passed":0,"timestamp":1447685846581,"server_timestamp":1447685846581,"mute_settings":[],"is_canonical_user":false,"is_canonical":false,"is_subscribed":true,"folder":"inbox","is_archived":false,"recipients_loadable":true,"name_conversation_sheet_dismissed":false,"has_email_participant":false,"read_only":false,"can_reply":true,"composer_enabled":true,"last_message_id":"mid.1447685846554:fbcb51591587398556","last_message_timestamp":1447685846581,"last_read_timestamp":1447685846581,"ephemeral_ttl_mode":0,"custom_like_icon":null,"titan_originated_thread_id":"\u003C1442504355748:0-2b90d1addfb43300\u0040mail.projektitan.com>"},{"thread_id":"mid.1384005816145:04aa2b90e69c6f3832","thread_fbid":"1743460630","other_user_fbid":"1743460630","participants":["fbid:1743460630","fbid:100000075573403"],"former_participants":[],"name":"","snippet":"ok eu j\u00e1 estou a ir para o tagus","snippet_has_attachment":false,"snippet_attachments":[],"snippet_sender":"fbid:1743460630","unread_count":0,"message_count":5937,"image_src":null,"timestamp_absolute":"Today","timestamp_datetime":"2:29pm","timestamp_relative":"2:29pm","timestamp_time_passed":0,"timestamp":1447684175934,"server_timestamp":1447684175934,"mute_settings":[],"is_canonical_user":true,"is_canonical":true,"is_subscribed":true,"folder":"inbox","is_archived":false,"recipients_loadable":true,"name_conversation_sheet_dismissed":false,"has_email_participant":false,"read_only":false,"can_reply":true,"composer_enabled":true,"last_message_id":"mid.1447684175873:f58333f672ead72710","last_message_timestamp":1447684175934,"last_read_timestamp":1447684175934,"ephemeral_ttl_mode":0,"custom_like_icon":null,"titan_originated_thread_id":"\u003C1384005815977:4213651338-347395723\u0040mail.projektitan.com>"}],"ordered_threadlists":[{"start":0,"end":5,"thread_ids":["mid.1414028124846:ddce568db74c17b061","mid.1425588143162:c152b2d07a65597f77","mid.1447678410350:3dbe03ef645a833f65","id.1658786171075059","mid.1384005816145:04aa2b90e69c6f3832"],"thread_fbids":["1658786171075059"],"other_user_fbids":["100000680200678","100008908081924","1200993648","1743460630"],"folder":"inbox","filter":null,"error":null}],"participants":[{"fbid":100000680200678,"gender":2,"href":"https:\/\/www.facebook.com\/daviduart3","id":"fbid:100000680200678","image_src":"https:\/\/scontent.xx.fbcdn.net\/hprofile-xap1\/v\/t1.0-1\/p32x32\/12234850_1061630600536270_3416102644215011805_n.jpg?oh=9ac85df3cc7663d37c0df8b23b5039d3&oe=56B2F54C","big_image_src":"https:\/\/scontent.xx.fbcdn.net\/hprofile-xap1\/v\/t1.0-1\/p50x50\/12234850_1061630600536270_3416102644215011805_n.jpg?oh=7c887dea1778445bbf469134b7b520ed&oe=56EBF68C","name":"David Duarte","short_name":"David","employee":false,"is_employee_away":false,"networks":[],"type":"user","vanity":"daviduart3","is_friend":true,"social_snippets":[],"is_messenger_user":true},{"fbid":100000075573403,"gender":2,"href":"https:\/\/www.facebook.com\/diogo.barradas.71","id":"fbid:100000075573403","image_src":"https:\/\/fbcdn-profile-a.akamaihd.net\/hprofile-ak-xft1\/v\/t1.0-1\/p32x32\/11430107_1029900610355782_5323887418682892768_n.jpg?oh=2184a3a8812329f17cc360a0bfc61f44&oe=56B3F6D0&__gda__=1455265447_3fb78e74f425b2e8ffb3965ae324c1ef","big_image_src":"https:\/\/fbcdn-profile-a.akamaihd.net\/hprofile-ak-xft1\/v\/t1.0-1\/p50x50\/11430107_1029900610355782_5323887418682892768_n.jpg?oh=52a7c80a3b4116d8479e83e2bb125725&oe=56BA5910&__gda__=1458082407_ef21a42da065571c4aff10bc8489d2c5","name":"Diogo Barradas","short_name":"Diogo","employee":false,"is_employee_away":false,"networks":[],"type":"user","vanity":"diogo.barradas.71","is_friend":false,"social_snippets":[],"is_messenger_user":true},{"fbid":100008908081924,"gender":2,"href":"https:\/\/www.facebook.com\/t.filipe.couto","id":"fbid:100008908081924","image_src":"https:\/\/scontent.xx.fbcdn.net\/hprofile-xlf1\/v\/t1.0-1\/p32x32\/12246713_1481812002125722_2057662701541129804_n.jpg?oh=5705a3ac3038b810b8eeec8e125de1e1&oe=56B08AD0","big_image_src":"https:\/\/scontent.xx.fbcdn.net\/hprofile-xlf1\/v\/t1.0-1\/p50x50\/12246713_1481812002125722_2057662701541129804_n.jpg?oh=01a5ed14017366dbef9413b27f8ac253&oe=56BC5C10","name":"Filipe Couto","short_name":"Filipe","employee":false,"is_employee_away":false,"networks":[],"type":"user","vanity":"t.filipe.couto","is_friend":true,"social_snippets":[],"is_messenger_user":true},{"fbid":1200993648,"gender":1,"href":"https:\/\/www.facebook.com\/marianafpaulo","id":"fbid:1200993648","image_src":"https:\/\/scontent.xx.fbcdn.net\/hprofile-xlf1\/v\/t1.0-1\/p32x32\/12249697_10208060288843943_4766805345840533684_n.jpg?oh=e46b99bde88febbff3c59a09eb7d2897&oe=56E94353","big_image_src":"https:\/\/scontent.xx.fbcdn.net\/hprofile-xlf1\/v\/t1.0-1\/p50x50\/12249697_10208060288843943_4766805345840533684_n.jpg?oh=ef6c414b71893b91cfb9a7b64c53c29c&oe=56BD61BC","name":"Mariana Paulo","short_name":"Mariana","employee":false,"is_employee_away":false,"networks":[],"type":"user","vanity":"marianafpaulo","is_friend":true,"social_snippets":[],"is_messenger_user":false},{"fbid":1177521907,"gender":2,"href":"https:\/\/www.facebook.com\/tiago.diogo","id":"fbid:1177521907","image_src":"https:\/\/fbcdn-profile-a.akamaihd.net\/hprofile-ak-xaf1\/v\/t1.0-1\/p32x32\/10407252_10205534025208148_1261194969720010832_n.jpg?oh=fa9b246d7afe7c9324ba3bf13eb939d1&oe=56E68101&__gda__=1458114237_e4d6631ef26225833f79208bcfe955e8","big_image_src":"https:\/\/fbcdn-profile-a.akamaihd.net\/hprofile-ak-xaf1\/v\/t1.0-1\/p50x50\/10407252_10205534025208148_1261194969720010832_n.jpg?oh=3ca17a52b40f650e1447a6a39761c4a9&oe=56E6B0EE&__gda__=1454149202_05e5567771f504c9d96a1476ac265c05","name":"Tiago Diogo","short_name":"Tiago","employee":false,"is_employee_away":false,"networks":[],"type":"user","vanity":"tiago.diogo","is_friend":true,"social_snippets":[],"is_messenger_user":true},{"fbid":1743460630,"gender":2,"href":"https:\/\/www.facebook.com\/tiago.brito.9","id":"fbid:1743460630","image_src":"https:\/\/fbcdn-profile-a.akamaihd.net\/hprofile-ak-xfp1\/v\/t1.0-1\/p32x32\/10896938_4970348473519_7012878390038484353_n.jpg?oh=421adcd132322efc4639420da4078aa1&oe=56F1AF48&__gda__=1455267440_3edf3b11081802afb1f9d9062c433e38","big_image_src":"https:\/\/fbcdn-profile-a.akamaihd.net\/hprofile-ak-xfp1\/v\/t1.0-1\/p50x50\/10896938_4970348473519_7012878390038484353_n.jpg?oh=9d239c5119ac8fa4102ec34001dbc19c&oe=56BD4074&__gda__=1458357580_149695ea60113630af58c47fc2c36fd1","name":"Tiago Brito","short_name":"Tiago","employee":false,"is_employee_away":false,"networks":[],"type":"user","vanity":"tiago.brito.9","is_friend":true,"social_snippets":[],"is_messenger_user":false}],"unseen_thread_fbids":[{"thread_fbids":[],"other_user_fbids":null,"thread_ids":[],"folder":"inbox"}],"roger":{"100000680200678":{"100000680200678":1447692891832},"100008908081924":{"100008908081924":1447690710419},"1200993648":{"1200993648":1447690643051},"1658786171075059":{"1177521907":1447685846581,"1743460630":1447685846581},"1743460630":{"1743460630":1447684175934}},"delivery_receipts":[{"other_user_fbid":"100000680200678","thread_fbid":null,"time":1447692882905},{"other_user_fbid":"100008908081924","thread_fbid":null,"time":1447630416289},{"other_user_fbid":"1200993648","thread_fbid":null,"time":1447690643051},{"other_user_fbid":null,"thread_fbid":"1658786171075059","time":1447685846581},{"other_user_fbid":"1743460630","thread_fbid":null,"time":1447682200117}],"payload_source":"server_fetch_threadlist_info"},"bootloadable":{},"ixData":{},"lid":"6217794691271765635"})v8
({"__ar":1,"payload":{"threads":[{"thread_id":"mid.1414028124846:ddce568db74c17b061","thread_fbid":"100000680200678","other_user_fbid":"100000680200678","participants":["fbid:100000680200678","fbid:100000075573403"],"former_participants":[],"name":"","snippet":"RAMAS_IS_THE_WORD","snippet_has_attachment":false,"snippet_attachments":[],"snippet_sender":"fbid:100000680200678","unread_count":0,"message_count":776,"image_src":null,"timestamp_absolute":"Today","timestamp_datetime":"4:54pm","timestamp_relative":"4:54pm","timestamp_time_passed":0,"timestamp":1447692891832,"server_timestamp":1447692891832,"mute_settings":[],"is_canonical_user":true,"is_canonical":true,"is_subscribed":true,"folder":"inbox","is_archived":false,"recipients_loadable":true,"name_conversation_sheet_dismissed":false,"has_email_participant":false,"read_only":false,"can_reply":true,"composer_enabled":true,"last_message_id":"mid.1447692891827:b7807521a52f2bbc89","last_message_timestamp":1447692891832,"last_read_timestamp":1447692891832,"ephemeral_ttl_mode":0,"custom_like_icon":null,"titan_originated_thread_id":"\u003C1414028124518:199292367-4078056338\u0040mail.projektitan.com>"}],"actions":[{"message_id":"mid.1447692891827:b7807521a52f2bbc89","threading_id":null,"offline_threading_id":"6072064085512834551","author":"fbid:100000680200678","author_email":"100000680200678\u0040facebook.com","ephemeral_ttl_mode":null,"timestamp":1447692891832,"timestamp_absolute":"Today","timestamp_relative":"4:54pm","timestamp_datetime":"4:54pm","timestamp_time_passed":0,"is_unread":false,"is_forward":false,"is_filtered_content":false,"is_filtered_content_bh":false,"is_filtered_content_account":false,"is_filtered_content_quasar":false,"is_filtered_content_invalid_app":false,"forward_count":0,"forward_message_ids":[],"source":"source:messenger:web","source_tags":[],"is_spoof_warning":false,"folder":"inbox","thread_fbid":"100000680200678","other_user_fbid":"100000680200678","body":"RAMAS_IS_THE_WORD","subject":null,"has_attachment":false,"attachments":[],"raw_attachments":null,"ranges":[],"thread_id":"mid.1414028124846:ddce568db74c17b061","action_id":null,"action_type":"ma-type:user-generated-message"}],"participants":[{"fbid":100000680200678,"gender":2,"href":"https:\/\/www.facebook.com\/daviduart3","id":"fbid:100000680200678","image_src":"https:\/\/scontent.xx.fbcdn.net\/hprofile-xap1\/v\/t1.0-1\/p32x32\/12234850_1061630600536270_3416102644215011805_n.jpg?oh=9ac85df3cc7663d37c0df8b23b5039d3&oe=56B2F54C","big_image_src":"https:\/\/scontent.xx.fbcdn.net\/hprofile-xap1\/v\/t1.0-1\/p50x50\/12234850_1061630600536270_3416102644215011805_n.jpg?oh=7c887dea1778445bbf469134b7b520ed&oe=56EBF68C","name":"David Duarte","short_name":"David","employee":false,"is_employee_away":false,"networks":[],"type":"user","vanity":"daviduart3","is_friend":true,"social_snippets":[],"is_messenger_user":true},{"fbid":100000075573403,"gender":2,"href":"https:\/\/www.facebook.com\/diogo.barradas.71","id":"fbid:100000075573403","image_src":"https:\/\/fbcdn-profile-a.akamaihd.net\/hprofile-ak-xft1\/v\/t1.0-1\/p32x32\/11430107_1029900610355782_5323887418682892768_n.jpg?oh=2184a3a8812329f17cc360a0bfc61f44&oe=56B3F6D0&__gda__=1455265447_3fb78e74f425b2e8ffb3965ae324c1ef","big_image_src":"https:\/\/fbcdn-profile-a.akamaihd.net\/hprofile-ak-xft1\/v\/t1.0-1\/p50x50\/11430107_1029900610355782_5323887418682892768_n.jpg?oh=52a7c80a3b4116d8479e83e2bb125725&oe=56BA5910&__gda__=1458082407_ef21a42da065571c4aff10bc8489d2c5","name":"Diogo Barradas","short_name":"Diogo","employee":false,"is_employee_away":false,"networks":[],"type":"user","vanity":"diogo.barradas.71","is_friend":false,"social_snippets":[],"is_messenger_user":true}],"message_counts":[{"unread_count":1,"unseen_count":0,"seen_timestamp":1447692891832,"last_action_id":null,"folder":"inbox"}],"unseen_thread_ids":[{"thread_fbids":[],"other_user_fbids":null,"thread_ids":[],"folder":"inbox"}],"unseen_thread_fbids":[{"thread_fbids":[],"other_user_fbids":null,"thread_ids":[],"folder":"inbox"}],"payload_source":"server_thread_sync"},"bootloadable":{},"ixData":{},"lid":"6217794704847245582"})%
fbid:1000000755734035b
/ajax/mercury/attachments/photo/view/?message=mid.1447107208773%3Ab3e13f08389f956d68&fbid=10201081669400900&hash=AQB4vfPqfDxf5A0V
.$fbid=21743460630
({"__ar":1,"payload":{"actions":[{"message_id":"mid.1447678410350:3dbe03ef645a833f65","threading_id":null,"offline_threading_id":"6072003349645595009","author":"fbid:100000075573403","author_email":"100000075573403\u0040facebook.com","ephemeral_ttl_mode":null,"timestamp":1447678410571,"timestamp_absolute":"Today","timestamp_relative":"12:53pm","timestamp_datetime":"12:53pm","timestamp_time_passed":0,"is_unread":false,"is_forward":false,"is_filtered_content":false,"is_filtered_content_bh":false,"is_filtered_content_account":false,"is_filtered_content_quasar":false,"is_filtered_content_invalid_app":false,"forward_count":0,"forward_message_ids":[],"source":"source:titan:orca","source_tags":["source:messenger","source:mobile"],"is_spoof_warning":false,"folder":"inbox","thread_fbid":"1200993648","other_user_fbid":"1200993648","body":"Ol\u00e1, os membros do teu grupo de SS j\u00e1 se distribu\u00edram para fazer as apresenta\u00e7\u00f5es de que a prof falou hj na aula? A Beatriz Santos est\u00e1 \u00e0 procura de um par.","subject":null,"has_attachment":false,"attachments":[],"raw_attachments":null,"ranges":[],"thread_id":"mid.1447678410350:3dbe03ef645a833f65","action_id":null,"action_type":"ma-type:user-generated-message"},{"message_id":"mid.1447678573453:ab5c8f59d9eadf2b77","threading_id":null,"offline_threading_id":"6072004031339451977","author":"fbid:1200993648","author_email":"1200993648\u0040facebook.com","ephemeral_ttl_mode":null,"timestamp":1447678573707,"timestamp_absolute":"Today","timestamp_relative":"12:56pm","timestamp_datetime":"12:56pm","timestamp_time_passed":0,"is_unread":false,"is_forward":false,"is_filtered_content":false,"is_filtered_content_bh":false,"is_filtered_content_account":false,"is_filtered_content_quasar":false,"is_filtered_content_invalid_app":false,"forward_count":0,"forward_message_ids":[],"source":"source:titan:m_basic","source_tags":["source:mobile"],"is_spoof_warning":false,"folder":"inbox","thread_fbid":"1200993648","other_user_fbid":"1200993648","body":"Ol\u00e1! Ainda n\u00e3o percebi isso porque me atrasei, se formos 3 temos q nos dividir \u00e9?","subject":null,"has_attachment":false,"attachments":[],"raw_attachments":null,"ranges":[],"thread_id":"mid.1447678410350:3dbe03ef645a833f65","action_id":null,"action_type":"ma-type:user-generated-message"},{"message_id":"mid.1447678588646:ed2742c8c16e77db48","threading_id":null,"offline_threading_id":"6072004091420876916","author":"fbid:100000075573403","author_email":"100000075573403\u0040facebook.com","ephemeral_ttl_mode":null,"timestamp":1447678588649,"timestamp_absolute":"Today","timestamp_relative":"12:56pm","timestamp_datetime":"12:56pm","timestamp_time_passed":0,"is_unread":false,"is_forward":false,"is_filtered_content":false,"is_filtered_content_bh":false,"is_filtered_content_account":false,"is_filtered_content_quasar":false,"is_filtered_content_invalid_app":false,"forward_count":0,"forward_message_ids":[],"source":"source:chat:orca","source_tags":["source:messenger","source:chat","source:mobile"],"is_spoof_warning":false,"folder":"inbox","thread_fbid":"1200993648","other_user_fbid":"1200993648","body":"Ya parece que sim","subject":null,"has_attachment":false,"attachments":[],"raw_attachments":null,"ranges":[],"thread_id":"mid.1447678410350:3dbe03ef645a833f65","action_id":null,"action_type":"ma-type:user-generated-message"},{"message_id":"mid.1447678623082:ed2742c8dcd967bf01","threading_id":null,"offline_threading_id":"6072004238769367900","author":"fbid:100000075573403","author_email":"100000075573403\u0040facebook.com","ephemeral_ttl_mode":null,"timestamp":1447678623084,"timestamp_absolute":"Today","timestamp_relative":"12:57pm","timestamp_datetime":"12:57pm","timestamp_time_passed":0,"is_unread":false,"is_forward":false,"is_filtered_content":false,"is_filtered_content_bh":false,"is_filtered_content_account":false,"is_filtered_content_quasar":false,"is_filtered_content_invalid_app":false,"forward_count":0,"forward_message_ids":[],"source":"source:chat:orca","source_tags":["source:messenger","source:chat","source:mobile"],"is_spoof_warning":false,"folder":"inbox","thread_fbid":"1200993648","other_user_fbid":"1200993648","body":"Eu como j\u00e1 tava num grupo de 2, n mexe mais xD","subject":null,"has_attachment":false,"attachments":[],"raw_attachments":null,"ranges":[],"thread_id":"mid.1447678410350:3dbe03ef645a833f65","action_id":null,"action_type":"ma-type:user-generated-message"},{"message_id":"mid.1447688421387:2e94f24848a8ba2f33","threading_id":null,"offline_threading_id":"6072045323168965339","author":"fbid:1200993648","author_email":"1200993648\u0040facebook.com","ephemeral_ttl_mode":null,"timestamp":1447688421401,"timestamp_absolute":"Today","timestamp_relative":"3:40pm","timestamp_datetime":"3:40pm","timestamp_time_passed":0,"is_unread":false,"is_forward":false,"is_filtered_content":false,"is_filtered_content_bh":false,"is_filtered_content_account":false,"is_filtered_content_quasar":false,"is_filtered_content_invalid_app":false,"forward_count":0,"forward_message_ids":[],"source":"source:chat:web","source_tags":["source:chat"],"is_spoof_warning":false,"folder":"inbox","thread_fbid":"1200993648","other_user_fbid":"1200993648","body":"nao sabia! vou ver disso ent\u00e3o, e depois pode ser que um de n\u00f3s fique com ela se tivermos mesmo que dividir","subject":null,"has_attachment":false,"attachments":[],"raw_attachments":null,"ranges":[],"thread_id":"mid.1447678410350:3dbe03ef645a833f65","action_id":null,"action_type":"ma-type:user-generated-message"},{"message_id":"mid.1447690643029:c7fdd4f303b1724719","threading_id":null,"offline_threading_id":"6072054657258124675","author":"fbid:100000075573403","author_email":"100000075573403\u0040facebook.com","ephemeral_ttl_mode":null,"timestamp":1447690643051,"timestamp_absolute":"Today","timestamp_relative":"4:17pm","timestamp_datetime":"4:17pm","timestamp_time_passed":0,"is_unread":false,"is_forward":false,"is_filtered_content":false,"is_filtered_content_bh":false,"is_filtered_content_account":false,"is_filtered_content_quasar":false,"is_filtered_content_invalid_app":false,"forward_count":0,"forward_message_ids":[],"source":"source:chat:web","source_tags":["source:chat"],"is_spoof_warning":false,"folder":"inbox","thread_fbid":"1200993648","other_user_fbid":"1200993648","body":"ok ok, thanks :)","subject":null,"has_attachment":false,"attachments":[],"raw_attachments":null,"ranges":[],"thread_id":"mid.1447678410350:3dbe03ef645a833f65","action_id":null,"action_type":"ma-type:user-generated-message"}],"end_of_history":[{"type":"thread","id":"mid.1447678410350:3dbe03ef645a833f65","fbid":"1200993648"}],"roger":{"1200993648":{"1200993648":1447690643051},"mid.1447678410350:3dbe03ef645a833f65":{"1200993648":1447690643051}},"message_blocked_ids":[],"payload_source":"server_fetch_thread_info"},"bootloadable":{},"ixData":{},"lid":"6217794731473638926"})%
fbid:100000075573403
fbid:100000680200678
fbid:100000075573403]
fbid:100000075573403]
sender_fbid;]
group_thread_fbid
cc_fbid
$map_fbid:100000680200678
$map_fbid:100000075573403
$map_fbid:100008908081924
$map_fbid:1200993648]
$map_fbid:1177521907]
$map_fbid:1743460630]
$map_fbid:1822184745]
$map_fbid:100000965785084
$map_fbid:100000422236690
$map_fbid:100001163187150
$map_fbid:100000908690443
$map_fbid:100000937699098
$map_fbid:100003734990957
$map_fbid:100001580284563
$map_fbid:1441326279]
$map_fbid:1151355596]
$map_fbid:100000403782497
$map_fbid:100000200171097
$map_fbid:1100406757]
$map_fbid:100000244762909
$map_fbid:100000510129734
$map_fbid:12685619021
$map_fbid:100000385986475
$map_fbid:100002128265139
$map_fbid:100001076702794
$map_fbid:100000367063318
$map_fbid:100000361626019
message_batch[0][other_user_fbid]
.$fbid=21200993648U(]
thread_fbids1
other_user_fbids1
fbid1
fbid:1000006802006781
fbid:1000000755734031
fbid:1000089080819241
fbid:1200993648
fbid:1177521907
fbid:1743460630
fbid:1822184745
fbid:1000009657850841
fbid:1000004222366901
fbid:1000011631871501
fbid:1000009086904431
fbid:1000009376990981
fbid:1000037349909571
fbid:1000015802845631
fbid:1441326279
fbid:1151355596
fbid:100000403782497
fbid:100000200171097
fbid:1100406757
fbid:1000002447629091
fbid:1000005101297341
fbid:1268561902
fbid:1000003859864751
fbid:1000021282651391
fbid:1000010767027941
fbid:1000003670633181
fbid:1000003616260191
thread_fbid
other_user_fbid
https://www.messenger.com/ajax/mercury/attachments/photo.php?fbid=10201081669400900&height=206&mode=cover&width=206
for (;;);{"__ar":1,"payload":{"threads":[{"thread_id":"mid.1414028124846:ddce568db74c17b061","thread_fbid":"100000680200678","other_user_fbid":"100000680200678","participants":["fbid:100000680200678","fbid:100000075573403"],"former_participants":[],"name":"","snippet":"RAMAS_IS_THE_WORD","snippet_has_attachment":false,"snippet_attachments":[],"snippet_sender":"fbid:100000680200678","unread_count":0,"message_count":776,"image_src":null,"timestamp_absolute":"Today","timestamp_datetime":"4:54pm","timestamp_relative":"4:54pm","timestamp_time_passed":0,"timestamp":1447692891832,"server_timestamp":1447692891832,"mute_settings":[],"is_canonical_user":true,"is_canonical":true,"is_subscribed":true,"folder":"inbox","is_archived":false,"recipients_loadable":true,"name_conversation_sheet_dismissed":false,"has_email_participant":false,"read_only":false,"can_reply":true,"composer_enabled":true,"last_message_id":"mid.1447692891827:b7807521a52f2bbc89","last_message_timestamp":1447692891832,"last_read_timestamp":1447692891832,"ephemeral_ttl_mode":0,"custom_like_icon":null,"titan_originated_thread_id":"\u003C1414028124518:199292367-4078056338\u0040mail.projektitan.com>"},{"thread_id":"mid.1425588143162:c152b2d07a65597f77","thread_fbid":"100008908081924","other_user_fbid":"100008908081924","participants":["fbid:100008908081924","fbid:100000075573403"],"former_participants":[],"name":"","snippet":"holanda","snippet_has_attachment":false,"snippet_attachments":[],"snippet_sender":"fbid:100008908081924","unread_count":1,"message_count":3983,"image_src":null,"timestamp_absolute":"Today","timestamp_datetime":"4:18pm","timestamp_relative":"4:18pm","timestamp_time_passed":0,"timestamp":1447690710419,"server_timestamp":1447690710419,"mute_settings":[],"is_canonical_user":true,"is_canonical":true,"is_subscribed":true,"folder":"inbox","is_archived":false,"recipients_loadable":true,"name_conversation_sheet_dismissed":false,"has_email_participant":false,"read_only":false,"can_reply":true,"composer_enabled":true,"last_message_id":"mid.1447690710393:34dd670eedad047a44","last_message_timestamp":1447690710419,"last_read_timestamp":1447632739222,"ephemeral_ttl_mode":0,"custom_like_icon":null,"titan_originated_thread_id":"\u003C1425588143279:1609183252-19714479\u0040mail.projektitan.com>"},{"thread_id":"mid.1447678410350:3dbe03ef645a833f65","thread_fbid":"1200993648","other_user_fbid":"1200993648","participants":["fbid:100000075573403","fbid:1200993648"],"former_participants":[],"name":"","snippet":"ok ok, thanks :)","snippet_has_attachment":false,"snippet_attachments":[],"snippet_sender":"fbid:100000075573403","unread_count":0,"message_count":6,"image_src":null,"timestamp_absolute":"Today","timestamp_datetime":"4:17pm","timestamp_relative":"4:17pm","timestamp_time_passed":0,"timestamp":1447690643051,"server_timestamp":1447690643051,"mute_settings":[],"is_canonical_user":true,"is_canonical":true,"is_subscribed":true,"folder":"inbox","is_archived":false,"recipients_loadable":true,"name_conversation_sheet_dismissed":false,"has_email_participant":false,"read_only":false,"can_reply":true,"composer_enabled":true,"last_message_id":"mid.1447690643029:c7fdd4f303b1724719","last_message_timestamp":1447690643051,"last_read_timestamp":1447690643051,"ephemeral_ttl_mode":0,"custom_like_icon":null,"titan_originated_thread_id":"\u003C1447678410922:0-21bca3e13bdcc739\u0040mail.projektitan.com>"},{"thread_id":"id.1658786171075059","thread_fbid":"1658786171075059","other_user_fbid":null,"participants":["fbid:100000075573403","fbid:1177521907","fbid:1743460630"],"former_participants":[],"name":"deep dark research","snippet":"marcadores amarelos? que paneleiro","snippet_has_attachment":false,"snippet_attachments":[],"snippet_sender":"fbid:100000075573403","unread_count":0,"message_count":1370,"image_src":null,"timestamp_absolute":"Today","timestamp_datetime":"2:57pm","timestamp_relative":"2:57pm","timestamp_time_passed":0,"timestamp":1447685846581,"server_timestamp":1447685846581,"mute_settings":[],"is_canonical_user":false,"is_canonical":false,"is_subscribed":true,"folder":"inbox","is_archived":false,"recipients_loadable":true,"name_conversation_sheet_dismissed":false,"has_email_participant":false,"read_only":false,"can_reply":true,"composer_enabled":true,"last_message_id":"mid.1447685846554:fbcb51591587398556","last_message_timestamp":1447685846581,"last_read_timestamp":1447685846581,"ephemeral_ttl_mode":0,"custom_like_icon":null,"titan_originated_thread_id":"\u003C1442504355748:0-2b90d1addfb43300\u0040mail.projektitan.com>"},{"thread_id":"mid.1384005816145:04aa2b90e69c6f3832","thread_fbid":"1743460630","other_user_fbid":"1743460630","participants":["fbid:1743460630","fbid:100000075573403"],"former_participants":[],"name":"","snippet":"ok eu j\u00e1 estou a ir para o tagus","snippet_has_attachment":false,"snippet_attachments":[],"snippet_sender":"fbid:1743460630","unread_count":0,"message_count":5937,"image_src":null,"timestamp_absolute":"Today","timestamp_datetime":"2:29pm","timestamp_relative":"2:29pm","timestamp_time_passed":0,"timestamp":1447684175934,"server_timestamp":1447684175934,"mute_settings":[],"is_canonical_user":true,"is_canonical":true,"is_subscribed":true,"folder":"inbox","is_archived":false,"recipients_loadable":true,"name_conversation_sheet_dismissed":false,"has_email_participant":false,"read_only":false,"can_reply":true,"composer_enabled":true,"last_message_id":"mid.1447684175873:f58333f672ead72710","last_message_timestamp":1447684175934,"last_read_timestamp":1447684175934,"ephemeral_ttl_mode":0,"custom_like_icon":null,"titan_originated_thread_id":"\u003C1384005815977:4213651338-347395723\u0040mail.projektitan.com>"}],"ordered_threadlists":[{"start":0,"end":5,"thread_ids":["mid.1414028124846:ddce568db74c17b061","mid.1425588143162:c152b2d07a65597f77","mid.1447678410350:3dbe03ef645a833f65","id.1658786171075059","mid.1384005816145:04aa2b90e69c6f3832"],"thread_fbids":["1658786171075059"],"other_user_fbids":["100000680200678","100008908081924","1200993648","1743460630"],"folder":"inbox","filter":null,"error":null}],"participants":[{"fbid":100000680200678,"gender":2,"href":"https:\/\/www.facebook.com\/daviduart3","id":"fbid:100000680200678","image_src":"https:\/\/scontent.xx.fbcdn.net\/hprofile-xap1\/v\/t1.0-1\/p32x32\/12234850_1061630600536270_3416102644215011805_n.jpg?oh=9ac85df3cc7663d37c0df8b23b5039d3&oe=56B2F54C","big_image_src":"https:\/\/scontent.xx.fbcdn.net\/hprofile-xap1\/v\/t1.0-1\/p50x50\/12234850_1061630600536270_3416102644215011805_n.jpg?oh=7c887dea1778445bbf469134b7b520ed&oe=56EBF68C","name":"David Duarte","short_name":"David","employee":false,"is_employee_away":false,"networks":[],"type":"user","vanity":"daviduart3","is_friend":true,"social_snippets":[],"is_messenger_user":true},{"fbid":100000075573403,"gender":2,"href":"https:\/\/www.facebook.com\/diogo.barradas.71","id":"fbid:100000075573403","image_src":"https:\/\/fbcdn-profile-a.akamaihd.net\/hprofile-ak-xft1\/v\/t1.0-1\/p32x32\/11430107_1029900610355782_5323887418682892768_n.jpg?oh=2184a3a8812329f17cc360a0bfc61f44&oe=56B3F6D0&__gda__=1455265447_3fb78e74f425b2e8ffb3965ae324c1ef","big_image_src":"https:\/\/fbcdn-profile-a.akamaihd.net\/hprofile-ak-xft1\/v\/t1.0-1\/p50x50\/11430107_1029900610355782_5323887418682892768_n.jpg?oh=52a7c80a3b4116d8479e83e2bb125725&oe=56BA5910&__gda__=1458082407_ef21a42da065571c4aff10bc8489d2c5","name":"Diogo Barradas","short_name":"Diogo","employee":false,"is_employee_away":false,"networks":[],"type":"user","vanity":"diogo.barradas.71","is_friend":false,"social_snippets":[],"is_messenger_user":true},{"fbid":100008908081924,"gender":2,"href":"https:\/\/www.facebook.com\/t.filipe.couto","id":"fbid:100008908081924","image_src":"https:\/\/scontent.xx.fbcdn.net\/hprofile-xlf1\/v\/t1.0-1\/p32x32\/12246713_1481812002125722_2057662701541129804_n.jpg?oh=5705a3ac3038b810b8eeec8e125de1e1&oe=56B08AD0","big_image_src":"https:\/\/scontent.xx.fbcdn.net\/hprofile-xlf1\/v\/t1.0-1\/p50x50\/12246713_1481812002125722_2057662701541129804_n.jpg?oh=01a5ed14017366dbef9413b27f8ac253&oe=56BC5C10","name":"Filipe Couto","short_name":"Filipe","employee":false,"is_employee_away":false,"networks":[],"type":"user","vanity":"t.filipe.couto","is_friend":true,"social_snippets":[],"is_messenger_user":true},{"fbid":1200993648,"gender":1,"href":"https:\/\/www.facebook.com\/marianafpaulo","id":"fbid:1200993648","image_src":"https:\/\/scontent.xx.fbcdn.net\/hprofile-xlf1\/v\/t1.0-1\/p32x32\/12249697_10208060288843943_4766805345840533684_n.jpg?oh=e46b99bde88febbff3c59a09eb7d2897&oe=56E94353","big_image_src":"https:\/\/scontent.xx.fbcdn.net\/hprofile-xlf1\/v\/t1.0-1\/p50x50\/12249697_10208060288843943_4766805345840533684_n.jpg?oh=ef6c414b71893b91cfb9a7b64c53c29c&oe=56BD61BC","name":"Mariana Paulo","short_name":"Mariana","employee":false,"is_employee_away":false,"networks":[],"type":"user","vanity":"marianafpaulo","is_friend":true,"social_snippets":[],"is_messenger_user":false},{"fbid":1177521907,"gender":2,"href":"https:\/\/www.facebook.com\/tiago.diogo","id":"fbid:1177521907","image_src":"https:\/\/fbcdn-profile-a.akamaihd.net\/hprofile-ak-xaf1\/v\/t1.0-1\/p32x32\/10407252_10205534025208148_1261194969720010832_n.jpg?oh=fa9b246d7afe7c9324ba3bf13eb939d1&oe=56E68101&__gda__=1458114237_e4d6631ef26225833f79208bcfe955e8","big_image_src":"https:\/\/fbcdn-profile-a.akamaihd.net\/hprofile-ak-xaf1\/v\/t1.0-1\/p50x50\/10407252_10205534025208148_1261194969720010832_n.jpg?oh=3ca17a52b40f650e1447a6a39761c4a9&oe=56E6B0EE&__gda__=1454149202_05e5567771f504c9d96a1476ac265c05","name":"Tiago Diogo","short_name":"Tiago","employee":false,"is_employee_away":false,"networks":[],"type":"user","vanity":"tiago.diogo","is_friend":true,"social_snippets":[],"is_messenger_user":true},{"fbid":1743460630,"gender":2,"href":"https:\/\/www.facebook.com\/tiago.brito.9","id":"fbid:1743460630","image_src":"https:\/\/fbcdn-profile-a.akamaihd.net\/hprofile-ak-xfp1\/v\/t1.0-1\/p32x32\/10896938_4970348473519_7012878390038484353_n.jpg?oh=421adcd132322efc4639420da4078aa1&oe=56F1AF48&__gda__=1455267440_3edf3b11081802afb1f9d9062c433e38","big_image_src":"https:\/\/fbcdn-profile-a.akamaihd.net\/hprofile-ak-xfp1\/v\/t1.0-1\/p50x50\/10896938_4970348473519_7012878390038484353_n.jpg?oh=9d239c5119ac8fa4102ec34001dbc19c&oe=56BD4074&__gda__=1458357580_149695ea60113630af58c47fc2c36fd1","name":"Tiago Brito","short_name":"Tiago","employee":false,"is_employee_away":false,"networks":[],"type":"user","vanity":"tiago.brito.9","is_friend":true,"social_snippets":[],"is_messenger_user":false}],"unseen_thread_fbids":[{"thread_fbids":[],"other_user_fbids":null,"thread_ids":[],"folder":"inbox"}],"roger":{"100000680200678":{"100000680200678":1447692891832},"100008908081924":{"100008908081924":1447690710419},"1200993648":{"1200993648":1447690643051},"1658786171075059":{"1177521907":1447685846581,"1743460630":1447685846581},"1743460630":{"1743460630":1447684175934}},"delivery_receipts":[{"other_user_fbid":"100000680200678","thread_fbid":null,"time":1447692882905},{"other_user_fbid":"100008908081924","thread_fbid":null,"time":1447630416289},{"other_user_fbid":"1200993648","thread_fbid":null,"time":1447690643051},{"other_user_fbid":null,"thread_fbid":"1658786171075059","time":1447685846581},{"other_user_fbid":"1743460630","thread_fbid":null,"time":1447682200117}],"payload_source":"server_fetch_threadlist_info"},"bootloadable":{},"ixData":{},"lid":"6217794691271765635"}ion a(b,c,d,e,f,g,h,i,j,k){'use strict';if(c.__markCompiled)c.__markCompiled();var l=h.get('sidebar.min_friends'),m=h.get('sidebar.minimum_width'),n=h.get('minisidebar.minimum_width'),o={getViewport:function(){return j.getViewportWithoutScrollbarDimensions();},hasLowFriendCount:function(){return k.getActiveList().length<=l;},isViewportCapable:function(){var p=o.getViewport();return p.width>m;},isViewportCapableForMiniSidebar:function(){var p=o.getViewport();return p.width>n&&p.width<=m;},shouldShowSidebar:function(){return o.shouldShowSidebarIgnoreEnabled()&&i.isEnabled();},shouldShowMiniSidebar:function(){return o.shouldShowMiniSidebarIgnoreEnabled()&&i.isEnabled();},shouldShowSidebarIgnoreEnabled:function(){return o.isViewportCapable()&&!o.hasLowFriendCount();},shouldShowMiniSidebarIgnoreEnabled:function(){return !h.get('divebar_new_d
for (;;);{"__ar":1,"payload":{"actions":[{"message_id":"mid.1447106750417:cf5c8122792ddf7245","threading_id":null,"offline_threading_id":"6069605629308267553","author":"fbid:1743460630","author_email":"1743460630\u0040facebook.com","ephemeral_ttl_mode":null,"timestamp":1447106750421,"timestamp_absolute":"November 9","timestamp_relative":"Mon","timestamp_datetime":"November 9th, 10:05pm","timestamp_time_passed":3,"is_unread":false,"is_forward":false,"is_filtered_content":false,"is_filtered_content_bh":false,"is_filtered_content_account":false,"is_filtered_content_quasar":false,"is_filtered_content_invalid_app":false,"forward_count":0,"forward_message_ids":[],"source":"source:chat:web","source_tags":["source:chat"],"is_spoof_warning":false,"folder":"inbox","thread_fbid":"1743460630","other_user_fbid":"1743460630","body":"mas achei que ias gostar de saber que estes tipos existem xD","subject":null,"has_attachment":false,"attachments":[],"raw_attachments":null,"ranges":[],"thread_id":"mid.1384005816145:04aa2b90e69c6f3832","action_id":null,"action_type":"ma-type:user-generated-message"},{"message_id":"mid.1447106989912:8e442991a6e1cd1442","threading_id":null,"offline_threading_id":"6069606685562341021","author":"fbid:100000075573403","author_email":"100000075573403\u0040facebook.com","ephemeral_ttl_mode":null,"timestamp":1447106989917,"timestamp_absolute":"November 9","timestamp_relative":"Mon","timestamp_datetime":"November 9th, 10:09pm","timestamp_time_passed":3,"is_unread":false,"is_forward":false,"is_filtered_content":false,"is_filtered_content_bh":false,"is_filtered_content_account":false,"is_filtered_content_quasar":false,"is_filtered_content_invalid_app":false,"forward_count":0,"forward_message_ids":[],"source":"source:chat:web","source_tags":["source:chat"],"is_spoof_warning":false,"folder":"inbox","thread_fbid":"1743460630","other_user_fbid":"1743460630","body":"n fazia puto xD","subject":null,"has_attachment":false,"attachments":[],"raw_attachments":null,"ranges":[],"thread_id":"mid.1384005816145:04aa2b90e69c6f3832","action_id":null,"action_type":"ma-type:user-generated-message"},{"message_id":"mid.1447107046106:17ca572c4d65b25e41","threading_id":null,"offline_threading_id":"6069606869513739009","author":"fbid:1743460630","author_email":"1743460630\u0040facebook.com","ephemeral_ttl_mode":null,"timestamp":1447107046110,"timestamp_absolute":"November 9","timestamp_relative":"Mon","timestamp_datetime":"November 9th, 10:10pm","timestamp_time_passed":3,"is_unread":false,"is_forward":false,"is_filtered_content":false,"is_filtered_content_bh":false,"is_filtered_content_account":false,"is_filtered_content_quasar":false,"is_filtered_content_invalid_app":false,"forward_count":0,"forward_message_ids":[],"source":"source:chat:web","source_tags":["source:chat"],"is_spoof_warning":false,"folder":"inbox","thread_fbid":"1743460630","other_user_fbid":"1743460630","body":"pois eu suspeitei xD","subject":null,"has_attachment":false,"attachments":[],"raw_attachments":null,"ranges":[],"thread_id":"mid.1384005816145:04aa2b90e69c6f3832","action_id":null,"action_type":"ma-type:user-generated-message"},{"message_id":"mid.1447107208773:b3e13f08389f956d68","threading_id":null,"offline_threading_id":"6069607551850542891","author":"fbid:1743460630","author_email":"1743460630\u0040facebook.com","ephemeral_ttl_mode":null,"timestamp":1447107208823,"timestamp_absolute":"November 9","timestamp_relative":"Mon","timestamp_datetime":"November 9th, 10:13pm","timestamp_time_passed":3,"is_unread":false,"is_forward":false,"is_filtered_content":false,"is_filtered_content_bh":false,"is_filtered_content_account":false,"is_filtered_content_quasar":false,"is_filtered_content_invalid_app":false,"forward_count":0,"forward_message_ids":[],"source":"source:chat:web","source_tags":["source:chat"],"is_spoof_warning":false,"folder":"inbox","thread_fbid":"1743460630","other_user_fbid":"1743460630","body":"","subject":null,"has_attachment":true,"attachments":[{"app_attribution":null,"attach_type":"photo","name":"image-10201081669400900","url":"\/ajax\/mercury\/attachments\/photo\/view\/?message=mid.1447107208773\u00253Ab3e13f08389f956d68&fbid=10201081669400900&hash=AQB4vfPqfDxf5A0V","rel":"async","preview_url":"https:\/\/scontent.xx.fbcdn.net\/hphotos-xfa1\/v\/t34.0-0\/p206x206\/12212049_10201081669400900_716914115_n.jpg?oh=67f8be8d7b2ea32f6016cf02adde1059&oe=564BE6F1","preview_width":274,"preview_height":206,"preview_class":null,"icon_type":"attach:image","metadata":{"fbid":"10201081669400900","dimensions":"960,720"},"thumbnail_url":"https:\/\/scontent.xx.fbcdn.net\/hphotos-xfa1\/v\/t34.0-0\/s64x64\/12212049_10201081669400900_716914115_n.jpg?oh=0b52f9120a0c42300e3b807fd462db68&oe=564CF069","hires_url":"https:\/\/scontent.xx.fbcdn.net\/hphotos-xfa1\/v\/t34.0-12\/12212049_10201081669400900_716914115_n.jpg?oh=3da01167c70078571305f210aa4950b7&oe=564BE90F"}],"raw_attachments":null,"ranges":[],"thread_id":"mid.1384005816145:04aa2b90e69c6f3832","action_id":null,"action_type":"ma-type:user-generated-message"},{"message_id":"mid.1447107246566:e3645456c018bb1184","threading_id":null,"offline_threading_id":"6069607762060796126","author":"fbid:100000075573403","author_email":"100000075573403\u0040facebook.com","ephemeral_ttl_mode":null,"timestamp":1447107246573,"timestamp_absolute":"November 9","timestamp_relative":"Mon","timestamp_datetime":"November 9th, 10:14pm","timestamp_time_passed":3,"is_unread":false,"is_forward":false,"is_filtered_content":false,"is_filtered_content_bh":false,"is_filtered_content_account":false,"is_filtered_content_quasar":false,"is_filtered_content_invalid_app":false,"forward_count":0,"forward_message_ids":[],"source":"source:chat:web","source_tags":["source:chat"],"is_spoof_warning":false,"folder":"inbox","thread_fbid":"1743460630","other_user_fbid":"1743460630","body":"eh pa ta sossegado que j\u00e1 andei a ver a thread toda outra vez xD","subject":null,"has_attachment":false,"attachments":[],"raw_attachments":null,"ranges":[],"thread_id":"mid.1384005816145:04aa2b90e69c6f3832","action_id":null,"action_type":"ma-type:user-generated-message"},{"message_id":"mid.1447107256697:87a80c4225bf8cc815","threading_id":null,"offline_threading_id":"6069607752869166772","author":"fbid:1743460630","author_email":"1743460630\u0040facebook.com","ephemeral_ttl_mode":null,"timestamp":1447107256700,"timestamp_absolute":"November 9","timestamp_relative":"Mon","timestamp_datetime":"November 9th, 10:14pm","timestamp_time_passed":3,"is_unread":false,"is_forward":false,"is_filtered_content":false,"is_filtered_content_bh":false,"is_filtered_content_account":false,"is_filtered_content_quasar":false,"is_filtered_content_invalid_app":false,"forward_count":0,"forward_message_ids":[],"source":"source:chat:web","source_tags":["source:chat"],"is_spoof_warning":false,"folder":"inbox","thread_fbid":"1743460630","other_user_fbid":"1743460630","body":"ahaha","subject":null,"has_attachment":false,"attachments":[],"raw_attachments":null,"ranges":[],"thread_id":"mid.1384005816145:04aa2b90e69c6f3832","action_id":null,"action_type":"ma-type:user-generated-message"},{"message_id":"mid.1447190525472:717f8a6fd4bd3b5320","threading_id":null,"offline_threading_id":"6069957008958638307","author":"fbid:100000075573403","author_email":"100000075573403\u0040facebook.com","ephemeral_ttl_mode":null,"timestamp":1447190525493,"timestamp_absolute":"Tuesday","timestamp_relative":"Tue","timestamp_datetime":"Tuesday 9:22pm","timestamp_time_passed":1,"is_unread":false,"is_forward":false,"is_filtered_content":false,"is_filtered_content_bh":false,"is_filtered_content_account":false,"is_filtered_content_quasar":false,"is_filtered_content_invalid_app":false,"forward_count":0,"forward_message_ids":[],"source":"source:chat:web","source_tags":["source:chat"],"is_spoof_warning":false,"folder":"inbox","thread_fbid":"1743460630","other_user_fbid":"1743460630","body":"tive a ver o 1\u00ba ep da 2a season","subject":null,"has_attachment":false,"attachments":[],"raw_attachments":null,"ranges":[],"thread_id":"mid.1384005816145:04aa2b90e69c6f3832","action_id":null,"action_type":"ma-type:user-generated-message"},{"message_id":"mid.1447190559180:2cd432398fa0789660","threading_id":null,"offline_threading_id":"6069957150432645514","author":"fbid:100000075573403","author_email":"100000075573403\u0040facebook.com","ephemeral_ttl_mode":null,"timestamp":1447190559233,"timestamp_absolute":"Tuesday","timestamp_relative":"Tue","timestamp_datetime":"Tuesday 9:22pm","timestamp_time_passed":1,"is_unread":false,"is_forward":false,"is_filtered_content":false,"is_filtered_content_bh":false,"is_filtered_content_account":false,"is_filtered_content_quasar":false,"is_filtered_content_invalid_app":false,"forward_count":0,"forward_message_ids":[],"source":"source:chat:web","source_tags":["source:chat"],"is_spoof_warning":false,"folder":"inbox","thread_fbid":"1743460630","other_user_fbid":"1743460630","body":"ri bastante com o detalhe dos bot\u00f5es de punho no fim lol","subject":null,"has_attachment":false,"attachments":[],"raw_attachments":null,"ranges":[],"thread_id":"mid.1384005816145:04aa2b90e69c6f3832","action_id":null,"action_type":"ma-type:user-generated-message"},{"message_id":"mid.1447194244096:b7a63698e48ec27e49","threading_id":null,"offline_threading_id":"6069972605852066747","author":"fbid:1743460630","author_email":"1743460630\u0040facebook.com","ephemeral_ttl_mode":null,"timestamp":1447194244136,"timestamp_absolute":"Tuesday","timestamp_relative":"Tue","timestamp_datetime":"Tuesday 10:24pm","timestamp_time_passed":1,"is_unread":false,"is_forward":false,"is_filtered_content":false,"is_filtered_content_bh":false,"is_filtered_content_account":false,"is_filtered_content_quasar":false,"is_filtered_content_invalid_app":false,"forward_count":0,"forward_message_ids":[],"source":"source:chat:web","source_tags":["source:chat"],"is_spoof_warning":false,"folder":"inbox","thread_fbid":"1743460630","other_user_fbid":"1743460630","body":"ahah ya","subject":null,"has_attachment":false,"attachments":[],"raw_attachments":null,"ranges":[],"thread_id":"mid.1384005816145:04aa2b90e69c6f3832","action_id":null,"action_type":"ma-type:user-generated-message"},{"message_id":"mid.1447413971571:0201b0785003ff2245","threading_id":null,"offline_threading_id":"6070894218815379956","author":"fbid:100000075573403","author_email":"100000075573403\u0040facebook.com","ephemeral_ttl_mode":null,"timestamp":1447413971603,"timestamp_absolute":"Friday","timestamp_relative":"Fri","timestamp_datetime":"Friday 11:26am","timestamp_time_passed":1,"is_unread":false,"is_forward":false,"is_filtered_content":false,"is_filtered_content_bh":false,"is_filtered_content_account":false,"is_filtered_content_quasar":false,"is_filtered_content_invalid_app":false,"forward_count":0,"forward_message_ids":[],"source":"source:chat:web","source_tags":["source:chat"],"is_spoof_warning":false,"folder":"inbox","thread_fbid":"1743460630","other_user_fbid":"1743460630","body":"yeca","subject":null,"has_attachment":false,"attachments":[],"raw_attachments":null,"ranges":[],"thread_id":"mid.1384005816145:04aa2b90e69c6f3832","action_id":null,"action_type":"ma-type:user-generated-message"},{"message_id":"mid.1447413977954:28b4ec4237581f2e37","threading_id":null,"offline_threading_id":"6070894245691987265","author":"fbid:100000075573403","author_email":"100000075573403\u0040facebook.com","ephemeral_ttl_mode":null,"timestamp":1447413977956,"timestamp_absolute":"Friday","timestamp_relative":"Fri","timestamp_datetime":"Friday 11:26am","timestamp_time_passed":1,"is_unread":false,"is_forward":false,"is_filtered_content":false,"is_filtered_content_bh":false,"is_filtered_content_account":false,"is_filtered_content_quasar":false,"is_filtered_content_invalid_app":false,"forward_count":0,"forward_message_ids":[],"source":"source:chat:web","source_tags":["source:chat"],"is_spoof_warning":false,"folder":"inbox","thread_fbid":"1743460630","other_user_fbid":"1743460630","body":"almo\u00e7amos por volta da uma?","subject":null,"has_attachment":false,"attachments":[],"raw_attachments":null,"ranges":[],"thread_id":"mid.1384005816145:04aa2b90e69c6f3832","action_id":null,"action_type":"ma-type:user-generated-message"},{"message_id":"mid.1447415336651:9ef99191e798b37789","threading_id":null,"offline_threading_id":"6070899945614488394","author":"fbid:1743460630","author_email":"1743460630\u0040facebook.com","ephemeral_ttl_mode":null,"timestamp":1447415336689,"timestamp_absolute":"Friday","timestamp_relative":"Fri","timestamp_datetime":"Friday 11:48am","timestamp_time_passed":1,"is_unread":false,"is_forward":false,"is_filtered_content":false,"is_filtered_content_bh":false,"is_filtered_content_account":false,"is_filtered_content_quasar":false,"is_filtered_content_invalid_app":false,"forward_count":0,"forward_message_ids":[],"source":"source:chat:web","source_tags":["source:chat"],"is_spoof_warning":false,"folder":"inbox","thread_fbid":"1743460630","other_user_fbid":"1743460630","body":"hoje n\u00e3o pude ir, vim tratar do anivers\u00e1rio do meu irm\u00e3o e depois vou para casa","subject":null,"has_attachment":false,"attachments":[],"raw_attachments":null,"ranges":[],"thread_id":"mid.1384005816145:04aa2b90e69c6f3832","action_id":null,"action_type":"ma-type:user-generated-message"},{"message_id":"mid.1447415463952:a1f4b3dd6c81aee587","threading_id":null,"offline_threading_id":"6070900478376061975","author":"fbid:100000075573403","author_email":"100000075573403\u0040facebook.com","ephemeral_ttl_mode":null,"timestamp":1447415463954,"timestamp_absolute":"Friday","timestamp_relative":"Fri","timestamp_datetime":"Friday 11:51am","timestamp_time_passed":1,"is_unread":false,"is_forward":false,"is_filtered_content":false,"is_filtered_content_bh":false,"is_filtered_content_account":false,"is_filtered_content_quasar":false,"is_filtered_content_invalid_app":false,"forward_count":0,"forward_message_ids":[],"source":"source:chat:web","source_tags":["source:chat"],"is_spoof_warning":false,"folder":"inbox","thread_fbid":"1743460630","other_user_fbid":"1743460630","body":"ah ta bom ta bom","subject":null,"has_attachment":false,"attachments":[],"raw_attachments":null,"ranges":[],"thread_id":"mid.1384005816145:04aa2b90e69c6f3832","action_id":null,"action_type":"ma-type:user-generated-message"},{"message_id":"mid.1447635284340:eaa613b1fb6a742f29","threading_id":null,"offline_threading_id":"6071822463636626624","author":"fbid:1743460630","author_email":"1743460630\u0040facebook.com","ephemeral_ttl_mode":null,"timestamp":1447635284394,"timestamp_absolute":"Today","timestamp_relative":"12:54am","timestamp_datetime":"12:54am","timestamp_time_passed":0,"is_unread":false,"is_forward":false,"is_filtered_content":false,"is_filtered_content_bh":false,"is_filtered_content_account":false,"is_filtered_content_quasar":false,"is_filtered_content_invalid_app":false,"forward_count":0,"forward_message_ids":[],"source":"source:titan:m_touch","source_tags":["source:mobile"],"is_spoof_warning":false,"folder":"inbox","thread_fbid":"1743460630","other_user_fbid":"1743460630","body":"Amanh\u00e3 n\u00e3o viu de manh\u00e3. Vemo-nos no tagus","subject":null,"has_attachment":false,"attachments":[],"raw_attachments":null,"ranges":[],"thread_id":"mid.1384005816145:04aa2b90e69c6f3832","action_id":null,"action_type":"ma-type:user-generated-message"},{"message_id":"mid.1447639028870:c269652f26d65adc68","threading_id":null,"offline_threading_id":"6071838170784414519","author":"fbid:100000075573403","author_email":"100000075573403\u0040facebook.com","ephemeral_ttl_mode":null,"timestamp":1447639028872,"timestamp_absolute":"Today","timestamp_relative":"1:57am","timestamp_datetime":"1:57am","timestamp_time_passed":0,"is_unread":false,"is_forward":false,"is_filtered_content":false,"is_filtered_content_bh":false,"is_filtered_content_account":false,"is_filtered_content_quasar":false,"is_filtered_content_invalid_app":false,"forward_count":0,"forward_message_ids":[],"source":"source:chat:orca","source_tags":["source:messenger","source:chat","source:mobile"],"is_spoof_warning":false,"folder":"inbox","thread_fbid":"1743460630","other_user_fbid":"1743460630","body":"T\u00e1-se bem, vais almo\u00e7ar l\u00e1? S\u00f3 para saber que shuttle apanho","subject":null,"has_attachment":false,"attachments":[],"raw_attachments":null,"ranges":[],"thread_id":"mid.1384005816145:04aa2b90e69c6f3832","action_id":null,"action_type":"ma-type:user-generated-message"},{"message_id":"mid.1447640232698:adb6cd07ccc04bb336","threading_id":null,"offline_threading_id":"6071843218556236443","author":"fbid:1743460630","author_email":"1743460630\u0040facebook.com","ephemeral_ttl_mode":null,"timestamp":1447640232712,"timestamp_absolute":"Today","timestamp_relative":"2:17am","timestamp_datetime":"2:17am","timestamp_time_passed":0,"is_unread":false,"is_forward":false,"is_filtered_content":false,"is_filtered_content_bh":false,"is_filtered_content_account":false,"is_filtered_content_quasar":false,"is_filtered_content_invalid_app":false,"forward_count":0,"forward_message_ids":[],"source":"source:titan:m_tablet","source_tags":[],"is_spoof_warning":false,"folder":"inbox","thread_fbid":"1743460630","other_user_fbid":"1743460630","body":"Devo almo\u00e7ar em casa mas confirmo amanh\u00e3","subject":null,"has_attachment":false,"attachments":[],"raw_attachments":null,"ranges":[],"thread_id":"mid.1384005816145:04aa2b90e69c6f3832","action_id":null,"action_type":"ma-type:user-generated-message"},{"message_id":"mid.1447670965669:ed464e284618b47606","threading_id":null,"offline_threading_id":"6071972131157517954","author":"fbid:1743460630","author_email":"1743460630\u0040facebook.com","ephemeral_ttl_mode":null,"timestamp":1447670965729,"timestamp_absolute":"Today","timestamp_relative":"10:49am","timestamp_datetime":"10:49am","timestamp_time_passed":0,"is_unread":false,"is_forward":false,"is_filtered_content":false,"is_filtered_content_bh":false,"is_filtered_content_account":false,"is_filtered_content_quasar":false,"is_filtered_content_invalid_app":false,"forward_count":0,"forward_message_ids":[],"source":"source:chat:web","source_tags":["source:chat"],"is_spoof_warning":false,"folder":"inbox","thread_fbid":"1743460630","other_user_fbid":"1743460630","body":"vou comer aqui em casa","subject":null,"has_attachment":false,"attachments":[],"raw_attachments":null,"ranges":[],"thread_id":"mid.1384005816145:04aa2b90e69c6f3832","action_id":null,"action_type":"ma-type:user-generated-message"},{"message_id":"mid.1447671401052:fe47e42656bcae5399","threading_id":null,"offline_threading_id":"6071973951466432572","author":"fbid:100000075573403","author_email":"100000075573403\u0040facebook.com","ephemeral_ttl_mode":null,"timestamp":1447671401054,"timestamp_absolute":"Today","timestamp_relative":"10:56am","timestamp_datetime":"10:56am","timestamp_time_passed":0,"is_unread":false,"is_forward":false,"is_filtered_content":false,"is_filtered_content_bh":false,"is_filtered_content_account":false,"is_filtered_content_quasar":false,"is_filtered_content_invalid_app":false,"forward_count":0,"forward_message_ids":[],"source":"source:chat:orca","source_tags":["source:messenger","source:chat","source:mobile"],"is_spoof_warning":false,"folder":"inbox","thread_fbid":"1743460630","other_user_fbid":"1743460630","body":"Roger","subject":null,"has_attachment":false,"attachments":[],"raw_attachments":null,"ranges":[],"thread_id":"mid.1384005816145:04aa2b90e69c6f3832","action_id":null,"action_type":"ma-type:user-generated-message"},{"message_id":"mid.1447682200114:582e06d0fdd9b6ff25","threading_id":null,"offline_threading_id":"6072019245141471136","author":"fbid:100000075573403","author_email":"100000075573403\u0040facebook.com","ephemeral_ttl_mode":null,"timestamp":1447682200117,"timestamp_absolute":"Today","timestamp_relative":"1:56pm","timestamp_datetime":"1:56pm","timestamp_time_passed":0,"is_unread":false,"is_forward":false,"is_filtered_content":false,"is_filtered_content_bh":false,"is_filtered_content_account":false,"is_filtered_content_quasar":false,"is_filtered_content_invalid_app":false,"forward_count":0,"forward_message_ids":[],"source":"source:chat:web","source_tags":["source:chat"],"is_spoof_warning":false,"folder":"inbox","thread_fbid":"1743460630","other_user_fbid":"1743460630","body":"tou na sala do neiist","subject":null,"has_attachment":false,"attachments":[],"raw_attachments":null,"ranges":[],"thread_id":"mid.1384005816145:04aa2b90e69c6f3832","action_id":null,"action_type":"ma-type:user-generated-message"},{"message_id":"mid.1447684175873:f58333f672ead72710","threading_id":null,"offline_threading_id":"6072027538344346995","author":"fbid:1743460630","author_email":"1743460630\u0040facebook.com","ephemeral_ttl_mode":null,"timestamp":1447684175934,"timestamp_absolute":"Today","timestamp_relative":"2:29pm","timestamp_datetime":"2:29pm","timestamp_time_passed":0,"is_unread":false,"is_forward":false,"is_filtered_content":false,"is_filtered_content_bh":false,"is_filtered_content_account":false,"is_filtered_content_quasar":false,"is_filtered_content_invalid_app":false,"forward_count":0,"forward_message_ids":[],"source":"source:chat:web","source_tags":["source:chat"],"is_spoof_warning":false,"folder":"inbox","thread_fbid":"1743460630","other_user_fbid":"1743460630","body":"ok eu j\u00e1 estou a ir para o tagus","subject":null,"has_attachment":false,"attachments":[],"raw_attachments":null,"ranges":[],"thread_id":"mid.1384005816145:04aa2b90e69c6f3832","action_id":null,"action_type":"ma-type:user-generated-message"}],"roger":{"1743460630":{"1743460630":1447684175934},"mid.1384005816145:04aa2b90e69c6f3832":{"1743460630":1447684175934}},"message_blocked_ids":[],"payload_source":"server_fetch_thread_info"},"bootloadable":{},"ixData":{},"lid":"6217794738737747001"}
*for (;;); {"t":"msg","seq":15,"u":100000075573403,"ms":[{"event":"read","tids":["mid.1414028124846:ddce568db74c17b061"],"thread_fbids":[],"other_user_fbids":[100000680200678],"chat_ids":[100000680200678],"mark_as_read":true,"folder_info":[],"timestamp":1447693151940,"realtime_viewer_fbid":100000075573403,"type":"messaging"}]}5436*
*for (;;); {"t":"msg","seq":5,"u":100000075573403,"ms":[{"event":"read_receipt","reader":100000680200678,"time":1447693148216,"realtime_viewer_fbid":100000075573403,"type":"messaging"},{"event":"read_receipt","reader":100000680200678,"time":1447693148216,"realtime_viewer_fbid":100000075573403,"type":"m_read_receipt"}]})L8
fbid
for (;;);{"__ar":1,"payload":{"actions":[{"client_thread_id":null,"message_id":"mid.1447693147594:fbcd5b6241a231db83","client_message_id":"6072065156738023495","status":1,"timestamp":1447693147595,"timestamp_absolute":"Today","timestamp_relative":"4:59pm","timestamp_datetime":"4:59pm","timestamp_time_passed":0,"attachments":[],"thread_id":null,"thread_fbid":null,"other_user_fbid":"100000680200678","action_id":null,"action_type":"ma-type:send-message"}],"payload_source":"server_send_message"},"bootloadable":{},"ixData":{},"lid":"6217794721245499287"}
for (;;);{"__ar":1,"payload":{"actions":[{"thread_id":null,"thread_fbid":null,"other_user_fbid":"100000680200678","action_id":null,"action_type":"ma-type:update-action-id"}],"payload_source":"server_change_read_status"},"bootloadable":{},"ixData":{},"lid":"6217794764386010538"}}}}Q
/ajax/mercury/attachments/photo.php?fbid=10201081669400900&height=206&mode=cover&width=206
/ajax/mercury/attachments/photo.php?fbid=10201081669400900&height=206&mode=cover&width=206
for (;;); {"t":"msg","seq":13,"u":100000075573403,"ms":[{"unread":2,"unseen":0,"other_unseen":0,"other_unread":0,"seen_timestamp":1447693151940,"realtime_viewer_fbid":100000075573403,"type":"inbox"}]}v=20
2for (;;); {"t":"msg","seq":3,"u":100000075573403,"ms":[{"sequence_id":300176,"delivered":true,"type":"messaging","event":"delivery_receipt","other_user_fbid":100000680200678,"timestamp":1447693147595}]}
for (;;); {"t":"msg","seq":12,"u":100000075573403,"ms":[{"overlay":{"100000680200678":{"a":0,"ol":-1,"s":"push","p":{"status":"offline","webStatus":"offline","fbAppStatus":"offline","messengerStatus":"offline","otherStatus":"offline"},"vc":8,"la":1447693150}},"type":"buddylist_overlay"},{"unread":2,"unseen":1,"other_unseen":0,"other_unread":0,"seen_timestamp":0,"realtime_viewer_fbid":100000075573403,"type":"inbox"},{"overlay":{"100000680200678":{"a":0,"ol":-1,"s":"push","p":{"status":"offline","webStatus":"offline","fbAppStatus":"offline","messengerStatus":"offline","otherStatus":"offline"},"vc":8,"la":1447693151}},"type":"buddylist_overlay"}]}
age_batch[0][action_type]=ma-type%3Auser-generated-message&message_batch[0][thread_id]&message_batch[0][author]=fbid%3A100000075573403&message_batch[0][author_email]&message_batch[0][timestamp]=1447693146881&message_batch[0][timestamp_absolute]=Today&message_batch[0][timestamp_relative]=8%3A59am&message_batch[0][timestamp_time_passed]=0&message_batch[0][is_unread]=false&message_batch[0][is_forward]=false&message_batch[0][is_filtered_content]=false&message_batch[0][is_filtered_content_bh]=false&message_batch[0][is_filtered_content_account]=false&message_batch[0][is_filtered_content_quasar]=false&message_batch[0][is_filtered_content_invalid_app]=false&message_batch[0][is_spoof_warning]=false&message_batch[0][source]=source%3Amessenger%3Aweb&message_batch[0][body]=RAMAS_IS_LOVE&message_batch[0][has_attachment]=false&message_batch[0][html_body]=false&message_batch[0][specific_to_list][0]=fbid%3A100000680200678&message_batch[0][specific_to_list][1]=fbid%3A100000075573403&message_batch[0][status]=0&message_batch[0][offline_threading_id]=6072065156738023495&message_batch[0][message_id]=6072065156738023495&message_batch[0][ephemeral_ttl_mode]=0&message_batch[0][manual_retry_cnt]=0&message_batch[0][other_user_fbid]=100000680200678&client=mercury&__user=100000075573403&__a=1&__dyn=7AzkXh8Z0BgDxKy1l0BwRyWgS8zXrWo466EeAq68K5UdoS2qGGfUkz9ovEwy2OqEbbDG4UiwhU4i3K5U&__req=c&fb_dtsg=AQHJ3PZC-045&ttstamp=2658172745180906745485253&__rev=2045436
for (;;); {"t":"msg","seq":9,"u":100000075573403,"ms":[{"folder":"inbox","thread_row":"","is_unread":true,"sequence_id":300178,"msg_body":"","new_participants":"","unread_counts":{},"html":"","type":"messaging","message":{"attachments":[],"ranges":[],"share_map":[],"subject":null,"mercury_author_id":"fbid:100000680200678","timestamp_relative":null,"mid":"mid.1447693151936:24bae3065406d84d53","sender_name":"David Duarte","has_attachment":false,"source":"source:unknown","body":"RAMAS_IS_LIFE","tid":null,"mercury_source_tags":[],"timestamp_datetime":null,"mercury_author_email":"100000680200678@facebook.com","replyActionType":0,"other_user_fbid":100000680200678,"timestamp":1447693151940,"timestamp_time_passed":null,"offline_threading_id":"6072065176457387548","mercury_source":"source:unknown","group_thread_info":null,"html_body":"","forward":0,"threading_id":"<1447693151583:0-3787051c3785cf89@mail.projektitan.com>","timestamp_absolute":null,"short_source":1,"tags":"source:messenger:web,cg-enabled,inbox","is_spoof_warning":false,"ephemeral_ttl_mode":0,"sender":"100000680200678@facebook.com","is_unread":true,"api_tags":["inbox","source:web"],"sender_fbid":100000680200678,"attachmentIds":[],"prev_last_visible_action_id":-1,"attachment_map":[]},"event":"deliver"},{"st":0,"from":100000680200678,"to":100000075573403,"from_mobile":false,"realtime_viewer_fbid":100000075573403,"type":"typ"}]}26
*for (;;); {"t":"msg","seq":2,"u":100000075573403,"ms":[{"folder":"inbox","thread_row":"","is_unread":false,"sequence_id":300175,"msg_body":"","new_participants":"","unread_counts":{},"html":"","type":"messaging","message":{"attachments":[],"ranges":[],"share_map":[],"subject":null,"mercury_author_id":"fbid:100000075573403","timestamp_relative":null,"mid":"mid.1447693147594:fbcd5b6241a231db83","sender_name":"Diogo Barradas","has_attachment":false,"source":"source:unknown","body":"RAMAS_IS_LOVE","tid":null,"mercury_source_tags":[],"timestamp_datetime":null,"mercury_author_email":"100000075573403@facebook.com","replyActionType":0,"other_user_fbid":100000680200678,"timestamp":1447693147595,"timestamp_time_passed":null,"offline_threading_id":"6072065156738023495","mercury_source":"source:unknown","group_thread_info":null,"html_body":"","forward":0,"threading_id":"<1447693146881:0-c2ee58c4d4eb80c7@mail.projektitan.com>","timestamp_absolute":null,"short_source":1,"tags":"source:messenger:web,sent,inbox,cg-enabled","is_spoof_warning":false,"ephemeral_ttl_mode":0,"sender":"100000075573403@facebook.com","is_unread":false,"api_tags":["sent","inbox","read","source:web"],"sender_fbid":100000075573403,"attachmentIds":[],"prev_last_visible_action_id":-1,"attachment_map":[]},"event":"deliver"}]}
for (;;);{"__ar":1,"payload":{"threads":[{"thread_id":"mid.1414028124846:ddce568db74c17b061","thread_fbid":"100000680200678","other_user_fbid":"100000680200678","participants":["fbid:100000680200678","fbid:100000075573403"],"former_participants":[],"name":"","snippet":"RAMAS_IS_THE_WORD","snippet_has_attachment":false,"snippet_attachments":[],"snippet_sender":"fbid:100000680200678","unread_count":0,"message_count":776,"image_src":null,"timestamp_absolute":"Today","timestamp_datetime":"4:54pm","timestamp_relative":"4:54pm","timestamp_time_passed":0,"timestamp":1447692891832,"server_timestamp":1447692891832,"mute_settings":[],"is_canonical_user":true,"is_canonical":true,"is_subscribed":true,"folder":"inbox","is_archived":false,"recipients_loadable":true,"name_conversation_sheet_dismissed":false,"has_email_participant":false,"read_only":false,"can_reply":true,"composer_enabled":true,"last_message_id":"mid.1447692891827:b7807521a52f2bbc89","last_message_timestamp":1447692891832,"last_read_timestamp":1447692891832,"ephemeral_ttl_mode":0,"custom_like_icon":null,"titan_originated_thread_id":"\u003C1414028124518:199292367-4078056338\u0040mail.projektitan.com>"}],"actions":[{"message_id":"mid.1447692891827:b7807521a52f2bbc89","threading_id":null,"offline_threading_id":"6072064085512834551","author":"fbid:100000680200678","author_email":"100000680200678\u0040facebook.com","ephemeral_ttl_mode":null,"timestamp":1447692891832,"timestamp_absolute":"Today","timestamp_relative":"4:54pm","timestamp_datetime":"4:54pm","timestamp_time_passed":0,"is_unread":false,"is_forward":false,"is_filtered_content":false,"is_filtered_content_bh":false,"is_filtered_content_account":false,"is_filtered_content_quasar":false,"is_filtered_content_invalid_app":false,"forward_count":0,"forward_message_ids":[],"source":"source:messenger:web","source_tags":[],"is_spoof_warning":false,"folder":"inbox","thread_fbid":"100000680200678","other_user_fbid":"100000680200678","body":"RAMAS_IS_THE_WORD","subject":null,"has_attachment":false,"attachments":[],"raw_attachments":null,"ranges":[],"thread_id":"mid.1414028124846:ddce568db74c17b061","action_id":null,"action_type":"ma-type:user-generated-message"}],"participants":[{"fbid":100000680200678,"gender":2,"href":"https:\/\/www.facebook.com\/daviduart3","id":"fbid:100000680200678","image_src":"https:\/\/scontent.xx.fbcdn.net\/hprofile-xap1\/v\/t1.0-1\/p32x32\/12234850_1061630600536270_3416102644215011805_n.jpg?oh=9ac85df3cc7663d37c0df8b23b5039d3&oe=56B2F54C","big_image_src":"https:\/\/scontent.xx.fbcdn.net\/hprofile-xap1\/v\/t1.0-1\/p50x50\/12234850_1061630600536270_3416102644215011805_n.jpg?oh=7c887dea1778445bbf469134b7b520ed&oe=56EBF68C","name":"David Duarte","short_name":"David","employee":false,"is_employee_away":false,"networks":[],"type":"user","vanity":"daviduart3","is_friend":true,"social_snippets":[],"is_messenger_user":true},{"fbid":100000075573403,"gender":2,"href":"https:\/\/www.facebook.com\/diogo.barradas.71","id":"fbid:100000075573403","image_src":"https:\/\/fbcdn-profile-a.akamaihd.net\/hprofile-ak-xft1\/v\/t1.0-1\/p32x32\/11430107_1029900610355782_5323887418682892768_n.jpg?oh=2184a3a8812329f17cc360a0bfc61f44&oe=56B3F6D0&__gda__=1455265447_3fb78e74f425b2e8ffb3965ae324c1ef","big_image_src":"https:\/\/fbcdn-profile-a.akamaihd.net\/hprofile-ak-xft1\/v\/t1.0-1\/p50x50\/11430107_1029900610355782_5323887418682892768_n.jpg?oh=52a7c80a3b4116d8479e83e2bb125725&oe=56BA5910&__gda__=1458082407_ef21a42da065571c4aff10bc8489d2c5","name":"Diogo Barradas","short_name":"Diogo","employee":false,"is_employee_away":false,"networks":[],"type":"user","vanity":"diogo.barradas.71","is_friend":false,"social_snippets":[],"is_messenger_user":true}],"message_counts":[{"unread_count":1,"unseen_count":0,"seen_timestamp":1447692891832,"last_action_id":null,"folder":"inbox"}],"unseen_thread_ids":[{"thread_fbids":[],"other_user_fbids":null,"thread_ids":[],"folder":"inbox"}],"unseen_thread_fbids":[{"thread_fbids":[],"other_user_fbids":null,"thread_ids":[],"folder":"inbox"}],"payload_source":"server_thread_sync"},"bootloadable":{},"ixData":{},"lid":"6217794704847245582"}
2for (;;); {"t":"msg","seq":6,"u":100000075573403,"ms":[{"st":1,"from":100000680200678,"to":100000075573403,"from_mobile":false,"realtime_viewer_fbid":100000075573403,"type":"typ"}]}rev=2045436
for (;;); {"t":"msg","seq":16,"u":100000075573403,"ms":[{"unread":1,"unseen":0,"other_unseen":0,"other_unread":0,"seen_timestamp":0,"realtime_viewer_fbid":100000075573403,"type":"inbox"}]}
require("TimeSlice").guard(function() {require("ServerJSDefine").handleDefines([["MercuryConfig",[],{"GroupChatMentionsGK":false,"DesktopNotificationsGK":false,"MessagesJewelReactGK":true,"ForwardingEnabled":true,"MessengerForwardingEnabled":false,"WWWMessengerAirlinesGK":false,"WWWMessengerCommerceGK":false,"WWWMessengerCheckout":false,"WWWMessengerHScrollGK":true,"WWWMessengerMoneyPennyGK":false,"MomentsMessengerWWWGK":true,"DivebarMessageCountGK":false,"ScrollableSidebarTypeaheadGK":false,"ShowContextBanner":true,"ShowContextBannerNullState":false,"ChatTabMessengerStyle":true,"MessengerGlobalDeleteGK":false,"MessengerCodePaste":false,"MercuryGenieRendering":true,"WWWSyncMsgText":false,"WWWSyncMsgAttach":false,"WWWSyncMsgLog":false,"WWWSyncDeliveryReceipt":false,"WWWSyncReadReceipt":false,"WWWSyncMarkRead":false,"WWW2lc":true,"CoreGraphEnabled":true,"roger.seen_delay":15000,"activity_limit":60000,"idle_limit":1800000,"idle_poll_interval":300000,"filtering_active":true,"upload_url":"https:\/\/upload.messenger.com\/ajax\/mercury\/upload.php","MessengerAppID":"237759909591655","sound.hot_like_grow_mp3_url":"https:\/\/fbstatic-a.akamaihd.net\/rsrc.php\/yf\/r\/XyTteqB51ob.mp3","sound.hot_like_pop_mp3_url":"https:\/\/fbstatic-a.akamaihd.net\/rsrc.php\/yM\/r\/1Vcznk-uUR-.mp3","sound.hot_like_outgoing_small_mp3_url":"https:\/\/fbstatic-a.akamaihd.net\/rsrc.php\/yP\/r\/NUhwZHJ8fUZ.mp3","sound.hot_like_outgoing_medium_mp3_url":"https:\/\/fbstatic-a.akamaihd.net\/rsrc.php\/y8\/r\/a6onsWOBhsg.mp3","sound.hot_like_outgoing_large_mp3_url":"https:\/\/fbstatic-a.akamaihd.net\/rsrc.php\/yL\/r\/qi5pP1651Bi.mp3","sound.hot_like_grow_ogg_url":"https:\/\/fbstatic-a.akamaihd.net\/rsrc.php\/yU\/r\/9LbkezrNCLQ.ogg","sound.hot_like_pop_ogg_url":"https:\/\/fbstatic-a.akamaihd.net\/rsrc.php\/y5\/r\/ouE5maL6ab4.ogg","sound.hot_like_outgoing_small_ogg_url":"https:\/\/fbstatic-a.akamaihd.net\/rsrc.php\/y0\/r\/SbSSjevXDC6.ogg","sound.hot_like_outgoing_medium_ogg_url":"https:\/\/fbstatic-a.akamaihd.net\/rsrc.php\/yf\/r\/TNPmLer_j2q.ogg","sound.hot_like_outgoing_large_ogg_url":"https:\/\/fbstatic-a.akamaihd.net\/rsrc.php\/yf\/r\/8SNnbHD2mgk.ogg"},35],["CurrentEnvironment",[],{"facebookdotcom":false,"messengerdotcom":true},827],["MercuryServerRequestsConfig",[],{"sendMessageTimeout":45000,"msgrRegion":"ATN"},107],["MercuryThreadlistConstants",[],{"RECENT_THREAD_OFFSET":0,"JEWEL_THREAD_COUNT":5,"JEWEL_MORE_COUNT":10,"WEBMESSENGER_THREAD_COUNT":20,"WEBMESSENGER_MORE_COUNT":20,"WEBMESSENGER_SEARCH_SNIPPET_COUNT":5,"WEBMESSENGER_SEARCH_SNIPPET_LIMIT":5,"WEBMESSENGER_SEARCH_SNIPPET_MORE":5,"WEBMESSENGER_MORE_MESSAGES_COUNT":20,"RECENT_MESSAGES_LIMIT":10,"MAX_UNREAD_COUNT":99,"MAX_UNSEEN_COUNT":99,"MESSAGE_NOTICE_INACTIVITY_THRESHOLD":20000,"GROUPING_THRESHOLD":300000,"MESSAGE_TIMESTAMP_THRESHOLD":1209600000,"SEARCH_TAB":"searchtab","MAX_CHARS_BEFORE_BREAK":280},96],["MessagingConfig",[],{"IDLE_CUTOFF":30000,"SEND_CONNECTION_RETRIES":2,"SEND_BATCH_LIMIT":5},97],["DateFormatConfig",[],{"numericDateOrder":["m","d","y"],"numericDateSeparator":"\/","shortDayNames":["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],"timeSeparator":":","weekStart":6,"formats":{"D":"D","D g:ia":"D g:ia","D M d":"D M d","D M d, Y":"D M d, Y","D M j":"D M j","D M j, g:ia":"D M j, g:ia","D M j, y":"D M j, y","D M j, Y g:ia":"D M j, Y g:ia","D, M j, Y":"D, M j, Y","F d":"F d","F d, Y":"F d, Y","F g":"F g","F j":"F j","F j, Y":"F j, Y","F j, Y \u0040 g:i A":"F j, Y \u0040 g:i A","F j, Y g:i a":"F j, Y g:i a","F jS":"F jS","F jS, g:ia":"F jS, g:ia","F jS, Y":"F jS, Y","F Y":"F Y","g A":"g A","g:i":"g:i","g:i A":"g:i A","g:i a":"g:i a","g:iA":"g:iA","g:ia":"g:ia","g:ia F jS, Y":"g:ia F jS, Y","g:iA l, F jS":"g:iA l, F jS","g:ia M j":"g:ia M j","g:ia M jS":"g:ia M jS","g:ia, F jS":"g:ia, F jS","g:iA, l M jS":"g:iA, l M jS","g:sa":"g:sa","H:I - M d, Y":"H:I - M d, Y","h:i a":"h:i a","h:m:s m\/d\/Y":"h:m:s m\/d\/Y","j":"j","l F d, Y":"l F d, Y","l g:ia":"l g:ia","l, F d, Y":"l, F d, Y","l, F j":"l, F j","l, F j, Y":"l, F j, Y","l, F jS":"l, F jS","l, F jS, g:ia":"l, F jS, g:ia","l, M j":"l, M j","l, M j, Y":"l, M j, Y","l, M j, Y g:ia":"l, M j, Y g:ia","M d":"M d","M d, Y":"M d, Y","M d, Y g:ia":"M d, Y g:ia","M d, Y ga":"M d, Y ga","M j":"M j","M j, Y":"M j, Y","M j, Y g:i A":"M j, Y g:i A","M j, Y g:ia":"M j, Y g:ia","M jS, g:ia":"M jS, g:ia","M Y":"M Y","M y":"M y","m-d-y":"m-d-y","M. d":"M. d","M. d, Y":"M. d, Y","j F Y":"j F Y","m.d.y":"m.d.y","m\/d":"m\/d","m\/d\/Y":"m\/d\/Y","m\/d\/y":"m\/d\/y","m\/d\/Y g:ia":"m\/d\/Y g:ia","m\/d\/y H:i:s":"m\/d\/y H:i:s","m\/d\/Y h:m":"m\/d\/Y h:m","n":"n","n\/j":"n\/j","n\/j, g:ia":"n\/j, g:ia","n\/j\/y":"n\/j\/y","Y":"Y","Y-m-d":"Y-m-d","Y\/m\/d":"Y\/m\/d","y\/m\/d":"y\/m\/d","j \/ F \/ Y":"j \/ F \/ Y"},"ordinalSuffixes":{"1":"st","2":"nd","3":"rd","4":"th","5":"th","6":"th","7":"th","8":"th","9":"th","10":"th","11":"th","12":"th","13":"th","14":"th","15":"th","16":"th","17":"th","18":"th","19":"th","20":"th","21":"st","22":"nd","23":"rd","24":"th","25":"th","26":"th","27":"th","28":"th","29":"th","30":"th","31":"st"}},165],["MercuryMessengerBlockingUtils",[],{"gk_result":true,"block_messages":"BLOCK_MESSAGES"},872],["PresencePrivacyInitialData",[],{"visibility":1,"onlinePolicy":1,"privacyData":{}},58],["MercuryParticipantsConstants",[],{"UNKNOWN_GENDER":0,"EMAIL_IMAGE":"\/images\/messaging\/threadlist\/envelope.png","IMAGE_SIZE":32,"BIG_IMAGE_SIZE":50},109],["WWWBase",[],{"uri":"https:\/\/www.messenger.com\/"},318],["WorkModeConfig",[],{"is_work_user":false},396],["StickerConfig",[],{"ChatPaddedAnimatedStickerGK":true,"WebStickerSearch":true,"ShowStickerReplyNUX":false},515],["PresenceInitialData",[],{"cookiePollInterval":500,"cookieVersion":3,"dictEncode":true,"serverTime":"1447693136000","shouldSuppress":true},57],["JpegResizerConfig",[],{"isGKBlacklisted":false},313],["JpegResizeWorkerResource",[],{"url":"https:\/\/fbstatic-a.akamaihd.net\/rsrc.php\/v2\/yh\/r\/In7-EW5vOwP.js","name":"JpegResizeWorkerBundle"},274],["WebWorkerConfig",[],{"logging":{"enabled":false,"config":"WebWorkerLoggerConfig"},"evalWorkerURL":"\/rsrc.php\/v2\/y0\/r\/rfukCScFKrW.js"},297],["MercuryConstants",["MercuryActionStatus","MercuryActionType","MercuryAPIArgsSource","MercuryAttachmentContentType","MercuryAttachmentType","MercuryErrorType","MercuryGenericConstants","MercuryGlobalActionType","MercuryLogMessageType","MercuryMessageSourceTags","MercuryParticipantsConstants","MercuryPayloadSource","MercurySourceType","MercuryThreadlistConstants","MercuryThreadMode","MercuryTimePassed","MessagingConfig","MessagingEvent","MessagingTag"],{"MercuryActionStatus":{"__m":"MercuryActionStatus"},"MercuryActionType":{"__m":"MercuryActionType"},"MercuryAPIArgsSource":{"__m":"MercuryAPIArgsSource"},"MercuryAttachmentContentType":{"__m":"MercuryAttachmentContentType"},"MercuryAttachmentType":{"__m":"MercuryAttachmentType"},"MercuryErrorType":{"__m":"MercuryErrorType"},"MercuryGenericConstants":{"__m":"MercuryGenericConstants"},"MercuryGlobalActionType":{"__m":"MercuryGlobalActionType"},"MercuryLogMessageType":{"__m":"MercuryLogMessageType"},"MercuryMessageSourceTags":{"__m":"MercuryMessageSourceTags"},"MercuryParticipantsConstants":{"__m":"MercuryParticipantsConstants"},"MercuryPayloadSource":{"__m":"MercuryPayloadSource"},"MercurySourceType":{"__m":"MercurySourceType"},"MercuryThreadlistConstants":{"__m":"MercuryThreadlistConstants"},"MercuryThreadMode":{"__m":"MercuryThreadMode"},"MercuryTimePassed":{"__m":"MercuryTimePassed"},"MessagingConfig":{"__m":"MessagingConfig"},"MessagingEventTypes":{"__m":"MessagingEvent"},"MessagingTag":{"__m":"MessagingTag"},"MercurySendMessageTimeout":45000,"MercurySupportedShareType":{"FB_PHOTO":2,"FB_ALBUM":3,"FB_VIDEO":11,"FB_EVENT":7,"FB_SONG":28,"FB_MUSIC_ALBUM":30,"FB_PLAYLIST":31,"FB_MUSICIAN":35,"FB_RADIO_STATION":33,"EXTERNAL":100,"FB_TEMPLATE":300,"FB_SOCIAL_REPORT_PHOTO":48,"FB_COUPON":32,"FB_SHARE":99,"FB_HC_QUESTION":55,"FB_HC_ANSWER":56,"FB_SOCIAL_RESOLUTION":60,"FB_STATUS":22,"FB_BROWSE_QUERY":47,"FB_SYNC_REQUEST":61,"FB_OPEN_GRAPH":44,"FB_ORION":64,"FB_GENERIC_SHAREABLE":69},"VideoChatConstants":{"START_SESSION":1,"GET_SKYPE_TOKEN":2,"AWAITING_CALL":3,"CANCELLED_CALL":4,"CONNECTED_CALL":5,"HANDLED_CALL":6,"GOT_START_SESSION":7,"INSTALLING":8,"INSTALLED":9,"INSTALL_CANCELED":10,"ASSOC_CONNECTED_CALL":118224944915447,"ASSOC_VIEWED_CALL_PROMO":250568041676842,"MAX_VC_PROMO_VIEWS":2,"MINIMUM_VC_PROMO_VIEW_INTERVAL":5184000,"MINIMUM_VC_LAST_CALLED_INTERVAL":5184000},"MessagingFilteringType":{"LEGACY":"legacy","MODERATE":"moderate","STRICT":"strict"},"ChatNotificationConstants":{"NORMAL":0,"NO_USER_MESSAGE_NOTIFICATION":1},"Sandbox":{"ORIGIN":"https:\/\/fbstatic-a.akamaihd.net","PAGE_URL":"https:\/\/fbstatic-a.akamaihd.net\/fbsbx\/fbsbx.php?1"},"UIPushPhase":"V3","AttachmentMaxSize":26214400},36],["P2PGKValues",[],{"P2PEnabled":false,"P2PWWWMemoField":true,"P2PRequestMoneyEnabled":false},762],["P2PLinkConstants",[],{"receiverIneligibleHelpURI":"https:\/\/www.facebook.com\/help\/1495718484027862","addDebitCardHelpURI":"https:\/\/www.facebook.com\/help\/200298266807261","helpCenterURI":"https:\/\/www.facebook.com\/help\/863171203733904","contactSupportURI":"https:\/\/www.facebook.com\/help\/contact\/1491759007768605","complianceLearnMoreURI":"https:\/\/www.facebook.com\/help\/1555715811351399","complianceLearnMoreMsiteURI":"https:\/\/www.facebook.com\/help\/messenger-app\/369959656515129","contactFraudTeamURI":"https:\/\/www.facebook.com\/help\/contact\/370238886476028","payerProtectionURI":"https:\/\/www.facebook.com\/payer_protection\/","helpTransferSystemFailureURI":"https:\/\/www.facebook.com\/help\/contact\/614010102040957","helpTransferManualReviewURI":"https:\/\/www.facebook.com\/help\/messenger-app\/1463256903894928","helpTransferRecipientCanceledURI":"https:\/\/www.facebook.com\/help\/messenger-app\/1564459413784472","helpTransferCompletedURI":"https:\/\/www.facebook.com\/help\/messenger-app\/750020781733477","helpTransferCanceledSameCardURI":"https:\/\/www.facebook.com\/help\/messenger-app\/818512131561533","settingsWWWURI":"https:\/\/www.facebook.com\/settings?tab=payments","settingsMsiteURI":"https:\/\/m.facebook.com\/settings\/p2p\/","mTermsURI":"https:\/\/www.facebook.com\/legal\/m","mHelpURI":"https:\/\/www.facebook.com\/help\/messenger-app\/870471599656315","disputeURI":"https:\/\/www.facebook.com\/help\/contact\/828169843971429"},706],["P2PQEValues",[],{"P2PCreditCardFormRedesign":false},683],["MessengerConfig",[],{"MaxSeenHeadCount":8,"MaxThreadResults":8,"MessageLoadCount":20,"MoneyPennyFBID":"881263441913087","IsMessengerDesktop":false,"sound.notif_ogg_url":"https:\/\/fbstatic-a.akamaihd.net\/rsrc.php\/yy\/r\/XFhtdTsftOC.ogg","sound.notif_mp3_url":"https:\/\/fbstatic-a.akamaihd.net\/rsrc.php\/yq\/r\/OC4-KYxmKsR.mp3","DeliveryStateGK":true,"DogfoodingInfoGK":false,"MessengerDotComTabNavigationGK":false,"SharedPhotos":true,"ComposerShowQuickCam":false,"ComposerShowAudioClip":false,"EnableRtcGK":true,"EnableDesktopNotifs":true,"DisableNewMessagePill":false,"GlobalDelete":false,"NewMessageSound":true,"ShowContextBanner":true,"CoreGraphEnabled":false,"ContentSearchEnabled":false},661],["CreditCardConfig",[],{"supported_countries":[{"iso_alpha2":"US","iso_country":"United States"},{"iso_alpha2":"CA","iso_country":"Canada"},{"iso_alpha2":"GB","iso_country":"United Kingdom"},{"iso_alpha2":"AF","iso_country":"Afghanistan"},{"iso_alpha2":"AX","iso_country":"Aland Islands"},{"iso_alpha2":"AL","iso_country":"Albania"},{"iso_alpha2":"DZ","iso_country":"Algeria"},{"iso_alpha2":"AS","iso_country":"American Samoa"},{"iso_alpha2":"AD","iso_country":"Andorra"},{"iso_alpha2":"AO","iso_country":"Angola"},{"iso_alpha2":"AI","iso_country":"Anguilla"},{"iso_alpha2":"AQ","iso_country":"Antarctica"},{"iso_alpha2":"AG","iso_country":"Antigua"},{"iso_alpha2":"AR","iso_country":"Argentina"},{"iso_alpha2":"AM","iso_country":"Armenia"},{"iso_alpha2":"AW","iso_country":"Aruba"},{"iso_alpha2":"AU","iso_country":"Australia"},{"iso_alpha2":"AT","iso_country":"Austria"},{"iso_alpha2":"AZ","iso_country":"Azerbaijan"},{"iso_alpha2":"BH","iso_country":"Bahrain"},{"iso_alpha2":"BD","iso_country":"Bangladesh"},{"iso_alpha2":"BB","iso_country":"Barbados"},{"iso_alpha2":"BY","iso_country":"Belarus"},{"iso_alpha2":"BE","iso_country":"Belgium"},{"iso_alpha2":"BZ","iso_country":"Belize"},{"iso_alpha2":"BJ","iso_country":"Benin"},{"iso_alpha2":"BM","iso_country":"Bermuda"},{"iso_alpha2":"BT","iso_country":"Bhutan"},{"iso_alpha2":"BO","iso_country":"Bolivia"},{"iso_alpha2":"BQ","iso_country":"Bonaire, Sint Eustatius and Saba"},{"iso_alpha2":"BA","iso_country":"Bosnia and Herzegovina"},{"iso_alpha2":"BW","iso_country":"Botswana"},{"iso_alpha2":"BV","iso_country":"Bouvet Island"},{"iso_alpha2":"BR","iso_country":"Brazil"},{"iso_alpha2":"IO","iso_country":"British Indian Ocean Territory"},{"iso_alpha2":"VG","iso_country":"British Virgin Islands"},{"iso_alpha2":"BN","iso_country":"Brunei"},{"iso_alpha2":"BG","iso_country":"Bulgaria"},{"iso_alpha2":"BF","iso_country":"Burkina Faso"},{"iso_alpha2":"BI","iso_country":"Burundi"},{"iso_alpha2":"KH","iso_country":"Cambodia"},{"iso_alpha2":"CM","iso_country":"Cameroon"},{"iso_alpha2":"CV","iso_country":"Cape Verde"},{"iso_alpha2":"KY","iso_country":"Cayman Islands"},{"iso_alpha2":"CF","iso_country":"Central African Republic"},{"iso_alpha2":"TD","iso_country":"Chad"},{"iso_alpha2":"CL","iso_country":"Chile"},{"iso_alpha2":"CN","iso_country":"China"},{"iso_alpha2":"CX","iso_country":"Christmas Island"},{"iso_alpha2":"CC","iso_country":"Cocos (Keeling) Islands"},{"iso_alpha2":"CO","iso_country":"Colombia"},{"iso_alpha2":"KM","iso_country":"Comoros"},{"iso_alpha2":"CK","iso_country":"Cook Islands"},{"iso_alpha2":"CR","iso_country":"Costa Rica"},{"iso_alpha2":"CI","iso_country":"C\u00f4te d'Ivoire"},{"iso_alpha2":"HR","iso_country":"Croatia"},{"iso_alpha2":"CW","iso_country":"Cura\u00e7ao"},{"iso_alpha2":"CY","iso_country":"Cyprus"},{"iso_alpha2":"CZ","iso_country":"Czech Republic"},{"iso_alpha2":"CD","iso_country":"Democratic Republic of the Congo"},{"iso_alpha2":"DK","iso_country":"Denmark"},{"iso_alpha2":"DJ","iso_country":"Djibouti"},{"iso_alpha2":"DM","iso_country":"Dominica"},{"iso_alpha2":"DO","iso_country":"Dominican Republic"},{"iso_alpha2":"EC","iso_country":"Ecuador"},{"iso_alpha2":"EG","iso_country":"Egypt"},{"iso_alpha2":"SV","iso_country":"El Salvador"},{"iso_alpha2":"GQ","iso_country":"Equatorial Guinea"},{"iso_alpha2":"ER","iso_country":"Eritrea"},{"iso_alpha2":"EE","iso_country":"Estonia"},{"iso_alpha2":"ET","iso_country":"Ethiopia"},{"iso_alpha2":"FK","iso_country":"Falkland Islands"},{"iso_alpha2":"FO","iso_country":"Faroe Islands"},{"iso_alpha2":"FM","iso_country":"Federated States of Micronesia"},{"iso_alpha2":"FJ","iso_country":"Fiji"},{"iso_alpha2":"FI","iso_country":"Finland"},{"iso_alpha2":"FR","iso_country":"France"},{"iso_alpha2":"GF","iso_country":"French Guiana"},{"iso_alpha2":"PF","iso_country":"French Polynesia"},{"iso_alpha2":"TF","iso_country":"French Southern Territories"},{"iso_alpha2":"GA","iso_country":"Gabon"},{"iso_alpha2":"GE","iso_country":"Georgia"},{"iso_alpha2":"DE","iso_country":"Germany"},{"iso_alpha2":"GH","iso_country":"Ghana"},{"iso_alpha2":"GI","iso_country":"Gibraltar"},{"iso_alpha2":"GR","iso_country":"Greece"},{"iso_alpha2":"GL","iso_country":"Greenland"},{"iso_alpha2":"GD","iso_country":"Grenada"},{"iso_alpha2":"GP","iso_country":"Guadeloupe"},{"iso_alpha2":"GU","iso_country":"Guam"},{"iso_alpha2":"GT","iso_country":"Guatemala"},{"iso_alpha2":"GG","iso_country":"Guernsey"},{"iso_alpha2":"GN","iso_country":"Guinea"},{"iso_alpha2":"GW","iso_country":"Guinea-Bissau"},{"iso_alpha2":"GY","iso_country":"Guyana"},{"iso_alpha2":"HT","iso_country":"Haiti"},{"iso_alpha2":"HM","iso_country":"Heard Island and McDonald Islands"},{"iso_alpha2":"HN","iso_country":"Honduras"},{"iso_alpha2":"HK","iso_country":"Hong Kong"},{"iso_alpha2":"HU","iso_country":"Hungary"},{"iso_alpha2":"IS","iso_country":"Iceland"},{"iso_alpha2":"IN","iso_country":"India"},{"iso_alpha2":"ID","iso_country":"Indonesia"},{"iso_alpha2":"IQ","iso_country":"Iraq"},{"iso_alpha2":"IE","iso_country":"Ireland"},{"iso_alpha2":"IM","iso_country":"Isle Of Man"},{"iso_alpha2":"IL","iso_country":"Israel"},{"iso_alpha2":"IT","iso_country":"Italy"},{"iso_alpha2":"JM","iso_country":"Jamaica"},{"iso_alpha2":"JP","iso_country":"Japan"},{"iso_alpha2":"JE","iso_country":"Jersey"},{"iso_alpha2":"JO","iso_country":"Jordan"},{"iso_alpha2":"KZ","iso_country":"Kazakhstan"},{"iso_alpha2":"KE","iso_country":"Kenya"},{"iso_alpha2":"KI","iso_country":"Kiribati"},{"iso_alpha2":"KW","iso_country":"Kuwait"},{"iso_alpha2":"KG","iso_country":"Kyrgyzstan"},{"iso_alpha2":"LA","iso_country":"Laos"},{"iso_alpha2":"LV","iso_country":"Latvia"},{"iso_alpha2":"LB","iso_country":"Lebanon"},{"iso_alpha2":"LS","iso_country":"Lesotho"},{"iso_alpha2":"LR","iso_country":"Liberia"},{"iso_alpha2":"LY","iso_country":"Libya"},{"iso_alpha2":"LI","iso_country":"Liechtenstein"},{"iso_alpha2":"LT","iso_country":"Lithuania"},{"iso_alpha2":"LU","iso_country":"Luxembourg"},{"iso_alpha2":"MO","iso_country":"Macau"},{"iso_alpha2":"MK","iso_country":"Macedonia"},{"iso_alpha2":"MG","iso_country":"Madagascar"},{"iso_alpha2":"MW","iso_country":"Malawi"},{"iso_alpha2":"MY","iso_country":"Malaysia"},{"iso_alpha2":"MV","iso_country":"Maldives"},{"iso_alpha2":"ML","iso_country":"Mali"},{"iso_alpha2":"MT","iso_country":"Malta"},{"iso_alpha2":"MH","iso_country":"Marshall Islands"},{"iso_alpha2":"MQ","iso_country":"Martinique"},{"iso_alpha2":"MR","iso_country":"Mauritania"},{"iso_alpha2":"MU","iso_country":"Mauritius"},{"iso_alpha2":"YT","iso_country":"Mayotte"},{"iso_alpha2":"MX","iso_country":"Mexico"},{"iso_alpha2":"MD","iso_country":"Moldova"},{"iso_alpha2":"MC","iso_country":"Monaco"},{"iso_alpha2":"MN","iso_country":"Mongolia"},{"iso_alpha2":"ME","iso_country":"Montenegro"},{"iso_alpha2":"MS","iso_country":"Montserrat"},{"iso_alpha2":"MA","iso_country":"Morocco"},{"iso_alpha2":"MZ","iso_country":"Mozambique"},{"iso_alpha2":"MM","iso_country":"Myanmar"},{"iso_alpha2":"NA","iso_country":"Namibia"},{"iso_alpha2":"NR","iso_country":"Nauru"},{"iso_alpha2":"NP","iso_country":"Nepal"},{"iso_alpha2":"NL","iso_country":"Netherlands"},{"iso_alpha2":"AN","iso_country":"Netherlands Antilles"},{"iso_alpha2":"NC","iso_country":"New Caledonia"},{"iso_alpha2":"NZ","iso_country":"New Zealand"},{"iso_alpha2":"NI","iso_country":"Nicaragua"},{"iso_alpha2":"NE","iso_country":"Niger"},{"iso_alpha2":"NG","iso_country":"Nigeria"},{"iso_alpha2":"NU","iso_country":"Niue"},{"iso_alpha2":"NF","iso_country":"Norfolk Island"},{"iso_alpha2":"KP","iso_country":"North Korea"},{"iso_alpha2":"MP","iso_country":"Northern Mariana Islands"},{"iso_alpha2":"NO","iso_country":"Norway"},{"iso_alpha2":"OM","iso_country":"Oman"},{"iso_alpha2":"PK","iso_country":"Pakistan"},{"iso_alpha2":"PW","iso_country":"Palau"},{"iso_alpha2":"PS","iso_country":"Palestine"},{"iso_alpha2":"PA","iso_country":"Panama"},{"iso_alpha2":"PG","iso_country":"Papua New Guinea"},{"iso_alpha2":"PY","iso_country":"Paraguay"},{"iso_alpha2":"PE","iso_country":"Peru"},{"iso_alpha2":"PH","iso_country":"Philippines"},{"iso_alpha2":"PN","iso_country":"Pitcairn"},{"iso_alpha2":"PL","iso_country":"Poland"},{"iso_alpha2":"PT","iso_country":"Portugal"},{"iso_alpha2":"PR","iso_country":"Puerto Rico"},{"iso_alpha2":"QA","iso_country":"Qatar"},{"iso_alpha2":"CG","iso_country":"Republic of the Congo"},{"iso_alpha2":"RE","iso_country":"R\u00e9union"},{"iso_alpha2":"RO","iso_country":"Romania"},{"iso_alpha2":"RU","iso_country":"Russia"},{"iso_alpha2":"RW","iso_country":"Rwanda"},{"iso_alpha2":"BL","iso_country":"Saint Barth\u00e9lemy"},{"iso_alpha2":"SH","iso_country":"Saint Helena"},{"iso_alpha2":"KN","iso_country":"Saint Kitts and Nevis"},{"iso_alpha2":"MF","iso_country":"Saint Martin"},{"iso_alpha2":"PM","iso_country":"Saint Pierre and Miquelon"},{"iso_alpha2":"VC","iso_country":"Saint Vincent and the Grenadines"},{"iso_alpha2":"WS","iso_country":"Samoa"},{"iso_alpha2":"SM","iso_country":"San Marino"},{"iso_alpha2":"ST","iso_country":"Sao Tome and Principe"},{"iso_alpha2":"SA","iso_country":"Saudi Arabia"},{"iso_alpha2":"SN","iso_country":"Senegal"},{"iso_alpha2":"RS","iso_country":"Serbia"},{"iso_alpha2":"SC","iso_country":"Seychelles"},{"iso_alpha2":"SL","iso_country":"Sierra Leone"},{"iso_alpha2":"SG","iso_country":"Singapore"},{"iso_alpha2":"SX","iso_country":"Sint Maarten"},{"iso_alpha2":"SK","iso_country":"Slovakia"},{"iso_alpha2":"SI","iso_country":"Slovenia"},{"iso_alpha2":"SB","iso_country":"Solomon Islands"},{"iso_alpha2":"SO","iso_country":"Somalia"},{"iso_alpha2":"ZA","iso_country":"South Africa"},{"iso_alpha2":"GS","iso_country":"South Georgia and the South Sandwich Islands"},{"iso_alpha2":"KR","iso_country":"South Korea"},{"iso_alpha2":"SS","iso_country":"South Sudan"},{"iso_alpha2":"ES","iso_country":"Spain"},{"iso_alpha2":"LK","iso_country":"Sri Lanka"},{"iso_alpha2":"LC","iso_country":"St. Lucia"},{"iso_alpha2":"SR","iso_country":"Suriname"},{"iso_alpha2":"SJ","iso_country":"Svalbard and Jan Mayen"},{"iso_alpha2":"SZ","iso_country":"Swaziland"},{"iso_alpha2":"SE","iso_country":"Sweden"},{"iso_alpha2":"CH","iso_country":"Switzerland"},{"iso_alpha2":"TW","iso_country":"Taiwan"},{"iso_alpha2":"TJ","iso_country":"Tajikistan"},{"iso_alpha2":"TZ","iso_country":"Tanzania"},{"iso_alpha2":"TH","iso_country":"Thailand"},{"iso_alpha2":"BS","iso_country":"The Bahamas"},{"iso_alpha2":"GM","iso_country":"The Gambia"},{"iso_alpha2":"TL","iso_country":"Timor-Leste"},{"iso_alpha2":"TG","iso_country":"Togo"},{"iso_alpha2":"TK","iso_country":"Tokelau"},{"iso_alpha2":"TO","iso_country":"Tonga"},{"iso_alpha2":"TT","iso_country":"Trinidad and Tobago"},{"iso_alpha2":"TN","iso_country":"Tunisia"},{"iso_alpha2":"TR","iso_country":"Turkey"},{"iso_alpha2":"TM","iso_country":"Turkmenistan"},{"iso_alpha2":"TC","iso_country":"Turks and Caicos Islands"},{"iso_alpha2":"TV","iso_country":"Tuvalu"},{"iso_alpha2":"UG","iso_country":"Uganda"},{"iso_alpha2":"UA","iso_country":"Ukraine"},{"iso_alpha2":"AE","iso_country":"United Arab Emirates"},{"iso_alpha2":"UM","iso_country":"United States Minor Outlying Islands"},{"iso_alpha2":"UY","iso_country":"Uruguay"},{"iso_alpha2":"VI","iso_country":"US Virgin Islands"},{"iso_alpha2":"UZ","iso_country":"Uzbekistan"},{"iso_alpha2":"VU","iso_country":"Vanuatu"},{"iso_alpha2":"VA","iso_country":"Vatican City"},{"iso_alpha2":"VE","iso_country":"Venezuela"},{"iso_alpha2":"VN","iso_country":"Vietnam"},{"iso_alpha2":"WF","iso_country":"Wallis and Futuna"},{"iso_alpha2":"EH","iso_country":"Western Sahara"},{"iso_alpha2":"YE","iso_country":"Yemen"},{"iso_alpha2":"ZM","iso_country":"Zambia"},{"iso_alpha2":"ZW","iso_country":"Zimbabwe"}],"user_country":"PT","supported_types":[86,77,65],"icons":{"86":"\/images\/payments\/icons\/visa.png","77":"\/images\/payments\/icons\/mc.png","65":"\/images\/payments\/icons\/amex.png"}},761],["MNCommerceOrderItemsStatus",[],{"NONE":0,"CANCELED":1},884],["TilesMapConfig",[],{"OSM_ZOOM_THRESHOLD":7,"OSM_RECTS_RAW":[[39,124,24,148],[47,139,39,148],[51,82,45,92],[43,75,37,82],[45,82,30,120],[30,97,20,105],[30,105,15,118.1],[39,120,27.1,124],[45,120,39,132],[55,112,45,135],[30,85,29,95],[30,118.1,24.55,120],[27.1,120,26,120.9]],"MIN_SIZE_FOR_ATTRIBUTION":250,"TILE_URL_TEMPLATE":"https:\/\/external.xx.fbcdn.net\/map_tile.php?v=17&x={x}&y={y}&z={z}","STATIC_MAP_URL_TEMPLATE":"https:\/\/external.xx.fbcdn.net\/static_map.php?v=17","LOGO":{"url":"\/images\/here_maps\/here_maps_logo_24px.png","width":24,"height":24},"ZOOM_RANGE":{"MIN":1,"MAX":19},"HERE_MAP_REPORTER_URL":"http:\/\/mapfeedback.here.com\/","OSM_MAP_REPORTER_URL":"https:\/\/www.openstreetmap.org\/fixthemap\/","OSM_MAP_MIN_ZOOM_TO_REPORT_ISSUE":12,"IS_REPORT_BUTTON_ENABLED":true,"DEVICE_PIXEL_RATIO":1,"IS_OXYGEN_STATIC_MAP_ENABLED":true},664],["LocaleInitialData",[],{"locale":"en_US","language":"English (US)"},273],["MNCommerceShipmentTrackingEventTypes",[],{"UNKNOWN":0,"ETA":1,"ACCEPTED":1001,"IN_TRANSIT":1002,"OUT_FOR_DELIVERY":1003,"DELIVERED":1004,"DELAYED":1005},763],["MarauderConfig",[],{"app_version":2045436,"gk_enabled":false},31],["AvailableListInitialData",[],{"pollInterval":100000,"lazyPollInterval":300000,"lazyThreshold":300000,"updateTime":1447693136000,"availableList":{"100001580284563":{"a":1,"i":false,"c":10},"1822184745":{"a":1,"i":false,"c":8},"100008908081924":{"a":2,"i":false,"c":10},"100000130476840":{"a":1,"i":false,"c":10},"100000244762909":{"a":1,"i":false,"c":10},"100000142055240":{"a":2,"i":false,"c":8},"100001481181610":{"a":1,"i":false,"c":10},"1268561902":{"a":2,"i":false,"c":10},"100000685990324":{"a":1,"i":false,"c":8},"1708081924":{"a":2,"i":false,"c":10},"100000908690443":{"a":1,"i":false,"c":10},"100000483303503":{"a":1,"i":false,"c":10},"738313796":{"a":1,"i":false,"c":8},"677921681":{"a":1,"i":false,"c":8},"100002878798712":{"a":1,"i":false,"c":8},"1441326279":{"a":1,"i":false,"c":10},"100001327075898":{"a":1,"i":false,"c":8},"834404695":{"a":1,"i":false,"c":8},"1203974839":{"a":1,"i":false,"c":10},"100000353838876":{"a":2,"i":false,"c":10},"100002833793724":{"a":1,"i":false,"c":10},"100000025600682":{"a":1,"i":false,"c":10},"100001655793115":{"a":1,"i":false,"c":8},"1341287466":{"a":1,"i":false,"c":10},"1311843597":{"a":1,"i":false,"c":8},"100000218978488":{"a":1,"i":false,"c":10},"100000069180208":{"a":1,"i":false,"c":8},"761194577":{"a":1,"i":false,"c":10},"100007073523375":{"a":2,"i":false,"c":10},"1016783320":{"a":1,"i":false,"c":10},"100004461212349":{"a":1,"i":false,"c":10},"100000177465213":{"a":1,"i":false,"c":8},"100001616754355":{"a":1,"i":false,"c":10},"100001710713751":{"a":2,"i":false,"c":10},"1080732625":{"a":1,"i":false,"c":10},"100001067926748":{"a":1,"i":false,"c":10},"100000109217326":{"a":1,"i":false,"c":10},"100000307083097":{"a":1,"i":false,"c":10},"100001284826678":{"a":1,"i":false,"c":10},"100000096621112":{"a":2,"i":false,"c":8},"100000909152983":{"a":1,"i":false,"c":8},"547377478":{"a":1,"i":false,"c":10},"100000009257591":{"a":1,"i":false,"c":10},"1409418935":{"a":1,"i":false,"c":8},"1082201515":{"a":2,"i":false,"c":10},"100002404252849":{"a":1,"i":false,"c":10},"1333710788":{"a":2,"i":false,"c":10},"100000990644946":{"a":2,"i":false,"c":8},"1042061413":{"a":1,"i":false,"c":8},"712640892":{"a":2,"i":false,"c":10},"100000173694471":{"a":2,"i":false,"c":10},"100005522642411":{"a":1,"i":false,"c":10},"100000994359487":{"a":1,"i":false,"c":10},"100004263240645":{"a":2,"i":false,"c":10},"100000178423358":{"a":2,"i":false,"c":10},"1384752081":{"a":2,"i":false,"c":10},"100000475396906":{"a":2,"i":false,"c":10},"1308958077":{"a":1,"i":false,"c":10},"700004235":{"a":1,"i":false,"c":8},"100000285710656":{"a":1,"i":false,"c":8},"100001421173935":{"a":1,"i":false,"c":10},"100000503250940":{"a":2,"i":false,"c":10},"100001309610286":{"a":1,"i":false,"c":8},"1664740033":{"a":1,"i":false,"c":8},"1586617916":{"a":1,"i":false,"c":8},"1045146564":{"a":1,"i":false,"c":10},"1324252852":{"a":2,"i":false,"c":0},"1095583842":{"a":1,"i":false,"c":8},"100001445569971":{"a":2,"i":false,"c":10},"100001682467154":{"a":2,"i":false,"c":8},"1438728966":{"a":2,"i":false,"c":10},"100000371917598":{"a":1,"i":false,"c":8},"100001516953649":{"a":2,"i":false,"c":10},"1338884615":{"a":2,"i":false,"c":10},"761279559":{"a":2,"i":false,"c":10},"1531848186":{"a":2,"i":false,"c":10},"100007579065798":{"a":1,"i":false,"c":10},"100000745808612":{"a":2,"i":false,"c":8},"100000567254659":{"a":1,"i":false,"c":10},"589983180":{"a":1,"i":false,"c":10},"100000755975214":{"a":2,"i":false,"c":8},"1547682664":{"a":1,"i":false,"c":10},"100006304209960":{"a":1,"i":false,"c":10},"648970958":{"a":2,"i":false,"c":8},"100002611234061":{"a":1,"i":false,"c":10},"599771579":{"a":1,"i":false,"c":10},"100001200855878":{"a":1,"i":false,"c":8},"624798611":{"a":1,"i":false,"c":10},"100001319484970":{"a":1,"i":false,"c":10},"100003467713882":{"a":1,"i":false,"c":10},"100001427911113":{"a":1,"i":false,"c":10},"100001510655177":{"a":1,"i":false,"c":10},"579947082":{"a":2,"i":false,"c":10},"1125484118":{"a":1,"i":false,"c":8},"100000958982559":{"a":2,"i":false,"c":8},"1038381660":{"a":2,"i":false,"c":10},"1772220492":{"a":1,"i":false,"c":8},"1807398651":{"a":1,"i":false,"c":10},"1831351070":{"a":1,"i":false,"c":8},"1700780147":{"a":2,"i":false,"c":10},"1663901274":{"a":1,"i":false,"c":10},"100000122949376":{"a":2,"i":false,"c":10},"1236416890":{"a":1,"i":false,"c":10},"1258931771":{"a":1,"i":false,"c":10},"1262955078":{"a":1,"i":false,"c":10},"1360543492":{"a":1,"i":false,"c":8},"1568031487":{"a":2,"i":false,"c":10},"1593502116":{"a":2,"i":false,"c":10},"665701761":{"a":1,"i":false,"c":8},"100000427336828":{"a":2,"i":false,"c":8},"100000438017032":{"a":1,"i":false,"c":2},"100000453382821":{"a":1,"i":false,"c":10},"100000487542817":{"a":2,"i":false,"c":8},"100000504696268":{"a":1,"i":false,"c":10},"100000560043125":{"a":1,"i":false,"c":10},"100000757356251":{"a":2,"i":false,"c":10},"100000863741299":{"a":2,"i":false,"c":10},"100000406402251":{"a":2,"i":false,"c":10},"100000387043711":{"a":2,"i":false,"c":10},"100000182859815":{"a":1,"i":false,"c":10},"100000201177551":{"a":2,"i":false,"c":10},"100000208306200":{"a":2,"i":false,"c":10},"100000274952315":{"a":1,"i":false,"c":8},"100000336507340":{"a":2,"i":false,"c":8},"100000361626019":{"a":1,"i":false,"c":10},"1150625684":{"a":1,"i":false,"c":10}},"availableCount":126,"mobileFriends":[100001580284563,1177521907,1743460630,1822184745,100000965785084,100001560724368,100001230260530,1100406757,100000403782497,100000422236690,100008908081924,100000937699098,100000130476840,1248407682,100000244762909,1684926437,100000503084794,100000630132098,100001163187150,100003734990957,100009673899735,100000200171097,100000680200678,100001033961145,100000220814124,1820594889,100008252136548,522053539,1378991510,100000142055240,1681691054,100001481181610,1268561902,1448716532,1708081924,100000908690443,1466635260,100000483303503,100000333984918,738313796,1151355596,510863908,1441326279,100001327075898,1344266177,1507055723,834404695,100002241235657,1448344571,1679023790,100001346828604,1203974839,100000046225115,1073014638,100000353838876,100002833793724,1074705397,100000025600682,1691594166,100001655793115,100002191126770,1341287466,1311843597,1302331865,100000218978488,1445050697,100001979118299,1648843553,1503134494,100002882367709,1755293745,100000081566794,100000026596751,100000069180208,761194577,100000480161307,100000434560335,100007073523375,657609705,1016783320,100000501512111,100004461212349,100000189974151,100000510129734,100000556358367,100000179801856,100002839405245,100000468954060,100002795006088,100000616231216,651027514,100000456069258,1800030232,100000984586206,100000213821243,1200993648,100000354018946,100000177465213,100001616754355,100001710713751,100000302240588,100000072492730,100004746071015,1080732625,100001067926748,698191605,100000109217326,100000307083097,100002793326023,100000738176165,100001026430910,100001284826678,100000203948649,100000119102104,1536796380,100000096621112,100003670802905,100000212123409,100000186409389,100000909152983,1679981175,100001158557471,547377478,1560668656,100000009257591,1407540646,100000929716782,100000693854843,1409418935,100000150065352,100000369804499,1082201515,100002404252849,100000968196917,1333710788,100000990644946,100000483383045,100000245900516,100002013031347,100000123944912,1283771827,100000349684607,712640892,100000320171186,1279301632,100000205039164,100000173694471,100005522642411,100000994359487,1410975130,100004263240645,100000178423358,621181515,1384752081,100000422185143,100000475396906,100000404370393,1803945192,100002732463095,1308958077,700004235,100000285710656,100000261624768,100001025631773,100001421173935,100002891113357,1801283605,1277201893,100001071341754,100000503250940,1268651732,100003801753452,100000007784526,1405456870,100000326184434,100001309610286,1664740033,100006553094328,100000304234441,1699855888,100000378362340,1586617916,1045146564,1324252852,526803659,1669543617,100000426864422,100001359038623,100000622885283,100000800883447,100000399621416,100001445569971,100000516723690,1253891761,100000314107955,100001682467154,1364386797,1438728966,100000423461206,100000927095323,100000414290752,100000845158618,1035292296,1424580040,100009484387296,1849917674,100000763462002,100000441232970,1364494852,100000371917598,100001288972031,100002179980376,100001516953649,100001420059946,100000072073439,100000391098543,1385917684,1338884615,761279559,1585954699,100005293870603,100000208935043,100001019649647,100002912028339,1531848186,100001076702794,100007579065798,100000745808612,100002281026540,100000567254659,100000610075608,1818662977,1722266780,1657874307,100004471391175,589983180,100000119368512,100000755975214,100000444923874,1547682664,100001046618007,100000456133153,100001188019234,100004794428158,100001145042982,100006304209960,100001055734525,100001038905591,648970958,100001159674313,646691658,100001186646932,100007898413102,100002052752819,100003598177964,100001199852106,100002387523123,100001592670561,100001593807393,583980494,100001607274809,100002658198840,100002611234061,100001678596005,100001697587002,100002356276486,100001563757631,100002298557832,100001875833014,100001912657159,100001921005434,100002278363105,100002159721925,100002157234954,100002128265139,599771579,100003004582598,100001200855878,100002110347047,100001202773894,100004654327134,100004548724978,100001208243207,624798611,552290046,100004074574603,100001319484970,100003467713882,100001561940434,100001427911113,100003318677985,100003073966174,100001510655177,579947082,100001515270790,605783856,100002004501957,1125484118,100000958982559,1849827543,1700840516,1040612860,1723045683,1038381660,1770147233,1772220492,1806457381,1807398651,1032105165,1831351070,1832595315,100000000556888,1678357449,100000041402526,100000046244913,100000048512946,100000051019096,100000052062181,100000084949694,100000094833195,100000100662804,100000106194300,100000107709576,100000110294689,1700780147,1663901274,100000122949376,1360196072,1089044126,1233386767,1236416890,1247294752,1258931771,1262955078,1262993338,1281304188,1333481613,1334737850,1347281984,1353902073,1360543492,1655349986,1370122115,1403775002,1072123988,1460960071,1070072655,1491117011,1520852947,1568031487,1572547997,1588209630,1593502116,1635920725,100000120905222,100000135066848,665701761,711170382,100000411828429,733170597,100000427336828,100000428929719,100000438017032,100000453382821,100000454653782,100000475676368,100000478456965,100000487542817,100000489655475,100000497386025,100000504381821,736899330,100000504696268,100000509181097,100000523805058,100000560043125,100000595951654,706788614,100000677460564,100000679165912,100000711623720,100000740182744,100000757356251,100000759582742,100000863741299,100000406402251,100000387043711,841235231,100000227769635,100000175486565,100000182859815,100000184001239,100000184820632,100000200468469,100000201177551,100000204489835,100000206547780,100000208306200,100000213908514,100000222521070,100000384764071,513931360,100000326671565,737600007,100000336507340,100000343760359,100000344246352,100000361626019,100000362446964,100000367063318,100000375340435,1150625684,100000379301985],"perpetuallyMobileBuddies":null,"lastActiveTimes":{"100001580284563":1447692730,"1177521907":1447688983,"1743460630":1447688479,"1822184745":1447691898,"100000965785084":1447693096,"100001560724368":1447687498,"100001230260530":1447691235,"1100406757":1447636238,"100000403782497":1447614681,"100000422236690":1447675838,"100008908081924":1447693112,"100000937699098":1447692989,"100000130476840":1447692126,"1248407682":1447692580,"100000244762909":1447692448,"1684926437":1447692727,"100000503084794":1447692748,"100000630132098":1447693093,"100001163187150":1447689069,"100003734990957":1447688903,"100009673899735":1447690050,"100000200171097":1447686782,"100000680200678":1447693104,"100001033961145":1447691834,"100000220814124":1447679085,"1820594889":1447673924,"100008252136548":1447692213,"522053539":1447692005,"1378991510":1447691411,"100000142055240":1447693118,"1681691054":1447642143,"100001481181610":1447693001,"1268561902":1447693134,"1448716532":1447693030,"100000685990324":1447693055,"1708081924":1447693052,"100000908690443":1447692470,"1466635260":1447692230,"100000483303503":1447692926,"100000333984918":1447692908,"738313796":1447691741,"677921681":1447693029,"1151355596":1447672586,"510863908":1447693120,"1441326279":1447689359,"100001327075898":1447692203,"1344266177":1447691760,"1507055723":1447691386,"834404695":1447692363,"100002241235657":1447609229,"1448344571":1447691826,"1679023790":1447692687,"100001346828604":1447684422,"1203974839":1447689338,"100000046225115":1447693075,"1073014638":1447685117,"100000353838876":1447693127,"100002833793724":1447692912,"1074705397":1447687186,"100000025600682":1447692489,"1691594166":1447692907,"100001655793115":1447692217,"100002191126770":1447691734,"1341287466":1447692528,"1311843597":1447692982,"1302331865":1447690722,"100000218978488":1447692862,"1445050697":1447683313,"100001979118299":1447600537,"1648843553":1447684489,"1503134494":1447690965,"100002882367709":1447683716,"1755293745":1447679893,"100000081566794":1447690430,"100000026596751":1447531703,"100000069180208":1447683513,"761194577":1447692922,"100000480161307":1447688226,"100000434560335":0,"100007073523375":1447693066,"657609705":1447687005,"1016783320":1447692811,"100000501512111":1447692256,"100004461212349":1447692773,"100000189974151":1447689274,"100000510129734":1447689288,"100000556358367":1447692155,"100000179801856":1447669249,"100002839405245":1447690965,"100000468954060":1447684468,"100002795006088":1447685345,"100000616231216":1447631331,"651027514":1447686201,"100000456069258":1447641127,"1800030232":1447692019,"100000984586206":1447690980,"100000213821243":1447689943,"1200993648":1447691775,"100000354018946":1447687389,"100000177465213":1447692967,"100001616754355":1447691221,"100001710713751":1447693101,"100000302240588":1447632152,"100000072492730":1447691548,"100004746071015":1447692621,"1080732625":1447692994,"100001067926748":1447689930,"698191605":1447692643,"100000109217326":1447689349,"100000307083097":1447691046,"100002793326023":1447682296,"100000738176165":1447693114,"100001026430910":1447688463,"100001284826678":1447687994,"100000203948649":1447674563,"100000119102104":1447691229,"1536796380":1447691702,"100000096621112":1447693082,"100003670802905":1447659738,"100000212123409":0,"100000186409389":1447649042,"100000909152983":1447688033,"1679981175":1447682125,"100001158557471":1447689617,"547377478":1447691953,"1560668656":1447626367,"100000009257591":1447691681,"1407540646":1447692844,"100000929716782":1447690084,"100000693854843":1447691502,"1409418935":1447692347,"100000150065352":0,"100000369804499":1447689147,"1082201515":1447693116,"100002404252849":1447691847,"100000968196917":1447690612,"1333710788":1447693129,"100000990644946":1447693126,"100000483383045":1447691336,"100000245900516":1447692282,"100002013031347":1447685188,"100000123944912":0,"1283771827":1447687788,"100000349684607":1447691806,"712640892":1447693095,"100000320171186":1447687957,"1279301632":1447690937,"100000205039164":1447690327,"100000173694471":1447693103,"100005522642411":1447689998,"100000994359487":1447692780,"1410975130":1447688318,"100004263240645":1447693127,"100000178423358":1447693098,"621181515":1447659748,"1384752081":1447693104,"100000422185143":1447668545,"100000475396906":1447693132,"100000404370393":1447690208,"1803945192":1447691421,"100002732463095":1447687726,"1308958077":1447690631,"700004235":1447685747,"100000285710656":1447692676,"100000261624768":1447537348,"100001025631773":1447691394,"100001421173935":1447692156,"100002891113357":1447688784,"1801283605":1447688936,"1277201893":1447692733,"100001071341754":1447687256,"100000503250940":1447693085,"1268651732":1447690706,"100003801753452":1447678836,"100000007784526":1447691549,"1405456870":1447685235,"100000326184434":1447683102,"100001309610286":1447692474,"1664740033":1447692962,"100006553094328":1447692989,"100000304234441":1447691109,"1699855888":1447681987,"100000378362340":1447684782,"1586617916":1447690520,"1045146564":1447692885,"1324252852":1447693131,"526803659":1447615296,"1669543617":1447676909,"100000426864422":1447689375,"100001359038623":1447683293,"100000622885283":1447692112,"100000800883447":1447669493,"100000399621416":1447691368,"100001445569971":1447693113,"100000516723690":1447548025,"1253891761":1447691712,"100000314107955":1447687063,"100001682467154":1447693133,"1364386797":1447693120,"1438728966":1447693133,"100000423461206":1447692138,"100000927095323":1447693051,"100000414290752":1447654298,"100000845158618":1447689468,"1035292296":1447632886,"1424580040":1447658304,"100009484387296":1447693086,"1849917674":1447692216,"100000763462002":1447627657,"100000441232970":1447675956,"1364494852":1447688410,"100000371917598":1447693072,"100001288972031":1447690264,"100002179980376":1447690177,"100001516953649":1447693125,"100001420059946":1447671471,"100000072073439":1447690260,"100000391098543":1447692834,"1385917684":1447692948,"1338884615":1447693133,"761279559":1447693109,"1585954699":1447690351,"100005293870603":1447688391,"100000208935043":1447687194,"100001019649647":1447685051,"100002912028339":1447690669,"1531848186":1447693118,"100001076702794":1447690136,"100007579065798":1447692975,"100000745808612":1447693128,"100002281026540":1447687046,"100000567254659":1447692741,"100000610075608":1447684710,"1818662977":1447692743,"1722266780":1447693094,"1657874307":1447688208,"100004471391175":1447682071,"589983180":1447692479,"100000119368512":1447692061,"100000755975214":1447693067,"100000444923874":1447693015,"1547682664":1447687971,"100001046618007":1447691573,"100000456133153":1447664314,"100001188019234":1447619490,"100004794428158":1447691988,"100001145042982":1447674354,"100006304209960":1447689939,"100001055734525":1447681263,"100001038905591":1447682483,"648970958":1447693097,"100001159674313":1447690192,"646691658":1447641920,"100001186646932":1447683061,"100007898413102":1447690995,"100002052752819":1447687284,"100003598177964":1447685887,"100001199852106":1447691069,"100002387523123":1447692601,"100001592670561":1447691044,"100001593807393":1447678214,"583980494":1447691992,"100001607274809":1447693128,"100002658198840":1447690163,"100002611234061":1447691793,"100001678596005":1447686049,"100001697587002":1447685676,"100002356276486":1447687376,"100001563757631":1447691710,"100002298557832":1447684449,"100001875833014":1447689426,"100001912657159":1447639855,"100001921005434":1447686477,"100002278363105":1447689052,"100002159721925":1447692670,"100002157234954":1447688642,"100002128265139":1447691554,"599771579":1447689925,"100003004582598":1447692885,"100001200855878":1447692794,"100002110347047":1447631307,"100001202773894":1447689835,"100004654327134":1447662012,"100004548724978":1447692078,"100001208243207":1447689887,"624798611":1447692710,"552290046":1447692850,"100004074574603":1447690447,"100001319484970":1447687371,"100003467713882":1447692300,"100001561940434":1447691433,"100001427911113":1447692332,"100003318677985":1447634371,"100003073966174":1447691496,"100001510655177":1447692650,"579947082":1447693132,"100001515270790":1447686420,"605783856":0,"100002004501957":1447686247,"1125484118":1447693063,"100000958982559":1447693094,"1849827543":1447684431,"1700840516":1447691395,"1040612860":1447600027,"1723045683":1447690970,"1038381660":1447693098,"1770147233":1447689600,"1772220492":1447692590,"1806457381":1447692688,"1807398651":1447692523,"1032105165":1447680916,"1831351070":1447691869,"1832595315":1447691232,"100000000556888":1447677066,"1678357449":1447680828,"100000041402526":1447692836,"100000046244913":1447691361,"100000048512946":1447691584,"100000051019096":1447692683,"100000052062181":1447687338,"100000084949694":1447678595,"100000094833195":1447692498,"100000100662804":1447690087,"100000106194300":1447684886,"100000107709576":1447690987,"100000110294689":1447692663,"1700780147":1447693126,"1663901274":1447692967,"100000122949376":1447693023,"1360196072":1447687929,"1089044126":1447692741,"1233386767":1447691216,"1236416890":1447692819,"1247294752":1447692900,"1258931771":1447682677,"1262955078":1447692900,"1262993338":1447692982,"1281304188":1447692053,"1333481613":1447682310,"1334737850":1447692734,"1347281984":1447690249,"1353902073":1447681380,"1360543492":1447687016,"1655349986":1447673119,"1370122115":1447692721,"1403775002":1447634889,"1072123988":1447691655,"1460960071":1447687277,"1070072655":1447692174,"1491117011":1447691319,"1520852947":1447669972,"1568031487":1447693129,"1572547997":1447691720,"1588209630":1447693076,"1593502116":1447693128,"1635920725":1447686248,"100000120905222":1447614128,"100000135066848":1447657162,"665701761":1447684358,"711170382":1447690661,"100000411828429":1447676752,"733170597":1447690319,"100000427336828":1447693081,"100000428929719":1447691511,"100000438017032":1447689587,"100000453382821":1447691638,"100000454653782":1447672382,"100000475676368":1447675841,"100000478456965":1447677154,"100000487542817":1447693093,"100000489655475":1447684553,"100000497386025":1447687351,"100000504381821":1447674708,"736899330":1447692123,"100000504696268":1447693090,"100000509181097":1447677213,"100000523805058":1447685333,"100000560043125":1447692595,"100000595951654":1447640004,"706788614":1447670791,"100000677460564":1447683909,"100000679165912":1447684546,"100000711623720":1447693130,"100000740182744":1447690623,"100000757356251":1447693063,"100000759582742":1447690301,"100000863741299":1447693114,"100000406402251":1447693083,"100000387043711":1447693108,"841235231":1447692808,"100000227769635":1447687740,"100000175486565":1447684066,"100000182859815":1447691585,"100000184001239":1447690172,"100000184820632":1447636506,"100000200468469":1447685083,"100000201177551":1447693127,"100000204489835":1447678805,"100000206547780":1447692267,"100000208306200":1447693099,"100000213908514":1447690633,"100000222521070":1447677446,"100000384764071":1447629635,"513931360":1447688922,"100000326671565":1447693135,"737600007":1447687462,"100000336507340":1447693110,"100000343760359":1447635154,"100000344246352":1447691942,"100000361626019":1447682402,"100000362446964":1447683037,"100000367063318":1447691099,"100000375340435":1447692436,"1150625684":1447693005,"100000379301985":1447689250},"chatNotif":0,"gk_replace_available_list_chatproxy":false},166],["ChatConfigInitialData",[],{"sidebar_ticker":true,"forwarding_nux_gating":true,"webmessenger_chat_tab_redesign":true,"divebar_new_design":true,"divebar_persistent":true,"min_top_friends":15,"seen_mini_sidebar_nux":1,"seen_forwarding_nux":1,"two_line_composer":true,"chat_impression_logging_with_click":true,"chat_impression_logging_periodical":true,"sidebar.minimum_width":1258,"minisidebar.minimum_width":1258,"periodical_impression_logging_config.interval":1800000,"typing_notifications":true,"sidebar.min_friends":7,"tab_max_load_age":86400000,"tab_auto_close_timeout":86400000,"sound.notif_ogg_url":"\/sound\/fBWebMessageSD2.ogg","sound.notif_mp3_url":"\/sound\/fBWebMessageSD2.mp3","has_apps_option":true,"has_ticker_toggle_option":true},12],["ChannelInitialData",[],{"channelConfig":{"IFRAME_LOAD_TIMEOUT":30000,"P_TIMEOUT":30000,"STREAMING_TIMEOUT":70000,"PROBE_HEARTBEATS_INTERVAL_LOW":1000,"PROBE_HEARTBEATS_INTERVAL_HIGH":3000,"MTOUCH_SEND_CLIENT_ID":1,"user_channel":"p_100000075573403","seq":-1,"retry_interval":0,"max_conn":6,"forceIframe":false,"streamProbe":false,"tryStreaming":true,"bustIframe":false,"msgr_region":"ATN","fullReloadAsSuccess":true,"requestBatchedPull":false,"uid":"100000075573403","viewerUid":"100000075573403","domain":"messenger.com","sequenceId":300174},"state":"reconnect!","reason":6},143],["RTCConfig",[],{"SendNewVCGK":true,"ReceiveNewVCGK":true,"InteractiveCallLogGK":true,"VideoInteropGK":true,"ScreenSharingGK":false,"ReceiveScreenGK":false,"CollaborationScreenSharingGK":false,"CollaborationVideoGroupCallGK":false,"CollabVCEndpointsVideoCallGK":false,"PassMessagesBetweenWindowsGK":true,"VideoCallBlockingGK":true,"BrowserNotificationGK":true,"LocalstorageRolloutGK":true,"RtcConferencingGK":false,"ringtone_mp3_url":"https:\/\/fbstatic-a.akamaihd.net\/rsrc.php\/yh\/r\/taJw7SpZVz2.mp3","ringtone_ogg_url":"https:\/\/fbstatic-a.akamaihd.net\/rsrc.php\/yO\/r\/kTasEyE42gs.ogg","ringback_mp3_url":"https:\/\/fbstatic-a.akamaihd.net\/rsrc.php\/yA\/r\/QaLYA8XtNfH.mp3","ringback_ogg_url":"https:\/\/fbstatic-a.akamaihd.net\/rsrc.php\/y9\/r\/VUaboMDNioG.ogg"},760],["SystemEventsInitialData",[],{"ORIGINAL_USER_ID":"100000075573403"},483],["MessengerRecorderWorkerResource",[],{"url":"https:\/\/fbstatic-a.akamaihd.net\/rsrc.php\/v2\/ye\/r\/sCdfdIEXQPk.js","name":"MessengerRecorderWorkerBundle"},667],["MercuryStatusTemplates",["__inst_7ea77126_0_0","__inst_7ea77126_0_1","__inst_7ea77126_0_2","__inst_7ea77126_0_3","__inst_7ea77126_0_4","__inst_7ea77126_0_5","__inst_7ea77126_0_6"],{":fb:mercury:filtered-message":{"__m":"__inst_7ea77126_0_0"},":fb:mercury:filtered-message-blackholefilter":{"__m":"__inst_7ea77126_0_1"},":fb:mercury:filtered-message-account":{"__m":"__inst_7ea77126_0_2"},":fb:mercury:filtered-message-quasar":{"__m":"__inst_7ea77126_0_3"},":fb:mercury:filtered-message-invalid-app":{"__m":"__inst_7ea77126_0_4"},":fb:mercury:error-indicator":{"__m":"__inst_7ea77126_0_5"},":fb:mercury:resend-indicator":{"__m":"__inst_7ea77126_0_6"}},41],["InitialChatFriendsList",[],{"list":["100001580284563-3","100001580284563-2","100001580284563-1","100001580284563-0","1177521907-3","1177521907-2","1177521907-1","1177521907-0","1743460630-3","1743460630-2","1743460630-1","1743460630-0","1822184745-3","1822184745-2","1822184745-1","1822184745-0","1382141563-3","1382141563-2","1382141563-1","1382141563-0","100000965785084-3","100000965785084-2","100000965785084-1","100000965785084-0","100001560724368-3","100001560724368-2","100001560724368-1","100001560724368-0","100003022673626-3","100003022673626-2","100003022673626-1","100003022673626-0","100001230260530-3","100001230260530-2","100001230260530-1","100001230260530-0","1100406757-3","1100406757-2","1100406757-1","1100406757-0","100000403782497-3","100000403782497-2","100000403782497-1","100000403782497-0","100000422236690-3","100000422236690-2","100000422236690-1","100000422236690-0","100008908081924-3","100008908081924-2","100008908081924-1","100008908081924-0","100000937699098-3","100000937699098-2","100000937699098-1","100000937699098-0","100000130476840-3","100000130476840-2","100000130476840-1","100000130476840-0","1248407682-3","1248407682-2","1248407682-1","1248407682-0","100007197258068-3","100007197258068-2","100007197258068-1","100007197258068-0","100000244762909-3","100000244762909-2","100000244762909-1","100000244762909-0","1684926437-3","1684926437-2","1684926437-1","1684926437-0","100000503084794-3","100000503084794-2","100000503084794-1","100000503084794-0","100000630132098-3","100000630132098-2","100000630132098-1","100000630132098-0","100001163187150-3","100001163187150-2","100001163187150-1","100001163187150-0","100003734990957-3","100003734990957-2","100003734990957-1","100003734990957-0","100009673899735-3","100009673899735-2","100009673899735-1","100009673899735-0","100000200171097-3","100000200171097-2","100000200171097-1","100000200171097-0","100002425232086-3","100002425232086-2","100002425232086-1","100002425232086-0","100004473644376-3","100004473644376-2","100004473644376-1","100004473644376-0","100000680200678-3","100000680200678-2","100000680200678-1","100000680200678-0","100002526436423-3","100002526436423-2","100002526436423-1","100002526436423-0","100001033961145-3","100001033961145-2","100001033961145-1","100001033961145-0","100000220814124-3","100000220814124-2","100000220814124-1","100000220814124-0","1820594889-3","1820594889-2","1820594889-1","1820594889-0","100008252136548-3","100008252136548-2","100008252136548-1","100008252136548-0","522053539-3","522053539-2","522053539-1","522053539-0","1378991510-3","1378991510-2","1378991510-1","1378991510-0","100000142055240-3","100000142055240-2","100000142055240-1","100000142055240-0","1681691054-3","1681691054-2","1681691054-1","1681691054-0","100001481181610-3","100001481181610-2","100001481181610-1","100001481181610-0","1268561902-3","1268561902-2","1268561902-1","1268561902-0","1448716532-3","1448716532-2","1448716532-1","1448716532-0","100000685990324-3","100000685990324-2","100000685990324-1","100000685990324-0","1708081924-3","1708081924-2","1708081924-1","1708081924-0","100000908690443-3","100000908690443-2","100000908690443-1","100000908690443-0","1466635260-3","1466635260-2","1466635260-1","1466635260-0","100000483303503-3","100000483303503-2","100000483303503-1","100000483303503-0","100000333984918-3","100000333984918-2","100000333984918-1","100000333984918-0","738313796-3","738313796-2","738313796-1","738313796-0","677921681-3","677921681-2","677921681-1","677921681-0","100002878798712-3","100002878798712-2","100002878798712-1","100002878798712-0","1151355596-3","1151355596-2","1151355596-1","1151355596-0","1288040131-3","1288040131-2","1288040131-1","1288040131-0","510863908-3","510863908-2","510863908-1","510863908-0","1441326279-3","1441326279-2","1441326279-1","1441326279-0","1188609818-3","1188609818-2","1188609818-1","1188609818-0","100000385632166-3","100000385632166-2","100000385632166-1","100000385632166-0","100001327075898-3","100001327075898-2","100001327075898-1","100001327075898-0","100000508802652-3","100000508802652-2","100000508802652-1","100000508802652-0","100000006776470-3","100000006776470-2","100000006776470-1","100000006776470-0","100001346491759-3","100001346491759-2","100001346491759-1","100001346491759-0","100001860566648-3","100001860566648-2","100001860566648-1","100001860566648-0","100000344571326-3","100000344571326-2","100000344571326-1","100000344571326-0","100002577723402-3","100002577723402-2","100002577723402-1","100002577723402-0","100001284193210-3","100001284193210-2","100001284193210-1","100001284193210-0","1823629307-3","1823629307-2","1823629307-1","1823629307-0","100002937876287-3","100002937876287-2","100002937876287-1","100002937876287-0","1455058372-3","1455058372-2","1455058372-1","1455058372-0","1344266177-3","1344266177-2","1344266177-1","1344266177-0","1507055723-3","1507055723-2","1507055723-1","1507055723-0","834404695-3","834404695-2","834404695-1","834404695-0","100002241235657-3","100002241235657-2","100002241235657-1","100002241235657-0","1448344571-3","1448344571-2","1448344571-1","1448344571-0","1679023790-3","1679023790-2","1679023790-1","1679023790-0","100001346828604-3","100001346828604-2","100001346828604-1","100001346828604-0","1203974839-3","1203974839-2","1203974839-1","1203974839-0","100000046225115-3","100000046225115-2","100000046225115-1","100000046225115-0","1073014638-3","1073014638-2","1073014638-1","1073014638-0","100000353838876-3","100000353838876-2","100000353838876-1","100000353838876-0","100000387494272-3","100000387494272-2","100000387494272-1","100000387494272-0","100002833793724-3","100002833793724-2","100002833793724-1","100002833793724-0","1074705397-3","1074705397-2","1074705397-1","1074705397-0","100000025600682-3","100000025600682-2","100000025600682-1","100000025600682-0","1691594166-3","1691594166-2","1691594166-1","1691594166-0","100001655793115-3","100001655793115-2","100001655793115-1","100001655793115-0","100002191126770-3","100002191126770-2","100002191126770-1","100002191126770-0","1341287466-3","1341287466-2","1341287466-1","1341287466-0","1311843597-3","1311843597-2","1311843597-1","1311843597-0","1302331865-3","1302331865-2","1302331865-1","1302331865-0","100000218978488-3","100000218978488-2","100000218978488-1","100000218978488-0","100006913060565-3","100006913060565-2","100006913060565-1","100006913060565-0","1445050697-3","1445050697-2","1445050697-1","1445050697-0","1822905399-3","1822905399-2","1822905399-1","1822905399-0","100001979118299-3","100001979118299-2","100001979118299-1","100001979118299-0","1648843553-3","1648843553-2","1648843553-1","1648843553-0","553630082-3","553630082-2","553630082-1","553630082-0","1503134494-3","1503134494-2","1503134494-1","1503134494-0","100002882367709-3","100002882367709-2","100002882367709-1","100002882367709-0","1755293745-3","1755293745-2","1755293745-1","1755293745-0","100000081566794-3","100000081566794-2","100000081566794-1","100000081566794-0","100000026596751-3","100000026596751-2","100000026596751-1","100000026596751-0","100000069180208-3","100000069180208-2","100000069180208-1","100000069180208-0","761194577-3","761194577-2","761194577-1","761194577-0","100000461792084-3","100000461792084-2","100000461792084-1","100000461792084-0","100000480161307-3","100000480161307-2","100000480161307-1","100000480161307-0","100001942104177-3","100001942104177-2","100001942104177-1","100001942104177-0","100000434560335-3","100000434560335-2","100000434560335-1","100000434560335-0","100007073523375-3","100007073523375-2","100007073523375-1","100007073523375-0","657609705-3","657609705-2","657609705-1","657609705-0","1016783320-3","1016783320-2","1016783320-1","1016783320-0","100000501512111-3","100000501512111-2","100000501512111-1","100000501512111-0","100004461212349-3","100004461212349-2","100004461212349-1","100004461212349-0","100000189974151-3","100000189974151-2","100000189974151-1","100000189974151-0","100000189398295-3","100000189398295-2","100000189398295-1","100000189398295-0","100000425378493-3","100000425378493-2","100000425378493-1","100000425378493-0","100000510129734-3","100000510129734-2","100000510129734-1","100000510129734-0","100000556358367-3","100000556358367-2","100000556358367-1","100000556358367-0","100000179801856-3","100000179801856-2","100000179801856-1","100000179801856-0","100002839405245-3","100002839405245-2","100002839405245-1","100002839405245-0","100000468954060-3","100000468954060-2","100000468954060-1","100000468954060-0","100002795006088-3","100002795006088-2","100002795006088-1","100002795006088-0","100000616231216-3","100000616231216-2","100000616231216-1","100000616231216-0","100001434620110-3","100001434620110-2","100001434620110-1","100001434620110-0","1812730207-3","1812730207-2","1812730207-1","1812730207-0","651027514-3","651027514-2","651027514-1","651027514-0","100000456069258-3","100000456069258-2","100000456069258-1","100000456069258-0","1800030232-3","1800030232-2","1800030232-1","1800030232-0","100000984586206-3","100000984586206-2","100000984586206-1","100000984586206-0","100000213821243-3","100000213821243-2","100000213821243-1","100000213821243-0","1200993648-3","1200993648-2","1200993648-1","1200993648-0","100000354018946-3","100000354018946-2","100000354018946-1","100000354018946-0","100000025998527-3","100000025998527-2","100000025998527-1","100000025998527-0","100000177465213-3","100000177465213-2","100000177465213-1","100000177465213-0","100001616754355-3","100001616754355-2","100001616754355-1","100001616754355-0","100001710713751-3","100001710713751-2","100001710713751-1","100001710713751-0","100000302240588-3","100000302240588-2","100000302240588-1","100000302240588-0","100000072492730-3","100000072492730-2","100000072492730-1","100000072492730-0","100004746071015-3","100004746071015-2","100004746071015-1","100004746071015-0","1080732625-3","1080732625-2","1080732625-1","1080732625-0","100001067926748-3","100001067926748-2","100001067926748-1","100001067926748-0","698191605-3","698191605-2","698191605-1","698191605-0","100000109217326-3","100000109217326-2","100000109217326-1","100000109217326-0","100000560593507-3","100000560593507-2","100000560593507-1","100000560593507-0","100001329950568-3","100001329950568-2","100001329950568-1","100001329950568-0","100000384759825-3","100000384759825-2","100000384759825-1","100000384759825-0","100000307083097-3","100000307083097-2","100000307083097-1","100000307083097-0","100002793326023-3","100002793326023-2","100002793326023-1","100002793326023-0","100000738176165-3","100000738176165-2","100000738176165-1","100000738176165-0","100001026430910-3","100001026430910-2","100001026430910-1","100001026430910-0","100001284826678-3","100001284826678-2","100001284826678-1","100001284826678-0","100000203948649-3","100000203948649-2","100000203948649-1","100000203948649-0","100000119102104-3","100000119102104-2","100000119102104-1","100000119102104-0","1536796380-3","1536796380-2","1536796380-1","1536796380-0","100000096621112-3","100000096621112-2","100000096621112-1","100000096621112-0","1518543557-3","1518543557-2","1518543557-1","1518543557-0","100003670802905-3","100003670802905-2","100003670802905-1","100003670802905-0","100000212123409-3","100000212123409-2","100000212123409-1","100000212123409-0","100000186409389-3","100000186409389-2","100000186409389-1","100000186409389-0","100000909152983-3","100000909152983-2","100000909152983-1","100000909152983-0","1679981175-3","1679981175-2","1679981175-1","1679981175-0","100001158557471-3","100001158557471-2","100001158557471-1","100001158557471-0","547377478-3","547377478-2","547377478-1","547377478-0","1560668656-3","1560668656-2","1560668656-1","1560668656-0","100000009257591-3","100000009257591-2","100000009257591-1","100000009257591-0","1407540646-3","1407540646-2","1407540646-1","1407540646-0","100000929716782-3","100000929716782-2","100000929716782-1","100000929716782-0","100000693854843-3","100000693854843-2","100000693854843-1","100000693854843-0","1409418935-3","1409418935-2","1409418935-1","1409418935-0","100000150065352-3","100000150065352-2","100000150065352-1","100000150065352-0","100000369804499-3","100000369804499-2","100000369804499-1","100000369804499-0","1082201515-3","1082201515-2","1082201515-1","1082201515-0","100002404252849-3","100002404252849-2","100002404252849-1","100002404252849-0","100000968196917-3","100000968196917-2","100000968196917-1","100000968196917-0","1333710788-3","1333710788-2","1333710788-1","1333710788-0","100000990644946-3","100000990644946-2","100000990644946-1","100000990644946-0","100000483383045-3","100000483383045-2","100000483383045-1","100000483383045-0","100000245900516-3","100000245900516-2","100000245900516-1","100000245900516-0","100002013031347-3","100002013031347-2","100002013031347-1","100002013031347-0","1042061413-3","1042061413-2","1042061413-1","1042061413-0","100000123944912-3","100000123944912-2","100000123944912-1","100000123944912-0","1283771827-3","1283771827-2","1283771827-1","1283771827-0","100000349684607-3","100000349684607-2","100000349684607-1","100000349684607-0","712640892-3","712640892-2","712640892-1","712640892-0","100000320171186-3","100000320171186-2","100000320171186-1","100000320171186-0","1279301632-3","1279301632-2","1279301632-1","1279301632-0","100000205039164-3","100000205039164-2","100000205039164-1","100000205039164-0","100000173694471-3","100000173694471-2","100000173694471-1","100000173694471-0","1290915260-3","1290915260-2","1290915260-1","1290915260-0","100005522642411-3","100005522642411-2","100005522642411-1","100005522642411-0","100000994359487-3","100000994359487-2","100000994359487-1","100000994359487-0","1410975130-3","1410975130-2","1410975130-1","1410975130-0","1792610903-3","1792610903-2","1792610903-1","1792610903-0","100004263240645-3","100004263240645-2","100004263240645-1","100004263240645-0","100004067993038-3","100004067993038-2","100004067993038-1","100004067993038-0","100000178423358-3","100000178423358-2","100000178423358-1","100000178423358-0","1749678601-3","1749678601-2","1749678601-1","1749678601-0","621181515-3","621181515-2","621181515-1","621181515-0","1384752081-3","1384752081-2","1384752081-1","1384752081-0","100000422185143-3","100000422185143-2","100000422185143-1","100000422185143-0","100000475396906-3","100000475396906-2","100000475396906-1","100000475396906-0","100000404370393-3","100000404370393-2","100000404370393-1","100000404370393-0","1803945192-3","1803945192-2","1803945192-1","1803945192-0","100002732463095-3","100002732463095-2","100002732463095-1","100002732463095-0","1308958077-3","1308958077-2","1308958077-1","1308958077-0","700004235-3","700004235-2","700004235-1","700004235-0","100000285710656-3","100000285710656-2","100000285710656-1","100000285710656-0","100000261624768-3","100000261624768-2","100000261624768-1","100000261624768-0","100001025631773-3","100001025631773-2","100001025631773-1","100001025631773-0","100000299928502-3","100000299928502-2","100000299928502-1","100000299928502-0","100001421173935-3","100001421173935-2","100001421173935-1","100001421173935-0","100002891113357-3","100002891113357-2","100002891113357-1","100002891113357-0","1801283605-3","1801283605-2","1801283605-1","1801283605-0","1277201893-3","1277201893-2","1277201893-1","1277201893-0","100001071341754-3","100001071341754-2","100001071341754-1","100001071341754-0","100000503250940-3","100000503250940-2","100000503250940-1","100000503250940-0","100000212980986-3","100000212980986-2","100000212980986-1","100000212980986-0","100000134944757-3","100000134944757-2","100000134944757-1","100000134944757-0","1268651732-3","1268651732-2","1268651732-1","1268651732-0","100003801753452-3","100003801753452-2","100003801753452-1","100003801753452-0","100000007784526-3","100000007784526-2","100000007784526-1","100000007784526-0","1405456870-3","1405456870-2","1405456870-1","1405456870-0","100000326184434-3","100000326184434-2","100000326184434-1","100000326184434-0","100001309610286-3","100001309610286-2","100001309610286-1","100001309610286-0","1664740033-3","1664740033-2","1664740033-1","1664740033-0","100006553094328-3","100006553094328-2","100006553094328-1","100006553094328-0","100000304234441-3","100000304234441-2","100000304234441-1","100000304234441-0","1699855888-3","1699855888-2","1699855888-1","1699855888-0","1399848189-3","1399848189-2","1399848189-1","1399848189-0","100000378362340-3","100000378362340-2","100000378362340-1","100000378362340-0","1586617916-3","1586617916-2","1586617916-1","1586617916-0","1045146564-3","1045146564-2","1045146564-1","1045146564-0","100001135457011-3","100001135457011-2","100001135457011-1","100001135457011-0","1324252852-3","1324252852-2","1324252852-1","1324252852-0","526803659-3","526803659-2","526803659-1","526803659-0","1669543617-3","1669543617-2","1669543617-1","1669543617-0","100000426864422-3","100000426864422-2","100000426864422-1","100000426864422-0","1095583842-3","1095583842-2","1095583842-1","1095583842-0","100001359038623-3","100001359038623-2","100001359038623-1","100001359038623-0","100000622885283-3","100000622885283-2","100000622885283-1","100000622885283-0","100000800883447-3","100000800883447-2","100000800883447-1","100000800883447-0","100000399621416-3","100000399621416-2","100000399621416-1","100000399621416-0","513931360-3","513931360-2","513931360-1","513931360-0","552290046-3","552290046-2","552290046-1","552290046-0","579947082-3","579947082-2","579947082-1","579947082-0","583980494-3","583980494-2","583980494-1","583980494-0","589983180-3","589983180-2","589983180-1","589983180-0","599771579-3","599771579-2","599771579-1","599771579-0","605783856-3","605783856-2","605783856-1","605783856-0","624798611-3","624798611-2","624798611-1","624798611-0","646691658-3","646691658-2","646691658-1","646691658-0","648970958-3","648970958-2","648970958-1","648970958-0","665701761-3","665701761-2","665701761-1","665701761-0","706788614-3","706788614-2","706788614-1","706788614-0","711170382-3","711170382-2","711170382-1","711170382-0","733170597-3","733170597-2","733170597-1","733170597-0","736899330-3","736899330-2","736899330-1","736899330-0","737600007-3","737600007-2","737600007-1","737600007-0","761279559-3","761279559-2","761279559-1","761279559-0","841235231-3","841235231-2","841235231-1","841235231-0","1032105165-3","1032105165-2","1032105165-1","1032105165-0","1035292296-3","1035292296-2","1035292296-1","1035292296-0","1038381660-3","1038381660-2","1038381660-1","1038381660-0","1040612860-3","1040612860-2","1040612860-1","1040612860-0","1070072655-3","1070072655-2","1070072655-1","1070072655-0","1072123988-3","1072123988-2","1072123988-1","1072123988-0","1089044126-3","1089044126-2","1089044126-1","1089044126-0","1125484118-3","1125484118-2","1125484118-1","1125484118-0","1150625684-3","1150625684-2","1150625684-1","1150625684-0","1233386767-3","1233386767-2","1233386767-1","1233386767-0","1236416890-3","1236416890-2","1236416890-1","1236416890-0","1247294752-3","1247294752-2","1247294752-1","1247294752-0","1253891761-3","1253891761-2","1253891761-1","1253891761-0","1258931771-3","1258931771-2","1258931771-1","1258931771-0","1262955078-3","1262955078-2","1262955078-1","1262955078-0","1262993338-3","1262993338-2","1262993338-1","1262993338-0","1281304188-3","1281304188-2","1281304188-1","1281304188-0","1333481613-3","1333481613-2","1333481613-1","1333481613-0","1334737850-3","1334737850-2","1334737850-1","1334737850-0","1338884615-3","1338884615-2","1338884615-1","1338884615-0","1347281984-3","1347281984-2","1347281984-1","1347281984-0","1353902073-3","1353902073-2","1353902073-1","1353902073-0","1360196072-3","1360196072-2","1360196072-1","1360196072-0","1360543492-3","1360543492-2","1360543492-1","1360543492-0","1364386797-3","1364386797-2","1364386797-1","1364386797-0","1364494852-3","1364494852-2","1364494852-1","1364494852-0","1370122115-3","1370122115-2","1370122115-1","1370122115-0","1385917684-3","1385917684-2","1385917684-1","1385917684-0","1401941999-3","1401941999-2","1401941999-1","1401941999-0","1403775002-3","1403775002-2","1403775002-1","1403775002-0","1424580040-3","1424580040-2","1424580040-1","1424580040-0","1438728966-3","1438728966-2","1438728966-1","1438728966-0","1460960071-3","1460960071-2","1460960071-1","1460960071-0","1491117011-3","1491117011-2","1491117011-1","1491117011-0","1520852947-3","1520852947-2","1520852947-1","1520852947-0","1531848186-3","1531848186-2","1531848186-1","1531848186-0","1547682664-3","1547682664-2","1547682664-1","1547682664-0","1568031487-3","1568031487-2","1568031487-1","1568031487-0","1572547997-3","1572547997-2","1572547997-1","1572547997-0","1585954699-3","1585954699-2","1585954699-1","1585954699-0","1588209630-3","1588209630-2","1588209630-1","1588209630-0","1593502116-3","1593502116-2","1593502116-1","1593502116-0","1635920725-3","1635920725-2","1635920725-1","1635920725-0","1655349986-3","1655349986-2","1655349986-1","1655349986-0","1657874307-3","1657874307-2","1657874307-1","1657874307-0","1663901274-3","1663901274-2","1663901274-1","1663901274-0","1678357449-3","1678357449-2","1678357449-1","1678357449-0","1700780147-3","1700780147-2","1700780147-1","1700780147-0","1700840516-3","1700840516-2","1700840516-1","1700840516-0","1722266780-3","1722266780-2","1722266780-1","1722266780-0","1723045683-3","1723045683-2","1723045683-1","1723045683-0","1770147233-3","1770147233-2","1770147233-1","1770147233-0","1772220492-3","1772220492-2","1772220492-1","1772220492-0","1786323540-3","1786323540-2","1786323540-1","1786323540-0","1806457381-3","1806457381-2","1806457381-1","1806457381-0","1807398651-3","1807398651-2","1807398651-1","1807398651-0","1818662977-3","1818662977-2","1818662977-1","1818662977-0","1831351070-3","1831351070-2","1831351070-1","1831351070-0","1832595315-3","1832595315-2","1832595315-1","1832595315-0","1849827543-3","1849827543-2","1849827543-1","1849827543-0","1849917674-3","1849917674-2","1849917674-1","1849917674-0","100000000556888-3","100000000556888-2","100000000556888-1","100000000556888-0","100000041402526-3","100000041402526-2","100000041402526-1","100000041402526-0","100000044475851-3","100000044475851-2","100000044475851-1","100000044475851-0","100000046244913-3","100000046244913-2","100000046244913-1","100000046244913-0","100000048512946-3","100000048512946-2","100000048512946-1","100000048512946-0","100000051019096-3","100000051019096-2","100000051019096-1","100000051019096-0","100000052062181-3","100000052062181-2","100000052062181-1","100000052062181-0","100000072073439-3","100000072073439-2","100000072073439-1","100000072073439-0","100000081287415-3","100000081287415-2","100000081287415-1","100000081287415-0","100000084949694-3","100000084949694-2","100000084949694-1","100000084949694-0","100000094833195-3","100000094833195-2","100000094833195-1","100000094833195-0","100000100662804-3","100000100662804-2","100000100662804-1","100000100662804-0","100000106194300-3","100000106194300-2","100000106194300-1","100000106194300-0","100000107709576-3","100000107709576-2","100000107709576-1","100000107709576-0","100000110294689-3","100000110294689-2","100000110294689-1","100000110294689-0","100000119368512-3","100000119368512-2","100000119368512-1","100000119368512-0","100000120905222-3","100000120905222-2","100000120905222-1","100000120905222-0","100000122949376-3","100000122949376-2","100000122949376-1","100000122949376-0","100000135066848-3","100000135066848-2","100000135066848-1","100000135066848-0","100000151026480-3","100000151026480-2","100000151026480-1","100000151026480-0","100000175486565-3","100000175486565-2","100000175486565-1","100000175486565-0","100000182859815-3","100000182859815-2","100000182859815-1","100000182859815-0","100000184001239-3","100000184001239-2","100000184001239-1","100000184001239-0","100000184820632-3","100000184820632-2","100000184820632-1","100000184820632-0","100000189758436-3","100000189758436-2","100000189758436-1","100000189758436-0","100000200468469-3","100000200468469-2","100000200468469-1","100000200468469-0","100000201177551-3","100000201177551-2","100000201177551-1","100000201177551-0","100000204489835-3","100000204489835-2","100000204489835-1","100000204489835-0","100000206547780-3","100000206547780-2","100000206547780-1","100000206547780-0","100000208306200-3","100000208306200-2","100000208306200-1","100000208306200-0","100000208935043-3","100000208935043-2","100000208935043-1","100000208935043-0","100000213908514-3","100000213908514-2","100000213908514-1","100000213908514-0","100000222521070-3","100000222521070-2","100000222521070-1","100000222521070-0","100000227769635-3","100000227769635-2","100000227769635-1","100000227769635-0","100000274952315-3","100000274952315-2","100000274952315-1","100000274952315-0","100000278870293-3","100000278870293-2","100000278870293-1","100000278870293-0","100000297714523-3","100000297714523-2","100000297714523-1","100000297714523-0","100000299132349-3","100000299132349-2","100000299132349-1","100000299132349-0","100000314107955-3","100000314107955-2","100000314107955-1","100000314107955-0","100000326671565-3","100000326671565-2","100000326671565-1","100000326671565-0","100000336507340-3","100000336507340-2","100000336507340-1","100000336507340-0","100000343760359-3","100000343760359-2","100000343760359-1","100000343760359-0","100000344246352-3","100000344246352-2","100000344246352-1","100000344246352-0","100000361626019-3","100000361626019-2","100000361626019-1","100000361626019-0","100000362446964-3","100000362446964-2","100000362446964-1","100000362446964-0","100000367063318-3","100000367063318-2","100000367063318-1","100000367063318-0","100000371917598-3","100000371917598-2","100000371917598-1","100000371917598-0","100000375340435-3","100000375340435-2","100000375340435-1","100000375340435-0","100000379301985-3","100000379301985-2","100000379301985-1","100000379301985-0","100000384764071-3","100000384764071-2","100000384764071-1","100000384764071-0","100000387043711-3","100000387043711-2","100000387043711-1","100000387043711-0","100000391098543-3","100000391098543-2","100000391098543-1","100000391098543-0","100000406402251-3","100000406402251-2","100000406402251-1","100000406402251-0","100000411828429-3","100000411828429-2","100000411828429-1","100000411828429-0","100000414290752-3","100000414290752-2","100000414290752-1","100000414290752-0","100000423461206-3","100000423461206-2","100000423461206-1","100000423461206-0","100000427336828-3","100000427336828-2","100000427336828-1","100000427336828-0","100000428929719-3","100000428929719-2","100000428929719-1","100000428929719-0","100000438017032-3","100000438017032-2","100000438017032-1","100000438017032-0","100000441232970-3","100000441232970-2","100000441232970-1","100000441232970-0","100000444923874-3","100000444923874-2","100000444923874-1","100000444923874-0","100000453382821-3","100000453382821-2","100000453382821-1","100000453382821-0","100000454653782-3","100000454653782-2","100000454653782-1","100000454653782-0","100000456133153-3","100000456133153-2","100000456133153-1","100000456133153-0","100000475676368-3","100000475676368-2","100000475676368-1","100000475676368-0","100000478456965-3","100000478456965-2","100000478456965-1","100000478456965-0","100000487542817-3","100000487542817-2","100000487542817-1","100000487542817-0","100000489655475-3","100000489655475-2","100000489655475-1","100000489655475-0","100000497386025-3","100000497386025-2","100000497386025-1","100000497386025-0","100000504381821-3","100000504381821-2","100000504381821-1","100000504381821-0","100000504696268-3","100000504696268-2","100000504696268-1","100000504696268-0","100000509181097-3","100000509181097-2","100000509181097-1","100000509181097-0","100000516723690-3","100000516723690-2","100000516723690-1","100000516723690-0","100000523805058-3","100000523805058-2","100000523805058-1","100000523805058-0","100000545683360-3","100000545683360-2","100000545683360-1","100000545683360-0","100000560043125-3","100000560043125-2","100000560043125-1","100000560043125-0","100000567254659-3","100000567254659-2","100000567254659-1","100000567254659-0","100000595951654-3","100000595951654-2","100000595951654-1","100000595951654-0","100000610075608-3","100000610075608-2","100000610075608-1","100000610075608-0","100000677460564-3","100000677460564-2","100000677460564-1","100000677460564-0","100000679165912-3","100000679165912-2","100000679165912-1","100000679165912-0","100000711623720-3","100000711623720-2","100000711623720-1","100000711623720-0"]},26],["MercuryTypeaheadConstants",[],{"COMPOSER_FRIENDS_MAX":4,"COMPOSER_FB4C_MAX":4,"COMPOSER_NON_FRIENDS_MAX":2,"COMPOSER_SHOW_MORE_LIMIT":2,"COMPOSER_THREADS_INITIAL_LIMIT":2,"COMPOSER_CHATTAB_MAX":5,"COMPOSER_PAGES_MAX":4,"COMPOSER_WM_MAX":18,"USER_TYPE":"user","PAGE_TYPE":"page","THREAD_TYPE":"thread","HEADER_TYPE":"header","FRIEND_TYPE":"friend","NON_FRIEND_TYPE":"non_friend","FB4C_TYPE":"fb4c","VALID_EMAIL":"^([A-Z0-9._\u0025+-]+\u0040((?!facebook\\.com))[A-Z0-9.-]+\\.[A-Z]{2,4}|(([A-Z._\u0025+-]+[A-Z0-9._\u0025+-]*)|([A-Z0-9._\u0025+-]+[A-Z._\u0025+-]+[A-Z0-9._\u0025+-]*))\u0040(?:facebook\\.com))$"},685],["SoundInitialData",[],{},482],["MessengerDotComSettingsInitialData",[],{"sound_enabled":false,"people_section_collapsed":false,"photos_section_collapsed":false},719],["RelayAPIConfigDefaults",["__inst_84473062_0_0","__inst_84473062_0_1"],{"accessToken":"CAACNHgqxsD8BAOfmFfxl4HTkfKZCwPXAG2jQoXkTUaPDOow0BALJtFRWoob4F5k4xuGhRkbrN4qPUWYbAcwDdMNl7ZBgU5jXSXetpRuMndDjZBOgxhxWZChhtSgZC9Y0I14nFLk5u3dfAaKLtCgcCz8pZAOoDmhZCZB42VgyMdBPEn5kHttg97ZCGOm8wvP60NsWR1dFuSj2ZC89uaDorwRbHs","actorID":"100000075573403","graphURI":{"__m":"__inst_84473062_0_0"},"graphBatchURI":{"__m":"__inst_84473062_0_1"},"retryDelays":[1000,3000],"fetchTimeout":15000,"scheduler":"phased","useXController":true},926],["AllChatFriendsList",[],{"all_friends":["100001580284563","1177521907","1743460630","1822184745","1382141563","100000965785084","100001560724368","100003022673626","100001230260530","1100406757","100000403782497","100000422236690","100008908081924","100000937699098","100000130476840","1248407682","100000244762909","1684926437","100000503084794","100000630132098","100001163187150","100003734990957","100009673899735","100000200171097","100002425232086","100004473644376","100000680200678","100001033961145","100000220814124","1820594889","100008252136548","522053539","1378991510","100000142055240","1681691054","100001481181610","1268561902","1448716532","100000685990324","1708081924","100000908690443","1466635260","100000483303503","100000333984918","738313796","677921681","100002878798712","1151355596","510863908","1441326279","100000385632166","100001327075898","100002937876287","1344266177","1507055723","834404695","100002241235657","1448344571","1679023790","100001346828604","1203974839","100000046225115","1073014638","100000353838876","100000387494272","100002833793724","1074705397","100000025600682","1691594166","100001655793115","100002191126770","1341287466","1311843597","1302331865","100000218978488","100006913060565","1445050697","1822905399","100001979118299","1648843553","553630082","1503134494","100002882367709","1755293745","100000081566794","100000026596751","100000069180208","761194577","100000461792084","100000480161307","100001942104177","100000434560335","100007073523375","657609705","1016783320","100000501512111","100004461212349","100000189974151","100000189398295","100000425378493","100000510129734","100000556358367","100000179801856","100002839405245","100000468954060","100002795006088","100000616231216","100001434620110","1812730207","651027514","100000456069258","1800030232","100000984586206","100000213821243","1200993648","100000354018946","100000025998527","100000177465213","100001616754355","100001710713751","100000302240588","100000072492730","100004746071015","1080732625","100001067926748","698191605","100000109217326","100000560593507","100001329950568","100000384759825","100000307083097","100002793326023","100000738176165","100001026430910","100001284826678","100000203948649","100000119102104","1536796380","100000096621112","1518543557","100003670802905","100000212123409","100000186409389","100000909152983","1679981175","100001158557471","547377478","1560668656","100000009257591","1407540646","100000929716782","100000693854843","1409418935","100000150065352","100000369804499","1082201515","100002404252849","100000968196917","1333710788","100000990644946","100000483383045","100000245900516","100002013031347","1042061413","100000123944912","1283771827","100000349684607","712640892","100000320171186","1279301632","100000205039164","100000173694471","1290915260","100005522642411","100000994359487","1410975130","1792610903","100004263240645","100004067993038","100000178423358","1749678601","621181515","1384752081","100000422185143","100000475396906","100000404370393","1803945192","100002732463095","1308958077","700004235","100000285710656","100000261624768","100001025631773","100000299928502","100001421173935","100002891113357","1801283605","1277201893","100001071341754","100000503250940","100000212980986","100000134944757","1268651732","100003801753452","100000007784526","1405456870","100000326184434","100001309610286","1664740033","100006553094328","100000304234441","1699855888","1399848189","100000378362340","1586617916","1045146564","100001135457011","1324252852","526803659","1669543617","100000426864422","1095583842","100001359038623","100000622885283","100000800883447","100000399621416","100001445569971","100000516723690","1253891761","100000314107955","100001682467154","1364386797","1438728966","100000423461206","100000189758436","100009323863184","100000927095323","100000414290752","100000845158618","1035292296","1424580040","100009484387296","1849917674","100000763462002","100000441232970","1364494852","100001654546642","100001451387868","100000371917598","100001288972031","100002179980376","100001516953649","100000278870293","100001420059946","100000072073439","100000391098543","1385917684","1338884615","761279559","1585954699","100005293870603","100000208935043","100001019649647","100002912028339","1531848186","100000044475851","100001076702794","100007579065798","100000745808612","100002281026540","100000567254659","100000610075608","1818662977","1722266780","1657874307","100004471391175","589983180","100000119368512","100000545683360","100000755975214","100000444923874","1547682664","100001046618007","100000456133153","100001188019234","100004794428158","100001145042982","100004930183730","100001073415150","100006304209960","100001055734525","100001038905591","648970958","100001159674313","646691658","100001186646932","100007898413102","100002052752819","100003598177964","100001199852106","100002387523123","100001592670561","100001593807393","583980494","100001607274809","100002658198840","100002611234061","100001678596005","100001697587002","100002356276486","100001563757631","100002298557832","100001875833014","100001912657159","100001921005434","100002278363105","100002159721925","100002157234954","100002128265139","599771579","100003004582598","100001200855878","100002110347047","100001202773894","100004654327134","100004548724978","100001208243207","624798611","552290046","100004074574603","100001319484970","100003467713882","100001561940434","100001427911113","100003318677985","100003073966174","100001510655177","579947082","100001515270790","605783856","100001561207693","100002004501957","1125484118","100000958982559","1849827543","1700840516","1040612860","1723045683","1038381660","1770147233","1772220492","1786323540","1806457381","1807398651","1032105165","1831351070","1832595315","100000000556888","1678357449","100000041402526","100000046244913","100000048512946","100000051019096","100000052062181","100000081287415","100000084949694","100000094833195","100000100662804","100000106194300","100000107709576","100000110294689","1700780147","1663901274","100000122949376","1360196072","1089044126","1233386767","1236416890","1247294752","1258931771","1262955078","1262993338","1281304188","1333481613","1334737850","1347281984","1353902073","1360543492","1655349986","1370122115","1401941999","1403775002","1072123988","1460960071","1070072655","1491117011","1520852947","1568031487","1572547997","1588209630","1593502116","1635920725","100000120905222","100000135066848","665701761","711170382","100000411828429","733170597","100000427336828","100000428929719","100000438017032","100000453382821","100000454653782","100000475676368","100000478456965","100000487542817","100000489655475","100000497386025","100000504381821","736899330","100000504696268","100000509181097","100000523805058","100000560043125","100000595951654","706788614","100000677460564","100000679165912","100000711623720","100000740182744","100000757356251","100000759582742","100000863741299","100000406402251","100000387043711","841235231","100000227769635","100000151026480","100000175486565","100000182859815","100000184001239","100000184820632","100000200468469","100000201177551","100000204489835","100000206547780","100000208306200","100000213908514","100000222521070","100000274952315","100000384764071","513931360","100000297714523","100000299132349","100000326671565","737600007","100000336507340","100000343760359","100000344246352","100000361626019","100000362446964","100000367063318","100000375340435","1150625684","100000379301985"]},658],["FbtraceForcedByServer",[],{"forced":false},140],["ServerNonce",[],{"ServerNonce":"xcB8CWzB70tdfLop0YTfgG"},141]]);require("InitialJSLoader").handleServerJS({"instances":[["__inst_6ff43d1d_0_0",["MarketingLogger"],[null,{"is_mobile":false,"controller_name":"XMessengerDotComRootController","session_id":"ee1e0a45-22db-4fe9-8986-12c5ea6f00e7"}],1],["__inst_5c3d3e3c_0_0",["MarketingLogger"],[null,{"is_mobile":false,"controller_name":"XMessengerDotComMainController","session_id":"2d139a0e-9c93-4cd7-b86e-425a2f19629d"}],1],["__inst_7ea77126_0_0",["XHPTemplate","__markup_0095f3e7_0_0"],[{"__m":"__markup_0095f3e7_0_0"}],1],["__inst_7ea77126_0_1",["XHPTemplate","__markup_ad787273_0_0"],[{"__m":"__markup_ad787273_0_0"}],1],["__inst_7ea77126_0_2",["XHPTemplate","__markup_e3180568_0_0"],[{"__m":"__markup_e3180568_0_0"}],1],["__inst_7ea77126_0_3",["XHPTemplate","__markup_ed2f466c_0_0"],[{"__m":"__markup_ed2f466c_0_0"}],1],["__inst_7ea77126_0_4",["XHPTemplate","__markup_570b4d51_0_0"],[{"__m":"__markup_570b4d51_0_0"}],1],["__inst_7ea77126_0_5",["XHPTemplate","__markup_482cdfb2_0_0"],[{"__m":"__markup_482cdfb2_0_0"}],1],["__inst_7ea77126_0_6",["XHPTemplate","__markup_11aea6af_0_0"],[{"__m":"__markup_11aea6af_0_0"}],1],["__inst_84473062_0_0",["URI"],["\/api\/graphql\/"],1],["__inst_84473062_0_1",["URI"],["\/api\/graphqlbatch\/"],1]],"markup":[["__markup_0095f3e7_0_0",{"__html":"\u003Cdiv class=\"mas pam uiBoxYellow\">This message has been temporarily removed because the sender&#039;s account requires verification, or it was identified as abusive.\u003C\/div>"},1],["__markup_ad787273_0_0",{"__html":"\u003Cdiv class=\"mas pam uiBoxYellow\">This message was removed because it contains blocked or harmful links.\u003C\/div>"},1],["__markup_e3180568_0_0",{"__html":"\u003Cdiv class=\"mas pam uiBoxYellow\">This message has been temporarily removed because the sender&#039;s account requires verification.\u003C\/div>"},1],["__markup_ed2f466c_0_0",{"__html":"\u003Cdiv class=\"mas pam uiBoxYellow\">This message was removed because it contains blocked or harmful content.\u003C\/div>"},1],["__markup_570b4d51_0_0",{"__html":"\u003Cdiv class=\"mas pam uiBoxYellow\">This message was removed because the app it&#039;s being sent from is blocked from sending messages.\u003C\/div>"},1],["__markup_482cdfb2_0_0",{"__html":"\u003Cdiv class=\"_542d\">\u003Ci class=\"img sp_uOmhLkwor_X sx_541863\">\u003C\/i>\u003Cspan class=\"_55r7\">Failed to send\u003C\/span>\u003C\/div>"},1],["__markup_11aea6af_0_0",{"__html":"\u003Cdiv class=\"_542d\">\u003Cimg class=\"img\" src=\"https:\/\/fbstatic-a.akamaihd.net\/rsrc.php\/v2\/yS\/r\/gW6cs5yrSlg.gif\" alt=\"\" width=\"15\" height=\"15\" \/>\u003Cspan class=\"_55r6\">Sending...\u003C\/span>\u003C\/div>"},1]],"elements":[["__elem_a588f507_0_0","u_0_0",1]],"require":[["__inst_6ff43d1d_0_0"],["__inst_5c3d3e3c_0_0"],["MessengerArtilleryClient","start",[],[],[]],["PixelRatio","startDetecting",[],[1],[]],["Intl","setPhonologicalRules",[],[{"meta":{"\/_B\/":"([.,!?\\s]|^)","\/_E\/":"([.,!?\\s]|$)"},"patterns":{"\/\u0001(.*)('|&#039;)s\u0001(?:'|&#039;)s(.*)\/":"\u0001$1$2s\u0001$3","\/_\u0001([^\u0001]*)\u0001\/e":"mb_strtolower(\"\u0001$1\u0001\")","\/\\^\\x01([^\\x01])(?=[^\\x01]*\\x01)\/e":"mb_strtoupper(\"\u0001$1\")","\/_\u0001([^\u0001]*)\u0001\/":"javascript"}}],[]],["PostLoadJS","loadAndRequire",[],["DimensionTracking"],[]],["PostLoadJS","loadAndCall",[],["HighContrastMode","init",[{"isHCM":false,"spacerImage":"https:\/\/fbstatic-a.akamaihd.net\/rsrc.php\/v2\/y4\/r\/-PAXP-deijE.gif"}]],[]],["PostLoadJS","loadAndCall",[],["DetectBrokenProxyCache","run",[100000075573403,"c_user"]],[]],["ClickRefLogger"],["ScriptPath","set",[],["XMessengerDotComMainController","aaa66276",{"imp_id":"ceb2bb14"}],[]],["Chromedome","start",[],[{"wipe":1,"hardConsole":1,"warnings":[["\u0025cCareful. This might not do what you think.","font-size:40px; background-color:red; color:yellow; font-weight:bold; font-family:tahoma;"],["\u0025cThis is a browser feature intended for developers. If someone told you to copy-paste something here to enable a Facebook feature or \"hack\" someone's account,\u0025c it is probably a scam and will give them access to your Facebook account.","font-size:20px; font-family:tahoma","font-size:20px; font-family:tahoma; font-weight:bold"]],"block":"The developer console is temporarily disabled; see https:\/\/www.facebook.com\/selfxss for more information"}],[]],["UserActionHistory"],["ScriptPathLogger","startLogging",[],[],[]],["TimeSpentBitArrayLogger","init",[],[],[]],["NavigationClickPointHandler"],["SyntaxErrorMonitor","init",[],[{"bump_freq_day":1,"cookie_ttl_sec":604800}],[]],["MessengerMount","mount",["__elem_a588f507_0_0"],[{"__m":"__elem_a588f507_0_0"},{"mercuryPayload":{"ordered_threadlists":[{"start":0,"end":21,"thread_ids":["mid.1414028124846:ddce568db74c17b061","mid.1425588143162:c152b2d07a65597f77","mid.1447678410350:3dbe03ef645a833f65","id.1658786171075059","mid.1384005816145:04aa2b90e69c6f3832","id.233038013419152","id.848432611896176","id.556228564525003","4be3b2890d92467690e2440a479098aa","id.192858150790473","id.480684008722873","mid.1425645828409:127198b7ea7322b828","mid.1424445796972:de44c7e29c84b68031","msg.b4c92fc45c5dc4cab4a3018ebedd2ef912","8a14fada3efe47f6ae8cc88a5c8be581","mid.1393636086562:d86daaf6d0af39a590","id.197203630350414","id.520396711471563","id.1666689320241533","mid.1445433272027:5ac1234649cbf56755","mid.1446247628644:22517b3a4e712bf190"],"thread_fbids":["1658786171075059","848432611896176","556228564525003","480684008722873","520396711471563","1666689320241533"],"other_user_fbids":["100000680200678","100008908081924","1200993648","1743460630","1822184745","100001580284563","1177521907","100000965785084","1441326279","1151355596","100000403782497","100000200171097","1100406757","100000367063318","100000361626019"],"folder":"inbox","filter":null,"error":null}],"participants":[{"fbid":100000680200678,"gender":2,"href":"https:\/\/www.facebook.com\/daviduart3","id":"fbid:100000680200678","image_src":"https:\/\/scontent.xx.fbcdn.net\/hprofile-xap1\/v\/t1.0-1\/p32x32\/12234850_1061630600536270_3416102644215011805_n.jpg?oh=9ac85df3cc7663d37c0df8b23b5039d3&oe=56B2F54C","big_image_src":"https:\/\/scontent.xx.fbcdn.net\/hprofile-xap1\/v\/t1.0-1\/p50x50\/12234850_1061630600536270_3416102644215011805_n.jpg?oh=7c887dea1778445bbf469134b7b520ed&oe=56EBF68C","name":"David Duarte","short_name":"David","employee":false,"is_employee_away":false,"networks":[],"type":"user","vanity":"daviduart3","is_friend":true,"social_snippets":[],"is_messenger_user":true},{"fbid":100000075573403,"gender":2,"href":"https:\/\/www.facebook.com\/diogo.barradas.71","id":"fbid:100000075573403","image_src":"https:\/\/fbcdn-profile-a.akamaihd.net\/hprofile-ak-xft1\/v\/t1.0-1\/p32x32\/11430107_1029900610355782_5323887418682892768_n.jpg?oh=2184a3a8812329f17cc360a0bfc61f44&oe=56B3F6D0&__gda__=1455265447_3fb78e74f425b2e8ffb3965ae324c1ef","big_image_src":"https:\/\/fbcdn-profile-a.akamaihd.net\/hprofile-ak-xft1\/v\/t1.0-1\/p50x50\/11430107_1029900610355782_5323887418682892768_n.jpg?oh=52a7c80a3b4116d8479e83e2bb125725&oe=56BA5910&__gda__=1458082407_ef21a42da065571c4aff10bc8489d2c5","name":"Diogo Barradas","short_name":"Diogo","employee":false,"is_employee_away":false,"networks":[],"type":"user","vanity":"diogo.barradas.71","is_friend":false,"social_snippets":[],"is_messenger_user":true},{"fbid":100008908081924,"gender":2,"href":"https:\/\/www.facebook.com\/t.filipe.couto","id":"fbid:100008908081924","image_src":"https:\/\/scontent.xx.fbcdn.net\/hprofile-xlf1\/v\/t1.0-1\/p32x32\/12246713_1481812002125722_2057662701541129804_n.jpg?oh=5705a3ac3038b810b8eeec8e125de1e1&oe=56B08AD0","big_image_src":"https:\/\/scontent.xx.fbcdn.net\/hprofile-xlf1\/v\/t1.0-1\/p50x50\/12246713_1481812002125722_2057662701541129804_n.jpg?oh=01a5ed14017366dbef9413b27f8ac253&oe=56BC5C10","name":"Filipe Couto","short_name":"Filipe","employee":false,"is_employee_away":false,"networks":[],"type":"user","vanity":"t.filipe.couto","is_friend":true,"social_snippets":[],"is_messenger_user":true},{"fbid":1200993648,"gender":1,"href":"https:\/\/www.facebook.com\/marianafpaulo","id":"fbid:1200993648","image_src":"https:\/\/scontent.xx.fbcdn.net\/hprofile-xlf1\/v\/t1.0-1\/p32x32\/12249697_10208060288843943_4766805345840533684_n.jpg?oh=e46b99bde88febbff3c59a09eb7d2897&oe=56E94353","big_image_src":"https:\/\/scontent.xx.fbcdn.net\/hprofile-xlf1\/v\/t1.0-1\/p50x50\/12249697_10208060288843943_4766805345840533684_n.jpg?oh=ef6c414b71893b91cfb9a7b64c53c29c&oe=56BD61BC","name":"Mariana Paulo","short_name":"Mariana","employee":false,"is_employee_away":false,"networks":[],"type":"user","vanity":"marianafpaulo","is_friend":true,"social_snippets":[],"is_messenger_user":false},{"fbid":1177521907,"gender":2,"href":"https:\/\/www.facebook.com\/tiago.diogo","id":"fbid:1177521907","image_src":"https:\/\/fbcdn-profile-a.akamaihd.net\/hprofile-ak-xaf1\/v\/t1.0-1\/p32x32\/10407252_10205534025208148_1261194969720010832_n.jpg?oh=fa9b246d7afe7c9324ba3bf13eb939d1&oe=56E68101&__gda__=1458114237_e4d6631ef26225833f79208bcfe955e8","big_image_src":"https:\/\/fbcdn-profile-a.akamaihd.net\/hprofile-ak-xaf1\/v\/t1.0-1\/p50x50\/10407252_10205534025208148_1261194969720010832_n.jpg?oh=3ca17a52b40f650e1447a6a39761c4a9&oe=56E6B0EE&__gda__=1454149202_05e5567771f504c9d96a1476ac265c05","name":"Tiago Diogo","short_name":"Tiago","employee":false,"is_employee_away":false,"networks":[],"type":"user","vanity":"tiago.diogo","is_friend":true,"social_snippets":[],"is_messenger_user":true},{"fbid":1743460630,"gender":2,"href":"https:\/\/www.facebook.com\/tiago.brito.9","id":"fbid:1743460630","image_src":"https:\/\/fbcdn-profile-a.akamaihd.net\/hprofile-ak-xfp1\/v\/t1.0-1\/p32x32\/10896938_4970348473519_7012878390038484353_n.jpg?oh=421adcd132322efc4639420da4078aa1&oe=56F1AF48&__gda__=1455267440_3edf3b11081802afb1f9d9062c433e38","big_image_src":"https:\/\/fbcdn-profile-a.akamaihd.net\/hprofile-ak-xfp1\/v\/t1.0-1\/p50x50\/10896938_4970348473519_7012878390038484353_n.jpg?oh=9d239c5119ac8fa4102ec34001dbc19c&oe=56BD4074&__gda__=1458357580_149695ea60113630af58c47fc2c36fd1","name":"Tiago Brito","short_name":"Tiago","employee":false,"is_employee_away":false,"networks":[],"type":"user","vanity":"tiago.brito.9","is_friend":true,"social_snippets":[],"is_messenger_user":false},{"fbid":1822184745,"gender":2,"href":"https:\/\/www.facebook.com\/diogo.lachica","id":"fbid:1822184745","image_src":"https:\/\/scontent.xx.fbcdn.net\/hprofile-xfa1\/v\/t1.0-1\/p32x32\/1976924_10200564298749581_1869999605_n.jpg?oh=52bb3daf8d3c83d581ffcc38536119ab&oe=56F1CAAB","big_image_src":"https:\/\/scontent.xx.fbcdn.net\/hprofile-xfa1\/v\/t1.0-1\/p50x50\/1976924_10200564298749581_1869999605_n.jpg?oh=a0fb26b7d0b24dbe97bbe31372adf156&oe=56B0C147","name":"Diogo Lachica","short_name":"Diogo","employee":false,"is_employee_away":false,"networks":[],"type":"user","vanity":"diogo.lachica","is_friend":true,"social_snippets":[],"is_messenger_user":true},{"fbid":100000965785084,"gender":1,"href":"https:\/\/www.facebook.com\/patriciasantos28","id":"fbid:100000965785084","image_src":"https:\/\/fbcdn-profile-a.akamaihd.net\/hprofile-ak-xtp1\/v\/t1.0-1\/p32x32\/11700827_921498167892367_4406722998311668688_n.jpg?oh=9ef3cf7d0d00e2ecf7516e376b8e3703&oe=56F52789&__gda__=1458960462_5361d8e1eae955cb30ee8820f03ec5a6","big_image_src":"https:\/\/fbcdn-profile-a.akamaihd.net\/hprofile-ak-xtp1\/v\/t1.0-1\/p50x50\/11700827_921498167892367_4406722998311668688_n.jpg?oh=59b13c71f6859deb9f882ccd77d33820&oe=56F3B086&__gda__=1458997825_97f477c0d46070877a03e6312852ef3e","name":"Patr\u00edcia Santos","short_name":"Patr\u00edcia","employee":false,"is_employee_away":false,"networks":[],"type":"user","vanity":"patriciasantos28","is_friend":true,"social_snippets":[],"is_messenger_user":true},{"fbid":100000422236690,"gender":2,"href":"https:\/\/www.facebook.com\/francisco.freire.103","id":"fbid:100000422236690","image_src":"https:\/\/fbcdn-profile-a.akamaihd.net\/hprofile-ak-xaf1\/v\/t1.0-1\/c62.226.621.621\/s32x32\/292429_461687063855364_1500173644_n.jpg?oh=faeed00ecc82f74f356439e76a43b333&oe=56F39A80&__gda__=1459176723_5d9e0b5890cf5c31bdb414a1b705fd56","big_image_src":"https:\/\/fbcdn-profile-a.akamaihd.net\/hprofile-ak-xaf1\/v\/t1.0-1\/c62.226.621.621\/s50x50\/292429_461687063855364_1500173644_n.jpg?oh=a091c62e370c5e62046c76611e4c2637&oe=56F0CA8B&__gda__=1454366232_c17c42d493e5236c99e91ff1c5a4b3b2","name":"Francisco Freire","short_name":"Francisco","employee":false,"is_employee_away":false,"networks":[],"type":"user","vanity":"francisco.freire.103","is_friend":true,"social_snippets":[],"is_messenger_user":false},{"fbid":100001163187150,"gender":2,"href":"https:\/\/www.facebook.com\/mr.peter.p","id":"fbid:100001163187150","image_src":"https:\/\/scontent.xx.fbcdn.net\/hprofile-xfp1\/v\/t1.0-1\/c0.0.32.32\/p32x32\/12187766_935858536462910_8670308834080289598_n.jpg?oh=fc7bebd9b632ebe1ac971902077a0987&oe=56EBA18D","big_image_src":"https:\/\/scontent.xx.fbcdn.net\/hprofile-xfp1\/v\/t1.0-1\/c0.0.50.50\/p50x50\/12187766_935858536462910_8670308834080289598_n.jpg?oh=5f0cca8da0f8190a062c7f24d9daf68c&oe=56EED9A9","name":"Pedro Reynolds","short_name":"Pedro","employee":false,"is_employee_away":false,"networks":[],"type":"user","vanity":"mr.peter.p","is_friend":true,"social_snippets":[],"is_messenger_user":true},{"fbid":100000908690443,"gender":2,"href":"https:\/\/www.facebook.com\/mikedduarte91","id":"fbid:100000908690443","image_src":"https:\/\/scontent.xx.fbcdn.net\/hprofile-xfp1\/v\/t1.0-1\/c0.0.32.32\/p32x32\/995877_666982420008708_602746970_n.jpg?oh=f430818a9ec48b8b7eebe058d90a143d&oe=56B71832","big_image_src":"https:\/\/scontent.xx.fbcdn.net\/hprofile-xfp1\/v\/t1.0-1\/c0.0.50.50\/p50x50\/995877_666982420008708_602746970_n.jpg?oh=46bd995a8f494361e3625931fbba4c88&oe=56F82F4A","name":"Mike Duarte","short_name":"Mike","employee":false,"is_employee_away":false,"networks":[],"type":"user","vanity":"mikedduarte91","is_friend":true,"social_snippets":[],"is_messenger_user":true},{"fbid":100000937699098,"gender":1,"href":"https:\/\/www.facebook.com\/somethingwillcolourwaves","id":"fbid:100000937699098","image_src":"https:\/\/scontent.xx.fbcdn.net\/hprofile-xft1\/v\/t1.0-1\/c28.108.393.393\/s32x32\/12208284_1017139174993996_2946048170709311722_n.jpg?oh=0977f37fcb09a337fa6ec7e26efb24bf&oe=56EA5E5B","big_image_src":"https:\/\/scontent.xx.fbcdn.net\/hprofile-xft1\/v\/t1.0-1\/c4.13.50.50\/p57x57\/12208284_1017139174993996_2946048170709311722_n.jpg?oh=a7a83748a0a9a22acfee729fe2d56b68&oe=56B760A3","name":"V\u00e2nia Mendon\u00e7a","short_name":"V\u00e2nia","employee":false,"is_employee_away":false,"networks":["Instituto Superior T\u00e9cnico"],"type":"user","vanity":"somethingwillcolourwaves","is_friend":true,"social_snippets":[],"is_messenger_user":true},{"fbid":100003734990957,"gender":2,"href":"https:\/\/www.facebook.com\/tomas.alves.7315","id":"fbid:100003734990957","image_src":"https:\/\/scontent.xx.fbcdn.net\/hprofile-xat1\/v\/t1.0-1\/p32x32\/12032218_706667936134366_4546048818565957435_n.jpg?oh=c83c771fd6118268a1a3d97e072d6a12&oe=56F78F7E","big_image_src":"https:\/\/scontent.xx.fbcdn.net\/hprofile-xat1\/v\/t1.0-1\/p50x50\/12032218_706667936134366_4546048818565957435_n.jpg?oh=9d07d98fb262c393e5ff63fdfade6be6&oe=56F5C671","name":"Tom\u00e1s Alves","short_name":"Tom\u00e1s","employee":false,"is_employee_away":false,"networks":[],"type":"user","vanity":"tomas.alves.7315","is_friend":true,"social_snippets":[],"is_messenger_user":true},{"fbid":100001580284563,"gender":2,"href":"https:\/\/www.facebook.com\/joao.teles.33","id":"fbid:100001580284563","image_src":"https:\/\/scontent.xx.fbcdn.net\/hprofile-xtf1\/v\/t1.0-1\/p32x32\/11083600_937377329658268_4148669751249550395_n.jpg?oh=ce073fc495af89ae09ac12f3160bafa4&oe=56F9EB50","big_image_src":"https:\/\/scontent.xx.fbcdn.net\/hprofile-xtf1\/v\/t1.0-1\/p50x50\/11083600_937377329658268_4148669751249550395_n.jpg?oh=69935c36195f3884a2c9bd6487613fd8&oe=56AD3A5F","name":"Jo\u00e3o Teles","short_name":"Jo\u00e3o","employee":false,"is_employee_away":false,"networks":[],"type":"user","vanity":"joao.teles.33","is_friend":true,"social_snippets":[],"is_messenger_user":true},{"fbid":1441326279,"gender":2,"href":"https:\/\/www.facebook.com\/nuno.sousa.566","id":"fbid:1441326279","image_src":"https:\/\/scontent.xx.fbcdn.net\/hprofile-xtf1\/v\/t1.0-1\/p32x32\/11870939_10205028509219358_1742786463676606445_n.jpg?oh=0988bc9b002f8b815bea5f1c20793ceb&oe=56EAE423","big_image_src":"https:\/\/scontent.xx.fbcdn.net\/hprofile-xtf1\/v\/t1.0-1\/p50x50\/11870939_10205028509219358_1742786463676606445_n.jpg?oh=edf99c70af12f6739edb30d0efab6f8b&oe=56F73FCC","name":"Nuno Sousa","short_name":"Nuno","employee":false,"is_employee_away":false,"networks":[],"type":"user","vanity":"nuno.sousa.566","is_friend":true,"social_snippets":[],"is_messenger_user":true},{"fbid":1151355596,"gender":2,"href":"https:\/\/www.facebook.com\/joaopdvpereira","id":"fbid:1151355596","image_src":"https:\/\/scontent.xx.fbcdn.net\/hprofile-xap1\/v\/t1.0-1\/p32x32\/11377303_10206784051337148_7532464815566873079_n.jpg?oh=28f8991693d430edc0e761cf09393f5c&oe=56B21A04","big_image_src":"https:\/\/scontent.xx.fbcdn.net\/hprofile-xap1\/v\/t1.0-1\/p50x50\/11377303_10206784051337148_7532464815566873079_n.jpg?oh=4df857be7a6d8d71688e677d80adc497&oe=56B40EEB","name":"Jo\u00e3o Pedro Pereira","short_name":"Jo\u00e3o","employee":false,"is_employee_away":false,"networks":[],"type":"user","vanity":"joaopdvpereira","is_friend":true,"social_snippets":[],"is_messenger_user":true},{"fbid":100000403782497,"gender":2,"href":"https:\/\/www.facebook.com\/v3rtgo","id":"fbid:100000403782497","image_src":"https:\/\/scontent.xx.fbcdn.net\/hprofile-xpa1\/v\/t1.0-1\/c49.49.618.618\/s32x32\/8536_606059696084151_770311070_n.jpg?oh=3ed2514e0258f670e44a3cc4c8ea6094&oe=56F49BAF","big_image_src":"https:\/\/scontent.xx.fbcdn.net\/hprofile-xpa1\/v\/t1.0-1\/c49.49.618.618\/s50x50\/8536_606059696084151_770311070_n.jpg?oh=8a8ada3bf75905bb248f4ece4d0145c6&oe=56F86478","name":"Hugo Salvador","short_name":"Hugo","employee":false,"is_employee_away":false,"networks":[],"type":"user","vanity":"v3rtgo","is_friend":true,"social_snippets":[],"is_messenger_user":true},{"fbid":100000200171097,"gender":2,"href":"https:\/\/www.facebook.com\/rogerinhoo.cabaco","id":"fbid:100000200171097","image_src":"https:\/\/scontent.xx.fbcdn.net\/hprofile-xtl1\/v\/t1.0-1\/p32x32\/12219480_1236538876362773_4350239819005169530_n.jpg?oh=904896dd79c62380311a1905ba56e39f&oe=56B53E36","big_image_src":"https:\/\/scontent.xx.fbcdn.net\/hprofile-xtl1\/v\/t1.0-1\/p50x50\/12219480_1236538876362773_4350239819005169530_n.jpg?oh=835304fc74f3b5ec2942a4549e630dd4&oe=56F469F6","name":"Rog\u00e9rio Caba\u00e7o","short_name":"Rog\u00e9rio","employee":false,"is_employee_away":false,"networks":[],"type":"user","vanity":"rogerinhoo.cabaco","is_friend":true,"social_snippets":[],"is_messenger_user":true},{"fbid":1100406757,"gender":1,"href":"https:\/\/www.facebook.com\/ana.goncalves.752","id":"fbid:1100406757","image_src":"https:\/\/scontent.xx.fbcdn.net\/hprofile-xfp1\/v\/t1.0-1\/p32x32\/11870641_10206816131897444_1097825737528422007_n.jpg?oh=09ef90b7b547f36b79e99026048ddbc1&oe=56B0EADC","big_image_src":"https:\/\/scontent.xx.fbcdn.net\/hprofile-xfp1\/v\/t1.0-1\/p50x50\/11870641_10206816131897444_1097825737528422007_n.jpg?oh=fe66872a1ba138743af354d67b751a0c&oe=56AC3C33","name":"Ana Gon\u00e7alves","short_name":"Ana","employee":false,"is_employee_away":false,"networks":[],"type":"user","vanity":"ana.goncalves.752","is_friend":true,"social_snippets":[],"is_messenger_user":true},{"fbid":100000244762909,"gender":1,"href":"https:\/\/www.facebook.com\/elsa.pinto.75","id":"fbid:100000244762909","image_src":"https:\/\/fbcdn-profile-a.akamaihd.net\/hprofile-ak-xaf1\/v\/t1.0-1\/c11.0.32.32\/p32x32\/190208_205296906155133_1196214_n.jpg?oh=65d256acb3d613361785892a83cb775b&oe=56E8C301&__gda__=1454909961_e1df4c2f8fb353403a32f4a69623d003","big_image_src":"https:\/\/fbcdn-profile-a.akamaihd.net\/hprofile-ak-xaf1\/v\/t1.0-1\/c18.0.50.50\/p50x50\/190208_205296906155133_1196214_n.jpg?oh=f0ac2674af575720c6847b4ae3d5b7e5&oe=56B51ABF&__gda__=1459280311_f1254509fa20c1fd9d6889a88f11b3a4","name":"Elsa Pinto","short_name":"Elsa","employee":false,"is_employee_away":false,"networks":[],"type":"user","vanity":"elsa.pinto.75","is_friend":true,"social_snippets":[],"is_messenger_user":true},{"fbid":100000510129734,"gender":1,"href":"https:\/\/www.facebook.com\/carolina.s.branquinho","id":"fbid:100000510129734","image_src":"https:\/\/scontent.xx.fbcdn.net\/hprofile-xpf1\/v\/t1.0-1\/p32x32\/12193785_1270784026281923_1202297686756727157_n.jpg?oh=c42d9034c7a1870a26bfdef41654dab3&oe=56B7694D","big_image_src":"https:\/\/scontent.xx.fbcdn.net\/hprofile-xpf1\/v\/t1.0-1\/p50x50\/12193785_1270784026281923_1202297686756727157_n.jpg?oh=e978888a012a1ab9541c0f3f74fc2a79&oe=56E7C28D","name":"Carolina Branquinho Rebocho","short_name":"Carolina","employee":false,"is_employee_away":false,"networks":[],"type":"user","vanity":"carolina.s.branquinho","is_friend":true,"social_snippets":[],"is_messenger_user":true},{"fbid":1268561902,"gender":2,"href":"https:\/\/www.facebook.com\/diogo.fieldocarmo","id":"fbid:1268561902","image_src":"https:\/\/scontent.xx.fbcdn.net\/hprofile-xfa1\/v\/t1.0-1\/p32x32\/11755180_10207175418124980_3393809670760653321_n.jpg?oh=78b09125e810c17cf5de00188a072255&oe=56F3A4B3","big_image_src":"https:\/\/scontent.xx.fbcdn.net\/hprofile-xfa1\/v\/t1.0-1\/p50x50\/11755180_10207175418124980_3393809670760653321_n.jpg?oh=23ffb7c0b57335e86f1f61288b2e09d3&oe=56ED2B5C","name":"Diogo Fiel Do Carmo","short_name":"Diogo","employee":false,"is_employee_away":false,"networks":[],"type":"user","vanity":"diogo.fieldocarmo","is_friend":true,"social_snippets":[],"is_messenger_user":true},{"fbid":100000385986475,"gender":2,"href":"https:\/\/www.facebook.com\/miguel.nico.71","id":"fbid:100000385986475","image_src":"https:\/\/scontent.xx.fbcdn.net\/hprofile-xpf1\/v\/t1.0-1\/p32x32\/12036798_1013720401984150_3585898891514933145_n.jpg?oh=5c1d068bf9c8a763a118d886ad5e19cf&oe=56AC287C","big_image_src":"https:\/\/scontent.xx.fbcdn.net\/hprofile-xpf1\/v\/t1.0-1\/p50x50\/12036798_1013720401984150_3585898891514933145_n.jpg?oh=d6be72ca558173e0d5fc594fb058e84c&oe=56B3F4BC","name":"Miguel Nico","short_name":"Miguel","employee":false,"is_employee_away":false,"networks":[],"type":"user","vanity":"miguel.nico.71","is_friend":false,"social_snippets":[],"is_messenger_user":true},{"fbid":100002128265139,"gender":1,"href":"https:\/\/www.facebook.com\/joana.pereira.1297","id":"fbid:100002128265139","image_src":"https:\/\/scontent.xx.fbcdn.net\/hprofile-xtf1\/v\/t1.0-1\/p32x32\/12240067_915808495166751_8177226124067157511_n.jpg?oh=b17dc4af1284093cb95322509a0af420&oe=56EF2DCC","big_image_src":"https:\/\/scontent.xx.fbcdn.net\/hprofile-xtf1\/v\/t1.0-1\/p50x50\/12240067_915808495166751_8177226124067157511_n.jpg?oh=9dc6d63d787e26e9f2b173d6f489b491&oe=56EF8DC3","name":"Joana Pereira","short_name":"Joana","employee":false,"is_employee_away":false,"networks":[],"type":"user","vanity":"joana.pereira.1297","is_friend":true,"social_snippets":[],"is_messenger_user":true},{"fbid":100001076702794,"gender":2,"href":"https:\/\/www.facebook.com\/luis.nobre.31","id":"fbid:100001076702794","image_src":"https:\/\/scontent.xx.fbcdn.net\/hprofile-prn2\/v\/t1.0-1\/p32x32\/10301510_794418500604033_1661929138995846676_n.jpg?oh=97ed6799f0d58ac5ce088aea16fa5688&oe=56EE2984","big_image_src":"https:\/\/scontent.xx.fbcdn.net\/hprofile-prn2\/v\/t1.0-1\/p50x50\/10301510_794418500604033_1661929138995846676_n.jpg?oh=12f69ce617ec3f2cac6e21d271ce4675&oe=56EC408B","name":"Luis Nobre","short_name":"Luis","employee":false,"is_employee_away":false,"networks":[],"type":"user","vanity":"luis.nobre.31","is_friend":true,"social_snippets":[],"is_messenger_user":true},{"fbid":100000367063318,"gender":2,"href":"https:\/\/www.facebook.com\/franciscosalgad0","id":"fbid:100000367063318","image_src":"https:\/\/scontent.xx.fbcdn.net\/hprofile-xtp1\/v\/t1.0-1\/c0.15.32.32\/p40x40\/984205_1002172986471594_5765108560354341358_n.jpg?oh=a0e3009247d319bb7cc4f7128b0b1437&oe=56F07008","big_image_src":"https:\/\/scontent.xx.fbcdn.net\/hprofile-xtp1\/v\/t1.0-1\/c6.206.431.431\/s50x50\/984205_1002172986471594_5765108560354341358_n.jpg?oh=13016de33fbcae47313b65ab2da91330&oe=56EC8B51","name":"Francisco Salgado","short_name":"Francisco","employee":false,"is_employee_away":false,"networks":[],"type":"user","vanity":"franciscosalgad0","is_friend":true,"social_snippets":[],"is_messenger_user":true},{"fbid":100000361626019,"gender":2,"href":"https:\/\/www.facebook.com\/bruno.galhofo","id":"fbid:100000361626019","image_src":"https:\/\/scontent.xx.fbcdn.net\/hprofile-xat1\/v\/t1.0-1\/p32x32\/11230973_1015989658423079_8831745980160856895_n.jpg?oh=c06e83af13ca94cda99543bfb3006e7c&oe=56B86F2F","big_image_src":"https:\/\/scontent.xx.fbcdn.net\/hprofile-xat1\/v\/t1.0-1\/p50x50\/11230973_1015989658423079_8831745980160856895_n.jpg?oh=747e62c17ff63ae0467bd8e601761f31&oe=56F061EF","name":"Bruno Galhofo","short_name":"Bruno","employee":false,"is_employee_away":false,"networks":[],"type":"user","vanity":"bruno.galhofo","is_friend":true,"social_snippets":[],"is_messenger_user":true}],"threads":[{"thread_id":"mid.1414028124846:ddce568db74c17b061","thread_fbid":"100000680200678","other_user_fbid":"100000680200678","participants":["fbid:100000680200678","fbid:100000075573403"],"former_participants":[],"name":"","snippet":"RAMAS_IS_THE_WORD","snippet_has_attachment":false,"snippet_attachments":[],"snippet_sender":"fbid:100000680200678","unread_count":0,"message_count":776,"image_src":null,"timestamp_absolute":"Today","timestamp_datetime":"4:54pm","timestamp_relative":"4:54pm","timestamp_time_passed":0,"timestamp":1447692891832,"server_timestamp":1447692891832,"mute_settings":[],"is_canonical_user":true,"is_canonical":true,"is_subscribed":true,"folder":"inbox","is_archived":false,"recipients_loadable":true,"name_conversation_sheet_dismissed":false,"has_email_participant":false,"read_only":false,"can_reply":true,"composer_enabled":true,"last_message_id":"mid.1447692891827:b7807521a52f2bbc89","last_message_timestamp":1447692891832,"last_read_timestamp":1447692891832,"ephemeral_ttl_mode":0,"custom_like_icon":null,"titan_originated_thread_id":"\u003C1414028124518:199292367-4078056338\u0040mail.projektitan.com>"},{"thread_id":"mid.1425588143162:c152b2d07a65597f77","thread_fbid":"100008908081924","other_user_fbid":"100008908081924","participants":["fbid:100008908081924","fbid:100000075573403"],"former_participants":[],"name":"","snippet":"holanda","snippet_has_attachment":false,"snippet_attachments":[],"snippet_sender":"fbid:100008908081924","unread_count":1,"message_count":3983,"image_src":null,"timestamp_absolute":"Today","timestamp_datetime":"4:18pm","timestamp_relative":"4:18pm","timestamp_time_passed":0,"timestamp":1447690710419,"server_timestamp":1447690710419,"mute_settings":[],"is_canonical_user":true,"is_canonical":true,"is_subscribed":true,"folder":"inbox","is_archived":false,"recipients_loadable":true,"name_conversation_sheet_dismissed":false,"has_email_participant":false,"read_only":false,"can_reply":true,"composer_enabled":true,"last_message_id":"mid.1447690710393:34dd670eedad047a44","last_message_timestamp":1447690710419,"last_read_timestamp":1447632739222,"ephemeral_ttl_mode":0,"custom_like_icon":null,"titan_originated_thread_id":"\u003C1425588143279:1609183252-19714479\u0040mail.projektitan.com>"},{"thread_id":"mid.1447678410350:3dbe03ef645a833f65","thread_fbid":"1200993648","other_user_fbid":"1200993648","participants":["fbid:100000075573403","fbid:1200993648"],"former_participants":[],"name":"","snippet":"ok ok, thanks :)","snippet_has_attachment":false,"snippet_attachments":[],"snippet_sender":"fbid:100000075573403","unread_count":0,"message_count":6,"image_src":null,"timestamp_absolute":"Today","timestamp_datetime":"4:17pm","timestamp_relative":"4:17pm","timestamp_time_passed":0,"timestamp":1447690643051,"server_timestamp":1447690643051,"mute_settings":[],"is_canonical_user":true,"is_canonical":true,"is_subscribed":true,"folder":"inbox","is_archived":false,"recipients_loadable":true,"name_conversation_sheet_dismissed":false,"has_email_participant":false,"read_only":false,"can_reply":true,"composer_enabled":true,"last_message_id":"mid.1447690643029:c7fdd4f303b1724719","last_message_timestamp":1447690643051,"last_read_timestamp":1447690643051,"ephemeral_ttl_mode":0,"custom_like_icon":null,"titan_originated_thread_id":"\u003C1447678410922:0-21bca3e13bdcc739\u0040mail.projektitan.com>"},{"thread_id":"id.1658786171075059","thread_fbid":"1658786171075059","other_user_fbid":null,"participants":["fbid:100000075573403","fbid:1177521907","fbid:1743460630"],"former_participants":[],"name":"deep dark research","snippet":"marcadores amarelos? que paneleiro","snippet_has_attachment":false,"snippet_attachments":[],"snippet_sender":"fbid:100000075573403","unread_count":0,"message_count":1370,"image_src":null,"timestamp_absolute":"Today","timestamp_datetime":"2:57pm","timestamp_relative":"2:57pm","timestamp_time_passed":0,"timestamp":1447685846581,"server_timestamp":1447685846581,"mute_settings":[],"is_canonical_user":false,"is_canonical":false,"is_subscribed":true,"folder":"inbox","is_archived":false,"recipients_loadable":true,"name_conversation_sheet_dismissed":false,"has_email_participant":false,"read_only":false,"can_reply":true,"composer_enabled":true,"last_message_id":"mid.1447685846554:fbcb51591587398556","last_message_timestamp":1447685846581,"last_read_timestamp":1447685846581,"ephemeral_ttl_mode":0,"custom_like_icon":null,"titan_originated_thread_id":"\u003C1442504355748:0-2b90d1addfb43300\u0040mail.projektitan.com>"},{"thread_id":"mid.1384005816145:04aa2b90e69c6f3832","thread_fbid":"1743460630","other_user_fbid":"1743460630","participants":["fbid:1743460630","fbid:100000075573403"],"former_participants":[],"name":"","snippet":"ok eu j\u00e1 estou a ir para o tagus","snippet_has_attachment":false,"snippet_attachments":[],"snippet_sender":"fbid:1743460630","unread_count":0,"message_count":5937,"image_src":null,"timestamp_absolute":"Today","timestamp_datetime":"2:29pm","timestamp_relative":"2:29pm","timestamp_time_passed":0,"timestamp":1447684175934,"server_timestamp":1447684175934,"mute_settings":[],"is_canonical_user":true,"is_canonical":true,"is_subscribed":true,"folder":"inbox","is_archived":false,"recipients_loadable":true,"name_conversation_sheet_dismissed":false,"has_email_participant":false,"read_only":false,"can_reply":true,"composer_enabled":true,"last_message_id":"mid.1447684175873:f58333f672ead72710","last_message_timestamp":1447684175934,"last_read_timestamp":1447684175934,"ephemeral_ttl_mode":0,"custom_like_icon":null,"titan_originated_thread_id":"\u003C1384005815977:4213651338-347395723\u0040mail.projektitan.com>"},{"thread_id":"id.233038013419152","thread_fbid":"1822184745","other_user_fbid":"1822184745","participants":["fbid:100000075573403","fbid:1822184745"],"former_participants":[],"name":"","snippet":"agora s\u00f3 prai daqui a 2 semanas","snippet_has_attachment":false,"snippet_attachments":[],"snippet_sender":"fbid:100000075573403","unread_count":0,"message_count":69638,"image_src":null,"timestamp_absolute":"Sunday","timestamp_datetime":"Sunday 11:26pm","timestamp_relative":"11:26pm","timestamp_time_passed":1,"timestamp":1447630002346,"server_timestamp":1447630002346,"mute_settings":[],"is_canonical_user":true,"is_canonical":true,"is_subscribed":true,"folder":"inbox","is_archived":false,"recipients_loadable":true,"name_conversation_sheet_dismissed":false,"has_email_participant":false,"read_only":false,"can_reply":true,"composer_enabled":true,"last_message_id":"mid.1447630002324:046559c0f95e8b9011","last_message_timestamp":1447630002346,"last_read_timestamp":1447630002346,"ephemeral_ttl_mode":0,"custom_like_icon":null,"titan_originated_thread_id":"\u003C1318698367367:2150608915\u0040mail.projektitan.com>"},{"thread_id":"id.848432611896176","thread_fbid":"848432611896176","other_user_fbid":null,"participants":["fbid:100000965785084","fbid:100000422236690","fbid:100000075573403","fbid:100001163187150","fbid:100000908690443","fbid:100000937699098","fbid:100003734990957"],"former_participants":[],"name":"Direc\u00e7\u00e3o - NEIIST","snippet":"n\u00e3o estava a perceber xD","snippet_has_attachment":false,"snippet_attachments":[],"snippet_sender":"fbid:100000965785084","unread_count":0,"message_count":12984,"image_src":null,"timestamp_absolute":"Sunday","timestamp_datetime":"Sunday 9:40pm","timestamp_relative":"9:40pm","timestamp_time_passed":1,"timestamp":1447623602092,"server_timestamp":1447623602092,"mute_settings":[],"is_canonical_user":false,"is_canonical":false,"is_subscribed":true,"folder":"inbox","is_archived":false,"recipients_loadable":true,"name_conversation_sheet_dismissed":false,"has_email_participant":false,"read_only":false,"can_reply":true,"composer_enabled":true,"last_message_id":"mid.1447623602088:92413822ea38f01791","last_message_timestamp":1447623602092,"last_read_timestamp":1447623602092,"ephemeral_ttl_mode":0,"custom_like_icon":null,"titan_originated_thread_id":"\u003C1429999512293:1699106790-713725537\u0040mail.projektitan.com>"},{"thread_id":"id.556228564525003","thread_fbid":"556228564525003","other_user_fbid":null,"participants":["fbid:100000680200678","fbid:100000075573403","fbid:1743460630"],"former_participants":[],"name":"Private Investigation","snippet":"Por mim vamos nessa \ud83d\ude1b","snippet_has_attachment":false,"snippet_attachments":[],"snippet_sender":"fbid:100000680200678","unread_count":0,"message_count":1175,"image_src":null,"timestamp_absolute":"Sunday","timestamp_datetime":"Sunday 8:12pm","timestamp_relative":"8:12pm","timestamp_time_passed":1,"timestamp":1447618331711,"server_timestamp":1447618331711,"mute_settings":[],"is_canonical_user":false,"is_canonical":false,"is_subscribed":true,"folder":"inbox","is_archived":false,"recipients_loadable":true,"name_conversation_sheet_dismissed":false,"has_email_participant":false,"read_only":false,"can_reply":true,"composer_enabled":true,"last_message_id":"mid.1447618331706:22539e8ee087a3db25","last_message_timestamp":1447618331711,"last_read_timestamp":1447618331711,"ephemeral_ttl_mode":0,"custom_like_icon":null,"titan_originated_thread_id":"\u003C1443366746448:0-af6bf08293835fdd\u0040mail.projektitan.com>"},{"thread_id":"4be3b2890d92467690e2440a479098aa","thread_fbid":"100001580284563","other_user_fbid":"100001580284563","participants":["fbid:100001580284563","fbid:100000075573403"],"former_participants":[],"name":"","snippet":"\u00e9 so amanha e ter\u00e7a os jogos :p","snippet_has_attachment":false,"snippet_attachments":[],"snippet_sender":"fbid:100001580284563","unread_count":0,"message_count":72687,"image_src":null,"timestamp_absolute":"Sunday","timestamp_datetime":"Sunday 1:25pm","timestamp_relative":"Sun","timestamp_time_passed":1,"timestamp":1447593941081,"server_timestamp":1447593941081,"mute_settings":[],"is_canonical_user":true,"is_canonical":true,"is_subscribed":true,"folder":"inbox","is_archived":false,"recipients_loadable":true,"name_conversation_sheet_dismissed":false,"has_email_participant":false,"read_only":false,"can_reply":true,"composer_enabled":true,"last_message_id":"mid.1447593941074:e4f9f1adcde59c9306","last_message_timestamp":1447593941081,"last_read_timestamp":1447593941081,"ephemeral_ttl_mode":0,"custom_like_icon":null,"titan_originated_thread_id":"\u003C1256758813\u0040mail.projektitan.com>"},{"thread_id":"id.192858150790473","thread_fbid":"1177521907","other_user_fbid":"1177521907","participants":["fbid:100000075573403","fbid:1177521907"],"former_participants":[],"name":"","snippet":"Demos alto rape na bot","snippet_has_attachment":false,"snippet_attachments":[],"snippet_sender":"fbid:100000075573403","unread_count":0,"message_count":21250,"image_src":null,"timestamp_absolute":"Saturday","timestamp_datetime":"Saturday 11:58pm","timestamp_relative":"Sat","timestamp_time_passed":1,"timestamp":1447545497403,"server_timestamp":1447545497403,"mute_settings":[],"is_canonical_user":true,"is_canonical":true,"is_subscribed":true,"folder":"inbox","is_archived":false,"recipients_loadable":true,"name_conversation_sheet_dismissed":false,"has_email_participant":false,"read_only":false,"can_reply":true,"composer_enabled":true,"last_message_id":"mid.1447545497401:388b739551d16a4a39","last_message_timestamp":1447545497403,"last_read_timestamp":1447545497403,"ephemeral_ttl_mode":0,"custom_like_icon":null,"titan_originated_thread_id":"\u003C1319567972200:848413439\u0040mail.projektitan.com>"},{"thread_id":"id.480684008722873","thread_fbid":"480684008722873","other_user_fbid":null,"participants":["fbid:1743460630","fbid:100000075573403","fbid:1177521907"],"former_participants":[],"name":"","snippet":"mesmo \u00e0 cara podre fogo","snippet_has_attachment":false,"snippet_attachments":[],"snippet_sender":"fbid:1743460630","unread_count":0,"message_count":3,"image_src":null,"timestamp_absolute":"Wednesday","timestamp_datetime":"Wednesday 12:50pm","timestamp_relative":"Wed","timestamp_time_passed":1,"timestamp":1447246213469,"server_timestamp":1447246213469,"mute_settings":[],"is_canonical_user":false,"is_canonical":false,"is_subscribed":true,"folder":"inbox","is_archived":false,"recipients_loadable":true,"name_conversation_sheet_dismissed":false,"has_email_participant":false,"read_only":false,"can_reply":true,"composer_enabled":true,"last_message_id":"mid.1447246213344:fe3e162ad7f5b7ce92","last_message_timestamp":1447246213469,"last_read_timestamp":1447246213469,"ephemeral_ttl_mode":0,"custom_like_icon":null,"titan_originated_thread_id":"\u003C1447245457505:0-1598827d\u0040mail.projektitan.com>"},{"thread_id":"mid.1425645828409:127198b7ea7322b828","thread_fbid":"100000965785084","other_user_fbid":"100000965785084","participants":["fbid:100000965785084","fbid:100000075573403"],"former_participants":[],"name":"","snippet":"Ahah sim parece um desfile","snippet_has_attachment":false,"snippet_attachments":[],"snippet_sender":"fbid:100000965785084","unread_count":0,"message_count":3159,"image_src":null,"timestamp_absolute":"Tuesday","timestamp_datetime":"Tuesday 4:47pm","timestamp_relative":"Tue","timestamp_time_passed":1,"timestamp":1447174075602,"server_timestamp":1447174075602,"mute_settings":[],"is_canonical_user":true,"is_canonical":true,"is_subscribed":true,"folder":"inbox","is_archived":false,"recipients_loadable":true,"name_conversation_sheet_dismissed":false,"has_email_participant":false,"read_only":false,"can_reply":true,"composer_enabled":true,"last_message_id":"mid.1447174075599:88cba8ebc603b3c274","last_message_timestamp":1447174075602,"last_read_timestamp":1447174075602,"ephemeral_ttl_mode":0,"custom_like_icon":null,"titan_originated_thread_id":"\u003C1425645828647:0-e8ed974600000000\u0040mail.projektitan.com>"},{"thread_id":"mid.1424445796972:de44c7e29c84b68031","thread_fbid":"1441326279","other_user_fbid":"1441326279","participants":["fbid:1441326279","fbid:100000075573403"],"former_participants":[],"name":"","snippet":"T\u00e1s a\u00ed?","snippet_has_attachment":false,"snippet_attachments":[],"snippet_sender":"fbid:1441326279","unread_count":0,"message_count":65,"image_src":null,"timestamp_absolute":"November 9","timestamp_datetime":"November 9th, 4:37pm","timestamp_relative":"Mon","timestamp_time_passed":3,"timestamp":1447087027860,"server_timestamp":1447087027860,"mute_settings":[],"is_canonical_user":true,"is_canonical":true,"is_subscribed":true,"folder":"inbox","is_archived":false,"recipients_loadable":true,"name_conversation_sheet_dismissed":false,"has_email_participant":false,"read_only":false,"can_reply":true,"composer_enabled":true,"last_message_id":"mid.1447087027758:a91e8871dcd967bf42","last_message_timestamp":1447087027860,"last_read_timestamp":1447087027860,"ephemeral_ttl_mode":0,"custom_like_icon":null,"titan_originated_thread_id":"\u003C1424445796808:2072628397-812713027\u0040mail.projektitan.com>"},{"thread_id":"msg.b4c92fc45c5dc4cab4a3018ebedd2ef912","thread_fbid":"1151355596","other_user_fbid":"1151355596","participants":["fbid:1151355596","fbid:100000075573403"],"former_participants":[],"name":"","snippet":"Epah.. XD","snippet_has_attachment":false,"snippet_attachments":[],"snippet_sender":"fbid:1151355596","unread_count":0,"message_count":256,"image_src":null,"timestamp_absolute":"November 7","timestamp_datetime":"November 7th, 2:34pm","timestamp_relative":"Nov 7","timestamp_time_passed":3,"timestamp":1446906851284,"server_timestamp":1446906851284,"mute_settings":[],"is_canonical_user":true,"is_canonical":true,"is_subscribed":true,"folder":"inbox","is_archived":false,"recipients_loadable":true,"name_conversation_sheet_dismissed":false,"has_email_participant":false,"read_only":false,"can_reply":true,"composer_enabled":true,"last_message_id":"mid.1446906851282:8176002bc603b3c220","last_message_timestamp":1446906851284,"last_read_timestamp":1446906851284,"ephemeral_ttl_mode":0,"custom_like_icon":null,"titan_originated_thread_id":"\u003C1343607527052:1638671258-4221325064\u0040mail.projektitan.com>"},{"thread_id":"8a14fada3efe47f6ae8cc88a5c8be581","thread_fbid":"100000403782497","other_user_fbid":"100000403782497","participants":["fbid:100000075573403","fbid:100000403782497"],"former_participants":[],"name":"","snippet":"a\u00ed no redondo?","snippet_has_attachment":false,"snippet_attachments":[],"snippet_sender":"fbid:100000075573403","unread_count":0,"message_count":4579,"image_src":null,"timestamp_absolute":"November 5","timestamp_datetime":"November 5th, 10:44pm","timestamp_relative":"Nov 5","timestamp_time_passed":3,"timestamp":1446763487128,"server_timestamp":1446763487128,"mute_settings":[],"is_canonical_user":true,"is_canonical":true,"is_subscribed":true,"folder":"inbox","is_archived":false,"recipients_loadable":true,"name_conversation_sheet_dismissed":false,"has_email_participant":false,"read_only":false,"can_reply":true,"composer_enabled":true,"last_message_id":"mid.1446763487126:ae867272a2681b0257","last_message_timestamp":1446763487128,"last_read_timestamp":1446763487128,"ephemeral_ttl_mode":0,"custom_like_icon":null,"titan_originated_thread_id":"\u003C3558291556\u0040mail.projektitan.com>"},{"thread_id":"mid.1393636086562:d86daaf6d0af39a590","thread_fbid":"100000200171097","other_user_fbid":"100000200171097","participants":["fbid:100000075573403","fbid:100000200171097"],"former_participants":[],"name":"","snippet":";)","snippet_has_attachment":false,"snippet_attachments":[],"snippet_sender":"fbid:100000075573403","unread_count":0,"message_count":716,"image_src":null,"timestamp_absolute":"November 5","timestamp_datetime":"November 5th, 6:25pm","timestamp_relative":"Nov 5","timestamp_time_passed":3,"timestamp":1446747914989,"server_timestamp":1446747914989,"mute_settings":[],"is_canonical_user":true,"is_canonical":true,"is_subscribed":true,"folder":"inbox","is_archived":false,"recipients_loadable":true,"name_conversation_sheet_dismissed":false,"has_email_participant":false,"read_only":false,"can_reply":true,"composer_enabled":true,"last_message_id":"mid.1446747914987:4ae4fd66e9b9e58340","last_message_timestamp":1446747914989,"last_read_timestamp":1446747914989,"ephemeral_ttl_mode":0,"custom_like_icon":null,"titan_originated_thread_id":"\u003C1393636086559:0-40e52b83\u0040mail.projektitan.com>"},{"thread_id":"id.197203630350414","thread_fbid":"1100406757","other_user_fbid":"1100406757","participants":["fbid:100000075573403","fbid:1100406757"],"former_participants":[],"name":"","snippet":"todos os dias","snippet_has_attachment":false,"snippet_attachments":[],"snippet_sender":"fbid:100000075573403","unread_count":0,"message_count":4211,"image_src":null,"timestamp_absolute":"November 4","timestamp_datetime":"November 4th, 10:43pm","timestamp_relative":"Nov 4","timestamp_time_passed":3,"timestamp":1446677002314,"server_timestamp":1446677002314,"mute_settings":[],"is_canonical_user":true,"is_canonical":true,"is_subscribed":true,"folder":"inbox","is_archived":false,"recipients_loadable":true,"name_conversation_sheet_dismissed":false,"has_email_participant":false,"read_only":false,"can_reply":true,"composer_enabled":true,"last_message_id":"mid.1446677002311:8e84129ba54669a158","last_message_timestamp":1446677002314,"last_read_timestamp":1446677002314,"ephemeral_ttl_mode":0,"custom_like_icon":null,"titan_originated_thread_id":"\u003C1316983918571:1301306539\u0040mail.projektitan.com>"},{"thread_id":"id.520396711471563","thread_fbid":"520396711471563","other_user_fbid":null,"participants":["fbid:1100406757","fbid:100001580284563","fbid:100000075573403","fbid:100000244762909","fbid:1151355596","fbid:100000510129734","fbid:1268561902","fbid:100000385986475","fbid:100002128265139"],"former_participants":[],"name":"","snippet":"Transfer\u00eancia feita. Porque eu n\u00e3o sou caloteira como algumas pessoas cof cof","snippet_has_attachment":false,"snippet_attachments":[],"snippet_sender":"fbid:1100406757","unread_count":0,"message_count":74,"image_src":null,"timestamp_absolute":"November 4","timestamp_datetime":"November 4th, 10:32pm","timestamp_relative":"Nov 4","timestamp_time_passed":3,"timestamp":1446676343461,"server_timestamp":1446676343461,"mute_settings":[],"is_canonical_user":false,"is_canonical":false,"is_subscribed":true,"folder":"inbox","is_archived":false,"recipients_loadable":true,"name_conversation_sheet_dismissed":false,"has_email_participant":false,"read_only":false,"can_reply":true,"composer_enabled":true,"last_message_id":"mid.1446676343454:2c3fcd3b6b839f8056","last_message_timestamp":1446676343461,"last_read_timestamp":1446676343461,"ephemeral_ttl_mode":0,"custom_like_icon":null,"titan_originated_thread_id":"\u003C1446585242516:0-49288469605d3467\u0040mail.projektitan.com>"},{"thread_id":"id.1666689320241533","thread_fbid":"1666689320241533","other_user_fbid":null,"participants":["fbid:100001580284563","fbid:100000075573403","fbid:100001076702794"],"former_participants":[],"name":"","snippet":"\u003C3","snippet_has_attachment":false,"snippet_attachments":[],"snippet_sender":"fbid:100001580284563","unread_count":0,"message_count":18,"image_src":null,"timestamp_absolute":"November 2","timestamp_datetime":"November 2nd, 7:04pm","timestamp_relative":"Nov 2","timestamp_time_passed":3,"timestamp":1446491060806,"server_timestamp":1446491060806,"mute_settings":[],"is_canonical_user":false,"is_canonical":false,"is_subscribed":true,"folder":"inbox","is_archived":false,"recipients_loadable":true,"name_conversation_sheet_dismissed":false,"has_email_participant":false,"read_only":false,"can_reply":true,"composer_enabled":true,"last_message_id":"mid.1446491060809:dc2da67255176a2795","last_message_timestamp":1446491060806,"last_read_timestamp":1446491060806,"ephemeral_ttl_mode":0,"custom_like_icon":null,"titan_originated_thread_id":"\u003C1444586807804:0-02477f5c\u0040mail.projektitan.com>"},{"thread_id":"mid.1445433272027:5ac1234649cbf56755","thread_fbid":"100000367063318","other_user_fbid":"100000367063318","participants":["fbid:100000075573403","fbid:100000367063318"],"former_participants":[],"name":"","snippet":"Pois, havia uns quantos com solu\u00e7oes maradas xD","snippet_has_attachment":false,"snippet_attachments":[],"snippet_sender":"fbid:100000075573403","unread_count":0,"message_count":96,"image_src":null,"timestamp_absolute":"October 31","timestamp_datetime":"October 31st, 12:10am","timestamp_relative":"Oct 31","timestamp_time_passed":3,"timestamp":1446250257360,"server_timestamp":1446250257360,"mute_settings":[],"is_canonical_user":true,"is_canonical":true,"is_subscribed":true,"folder":"inbox","is_archived":false,"recipients_loadable":true,"name_conversation_sheet_dismissed":false,"has_email_participant":false,"read_only":false,"can_reply":true,"composer_enabled":true,"last_message_id":"mid.1446250257357:2ee158a1cfb5ffe973","last_message_timestamp":1446250257360,"last_read_timestamp":1446250257360,"ephemeral_ttl_mode":0,"custom_like_icon":null,"titan_originated_thread_id":"\u003C1445433272231:0-71ac1a65d7ba1654\u0040mail.projektitan.com>"},{"thread_id":"mid.1446247628644:22517b3a4e712bf190","thread_fbid":"100000361626019","other_user_fbid":"100000361626019","participants":["fbid:100000361626019","fbid:100000075573403"],"former_participants":[],"name":"","snippet":"VOTA no FISGA sff OBG abra\u00e7o Barradas","snippet_has_attachment":false,"snippet_attachments":[],"snippet_sender":"fbid:100000361626019","unread_count":0,"message_count":2,"image_src":null,"timestamp_absolute":"October 30","timestamp_datetime":"October 30th, 11:27pm","timestamp_relative":"Oct 30","timestamp_time_passed":3,"timestamp":1446247639552,"server_timestamp":1446247639552,"mute_settings":[],"is_canonical_user":true,"is_canonical":true,"is_subscribed":true,"folder":"inbox","is_archived":false,"recipients_loadable":true,"name_conversation_sheet_dismissed":false,"has_email_participant":false,"read_only":false,"can_reply":true,"composer_enabled":true,"last_message_id":"mid.1446247639549:b52d3a29682e3d9a91","last_message_timestamp":1446247639552,"last_read_timestamp":1446247639552,"ephemeral_ttl_mode":0,"custom_like_icon":null,"titan_originated_thread_id":"\u003C1446247623435:0-3ea4de32302c67c8\u0040mail.projektitan.com>"},{"thread_id":"mid.1414028124846:ddce568db74c17b061","thread_fbid":"100000680200678","other_user_fbid":"100000680200678","participants":["fbid:100000680200678","fbid:100000075573403"],"former_participants":[],"name":"","snippet":"RAMAS_IS_THE_WORD","snippet_has_attachment":false,"snippet_attachments":[],"snippet_sender":"fbid:100000680200678","unread_count":0,"message_count":776,"image_src":null,"timestamp_absolute":"Today","timestamp_datetime":"4:54pm","timestamp_relative":"4:54pm","timestamp_time_passed":0,"timestamp":1447692891832,"server_timestamp":1447692891832,"mute_settings":[],"is_canonical_user":true,"is_canonical":true,"is_subscribed":true,"folder":"inbox","is_archived":false,"recipients_loadable":true,"name_conversation_sheet_dismissed":false,"has_email_participant":false,"read_only":false,"can_reply":true,"composer_enabled":true,"last_message_id":"mid.1447692891827:b7807521a52f2bbc89","last_message_timestamp":1447692891832,"last_read_timestamp":1447692891832,"ephemeral_ttl_mode":0,"custom_like_icon":null,"titan_originated_thread_id":"\u003C1414028124518:199292367-4078056338\u0040mail.projektitan.com>"}],"roger":{"100000680200678":{"100000680200678":1447692891832},"100008908081924":{"100008908081924":1447690710419},"1200993648":{"1200993648":1447690643051},"1658786171075059":{"1177521907":1447685846581,"1743460630":1447685846581},"1743460630":{"1743460630":1447684175934},"1822184745":{"1822184745":1447630002346},"848432611896176":{"100000422236690":1447623602092,"100000908690443":1447623602092,"100000937699098":1447623602092,"100000965785084":1447622877685,"100001163187150":1447614119855,"100003734990957":1447623602092},"556228564525003":{"1743460630":1447618331711,"100000680200678":1447618019788},"100001580284563":{"100001580284563":1447593941081},"1177521907":{"1177521907":1447545497403},"480684008722873":{"1177521907":1447246213469,"1743460630":1447245647159},"100000965785084":{"100000965785084":1447174075602},"1441326279":{"1441326279":1447087027860},"1151355596":{"1151355596":1446906851284},"100000403782497":{"100000403782497":1446763487128},"100000200171097":{"100000200171097":1446747914989},"1100406757":{"1100406757":1446677002314},"520396711471563":{"1100406757":1446676223761,"1151355596":1446676343461,"1268561902":1446752317154,"100000244762909":1446676343461,"100000385986475":1446672331217,"100000510129734":1446676343461,"100001580284563":1446676343461,"100002128265139":1446676343461},"1666689320241533":[],"100000367063318":[],"100000361626019":{"100000361626019":1446247639552}},"message_blocked_ids":[],"delivery_receipts":[{"other_user_fbid":"100000680200678","thread_fbid":null,"time":1447692882905},{"other_user_fbid":"100008908081924","thread_fbid":null,"time":1447630416289},{"other_user_fbid":"1200993648","thread_fbid":null,"time":1447690643051},{"other_user_fbid":null,"thread_fbid":"1658786171075059","time":1447685846581},{"other_user_fbid":"1743460630","thread_fbid":null,"time":1447682200117},{"other_user_fbid":"1822184745","thread_fbid":null,"time":1447424505567},{"other_user_fbid":null,"thread_fbid":"848432611896176","time":1445788055379},{"other_user_fbid":null,"thread_fbid":"556228564525003","time":1447020952355},{"other_user_fbid":"100001580284563","thread_fbid":null,"time":1447593928846},{"other_user_fbid":"1177521907","thread_fbid":null,"time":1447545497403},{"other_user_fbid":null,"thread_fbid":"480684008722873","time":1447245647159},{"other_user_fbid":"100000965785084","thread_fbid":null,"time":1447171066213},{"other_user_fbid":"1441326279","thread_fbid":null,"time":1443175381326},{"other_user_fbid":"1151355596","thread_fbid":null,"time":1446906074590},{"other_user_fbid":"100000403782497","thread_fbid":null,"time":1446763487128},{"other_user_fbid":"100000200171097","thread_fbid":null,"time":1446747914989},{"other_user_fbid":"1100406757","thread_fbid":null,"time":1446677002314},{"other_user_fbid":null,"thread_fbid":"520396711471563","time":1446585548699},{"other_user_fbid":null,"thread_fbid":"1666689320241533","time":1446490901504},{"other_user_fbid":"100000367063318","thread_fbid":null,"time":1446250257360},{"other_user_fbid":"100000680200678","thread_fbid":null,"time":1447692882905}],"payload_source":"server_initial_data"},"lastReadThreadKey":"100000680200678","mobileAppInfo":{"hasMessenger":true,"messengerPushable":true},"isBrowserUnsupported":false,"isBetaEnabled":null,"promotionData":null}],[]],["TimeSlice","setLogging",[],[0,0.01],[]],["ArtilleryReporting","init",[],[],[]],["Artillery","enable",[],[],[]],["Artillery","setPageTraceID",[],["6217794675602892945"],[]],["Artillery","setPageProperties",[],[{"active_policies":["messenger.com"]}],[]],["NavigationMetrics","setPage",[],[{"page":"XMessengerDotComMainController","page_type":"normal","page_uri":"https:\/\/www.messenger.com\/","serverLID":"6217794675602892945"}],[]]]});}, "ServerJS define", {"root":true})();
for (;;);{"__ar":1,"payload":{"actions":[{"message_id":"mid.1447678410350:3dbe03ef645a833f65","threading_id":null,"offline_threading_id":"6072003349645595009","author":"fbid:100000075573403","author_email":"100000075573403\u0040facebook.com","ephemeral_ttl_mode":null,"timestamp":1447678410571,"timestamp_absolute":"Today","timestamp_relative":"12:53pm","timestamp_datetime":"12:53pm","timestamp_time_passed":0,"is_unread":false,"is_forward":false,"is_filtered_content":false,"is_filtered_content_bh":false,"is_filtered_content_account":false,"is_filtered_content_quasar":false,"is_filtered_content_invalid_app":false,"forward_count":0,"forward_message_ids":[],"source":"source:titan:orca","source_tags":["source:messenger","source:mobile"],"is_spoof_warning":false,"folder":"inbox","thread_fbid":"1200993648","other_user_fbid":"1200993648","body":"Ol\u00e1, os membros do teu grupo de SS j\u00e1 se distribu\u00edram para fazer as apresenta\u00e7\u00f5es de que a prof falou hj na aula? A Beatriz Santos est\u00e1 \u00e0 procura de um par.","subject":null,"has_attachment":false,"attachments":[],"raw_attachments":null,"ranges":[],"thread_id":"mid.1447678410350:3dbe03ef645a833f65","action_id":null,"action_type":"ma-type:user-generated-message"},{"message_id":"mid.1447678573453:ab5c8f59d9eadf2b77","threading_id":null,"offline_threading_id":"6072004031339451977","author":"fbid:1200993648","author_email":"1200993648\u0040facebook.com","ephemeral_ttl_mode":null,"timestamp":1447678573707,"timestamp_absolute":"Today","timestamp_relative":"12:56pm","timestamp_datetime":"12:56pm","timestamp_time_passed":0,"is_unread":false,"is_forward":false,"is_filtered_content":false,"is_filtered_content_bh":false,"is_filtered_content_account":false,"is_filtered_content_quasar":false,"is_filtered_content_invalid_app":false,"forward_count":0,"forward_message_ids":[],"source":"source:titan:m_basic","source_tags":["source:mobile"],"is_spoof_warning":false,"folder":"inbox","thread_fbid":"1200993648","other_user_fbid":"1200993648","body":"Ol\u00e1! Ainda n\u00e3o percebi isso porque me atrasei, se formos 3 temos q nos dividir \u00e9?","subject":null,"has_attachment":false,"attachments":[],"raw_attachments":null,"ranges":[],"thread_id":"mid.1447678410350:3dbe03ef645a833f65","action_id":null,"action_type":"ma-type:user-generated-message"},{"message_id":"mid.1447678588646:ed2742c8c16e77db48","threading_id":null,"offline_threading_id":"6072004091420876916","author":"fbid:100000075573403","author_email":"100000075573403\u0040facebook.com","ephemeral_ttl_mode":null,"timestamp":1447678588649,"timestamp_absolute":"Today","timestamp_relative":"12:56pm","timestamp_datetime":"12:56pm","timestamp_time_passed":0,"is_unread":false,"is_forward":false,"is_filtered_content":false,"is_filtered_content_bh":false,"is_filtered_content_account":false,"is_filtered_content_quasar":false,"is_filtered_content_invalid_app":false,"forward_count":0,"forward_message_ids":[],"source":"source:chat:orca","source_tags":["source:messenger","source:chat","source:mobile"],"is_spoof_warning":false,"folder":"inbox","thread_fbid":"1200993648","other_user_fbid":"1200993648","body":"Ya parece que sim","subject":null,"has_attachment":false,"attachments":[],"raw_attachments":null,"ranges":[],"thread_id":"mid.1447678410350:3dbe03ef645a833f65","action_id":null,"action_type":"ma-type:user-generated-message"},{"message_id":"mid.1447678623082:ed2742c8dcd967bf01","threading_id":null,"offline_threading_id":"6072004238769367900","author":"fbid:100000075573403","author_email":"100000075573403\u0040facebook.com","ephemeral_ttl_mode":null,"timestamp":1447678623084,"timestamp_absolute":"Today","timestamp_relative":"12:57pm","timestamp_datetime":"12:57pm","timestamp_time_passed":0,"is_unread":false,"is_forward":false,"is_filtered_content":false,"is_filtered_content_bh":false,"is_filtered_content_account":false,"is_filtered_content_quasar":false,"is_filtered_content_invalid_app":false,"forward_count":0,"forward_message_ids":[],"source":"source:chat:orca","source_tags":["source:messenger","source:chat","source:mobile"],"is_spoof_warning":false,"folder":"inbox","thread_fbid":"1200993648","other_user_fbid":"1200993648","body":"Eu como j\u00e1 tava num grupo de 2, n mexe mais xD","subject":null,"has_attachment":false,"attachments":[],"raw_attachments":null,"ranges":[],"thread_id":"mid.1447678410350:3dbe03ef645a833f65","action_id":null,"action_type":"ma-type:user-generated-message"},{"message_id":"mid.1447688421387:2e94f24848a8ba2f33","threading_id":null,"offline_threading_id":"6072045323168965339","author":"fbid:1200993648","author_email":"1200993648\u0040facebook.com","ephemeral_ttl_mode":null,"timestamp":1447688421401,"timestamp_absolute":"Today","timestamp_relative":"3:40pm","timestamp_datetime":"3:40pm","timestamp_time_passed":0,"is_unread":false,"is_forward":false,"is_filtered_content":false,"is_filtered_content_bh":false,"is_filtered_content_account":false,"is_filtered_content_quasar":false,"is_filtered_content_invalid_app":false,"forward_count":0,"forward_message_ids":[],"source":"source:chat:web","source_tags":["source:chat"],"is_spoof_warning":false,"folder":"inbox","thread_fbid":"1200993648","other_user_fbid":"1200993648","body":"nao sabia! vou ver disso ent\u00e3o, e depois pode ser que um de n\u00f3s fique com ela se tivermos mesmo que dividir","subject":null,"has_attachment":false,"attachments":[],"raw_attachments":null,"ranges":[],"thread_id":"mid.1447678410350:3dbe03ef645a833f65","action_id":null,"action_type":"ma-type:user-generated-message"},{"message_id":"mid.1447690643029:c7fdd4f303b1724719","threading_id":null,"offline_threading_id":"6072054657258124675","author":"fbid:100000075573403","author_email":"100000075573403\u0040facebook.com","ephemeral_ttl_mode":null,"timestamp":1447690643051,"timestamp_absolute":"Today","timestamp_relative":"4:17pm","timestamp_datetime":"4:17pm","timestamp_time_passed":0,"is_unread":false,"is_forward":false,"is_filtered_content":false,"is_filtered_content_bh":false,"is_filtered_content_account":false,"is_filtered_content_quasar":false,"is_filtered_content_invalid_app":false,"forward_count":0,"forward_message_ids":[],"source":"source:chat:web","source_tags":["source:chat"],"is_spoof_warning":false,"folder":"inbox","thread_fbid":"1200993648","other_user_fbid":"1200993648","body":"ok ok, thanks :)","subject":null,"has_attachment":false,"attachments":[],"raw_attachments":null,"ranges":[],"thread_id":"mid.1447678410350:3dbe03ef645a833f65","action_id":null,"action_type":"ma-type:user-generated-message"}],"end_of_history":[{"type":"thread","id":"mid.1447678410350:3dbe03ef645a833f65","fbid":"1200993648"}],"roger":{"1200993648":{"1200993648":1447690643051},"mid.1447678410350:3dbe03ef645a833f65":{"1200993648":1447690643051}},"message_blocked_ids":[],"payload_source":"server_fetch_thread_info"},"bootloadable":{},"ixData":{},"lid":"6217794731473638926"}
__d('AvailableList',['Arbiter','ArbiterMixin','AsyncRequest','AvailableListConstants','AvailableListInitialData','BanzaiODS','Bootloader','ChannelConstants','ChatConfig','ChatproxyPresence','ChatproxyPresenceStatus','ChatproxyLastMobileActiveTimes','ChatVisibility','ErrorUtils','JSLogger','LastMobileActiveTimes','PresencePoller','PresencePrivacy','PresenceStatus','Run','ServerTime','ShortProfiles','TypingStates','debounceAcrossTransitions','emptyFunction','requireWeak'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba,ca,da,ea,fa,ga){'use strict';if(c.__markCompiled)c.__markCompiled();m.setEntitySample('presence',.0001);var ha=babelHelpers._extends({},k,i);ha.subscribe([k.ON_AVAILABILITY_CHANGED,k.ON_UPDATE_ERROR],function(sa,ta){h.inform(sa,ta);});var ia=ea(function(){return ha.inform(k.ON_AVAILABILITY_CHANGED);},0);function ja(sa,ta,ua,va,wa){var xa=z.set(sa,ta,ua,va,wa);r.set(sa,ta,ua,va,wa);if(xa){var ya=ea(function(){return ha.inform(k.ON_AVAILABILITY_CHANGED,sa);},0);ya();}}function ka(sa){var ta=sa.payload.availability||{};for(var ua in ta)ja(ua&&ua.toString(),ta[ua].a,true,'mercury_tabs',ta[ua].c,ta[ua].p);}function la(){if(!l.gk_replace_available_list_chatproxy)pa&&pa.restart();}function ma(){if(!l.gk_replace_available_list_chatproxy)pa&&pa.stop();}function na(sa){var ta=ha.getDebugInfo(sa),ua=ta.presence==k.ACTIVE;new j('/ajax/mercury/tabs_presence.php').setData({target_id:sa,to_online:ua,presence_source:ta.overlaySource,presence_time:ta.overlayTime}).setHandler(ka).setErrorHandler(fa).setAllowCrossPageTransition(true).send();}function oa(sa,ta){ta.chat_config=p.getDebugInfo();ta.available_list_debug_info={};z.getAvailableIDs().forEach(function(ua){ta.available_list_debug_info[ua]=ha.getDebugInfo(ua);});ta.available_list_poll_interval=ha._poller&&ha._poller.getInterval();}var pa=undefined,qa=undefined;if(l.gk_replace_available_list_chatproxy){try{qa=new q(function(event){ha.inform(event);});qa.subscribe();}catch(ra){u.reportError&&u.reportError(ra,false);}}else try{pa=new x(function(event){ha.inform(event);});}catch(ra){u.reportError&&u.reportError(ra,false);}Object.assign(ha,{getChatproxyPresenceObject:function(){return qa;},getPresencePollerObject:function(){return pa;},get:function(sa){return z.get(sa);},updateForID:function(sa){na(sa);if(l.gk_replace_available_list_chatproxy){if(y.getVisibility()==y.ONLINE)aa.onAfterLoad(function(){return (n.loadModules(["ChannelManager","ChannelTransport"],function(ta,ua){ua.sendAdditionalBuddyRequest(ta.getCompleteConfig(),sa);}));});}else pa&&pa.addExtraBuddy(sa);},getWebChatNotification:function(){if(l.gk_replace_available_list_chatproxy){return qa&&qa.getWebChatNotification&&qa.getWebChatNotification();}else return pa&&pa.getWebChatNotification&&pa.getWebChatNotification();},isUserIdle:function(){if(!l.gk_replace_available_list_chatproxy)return pa&&pa.getIsUserIdle();},isReady:function(){if(!l.gk_replace_available_list_chatproxy)return !!pa;return !!qa;},set:function(sa,ta,ua,va){ja(sa,ta,true,ua,va);},update:function(){if(!l.gk_replace_available_list_chatproxy)pa&&pa.forceUpdate();},isIdle:function(sa){return ha.get(sa)==k.IDLE;},getDebugInfo:function(sa){var ta=z.getDebugInfo(sa),ua=ca.getNow(sa);if(ua)ta.name=ua.name;return ta;}});if(!l.gk_replace_available_list_chatproxy)pa&&pa.start();h.subscribe(v.DUMP_EVENT,oa);h.subscribe('chat-visibility/go-online',la);h.subscribe('chat-visibility/go-offline',ma);y.subscribe(['privacy-changed','privacy-availability-changed','privacy-user-presence-response'],ia);ga('ChannelConnection',function(sa){return (sa.subscribe([sa.CONNECTED,sa.RECONNECTING,sa.SHUTDOWN,sa.MUTE_WARNING,sa.UNMUTE_WARNING],ia));});h.subscribe(o.getArbiterType('buddylist_overlay'),function(sa,ta){var ua={},va=ta.obj.overlay;for(var wa in va){ha.set(wa,va[wa].a,va[wa].s||'channel',va[wa].vc);if(va[wa].la)ua[wa]=va[wa].la;}w.update(ua);s.update(ua);});h.subscribe([o.getArbiterType('typ'),o.getArbiterType('ttyp')],function(sa,ta){var ua=ta.obj;if(ua.st===da.TYPING){var va=ua.from;if(t.isOnline()){m.bumpEntityKey('presence','stale_presence_check_typing');var wa=z.get(va);if(wa!=k.ACTIVE){var xa=w.get(va)*1000,ya=ba.get();if(!xa){m.bumpEntityKey('presence','no_detailed_presence_typing');}else if(ya-xa>5*60*1000){var za='stale_presence_typing',ab=ya-xa;if(ab<10*60*1000){za+='600';}else if(ab<60*60*1000)za+='3600';m.bumpEntityKey('presence',za);}}}ha.set(va&&va.toString(),k.ACTIVE,'channel-typing');}});h.subscribe(o.getArbiterType('messaging'),function(sa,ta){if(!t.isOnline())return;var ua=ta.obj;if(ua.message&&ua.message.timestamp&&ua.message.sender_fbid){var va=ba.get(),wa=ua.message.timestamp;if(va-wa<2*60*1000){m.bumpEntityKey('presence','stale_presence_check');var xa=ua.message.sender_fbid,ya=z.get(xa);if(ya==k.ACTIVE)return;var za=w.get(xa)*1000;if(!za){m.bumpEntityKey('presence','no_detailed_presence');}else if(wa-za>5*60*1000){var ab='stale_presence',bb=wa-za;if(bb<10*60*1000){ab+='600';}else if(bb<60*60*1000)ab+='3600';m.bumpEntityKey('presence',ab);}}}});b.AvailableList=f.exports=ha;},null);
__d('MercuryTimestampTracker',['MercuryActionType','MercuryPayloadSource','MercurySingletonMixin','MercuryDispatcher'],function a(b,c,d,e,f,g,h,i,j,k){if(c.__markCompiled)c.__markCompiled();function l(m){this._fbid=m;this._dispatcher=k.getForFBID(this._fbid);this._lastTimestamp=0;this._dispatcher.subscribe('update-messages',(function(n,o){if(!o.actions||!o.actions.length)return;if(o.payload_source==i.CLIENT_SEND_MESSAGE||o.payload_source==i.UNKNOWN)return;for(var p=0;p<o.actions.length;p++){var q=o.actions[p],r=q.action_type;if(r==h.USER_GENERATED_MESSAGE&&q.thread_id&&q.timestamp>this._lastTimestamp)this._lastTimestamp=q.timestamp;}}).bind(this));}Object.assign(l.prototype,{getLastUserMessageTimestamp:function(){return this._lastTimestamp;}});Object.assign(l,j);f.exports=l;},null);
__d('ChatTypeaheadBehavior',['BanzaiLogger','ChatOpenTab','ChatTypeaheadEvent','CSS','MercuryTypeaheadConstants','Parent','Rect','cx'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o){if(c.__markCompiled)c.__markCompiled();function p(r,s){var t=m.byClass(r,"_4oes");if(t)k.conditionClass(t,"_5q83",s);}function q(r){'use strict';this._typeahead=r;this._loggedQuery=false;}q.prototype.enable=function(){'use strict';var r=this._typeahead;this._subscriptions=[r.subscribe('focus',(function(){this._loggedQuery=false;r.getData().refreshData();p(r.getElement(),true);}).bind(this)),r.subscribe('blur',(function(s){if(this._loggedQuery)h.log('ChatTypeaheadLoggerConfig',{event:j.ABANDONED_QUERY,max_results:r.getData().getMaxResults(),num_friend_results:r.getView().results.filter(function(t){return t.render_type===l.FRIEND_TYPE;}).length,query:r.getCore().value});r.getCore().reset();p(r.getElement(),false);this._loggedQuery=false;}).bind(this)),r.subscribe('respond',(function(s,t){if(!this._loggedQuery&&r.getCore().getValue().length>0){h.log('ChatTypeaheadLoggerConfig',{event:j.NEW_QUERY});this._loggedQuery=true;}if(t.value&&t.value===r.getCore().getValue()){if(!t.results.length){var u=t.value.toLowerCase(),v=r.getData().getQueryCache();if(!t.isAsync&&!v.hasOwnProperty(u))return;r.getView().showNoResults();}k.addClass(r.getElement(),'hasValue');}}).bind(this)),r.subscribe('reset',function(){k.removeClass(r.getElement(),'hasValue');}),r.subscribe('select',(function(s,t){var u=t.selected.uid;if(t.selected.mercury_thread&&!t.selected.mercury_thread.is_canonical)u=t.selected.mercury_thread.thread_fbid;r.getView().hide();h.log('ChatTypeaheadLoggerConfig',{event:j.RESULT_SELECTED,max_results:r.getData().getMaxResults(),result_type:t.selected.render_type,query:r.getCore().value});this._loggedQuery=false;i.openTabByType(u,t.selected.type,'typeahead');}).bind(this)),r.subscribe('highlight',function(s,t){if(t.index>=0){var u=r.getView().getItems()[t.index];if(u){var v=new n(u),w=u.offsetParent,x=v.boundWithin(new n(w)).getPositionVector();v.getPositionVector().sub(x).scrollElementBy(w);}}})];};q.prototype.disable=function(){'use strict';this._subscriptions.forEach(function(r){this._typeahead.unsubscribe(r);},this);this._subscriptions=null;};Object.assign(q.prototype,{_subscriptions:null});f.exports=q;},null);
__d('ChatMentionsNotifications',['fbt','CurrentUser','MercuryParticipants'],function a(b,c,d,e,f,g,h,i,j){if(c.__markCompiled)c.__markCompiled();var k={notifyIfMessageToMe:function(l){var m='fbid:'+i.getID(),n=l.body;j.get(m,function(o){var p=new RegExp(o.short_name,"i");if(p.test(n))k._notify(l);});},_notify:function(l){var m=48,n=l.body;if(n.length>m)n=n.substr(0,m-3)+"...";new Notification(h._("You were tagged in a message!"),{body:n,icon:"http://facebook.com//images/icons-large/fb-xl.png"});}};f.exports=k;},null);
__d('ChatTabPolicy',['ChatBehavior','JSLogger','MercuryActionType','MercuryLogMessageType','MercuryAssert','MercuryConfig','MercuryGroupThreadMentions','MercuryIDs','MercuryParticipantTypes','MercurySourceType','MercuryThreadInfo','MercuryViewer','MessagingTag','PresencePrivacy','ShortProfiles','WorkModeConfig','MercuryBlockedParticipants','MercuryThreadActions'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w){if(c.__markCompiled)c.__markCompiled();var x=c('MercuryBlockedParticipants').get(),y=c('MercuryThreadActions').get(),z=i.create('tab_policy');f.exports={messageIsAllowed:function(aa,ba,ca){var da=aa.thread_id,ea=ba.message_id;l.isThreadID(da);l.isParticipantID(ba.author);var fa;if(r.isMuted(aa)){fa={thread_id:da,message_id:ea,mute_settings:aa.mute_settings};z.log('message_thread_muted',fa);if(m.GroupChatMentionsGK)n.messageMentionsViewer(ba,function(ia){if(ia)ca();});return;}if(aa.read_only){fa={thread_id:da,message_id:ea,mode:aa.mode};z.log('message_read_only',fa);return;}if(ba.source==q.EMAIL||ba.source==q.TITAN_EMAIL_REPLY){fa={thread_id:da,message_id:ea,source:ba.source};z.log('message_source_not_allowed',fa);return;}var ga=o.getUserIDFromParticipantID(ba.author);if(!ga){z.log('message_bad_author',{thread_id:da,message_id:ea,user:ga});return;}if(ba.action_type!=j.USER_GENERATED_MESSAGE&&!this._messageIsNewlyCreatedGroup(ba,aa)){fa={thread_id:da,message_id:ea,type:ba.action_type};z.log('message_non_user_generated',fa);return;}if(aa.is_canonical_user&&!h.notifiesUserMessages()){z.log('message_jabber',{thread_id:da,message_id:ea});y.markSeen(da,true);return;}if(aa.is_canonical&&!aa.other_user_fbid){z.log('message_canonical_contact',{thread_id:da,message_id:ea});return;}if(aa.folder!=t.INBOX){z.log('message_folder',{thread_id:da,message_id:ea,folder:aa.folder});return;}if(x.isPresentInGroupThread(aa)){fa={thread_id:da,message_id:ea};z.log('message_blocked_participants',fa);return;}var ha=o.getUserIDFromParticipantID(s.getID());v.getMulti([ga,ha],function(ia){if(!u.allows(ga)){z.log('message_privacy',{thread_id:da,message_id:ea,user:ga});return;}var ja=ia[ga].employee&&ia[ha].employee,ka=w.is_work_user;if(!ja&&!ka&&!ia[ga].isCommercePage&&ia[ga].type!==p.FRIEND){z.log('message_non_friend',{thread_id:da,message_id:ea,user:ga});return;}ca();});},_messageIsNewlyCreatedGroup:function(aa,ba){return aa.action_type===j.LOG_MESSAGE&&aa.log_message_type===k.THREAD_NAME&&ba.message_count===1;}};},null);
__d('ChatApp',['CSS','ChatPerfInstrumentation','DOM','JSLogger','Promise','React','ReactDOM','csx'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o){'use strict';if(c.__markCompiled)c.__markCompiled();var p={init:function(v,w,x){if(this._isInitialized){k.create('chat_app').error('repeated_init');return;}this._rootElem=v;l.resolve().then(function(){return i.init();}).then(function(){return q();}).then(function(){return r(x);}).then(function(){return s(w,v);}).then(function(){return t();}).then((function(){this._isInitialized=this._isLoaded=true;i.logTTI();}).bind(this)).done(function(){return u(x);});},isInitialized:function(){return !!this._isInitialized;},isHidden:function(){return !this._isInitialized||this._isHidden;},hide:function(){if(this.isHidden())return;h.hide(this._rootElem);this._isHidden=true;},unhide:function(){if(this._isInitialized){if(this._isHidden){h.show(this._rootElem);this.tabsViewport.checkWidth();e(['Dock'],function(v){v.resizeAllFlyouts();});this._isHidden=false;}}else if(!this._isLoaded){e(['UIPagelet'],function(v){v.loadFromEndpoint('ChatTabsPagelet','ChatTabsPagelet');v.loadFromEndpoint('BuddylistPagelet','BuddylistPagelet');});this._isLoaded=true;}}};function q(){return new l(function(v){e(['MercuryBlockedParticipants','MercuryChannelHandler','MercuryDelayedRoger','MercuryDeliveryReceipts','MercuryDeliveryState','MercuryParticipants','MercuryStateCheck','MercuryThreads','MercuryUnreadState','MercuryUnseenState','MercurySyncDispatcher'],function(w,x,y,z,aa,ba,ca,da,ea,fa,ga){w.get();x.get().turnOn();y;z.get();aa.get();ba;da.get();fa.get();ea.get();ca.get();ga.get();v();});});}function r(v){return new l(function(w){e(['MercuryServerPayloadPreprocessor'],function(x){x.get().handleUpdate(v);w();});});}function s(v,w){return new l(function(x){e(['ChatTabController','ChatTabViewCoordinator','TabsViewport','MNCommerceDialogContainer.react','P2PDialogContainer.react','FBRTCMessageHandler','ChatOpenTabImpl'],function(y,z,aa,ba,ca,da,ea){p.tabsViewport=new aa(v);p.tabViewCoordinator=new z(v,p.tabsViewport);p.tabController=new y(p.tabsViewport);da.init();var fa=j.find(w,"._26-x");n.render(m.createElement(ba,null),fa);var ga=j.find(w,"._26-y");n.render(m.createElement(ca,null),ga);p.chatOpenTabImpl=ea;x();});});}function t(){return new l(function(v){e(['HotLikeSound','ChatOptions'],function(w,x){w.setCheckSoundEnabledFunc(function(){return x.getSetting('sound');});v();});});}function u(v){if(!v.threads_to_auto_open||!p.tabsViewport.hasRoomForRaisedTab())return;e(['ChatOpenTab'],function(w){w.openThread(v.threads_to_auto_open.thread_fbid,'autoOpenTab','',null,true);});}f.exports=p;},null);
__d('ChatTypeaheadView',['BucketedTypeaheadView','ChatTypeaheadConstants','CurrentUser','DOM','MercuryConfig','React','ReactDOM','ScrollableArea','MercuryThreadSearchUtils','Style','WorkModeConfig','XUISpinner.react','arrayContains','cx','fbt'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v){if(c.__markCompiled)c.__markCompiled();var w,x;w=babelHelpers.inherits(y,h);x=w&&w.prototype;function y(z,aa){'use strict';if(l.ScrollableSidebarTypeaheadGK){var ba=o.renderDOM();k.appendContent(z,ba.root);var ca=o.fromNative(ba.root);x.constructor.call(this,ba.content,aa);this.$ChatTypeaheadView1=ba;this.$ChatTypeaheadView2=ca;}else x.constructor.call(this,z,aa);this.showingLoadingIndicator=false;this.typeObjects={};this.typeObjectsOrder=[];this.typeObjects[i.NON_FRIEND_TYPE]={uid:i.NON_FRIEND_TYPE,type:i.HEADER_TYPE,text:v._("MORE PEOPLE")};this.typeObjects[i.PAGE_TYPE]={disabled:true,uid:i.PAGE_TYPE,type:i.HEADER_TYPE,text:v._("BUSINESSES")};this.typeObjects[i.THREAD_TYPE]={uid:i.THREAD_TYPE,type:i.HEADER_TYPE,text:v._("GROUP CONVERSATIONS")};this.typeObjects[i.FB4C_TYPE]={uid:i.FB4C_TYPE,type:i.HEADER_TYPE,text:v._("CO-WORKERS")};this.typeObjects[i.FRIEND_TYPE]={disabled:true,uid:i.FRIEND_TYPE,type:i.HEADER_TYPE,text:v._("FRIENDS")};this.$ChatTypeaheadView3();}y.prototype.reset=function(){'use strict';if(this.value==='')this.clearContent();this.index=-1;this.items=[];this.results=[];this.value='';this.inform('reset');return this;};y.prototype.clearContent=function(){'use strict';this.hideLoadingIndicator();k.empty(this.content);};y.prototype.buildBuckets=function(z,aa){'use strict';var ba=aa.filter(function(ca){var da=ca.render_type||ca.type;if(da==='thread'){var ea='fbid:'+j.getID();if(!t(ca.mercury_thread.participants,ea))return false;var fa=ca.participants_to_render.some(function(ha){return p.queryMatchesName(z,ha.name);}),ga=p.queryMatchesName(z,ca.mercury_thread.name);if(!fa&&!ga)return false;}return true;}).reverse();this.$ChatTypeaheadView3(z);return x.buildBuckets.call(this,z,ba);};y.prototype.getDefaultIndex=function(z){'use strict';if(z.length===0)return -1;var aa=z.length-1;while(!this.isHighlightable(z[aa])&&aa>=0)aa--;return aa;};y.prototype.showLoadingIndicator=function(){'use strict';if(!this.showingLoadingIndicator){n.render(m.createElement('div',{className:'spinnerContainer'},m.createElement(s,{className:"_3-8i",background:'light',size:'small',paused:false})),this.content);this.showingLoadingIndicator=true;}};y.prototype.hideLoadingIndicator=function(){'use strict';if(this.showingLoadingIndicator){n.unmountComponentAtNode(this.content);this.showingLoadingIndicator=false;}};y.prototype.showNoResults=function(){'use strict';var z=v._("Friend not found.");if(r.is_work_user)z=v._("Co-worker not found.");this.hideLoadingIndicator();k.setContent(this.content,k.create('div',{className:"noResults _3-9a"},z));};y.prototype.hide=function(){'use strict';this.clearContent();return x.hide.call(this);};y.prototype.next=function(){'use strict';x.next.call(this);if(l.ScrollableSidebarTypeaheadGK)this.$ChatTypeaheadView2.scrollIntoView(this.selected,false);};y.prototype.prev=function(){'use strict';x.prev.call(this);if(l.ScrollableSidebarTypeaheadGK)this.$ChatTypeaheadView2.scrollIntoView(this.selected,false);};y.prototype.setMaxHeight=function(z){'use strict';q.set(this.$ChatTypeaheadView1.wrap,'max-height',z+'px');};y.prototype.render=function(z,aa,ba){'use strict';if(l.ScrollableSidebarTypeaheadGK)var ca=this.value!==z||this.$ChatTypeaheadView2.isScrolledToBottom();if(!aa.length){if(z&&z.length>1)this.showLoadingIndicator();}else this.hideLoadingIndicator();x.render.call(this,z,aa,ba);if(l.ScrollableSidebarTypeaheadGK&&ca)this.$ChatTypeaheadView2.scrollToBottom(false);};y.prototype.$ChatTypeaheadView3=function(z){'use strict';if(l.WWWMessengerMoneyPennyGK&&z&&l.HoistAgentsKeywords&&l.HoistAgentsKeywords.indexOf(z.toLowerCase())!==-1){this.typeObjectsOrder=[i.NON_FRIEND_TYPE,i.THREAD_TYPE,i.FB4C_TYPE,i.FRIEND_TYPE,i.PAGE_TYPE];}else this.typeObjectsOrder=[i.NON_FRIEND_TYPE,i.PAGE_TYPE,i.THREAD_TYPE,i.FB4C_TYPE,i.FRIEND_TYPE];};f.exports=y;},null);
__d('MercuryLogMessageRenderer',['Bootloader','CSS','HovercardLink','MercuryViewer','MessagesViewer','MercuryLogMessageType','MessagingGenericAdminTextType','MercuryParticipants','React','ReactDOM','Image.react','TextWithEntities.react','TooltipLink.react','MercuryRtcCallLogMessage.react','cx','fbt','ix'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x){if(c.__markCompiled)c.__markCompiled();var y={renderText:function(na,oa){switch(na.log_message_type){case m.SUBSCRIBE:ba(na,oa);break;case m.UNSUBSCRIBE:ga(na,oa);break;case m.THREAD_NAME:ha(na,oa);break;case m.THREAD_IMAGE:ia(na,oa);break;case m.WALLPAPER:ja(na,oa);break;case m.GENERIC_ADMIN_TEXT:ka(na,oa);break;default:h.loadModules(["MercurySpecialLogMessageRenderer"],function(pa){pa.renderText(na,oa);});break;}},renderIcon:function(na){return (p.createElement(r,{className:z(na),src:x('images/spacer.gif')}));},renderLegacy:function(na,oa,pa,qa){z(qa).split(' ').forEach(function(ra){return ra&&i.addClass(na,ra);});this.renderText(qa,function(ra){q.render(p.createElement('span',null,ra),oa);});this.renderAttachmentLegacy(pa,qa);},renderAttachmentLegacy:function(na,oa){if(oa.log_message_type==m.THREAD_IMAGE){var pa=oa.log_message_data.image;if(pa&&pa.preview_url){q.render(p.createElement(r,{className:"_z6a",onClick:function(){return aa(pa);},src:pa.preview_url}),na);i.show(na);}}}};f.exports=y;function z(na){var oa=na.log_message_type,pa=na.log_message_data;return "_5wzu"+(oa==m.SUBSCRIBE?' '+"_5wzj":'')+(oa==m.UNSUBSCRIBE?' '+"_5wzk":'')+(oa==m.THREAD_NAME?' '+"_5wzl":'')+(oa==m.THREAD_IMAGE?' '+"_5wzm":'')+(oa==m.VIDEO_CALL&&pa.answered?' '+"_5wzn":'')+(oa==m.VIDEO_CALL&&!pa.answered?' '+"_5wzo":'')+(oa==m.PHONE_CALL&&pa.answered?' '+"_5wzp":'')+(oa==m.PHONE_CALL&&!pa.answered?' '+"_5wzq":'')+(oa==m.SERVER_ERROR?' '+"_5wzr":'');}function aa(na){l.bootstrapWithConfig({src:na.preview_url,endpoint:na.url,fbid:na.metadata.fbid,dimensions:na.metadata.dimensions,disablePaging:true},null);}function ba(na,oa){var pa=ma(na.log_message_data.added_participants);switch(pa.length){case 1:ca(na,oa,pa);break;case 2:da(na,oa,pa);break;case 3:ea(na,oa,pa);break;default:fa(na,oa,pa);break;}}function ca(na,oa,pa){var qa=[na.author,pa[0]];o.getMulti(qa,function(ra){if(na.author==k.getID()){oa(w._("You added {subscriber1}.",[w.param('subscriber1',la(ra[pa[0]]))]));}else if(pa[0]==k.getID()){oa(w._("{actor} added you.",[w.param('actor',la(ra[na.author]))]));}else oa(w._("{actor} added {subscriber1}.",[w.param('actor',la(ra[na.author])),w.param('subscriber1',la(ra[pa[0]]))]));});}function da(na,oa,pa){var qa=[na.author].concat(pa);o.getMulti(qa,function(ra){if(na.author==k.getID()){oa(w._("You added {subscriber1} and {subscriber2}.",[w.param('subscriber1',la(ra[pa[0]])),w.param('subscriber2',la(ra[pa[1]]))]));}else if(pa[0]==k.getID()){oa(w._("{actor} added you and {subscriber2}.",[w.param('actor',la(ra[na.author])),w.param('subscriber2',la(ra[pa[1]]))]));}else oa(w._("{actor} added {subscriber1} and {subscriber2}.",[w.param('actor',la(ra[na.author])),w.param('subscriber1',la(ra[pa[0]])),w.param('subscriber2',la(ra[pa[1]]))]));});}function ea(na,oa,pa){var qa=[na.author].concat(pa);o.getMulti(qa,function(ra){if(na.author==k.getID()){oa(w._("You added {subscriber1}, {subscriber2} and {subscriber3}.",[w.param('subscriber1',la(ra[pa[0]])),w.param('subscriber2',la(ra[pa[1]])),w.param('subscriber3',la(ra[pa[2]]))]));}else if(pa[0]==k.getID()){oa(w._("{actor} added you, {subscriber2} and {subscriber3}.",[w.param('actor',la(ra[na.author])),w.param('subscriber2',la(ra[pa[1]])),w.param('subscriber3',la(ra[pa[2]]))]));}else oa(w._("{actor} added {subscriber1}, {subscriber2} and {subscriber3}.",[w.param('actor',la(ra[na.author])),w.param('subscriber1',la(ra[pa[0]])),w.param('subscriber2',la(ra[pa[1]])),w.param('subscriber3',la(ra[pa[2]]))]));});}function fa(na,oa,pa){var qa=[na.author].concat(pa);o.getMulti(qa,function(ra){function sa(ua){var va=p.createElement('div',null,ua.map(function(wa){return p.createElement('div',null,wa.name);}));return (p.createElement(t,{alignH:'center',position:'above',tooltip:va},w._({"*":"{num} more"},[w.param('num',ua.length,[0])])));}var ta=pa.map(function(ua){return ra[ua];});if(na.author==k.getID()){oa(w._("You added {subscriber1}, {subscriber2} and {more_people}.",[w.param('subscriber1',la(ta[0])),w.param('subscriber2',la(ta[1])),w.param('more_people',sa(ta.slice(2)))]));}else if(pa[0]==k.getID()){oa(w._("{actor} added you, {subscriber2} and {more_people}.",[w.param('actor',la(ra[na.author])),w.param('subscriber2',la(ta[1])),w.param('more_people',sa(ta.slice(2)))]));}else oa(w._("{actor} added {subscriber1}, {subscriber2} and {more_people}.",[w.param('actor',la(ra[na.author])),w.param('subscriber1',la(ta[0])),w.param('subscriber2',la(ta[1])),w.param('more_people',sa(ta.slice(2)))]));});}function ga(na,oa){var pa=[na.author],qa=na.log_message_data.removed_participants,ra;if(qa.length===1){ra=qa[0];pa.push(ra);}o.getMulti(pa,function(sa){var ta=sa[na.author],ua=sa[ra];if(na.author==k.getID()){if(!ra||ra==na.author){oa(w._("You left the conversation."));}else oa(w._("You removed {name} from the conversation.",[w.param('name',la(ua))]));}else if(!ra||ra==na.author){oa(w._("{actor} left the conversation.",[w.param('actor',la(ta))]));}else if(ra==k.getID()){oa(w._("{actor} removed you from the conversation.",[w.param('actor',la(ta))]));}else oa(w._("{actor} removed {name} from the conversation.",[w.param('actor',la(ta)),w.param('name',la(ua))]));});}function ha(na,oa){var pa=na.log_message_data.name;if(na.author==k.getID()){if(pa){oa(w._("You named the conversation: {name}.",[w.param('name',p.createElement('span',{className:"_5wzs"},p.createElement(s,{renderEmoticons:true,renderEmoji:true,text:pa})))]));}else oa(w._("You removed the conversation name."));}else o.get(na.author,function(qa){var ra=la(qa);if(pa){oa(w._("{actor} named the conversation: {name}.",[w.param('actor',ra),w.param('name',p.createElement('span',{className:"_5wzs"},pa))]));}else oa(w._("{actor} removed the conversation name.",[w.param('actor',ra)]));});}function ia(na,oa){if(na.author==k.getID()){if(na.log_message_data.image){oa(w._("You changed the conversation picture."));}else oa(w._("You removed the conversation picture."));}else o.get(na.author,function(pa){var qa=la(pa);if(na.log_message_data.image){oa(w._("{actor} changed the conversation picture.",[w.param('actor',qa)]));}else oa(w._("{actor} removed the conversation picture.",[w.param('actor',qa)]));});}function ja(na,oa){if(na.author==k.getID()){oa(w._("You changed the wallpaper."));}else o.get(na.author,function(pa){var qa=la(pa);oa(w._("{actor} changed the wallpaper.",[w.param('actor',qa)]));});}function ka(na,oa){var pa=na.log_message_body,qa=na.log_message_data;switch(qa.message_type){case n.TURN_ON_PUSH:if(pa&&pa.length>0)pa=w._("{admin-text-message} for Messenger on mobile.",[w.param('admin-text-message',pa.substring(0,pa.length-1))]);break;case n.RTC_CALL_LOG:pa=p.createElement(u,{message:pa,conferenceId:qa.untypedData.conference_id,isVideoCall:qa.untypedData.is_video_call==='1',event:qa.untypedData.event});break;}oa(pa);}function la(na,oa){var pa=na.fbid,qa=j.constructEndpoint({id:pa});if(na.href)return (p.createElement('a',{className:"_5wzt",href:na.href,'data-hovercard':qa},oa?na.short_name:na.name));return na.name;}function ma(na){var oa=na.indexOf(k.getID());if(oa>0){var pa=na.filter(function(qa){return qa!==k.getID();});return [k.getID()].concat(pa);}return na;}},null);
__d('ChatTabView',['AsyncRequest','AsyncSignal','AvailableListConstants','BanzaiODS','BootloadedComponent.react','Bootloader','CSS','ChatBehavior','ChatConfig','ChatNubLogger','ChatOpenTab','ChatPhotoUploader.react','ChatQuietLinks','ChatStickerButton.react','ChatTabActions','ChatTabMessagesView','ChatTabSheetController','ChatTabViewEvents','ChatTabViewInstances','ChatTitleLink.react','ChatVisibility','MercuryConstants','CurrentLocale','CurrentUser','DOM','DOMEvent','DOMQuery','Dock','DragDropTarget','EmoticonUtils','EmoticonsList','Event','FBID','FBRTCCallabilityStore','Focus','ImmutableObject','Input','JSResource','Keys','Locale','LogHistory','MercuryConfig','MercuryIDs','MercuryMessengerBlockingUtils','MercuryParticipants','MercuryShareAttachmentRenderLocations','MercurySourceType','MercuryThreadInfo','MercuryTypingAnimation.react','MercuryThreadTitle.react','MercuryViewer','MessengerHotLikeButton.react','MessagingTag','NubController','P2PChatThreadBannerContainer.react','P2PGKValues','P2PSendMoneyButton.react','P2PSendMoneyDialogStore','PagesMercuryChatTabIndicatorHandler','Parent','PhotosUploadWaterfall','PresenceStatus','Promise','React','ReactDOM','ReactComponentRenderer','Run','Scroll','SelectionPosition','ShortProfiles','SimpleXUIDialog','StickerActions','StickerConstants','StickerState','Style','SubscriptionsHandler','SyntheticMouseEvent','ChatTabTemplates','TextAreaControl','TooltipData','TypingDetectorController','URI','UserAgent_DEPRECATED','WaterfallIDGenerator','WebMessengerDeleteThreadDialog','WebMessengerThreadPermalinks','WorkFileUploadsGating','WorkModeConfig','XStickerReplyNUXController','cancelAnimationFrame','createCancelableFunction','csx','cx','emptyFunction','fbt','getActiveElement','isEmpty','requireWeak','requestAnimationFrame','setIntervalAcrossTransitions','ChatReactInput','MercuryBlockedParticipants','MercuryTypingReceiver','MercuryMessageActions','MercuryMessages','MercuryMessageObject','MercuryThreadIDMap','MercuryServerRequests','MercuryThreadInformer','MercuryThreadActions','MercuryThreads'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba,ca,da,ea,fa,ga,ha,ia,ja,ka,la,ma,na,oa,pa,qa,ra,sa,ta,ua,va,wa,xa,ya,za,ab,bb,cb,db,eb,fb,gb,hb,ib,jb,kb,lb,mb,nb,ob,pb,qb,rb,sb,tb,ub,vb,wb,xb,yb,zb,ac,bc,cc,dc,ec,fc,gc,hc,ic,jc,kc,lc,mc,nc,oc,pc,qc,rc,sc,tc,uc,vc,wc,xc,yc,zc,ad,bd,cd){'use strict';if(c.__markCompiled)c.__markCompiled();var dd=c('ChatReactInput').module,ed=c('MercuryBlockedParticipants').get(),fd=c('MercuryTypingReceiver').get(),gd=c('MercuryMessageActions').get(),hd=c('MercuryMessages').get(),id=c('MercuryMessageObject').get(),jd=c('MercuryThreadIDMap').get(),kd=c('MercuryServerRequests').get(),ld=c('MercuryThreadInformer').get(),md=c('MercuryThreadActions').get(),nd=c('MercuryThreads').get(),od=/^\s*$/,pd=z,qd,rd=10,sd=960,td=va.getInstance('chat_tab_view');ad('AvailableList',function(qe){qe.subscribe(j.ON_AVAILABILITY_CHANGED,me);});function ud(qe,re){var se=fa.create('div');re=re&&re.filter(function(ve){return ve!=fb.getID();});if(zc(re))return ic.remove(qe);var te=re.length,ue=te-rd;if(ue>1)re=re.slice(0,rd);za.getMulti(re,function(ve){for(var we in ve){var xe=ve[we],ye=gc[':fb:mercury:chat:multichat-tooltip-item'].build();fa.setContent(ye.getNode('name'),xe.name);var ze=xa.getUserIDFromParticipantID(we),af=ze&&qb.get(ze)==j.ACTIVE;n.conditionShow(ye.getNode('icon'),af);n.conditionClass(ye.getNode('name'),'tooltipItemWithIcon',af);fa.appendContent(se,ye.getRoot());}if(ue>1){var bf=xc._("and {number of hidden chat participants} more.",[xc.param('number of hidden chat participants',ue)]);fa.appendContent(se,fa.create('div',{},bf));}ic.set(qe,se,'above');});}var vd={},wd=null,xd=false;function yd(qe,re,se){if(se){vd[qe]=re;if(!wd)wd=cd(zd,600);}else{n.removeClass(re,'highlightTitle');delete vd[qe];}}function zd(){for(var qe in vd){var re=vd[qe];if(re.parentNode){n.conditionClass(re,'highlightTitle',xd);}else delete vd[qe];}xd=!xd;if(!Object.keys(vd).length){clearInterval(wd);wd=null;}}function ae(qe){var re=xa.tokenize(qe);switch(re.type){case 'user':return gc[':fb:mercury:chat:user-tab'].build();}return gc[':fb:mercury:chat:multichat-tab'].build();}function be(qe){var re=qe._getInputValue(),se=qe._fileUploader,te=se?se.getAttachments():[];if(he(qe))de(qe,re,te,function(ue){ue=pe(ue,se);gd.send(ue,function(ve){var we=nd.getThreadMetaNow(ve);if(wa.CoreGraphEnabled&&we&&we.folder===hb.PENDING)md.movePendingToInbox(ve);});se&&se.removeAttachments();if(qe._sharePreview)qe._sharePreview.setProps({share:null,uri:null});if(!p.get('chat_react_input'))qe._getNode('input').value='';qe._typingDetector&&qe._typingDetector.resetState();qe._messagesView&&qe._messagesView.setShouldScrollToBottom(true);});}function ce(qe,re){if(re===0)return;je(qe,pb.POST_PUBLISHED,{count:re});qe._waterfallID=mc.generate();}function de(qe,re,se,te){nd.getThreadMeta(qe._threadID,function(ue){if(ue&&ue.is_canonical&&!cb.canReply(ue)&&ya.gk_result){qe._showMessageBlockedDialog(ue);return;}var ve=bb.CHAT_WEB,we=id.constructUserGeneratedMessageObject(re,ve,qe._threadID);if(se.length>0){we.has_attachment=true;we.raw_attachments=se;}if(qe._sharePreview){var xe=qe._sharePreview.component.getShareData();if(xe){we.has_attachment=true;we.shareable_attachment=xe;}}if(nd.isNewEmptyLocalThread(qe._threadID)){var ye=qe._sheetController.getAddFriendsParticipants();qe._sheetController.closeAddFriendsSheet();if(ye===null||ye.length===0)return;ye=ye.filter(function(bf){return bf!=fb.getID();});if(ye.length===0){we.thread_id=xa.getThreadIDFromUserID(ea.getID());}else if(ye.length===1){we.thread_id=xa.getThreadIDFromParticipantID(ye[0]);}else md.addParticipants(qe._threadID,ye);}if(nd.isEmptyLocalThread(qe._threadID)){we.offline_threading_id=xa.tokenize(qe._threadID).value;var ze=nd.getThreadMetaNow(ue.thread_id);we.specific_to_list=Array.from(ze.participants);}if(typeof we!='undefined')we.signatureID=qe._signatureID;we.ui_push_phase=ca.UIPushPhase;te(we);if(qe._threadID!==we.thread_id&&!qe._photoUploader.isUploading()){var af=qe._getInputValue();v.closeTab(qe._threadID);r.openThread(we.thread_id,'ChatTabView',null,re?wc:function(bf){return bf.appendTextToInput(af);});}});}function ee(qe){qe._blocked=true;qe._sheetController.openUploadWarningTabSheet();}function fe(qe){return !!(qe._fileUploader&&(qe._fileUploader.isUploading()||qe._photoUploader.isUploading()||qe._sharePreview&&qe._sharePreview.component.isLoading()));}function ge(qe){return (qe._fileUploader&&qe._fileUploader.isUploading()||qe._sharePreviewLoading);}function he(qe){var re=qe._getInputValue();if(!od.test(re))return true;if(qe._fileUploader&&(qe._fileUploader.getAttachments().length>0||qe._fileUploader.getImageFiles().length>0||qe._fileUploader.getAnimatedImageFiles().length>0||qe._fileUploader.getVideoFiles().length>0||qe._fileUploader.getAudioFiles().length>0||qe._fileUploader.getFiles().length>0))return true;if(qe._sharePreview&&qe._sharePreview.component.getShareData())return true;return false;}function ie(qe){qe._nubController.flyoutContentChanged();var re=qe._getNode('attachmentShelf');wb.setTop(re,re.scrollHeight);}function je(qe,re,se){pb.sendSignal(babelHelpers._extends({qn:qe._waterfallID,step:re,uploader:pb.APP_CHAT},se||{}));}function ke(qe,re,se,te,ue){if(re)kd.ensureThreadIsFetched(re);this._threadID=qe;this._signatureID=se;this._eventListeners=[];this._onlineStatus=j.OFFLINE;this._tabTemplate=ae(qe);this._tabElem=this._tabTemplate.getRoot();if(ue&&ue.getTabElem()){this.insertBefore(ue);}else this.appendTo(te);this._stickersFlyoutShown=false;this._messagesView=null;this._titlebar=this._getNode('nubFlyoutTitlebar');this._iconsContainerNode=this._getNode('iconsContainer');this._inputContainerNode=this._getNode('inputContainer');this._contentSearchNode=this._getNode('contentSearchContainer');this._emojiSearchNode=this._getNode('emojiSearchContainer');this._fileUploaderNode=this._getNode('fileUploaderContainer');this._pagesMessageIndicator=this._getNode('pagesMessageIndicator');this._waterfallID=mc.generate();this._subscriptionsHandler=new ec();var ve=ha.scry(this._tabElem,"._8ms");this._isTwoLine=ve&&ve.length>0;this._initializeSheetController();var we=[wc,this._initializeComposer.bind(this),this._initializeHotLike.bind(this),this._initializeHeader.bind(this),this._initializeUIListeners.bind(this),this._initializeAutoSendPhotoUploader.bind(this),this._initializeAutoSendFileUploader.bind(this),this._initializeTitleHREF.bind(this),this._initializeP2P.bind(this),this._initializeInput.bind(this),this._initializeStickers.bind(this),this._initializeContentSearch.bind(this),this._initializeEmojiSearch.bind(this),(function(){nd.getThreadMeta(this._threadID,(function(df){this._updateMutingSettings(df);this._updateMessageBlockSettings(df);this._updateSecretModeSettings(df);}).bind(this));t.removeEmptyHrefs(this._tabElem);}).bind(this),(function(){this.updateAvailableStatus();this.updateTab();this._setCloseTooltip(false);}).bind(this),this._initializeUnloadListeners.bind(this),this._initializeDragDropTarget.bind(this),this._initializePageMessagingIndicator.bind(this),this._initializeP2PChatThreadBannerContainer.bind(this)];if(p.get('chat_defer_initialization',false)){var xe=(function(df){if(!df.length){delete this._initFrame;return;}var ef=df.shift();this._initFrame=bd(function(){xe(df);});ef();}).bind(this);xe(we);}else for(var ye=we,ze=Array.isArray(ye),af=0,ye=ze?ye:ye[typeof Symbol==='function'?Symbol.iterator:'@@iterator']();;){var bf;if(ze){if(af>=ye.length)break;bf=ye[af++];}else{af=ye.next();if(af.done)break;bf=af.value;}var cf=bf;cf();}pd.set(qe,this);this._logOpenTab();}function le(qe){if(qe._photoUploader.isUploading())je(qe,pb.CANCEL_DURING_UPLOAD);}function me(){for(var qe=pd.values(),re=Array.isArray(qe),se=0,qe=re?qe:qe[typeof Symbol==='function'?Symbol.iterator:'@@iterator']();;){var te;if(re){if(se>=qe.length)break;te=qe[se++];}else{se=qe.next();if(se.done)break;te=se.value;}var ue=te;ue.updateAvailableStatus();ue.updateMultichatTooltip();}}function ne(){for(var qe=pd.values(),re=Array.isArray(qe),se=0,qe=re?qe:qe[typeof Symbol==='function'?Symbol.iterator:'@@iterator']();;){var te;if(re){if(se>=qe.length)break;te=qe[se++];}else{se=qe.next();if(se.done)break;te=se.value;}var ue=te;ue.updateCallLink();}}oa.addListener(ne);o.subscribe(o.ON_CHANGED,function(){for(var qe=pd.keys(),re=Array.isArray(qe),se=0,qe=re?qe:qe[typeof Symbol==='function'?Symbol.iterator:'@@iterator']();;){var te;if(re){if(se>=qe.length)break;te=qe[se++];}else{se=qe.next();if(se.done)break;te=se.value;}var ue=te;nd.getThreadMeta(ue,function(ve){pd.get(ue)._updateUnreadCount(ve);});}});fd.addRetroactiveListener('state-changed',function(qe){for(var re in qe){var se=qe[re]&&qe[re].length,te=pd.get(re);te&&te.showTypingIndicator(se);}});ld.subscribe('threads-updated',function(qe,re){for(var se=pd.keys(),te=Array.isArray(se),ue=0,se=te?se:se[typeof Symbol==='function'?Symbol.iterator:'@@iterator']();;){var ve;if(te){if(ue>=se.length)break;ve=se[ue++];}else{ue=se.next();if(ue.done)break;ve=ue.value;}var we=ve,xe=pd.get(we);re[we]&&xe.updateTab();if(xe._newThreadIDFromPhotoUpload&&!xe._photoUploader.isUploading()&&re[xe._newThreadIDFromPhotoUpload]){v.closeTab(xe._threadID);r.openThread(xe._newThreadIDFromPhotoUpload,'ChatTabView');xe._newThreadIDFromPhotoUpload=null;}}});ld.subscribe('threads-deleted',function(qe,re){for(var se=pd.keys(),te=Array.isArray(se),ue=0,se=te?se:se[typeof Symbol==='function'?Symbol.iterator:'@@iterator']();;){var ve;if(te){if(ue>=se.length)break;ve=se[ue++];}else{ue=se.next();if(ue.done)break;ve=ue.value;}var we=ve;re[we]&&v.closeTab(we,'thread_deleted');}});Object.assign(ke.prototype,{getThreadID:function(){return this._threadID;},getTabElem:function(){return this._tabElem;},showAddFriend:function(){setTimeout((function(){this._sheetController.openAddFriendsSheet();}).bind(this),0);},showNameConversation:function(qe){setTimeout((function(){this._sheetController.openNameConversationSheet(qe);}).bind(this),0);},hideAutomaticNameConversation:function(){setTimeout((function(){this._sheetController.closeAutomaticNameConversationSheet();}).bind(this),0);},isVisible:function(){return n.shown(this._tabElem);},setVisibleState:function(qe,re){var se=n.shown(this._tabElem),te=n.hasClass(this._tabElem,'opened');n.conditionShow(this._tabElem,qe);n.conditionClass(this._tabElem,'opened',re);if(!(se&&te)&&qe&&re){if(!this._messagesView){var ue=xa.tokenize(this._threadID);this._messagesView=new w(this._threadID,this._sheetController,this._getNode('scrollingArea'),this._getNode('conversation'),this._getNode('loadingIndicator'),this._getNode('lastMessageIndicator'),this._getNode('typingIndicator'),this,wa.ShowContextBanner&&ue.type==='user');}this._nubController.flyoutContentChanged();this._messagesView.scrollToBottom();this.setP2PChatThreadBannerContainerVisibility();}},focus:function(){if(n.hasClass(this._tabElem,'opened')){this._focusInput();}else this._getNode('dockButton').focus();},isFocused:function(){var qe=yc();return ob.byClass(qe,"_50mz")===this._tabElem;},hasEmptyInput:function(){return od.test(this._getInputValue());},getInputElem:function(){if(p.get('chat_react_input')){if(!this._chatInput||!this._chatInput.isMounted())return null;return tb.findDOMNode(this._chatInput);}else return this._getNode('input');},setStickersFlyoutPackID:function(qe){if(!this._stickerButton.isMounted())return;ac.selectPack(qe);this._toggleStickersFlyoutShown(true);},loadShareFromParams:function(qe,re){this._getSharePreview().done(function(se){se.setProps({share:{params:re,type:qe},uri:null});});},_linkDropped:function(qe){this._getSharePreview().done(function(re){re.setProps({share:null,uri:qe});});},_filesDropped:function(qe){if(this._fileUploader){this._fileUploader.addDroppedFiles(qe);}else if(this._menuPromise)this._menuPromise.done(function(re){var se=re.component.getFileUploaderPromise();if(se)se.done(function(te){te.addDroppedFiles(qe);});});},_toggleStickersFlyoutShown:function(qe){this._stickerButton.showFlyout();this._stickersFlyoutShown=qe;},showStickerReplyNUX:function(){if(qd)return;new h(rc.getURIBuilder().getURI()).setRelativeTo(this._getNode('stickerButtonContainer')).setData({thread_id:this._threadID}).setHandler(function(qe){cc.clearShowStickerReplyNUX();}).send();},insertBefore:function(qe){fa.insertBefore(qe.getTabElem(),this._tabElem);},appendTo:function(qe){fa.appendContent(qe,this._tabElem);},nextTabIs:function(qe){var re=qe&&qe.getTabElem();return this._tabElem.nextSibling==re;},getScrollTop:function(){return wb.getTop(fa.find(this._tabElem,'.fbNubFlyoutBody.scrollable'));},setScrollTop:function(qe){wb.setTop(fa.find(this._tabElem,'.fbNubFlyoutBody.scrollable'),qe);},destroy:function(){this._initFrame&&sc(this._initFrame);this._selectionPosition&&this._selectionPosition.disable();while(this._eventListeners.length)this._eventListeners.pop().remove();if(this._dropTarget)this._dropTarget.disable();this._checkUnsentMessages&&this._checkUnsentMessages.cancel();this._logUnsentPhotos&&this._logUnsentPhotos.cancel();this._messagesView&&this._messagesView.destroy();this._sheetController&&this._sheetController.destroy();tb.unmountComponentAtNode(this._getNode('animationContainer'));tb.unmountComponentAtNode(this._getNode('menuContainer'));if(p.get('chat_react_header')){if(this._addToThreadButton){this._addToThreadButton.unmount();this._addToThreadButton=null;}if(this._archiveWarning){this._archiveWarning.unmount();this._archiveWarning=null;}if(this._videoCallButton){this._videoCallButton.unmount();this._videoCallButton=null;}if(this._closeButton){this._closeButton.unmount();this._closeButton=null;}if(this._title){this._title.unmount();this._title=null;}}if(this._sharePreview){this._sharePreview.unmount();this._sharePreview=null;}try{tb.unmountComponentAtNode(this._getNode('photoUploaderContainer'));tb.unmountComponentAtNode(this._getNode('fileUploaderContainer'));}catch(qe){k.bumpEntityKey('chat.web','chattab.unmount_failed');}tb.unmountComponentAtNode(this._getNode('stickerButtonContainer'));this._subscriptionsHandler&&this._subscriptionsHandler.release();if(p.get('chat_react_input')){tb.unmountComponentAtNode(this._getNode('inputContainer'));}else ra.reset(this._getNode('input'));if(this._getNode('hotLikeContainer'))tb.unmountComponentAtNode(this._getNode('hotLikeContainer'));tb.unmountComponentAtNode(this._getNode('name'));if(!p.get('chat_react_header'))tb.unmountComponentAtNode(this._getNode('titlebarText'));if(this._orionTriggerContainer){if(this._orionTrigger)this._orionTrigger.unmount();this._orionTriggerContainer=null;this._orionTrigger=null;}if(this._p2pChatThreadBannerContainerEl){tb.unmountComponentAtNode(this._p2pChatThreadBannerContainerEl);this._p2pChatThreadBannerContainerEl=null;}this._unsubscribeP2PSendMoneyDialogStore();fa.remove(this._tabElem);pd['delete'](this._threadID);ia.unregisterNubController(this._nubController);},updateAvailableStatus:function(){nd.getThreadMeta(this._threadID,(function(qe){var re=j.OFFLINE,se=this._getCanonicalUserID(),te=null;if(se){re=qb.get(se);te=yb.getNow(se);}else{var ue=qe.participants.map(function(we){return xa.getUserIDFromParticipantID(we);});re=qb.getGroup(ue);}if(!ba.isOnline())re=j.OFFLINE;this.updateCallLink();n.conditionClass(this._tabElem,"_5238",re===j.ACTIVE&&(te===undefined||te===null||!te.is_messenger_only));n.conditionClass(this._tabElem,"_5239",re===j.MOBILE||te!==undefined&&te!==null&&te.is_messenger_only);var ve=this._getNode('presenceIndicator');this._onlineStatus=re;this._pagesMessageIndicatorHandler&&this._pagesMessageIndicatorHandler.notifyPageOnlineStatusChanged(re);switch(re){case j.ACTIVE:ve.setAttribute('alt',xc._("Online"));break;case j.MOBILE:ve.setAttribute('alt',xc._("Mobile"));break;default:ve.removeAttribute('alt');break;}}).bind(this));},updateTab:function(){nd.getThreadMeta(this._threadID,(function(qe){var re=[this._getNode('name')];if(!p.get('chat_react_header')){re.push(this._getNode('titlebarText'));}else if(this._title)this._title.setProps({thread:qe},(function(){this._getNode('chatWrapper').setAttribute('aria-label',this._title.component.getTitle());}).bind(this));for(var se=re,te=Array.isArray(se),ue=0,se=te?se:se[typeof Symbol==='function'?Symbol.iterator:'@@iterator']();;){var ve;if(te){if(ue>=se.length)break;ve=se[ue++];}else{ue=se.next();if(ue.done)break;ve=ue.value;}var we=ve;tb.render(sb.createElement(eb,{isNewThread:nd.isNewEmptyLocalThread(this._threadID),thread:qe,useAndSeparator:true,useShortName:!qe.is_canonical,viewer:ea.getID()}),we);}this._updateControls(qe);this._updateMessageBlockSettings(qe);this._updateSecretModeSettings(qe);this._updateMutingSettings(qe);this._updateUnreadCount(qe);this.updateMultichatTooltip();this._updateArchiveWarning(qe);this._updateEmployeeAwayWarning(qe);this._updateOfficeStatus(qe);this._updateNewThread(qe);this._updateNameConversationSheet(qe);this._updateReadOnlySheet(qe);this._updateSwitchToWork(qe);}).bind(this));},_updateNameConversationSheet:function(qe){if(cb.canReply(qe)&&!qe.name&&!qe.is_canonical&&!qe.name_conversation_sheet_dismissed&&!qe.has_email_participant&&!qe.read_only&&!nd.isEmptyLocalThread(qe.thread_id)){this.showNameConversation(true);}else this.hideAutomaticNameConversation();},_updateReadOnlySheet:function(qe){var re=cb.showComposer(qe),se=cb.canReply(qe),te=nd.isEmptyLocalThread(qe.thread_id);if(!se&&!re&&!te)this._sheetController.openReadOnlySheet();},updateSignatureID:function(qe){this._signatureID=qe;},_updateMessageBlockSettings:function(qe){this._updateMenuPropsSafe({hasMessageBlocked:ed.isMessageBlocked(qe)});},_updateSecretModeSettings:function(qe){var re=!!(qe&&qe.ephemeral_ttl_mode);this._updateMenuPropsSafe({hasSecretModeOn:re});n.conditionClass(this._tabElem,"ephemeral",re);if(!this._isTwoLine)return;var se=re?xc._("Type a disappearing message..."):xc._("Type a message...");if(p.get('chat_react_input')){this._chatInput.setProps({placeholder:se});}else this.getInputElem().placeholder=se;},_updateMutingSettings:function(qe){var re=cb.isMuted(qe);this._updateMenuPropsSafe({isMuted:re});},_updateMenuPropsSafe:function(qe){if(this._menuPromise)this._menuPromise.done(function(re){re&&re.component&&re.component.isMounted()&&re.setProps(qe);});},_updateArchiveWarning:function(qe){if(ea.isEmployee())za.getMulti(qe.participants,this._showArchiveWarningIfAllParticipantsAreEmployees.bind(this));},_updateEmployeeAwayWarning:function(qe){if(!ea.isEmployee())return;vb.onAfterLoad((function(){m.loadModules(["ChatEmployeeAwayWarning"],(function(re){re.updateEmployeeAwayWarning(qe,(function(){this._sheetController.openEmployeeAwaySheet();}).bind(this),wc);}).bind(this));}).bind(this));},_updateOfficeStatus:function(qe){var re=this._getNode('officeStatus');if(!re||xa.isGroupChat(qe.thread_id))return;vb.onAfterLoad(function(){m.loadModules(["ChatTabOfficeStatus"],function(se){var te=xa.getParticipantIDFromUserID(qe.other_user_fbid);za.get(te,function(ue){se.update(re,ue);});});});},_updateSwitchToWork:function(qe){if(ea.isEmployee()&&ea.hasWorkUser()&&xa.isGroupChat(qe.thread_id)){za.getMulti(qe.participants,(function(re){var se=this._isEmployeesOnly(re);this._updateMenuPropsSafe({hasSwitchToWork:se});}).bind(this));}else this._updateMenuPropsSafe({hasSwitchToWork:false});},_updateControls:function(qe,re,se){var te=false;if(qe&&qe.thread_id){var ue=xa.tokenize(qe.thread_id);if(ue.type==='user'){var ve=ue.value;te=!na.isUser(ve);}}var we=cb.showComposer(qe)&&(!zc(qe.participants)||!!re)&&!this._pendingActions,xe=this._getNode('footer');n.conditionShow(xe,we);this._updateMenuPropsSafe({isEmptyChat:nd.isNewEmptyLocalThread(qe.thread_id),show:we});if(te)this._updateMenuPropsSafe({showAddFriend:null});var ye=we&&!te;if(p.get('chat_react_header')){this._addToThreadButton&&this._addToThreadButton.setProps({shown:ye});}else n.conditionShow(this._getNode('addToThreadLink'),ye);if(se&&se.length===1&&wa.ShowContextBanner&&wa.ShowContextBannerNullState){this._messagesView&&this._messagesView.renderContextBanner(null,se[0].info&&se[0].info.uid);}else this._messagesView&&this._messagesView.unmountContextBanner();this._resizeInputContainer();this._updateOrionTrigger();},_updateOrionTrigger:function(){if(this._orionTrigger){this._setOrionTriggerProps();}else this._renderOrionTrigger();},_setOrionTriggerProps:function(){this.getParticipantIDsForOrionNUX((function(qe,re){za.getMulti(qe,(function(se){var te=[],ue,ve=nd.isNewEmptyLocalThread(this._threadID);for(var we in se){ue=this._getUserIdFromParticipantID(we);if(ue!==ea.getID())te.push(qa.set(se[we],{userID:ue}));}if(this._orionTrigger)this._orionTrigger.setProps(babelHelpers._extends({participants:te,isNewEmptyLocalThread:ve,isGroupChat:xa.isGroupChat(this._threadID)&&!ve,threadID:this._threadID,threadFBID:re},mb.getStateByThreadID(this._threadID),{referrer:ab.CHAT}));}).bind(this));}).bind(this));},_getUserIdFromParticipantID:function(qe){return xa.getUserIDFromParticipantID(qe);},_onP2PSendMoneyDialogStoreChange:function(){var qe=mb.getStateByThreadID(this._threadID);if(qe&&qe.referrer!==ab.WEB_INBOX)this._updateOrionTrigger();},_unsubscribeP2PSendMoneyDialogStore:function(){if(this._sendMoneyDialogStoreSub){this._sendMoneyDialogStoreSub.remove();this._sendMoneyDialogStoreSub=null;}},_isP2PEnabled:function(){return kb.P2PEnabled;},_canP2PSend:function(){return (this._isP2PEnabled());},_renderOrionTrigger:function(){var qe=this._getCanonicalUserID();if(this._canP2PSend()&&qe!==ea.getID()){this._orionTriggerContainer=this._getNode('orionTriggerContainer');this._orionTrigger=new ub(lb,this._orionTriggerContainer);this._orionTrigger.setProps({flyoutAlignment:this._isTwoLine?'right':undefined,onTrigger:this._orionTriggered.bind(this)});n.addClass(this._inputContainerNode,"_11d6");this._setOrionTriggerProps();}},getParticipantIDsForOrionNUX:function(qe){var re=this._sheetController.getAddFriendsParticipants(),se=this._getCanonicalUserID();if(se){qe([xa.getParticipantIDFromUserID(se)]);}else if(nd.isNewEmptyLocalThread(this._threadID)&&re){qe(re);}else nd.getThreadMeta(this._threadID,function(te){qe(te.participants,te.thread_fbid);});},_resizeInputContainer:function(){if(!this._isTwoLine){var qe=this._tabElem.clientWidth,re=2,se=qe-(this._inputContainerNode.clientWidth+re),te=ua.isRTL()?'left':'right';dc.set(this._iconsContainerNode,te,se+'px');}if(!p.get('chat_react_input'))hc.getInstance(this._getNode('input')).update();},_updateNewThread:function(qe){if(nd.isNewEmptyLocalThread(qe.thread_id))this.showAddFriend();},_isEmployeesOnly:function(qe){for(var re in qe)if(!qe[re].employee)return false;return true;},_showArchiveWarningIfAllParticipantsAreEmployees:function(qe){var re=this._isEmployeesOnly(qe),se=p.get('chat_react_header'),te=se?this._getNode('archiveContainer'):this._getNode('titanArchiveWarning');if(te){if(this._titlebarTooltipAnchor)n.conditionClass(this._titlebarTooltipAnchor,'narrowTitleBar',re);n.conditionShow(te,re);if(se)this._archiveWarning&&this._archiveWarning.setProps({shown:re});}},updateMultichatTooltip:function(){nd.getThreadMeta(this._threadID,(function(qe){if(!qe.is_canonical){var re;if(p.get('chat_react_header')){re=tb.findDOMNode(this._title.component);}else re=this._titlebarTooltipAnchor;ud(re,qe.participants);}}).bind(this));},_getNode:function(qe){return this._tabTemplate.getNode(qe);},_getCanonicalUserID:function(){return xa.getUserIDFromThreadID(this._threadID);},_listen:function(qe,event,re,se){var te=this._getNode(qe);if(te){this._eventListeners.push(ma.listen(te,event,re.bind(this)));}else if(!se)throw new Error('Could not find node "'+qe+'"');},_closePreClicked:function(qe){this._closeMouseDown=true;},_closeClicked:function(qe){le(this);v.closeTab(this._threadID);if(qe instanceof fc){qe.stopPropagation();return;}qe.kill();},_closeEnter:function(qe){if(qe.keyCode===ta.RETURN)this._closeClicked(qe);},_nubClicked:function(qe){qe.kill();return y.inform('nub-activated',this._threadID);},_dockKeyDown:function(event){if(event.keyCode===ta.RETURN||event.keyCode===ta.SPACE){y.inform('nub-activated',this._threadID);event.kill();}else this._handleHotkeyPressed(event);},_handleHotkeyPressed:function(event){if(event.keyCode===ta.ESC){this._handleEscape();if(p.get('chat_react_input'))event=new ga(event);event.kill();}else if(event.keyCode===ta.TAB)this._handleTabPressed(event);},_handleTabPressed:function(event){if(!event.ctrlKey){var qe=y.inform('tab-pressed',{id:this._threadID,shiftPressed:event.shiftKey});if(p.get('chat_react_input'))event=new ga(event);!qe&&event.kill();return true;}},_handleEscape:function(){if(this._stickersFlyoutShown){this._toggleStickersFlyoutShown(false);return;}le(this);if(this.hasEmptyInput()){y.inform('esc-pressed',this._threadID);}else{var qe=xc._("Are you sure you want to close this chat window?"),re=xc._("You haven't sent your message.");zb.showConfirm(qe,re,(function(se){if(se){y.inform('esc-pressed',this._threadID);}else this.focus();}).bind(this),{autofocusConfirm:true});}},_titleClicked:function(event){var qe=event.getTarget();if(!ob.byClass(qe,'titlebarText')&&!ob.byClass(qe,'uiSelector')&&!ob.byClass(qe,'addToThread')&&!ob.byClass(qe,'optionMenu')&&!ob.byClass(qe,'videoicon')&&!ob.byClass(qe,'phoneicon')&&!ob.byClass(qe,"_1fu3")&&!ob.byClass(qe,"_1fu4")&&!ob.byClass(qe,'close')){event.kill();v.lowerTab(this._threadID);this.focus();}},_groupCallEnter:function(qe){if(qe.keyCode===ta.RETURN)this._groupCallClicked(qe);},_groupCallClicked:function(qe){if(qe.target)qe.target.blur();if(this._videoCallLinkEnabled){var re;if(qe.target&&(n.hasClass(qe.target,'phoneicon')||n.hasClass(qe.target,"_1fu4"))){re='chat_tab_voice_icon';}else re='chat_tab_icon';nd.getThreadMeta(this._threadID,function(se){var te=se.participants.map(function(ve){return xa.getUserIDFromParticipantID(ve);}),ue=te.filter(function(ve){return ve!==ea.getID();});y.inform('group-call-clicked',{threadID:'GROUP:'+se.thread_fbid.toString(),usersToCall:ue,clickSource:re,audioOnly:re==='chat_tab_voice_icon'});});}if(p.get('chat_react_header')){qe.stopPropagation();}else return false;},_callEnter:function(qe){if(qe.keyCode===ta.RETURN)this._callClicked(qe);},_callClicked:function(qe){if(qe.target)qe.target.blur();var re=this._getCanonicalUserID();if(this._videoCallLinkEnabled){var se;if(qe.target&&(n.hasClass(qe.target,'phoneicon')||n.hasClass(qe.target,"_1fu4"))){se='chat_tab_voice_icon';}else se='chat_tab_icon';y.inform('video-call-clicked',{threadID:this._threadID,userID:re,clickSource:se,audioOnly:se==='chat_tab_voice_icon'});}if(p.get('chat_react_header')){qe.stopPropagation();}else return false;},_addFriendLinkClicked:function(){this.showAddFriend();},_getUserParticipants:function(qe){var re=[];qe.forEach(function(se){var te=xa.getUserIDFromParticipantID(se);te&&re.push(te);});return re;},_enableDesktopNotif:function(){Notification.requestPermission();},_inputPasted:function(event){if(lc.chrome()){var qe=event.clipboardData||event.originalEvent.clipboardData;if(!qe||!qe.items||qe.items.length<1)return;var re=qe.items[0].type;if(re!=='image/png')return;if(qe.items[0].getAsFile){var se=qe.items[0].getAsFile();this._photoUploader.uploadFile(se);}}},_focusInput:function(){q.processEvent('focus');if(p.get('chat_react_input')){this._chatInput&&this._chatInput.isMounted()&&this._chatInput.focus();}else this._getNode('input').focus();},_focusTab:function(){n.addClass(this._tabElem,'focusedTab');this.tryMarkAsRead();this._closeMouseDown=false;this._setCloseTooltip(true);y.inform('focus-tab',this._threadID);},_blurTab:function(){q.processEvent('blur');n.removeClass(this._tabElem,'focusedTab');!this._closeMouseDown&&this._setCloseTooltip(false);},_setCloseTooltip:function(qe){if(p.get('chat_react_header')){this._closeButton&&this._closeButton.setProps({active:qe});return;}var re=this._getNode('titlebarCloseButton'),se=qe?xc._("Press Esc to close"):xc._("Close tab");ic.set(re,se,'above');},_inputKeyDown:function(event){this.tryMarkAsRead();if(event.keyCode===ta.RETURN&&!event.shiftKey){if(ge(this)){ee(this);event.kill&&event.kill();return;}be(this);event.kill&&event.kill();return;}if(event.keyCode===ta.DOWN&&event.shiftKey&&this.hasEmptyInput()){event.kill&&event.kill();v.lowerTab(this._threadID);this.focus();return;}this._handleHotkeyPressed(event);},_showMessageBlockedDialog:function(qe){var re=this._getCanonicalUserID();if(!re)return;if(!p.get('chat_react_input'))this._getNode('input').blur();var se='fbid:'+re;za.get(se,function(te){m.loadModules(["MessageBlockedDialog"],function(ue){ue.show(qe.thread_id,qe.can_reply,ed.isMessageBlocked(qe),te.short_name);});});},_initializeComposer:function(){if(this._isTwoLine)n.addClass(this._tabElem,"_8mr");},_initializeInput:function(){if(!p.get('chat_react_input')){var qe=this._inputContainerNode.clientHeight;hc.getInstance(this._getNode('input')).subscribe('resize',(function(){var se=this._inputContainerNode.clientHeight;if(se!=qe)this._nubController.flyoutContentChanged();qe=se;}).bind(this));this._listen('input','focus',this._focusTab);this._listen('input','blur',this._blurTab);this._listen('input','paste',this._inputPasted);if(lc.firefox()&&da.get()=='ko_KR'){this._listen('input','keyup',this._inputKeyDown);}else this._listen('input','keydown',this._inputKeyDown);this._initializeThingsWithInputFn(this._tabTemplate.getNode('input'));}else{var re=this._isTwoLine?xc._("Type a message..."):null;this._chatInput=tb.render(sb.createElement(dd,{initializeThingsWithInputFn:this._initializeThingsWithInputFn.bind(this),inputKeyDown:this._inputKeyDown.bind(this),onBlur:this._blurTab.bind(this),onEscape:this._handleEscape.bind(this),onFocus:this._focusTab.bind(this),onTab:this._handleTabPressed.bind(this),openFlyoutFn:(function(){return this._toggleStickersFlyoutShown(true);}).bind(this),resizeFn:(function(se){dc.set(this._getNode('inputContainer'),'height',se+'px');this._nubController.flyoutContentChanged();}).bind(this),uploadPhotoFn:(function(se){this._photoUploader&&this._photoUploader.uploadFile(se);}).bind(this),placeholder:re}),this._getNode('chatInputContainer'));}},_initializeSharePreview:function(qe,re){ma.listen(qe,'keyup',(function(){var se=re?re():qe.value;if(!se.length)if(this._urlScraper){this._urlScraper.reset();delete this._urlScraperData;}}).bind(this));vb.onAfterLoad((function(){m.loadModules(["URLScraper"],(function(se){this._urlScraper=new se(qe,re);this._urlScraper.subscribe('match',(function(te,ue){this._urlScraperData=ue;this._getSharePreview().done((function(ve){var we=this._urlScraperData;ve.setProps({share:null,uri:we&&we.url});}).bind(this));}).bind(this));}).bind(this));}).bind(this));},_getSharePreview:function(){if(!this._sharePreview&&!this._sharePreviewPromise){this._sharePreviewLoading=true;this._sharePreviewPromise=new rb((function(qe){m.loadModules(["MercurySharePreview.react"],(function(re){this._sharePreview=new ub(re,this._getNode('shareAttachmentShelf'));this._sharePreview.setProps({imageSize:{width:sd,height:sd},location:ab.CHAT_PREVIEW,onClose:this._focusInput.bind(this),onUpdate:(function(){ie(this);this._unblockSend();}).bind(this)});this._sharePreviewLoading=false;qe(this._sharePreview);}).bind(this));}).bind(this));}return this._sharePreviewPromise;},_initializeThingsWithInputFn:function(qe,re){this._initializeSharePreview(qe,re);nd.getThreadMeta(this._threadID,(function(se){if(wa.CoreGraphEnabled&&se&&se.folder===hb.PENDING){var te=fa.create('div');fa.appendContent(this._getNode('chatConv'),te);this._pendingActions=te;tb.render(sb.createElement(l,{bootloadPlaceholder:sb.createElement('div',{style:{height:27}}),bootloadLoader:sa('ChatPendingActions.react'),onDeleteClick:(function(ue){nc.show(this._threadID);}).bind(this),onReplyClick:(function(ue){fa.remove(te);delete this._pendingActions;this._updateControls(se);}).bind(this)}),te);}jd.getServerIDFromClientID(this._threadID,(function(ue){this._typingDetector=new jc(this._getCanonicalUserID(),qe,'mercury-chat',null,ue,re);}).bind(this));}).bind(this));},_getInputValue:function(){if(p.get('chat_react_input')){if(!this._chatInput||!this._chatInput.isMounted())return '';return this._chatInput.getValue()||'';}else return this._tabTemplate.getNode('input').value||'';},appendTextToInput:function(qe){if(p.get('chat_react_input')){if(this._chatInput&&this._chatInput.isMounted())this._chatInput.appendText(qe);}else this._getNode('input').value+=qe;},_hasUnfinishedPost:function(){return he(this)||fe(this);},tryMarkAsRead:function(){if(!this._messagesView||this._messagesView.isScrolledToBottom()){md.markRead(this._threadID);md.markSeen(this._threadID);return true;}return false;},_chatConvClicked:function(qe){this.tryMarkAsRead();if(ob.byTag(qe.getTarget(),'a')||fa.getSelection())return;this.focus();},_inputContainerClicked:function(qe){this.tryMarkAsRead();this.focus();},_initializePageMessagingIndicator:function(){if(!this._pagesMessageIndicator)return;n.hide(this._pagesMessageIndicator);this._pagesMessageIndicatorHandler=nb.tryCreateHandler(this._threadID,this._pagesMessageIndicator,this._onlineStatus);this._pagesMessageIndicatorHandler&&this._pagesMessageIndicatorHandler.checkResponsiveness();},showTypingIndicator:function(qe){this._renderTypingIndicator();n.conditionClass(this._tabElem,"_54m8",qe);},_renderTypingIndicator:function(){var qe=n.hasClass(this._tabElem,'highlightTab')?'light':'dark';tb.render(sb.createElement(db,{color:qe}),this._getNode('animationContainer'));},_updateUnreadCount:function(qe){var re=qe.unread_count;if(typeof re!='undefined'){var se=!!re&&(!o.showsTabUnreadUI||o.showsTabUnreadUI()),te=this._getNode('numMessages');n.conditionShow(te,se);n.conditionClass(this._tabElem,'highlightTab',se);this._renderTypingIndicator();yd(this._threadID,this._tabElem,se);fa.setContent(te,re);}},updateCallLink:function(){var qe=xa.isGroupChat(this._threadID);if(qe&&p.get('rtc_conferencing')){this._videoCallLinkEnabled=true;if(!p.get('chat_react_header'))n.conditionClass(this._tabElem,"_26-s",this._videoCallLinkEnabled);}else{var re=this._getCanonicalUserID();if(!re||re===ea.getID()||!na.isUser(re)){if(p.get('chat_react_header')){if(this._videoCallButton)this._videoCallButton&&this._videoCallButton.setProps({shown:false});}else{var se=this._getNode('videoCallLink');if(se)n.hide(se);var te=this._getNode('voiceCallLink');if(te)n.hide(te);}this._videoCallLinkEnabled=false;return;}this._videoCallLinkEnabled=oa.isCallable(re);if(!p.get('chat_react_header')){n.conditionClass(this._tabElem,"_4hwz",this._videoCallLinkEnabled);za.get(xa.getParticipantIDFromUserID(re),(function(ue){oa.callButtonTooltip(re,ue.short_name);this._setCallButtonTooltips(re,ue.short_name);}).bind(this));}}},_setCallButtonTooltips:function(qe,re){var se=oa.callButtonTooltip(qe,re),te=oa.voiceCallButtonTooltip(qe,re);ic.set(this._getNode('videoCallLink'),se);var ue=this._getNode('voiceCallLink');if(ue)ic.set(ue,te);},_initializeSheetController:function(){this._sheetController=new x(this._threadID,this._getNode('sheet'),this._tabElem,this);this._sheetController.onClickMessagesBlockedSheet((function(){md.unblockMessages(this._threadID);this.focus();}).bind(this));this._sheetController.onClickNewMessagesSheet((function(){this._messagesView&&this._messagesView.scrollToBottom();this.focus();this.tryMarkAsRead();}).bind(this));this._sheetController.onClickThreadIsMutedSheet((function(){md.unmute(this._threadID);this.focus();}).bind(this));this._sheetController.onClickSecretModeSheet((function(){md.turnOffSecretMode(this._threadID);this.focus();}).bind(this));this._sheetController.onTokensChanged((function(qe,re){nd.getThreadMeta(this._threadID,(function(se){this._updateControls(se,re.token_count,re.tokens);}).bind(this));}).bind(this));this._nubController=new ib().init(this._tabElem);this._sheetController.onResize((function(){this._nubController.flyoutContentChanged();}).bind(this));this._nubController.subscribe('resize',(function(){this._resizeInputContainer();}).bind(this));},_initializeHeader:function(){this._initializeReactMenu(this._getNode('fileAttachmentShelf'));this._initializeArchiveWarning();this._initializeAddToThreadButton();this._initializeVideoCallButton();this._initializeCloseButton();this._initializeTitle();},_initializeReactMenu:function(qe){var re=xa.isGroupChat(this._threadID),se=nd.isNewEmptyLocalThread(this._threadID),te=this._sheetController.openAddFriendsSheet.bind(this._sheetController);this._menuPromise=new rb((function(ue){vb.onAfterLoad((function(){sa('ChatTabMenu.react').load().done((function(ve){this._reactChatTabMenu=new ub(ve,this._getNode('menuContainer'));this._reactChatTabMenu.setProps({sheetController:this._sheetController,onFileUploaderMounted:this.setFileUploader.bind(this),nameConversationFunc:(function(){return this.showNameConversation();}).bind(this),isGroupChat:re,isEmptyChat:se,showAddFriend:te,threadID:this._threadID,otherUserID:this._getCanonicalUserID(),attachmentsShelf:qe,onUploadFinished:this._unblockSend.bind(this),onUpdateAttachmentsShelf:ie.bind(this,this),onSubmit:this._focusInput.bind(this)},(function(){return ue(this._reactChatTabMenu);}).bind(this));}).bind(this));}).bind(this));}).bind(this));},_initializeArchiveWarning:function(){if(p.get('chat_react_header'))vb.onAfterLoad((function(){m.loadModules(["ChatArchiveWarning.react"],(function(qe){this._archiveWarning=new ub(qe,this._getNode('archiveContainer'));this._archiveWarning.setProps({isFBAtWork:qc.is_work_user,shown:true});}).bind(this));}).bind(this));},_initializeAddToThreadButton:function(){if(p.get('chat_react_header')){vb.onAfterLoad((function(){m.loadModules(["ChatAddToThreadButton.react"],(function(qe){this._addToThreadButton=new ub(qe,this._getNode('addToThreadContainer'));this._addToThreadButton.setProps({isFBAtWork:qc.is_work_user,onClick:this._addFriendLinkClicked.bind(this),shown:true});}).bind(this));}).bind(this));}else this._listen('addToThreadLink','click',this._addFriendLinkClicked,true);},_initializeVideoCallButton:function(){vb.onAfterLoad((function(){m.loadModules(["ChatVideoCallButton.react"],(function(qe){var re=xa.isGroupChat(this._threadID);if(re&&p.get('rtc_conferencing')){if(p.get('chat_react_header')){this._videoCallButton=new ub(qe,this._getNode('videoCallButtonContainer'));this._videoCallButton.setProps({shown:true,isAudio:false,isGroupChat:true,userID:null,onClick:this._groupCallClicked.bind(this),onKeyUp:this._groupCallEnter.bind(this)});this._voiceCallButton=new ub(qe,this._getNode('voiceCallButtonContainer'));this._voiceCallButton.setProps({shown:true,isAudio:true,isGroupChat:true,userID:null,onClick:this._groupCallClicked.bind(this),onKeyUp:this._groupCallEnter.bind(this)});}else{this._listen('videoCallLink','click',this._groupCallClicked,true);this._listen('videoCallLink','keyup',this._groupCallEnter,true);if(this._getNode('voiceCallLink')){this._listen('voiceCallLink','click',this._groupCallClicked,true);this._listen('voiceCallLink','keyup',this._groupCallEnter,true);}}}else{if(!xa.getUserIDFromThreadID(this._threadID))return;if(p.get('chat_react_header')){var se=this._getCanonicalUserID();this._videoCallButton=new ub(qe,this._getNode('videoCallButtonContainer'));this._videoCallButton.setProps({shown:true,isAudio:false,userID:se,onClick:this._callClicked.bind(this),onKeyUp:this._callEnter.bind(this)});var te=this._getNode('voiceCallButtonContainer');if(te){this._voiceCallButton=new ub(qe,te);this._voiceCallButton.setProps({shown:true,isAudio:true,userID:se,onClick:this._callClicked.bind(this),onKeyUp:this._callEnter.bind(this)});}}else{this._listen('videoCallLink','click',this._callClicked,true);this._listen('videoCallLink','keyup',this._callEnter,true);if(this._getNode('voiceCallLink')){this._listen('voiceCallLink','click',this._callClicked,true);this._listen('voiceCallLink','keyup',this._callEnter,true);}}}}).bind(this));}).bind(this));},_initializeCloseButton:function(){if(p.get('chat_react_header')){vb.onAfterLoad((function(){m.loadModules(["ChatCloseButton.react"],(function(qe){this._closeButton=new ub(qe,this._getNode('closeButtonContainer'));this._closeButton.setProps({onClick:this._closeClicked.bind(this),onKeyUp:this._closeEnter.bind(this),onMouseDown:this._closePreClicked.bind(this)});}).bind(this));}).bind(this));}else{this._listen('titlebarCloseButton','click',this._closeClicked);this._listen('titlebarCloseButton','keyup',this._closeEnter);this._listen('titlebarCloseButton','mousedown',this._closePreClicked);}},_initializeTitle:function(){if(p.get('chat_react_header')){var qe=nd.getThreadMetaNow(this._threadID);this._title=new ub(aa,this._getNode('titleContainer'));this._title.setProps({isNewThread:nd.isNewEmptyLocalThread(this._threadID),thread:qe,viewer:ea.getID()});}},_initializeTitleHREF:function(){oc.getThreadURI(this._threadID,(function(re){return this._setTitleHref(re);}).bind(this));if(!xa.getUserIDFromThreadID(this._threadID))this._titlebarTooltipAnchor=this._getNode('titlebarText');var qe=this._getCanonicalUserID();if(this._getCanonicalUserID())za.get(xa.getParticipantIDFromUserID(qe),(function(re){if(re.href)this._setTitleHref(re.href);}).bind(this));},_initializeUIListeners:function(){if(this._pagesMessageIndicator)this._listen('scrollingArea','scroll',(function(event){var qe=event.target;if(qe.scrollHeight-qe.offsetHeight!==qe.scrollTop)this._pagesMessageIndicatorHandler&&this._pagesMessageIndicatorHandler.hideIndicatorAndPreventFutureShow();}).bind(this));this._listen('closeButton','click',this._closeClicked);this._listen('dockButton','click',this._nubClicked);this._listen('dockButton','keydown',this._dockKeyDown);this._listen('nubFlyoutTitlebar','click',this._titleClicked);this._listen('chatConv','click',this._chatConvClicked);this._listen('inputContainer','click',this._inputContainerClicked);this._listen('sheet','keydown',(function(event){if(!event.getModifiers().any&&event.keyCode===ta.TAB){this._focusInput();event.kill();}if(event.keyCode===ta.ESC)this._handleEscape();}).bind(this));if(this._getNode('officeStatus'))this._listen('officeStatus','click',function(){return false;},true);},setFileUploader:function(qe){this._fileUploader=qe;},_initializeAutoSendPhotoUploader:function(){this._photoUploader=tb.render(sb.createElement(s,{onSubmit:this._handlePUSubmit.bind(this),onAllUploadsComplete:this._handlePUAllUploadsCompleted.bind(this),onLastUploadFail:this._handlePULastUploadFailed.bind(this),onLastUploadCancel:this._handlePULastUploadCanceled.bind(this)}),this._getNode('photoUploaderContainer'));},_initializeStickers:function(){var qe=this._isTwoLine?'right':'left';this._stickerButton=tb.render(sb.createElement(u,{className:"_4vui",flyoutAlignment:qe,isChat:true,onFlyoutShown:this._onStickerFlyoutShown.bind(this),onFlyoutHidden:this._onStickerFlyoutHidden.bind(this),onStickerSelect:this._stickerSelected.bind(this),onEmoticonSelect:this._emoticonSelected.bind(this),threadID:this._threadID}),this._getNode('stickerButtonContainer'));},_initializeAutoSendFileUploader:function(){if(!this._isTwoLine||!this._fileUploaderNode)return;this._photoUploader=tb.render(sb.createElement(s,{imageClassName:"_2wye",imagesOnly:false,onSubmit:this._handlePUSubmit.bind(this),onAllUploadsComplete:this._handlePUAllUploadsCompleted.bind(this),onLastUploadFail:this._handlePULastUploadFailed.bind(this),onLastUploadCancel:this._handlePULastUploadCanceled.bind(this)}),this._fileUploaderNode);},_initializeContentSearch:function(){if(this._contentSearchNode){tb.render(sb.createElement(l,{bootloadPlaceholder:sb.createElement('div',{style:{height:27}}),bootloadLoader:sa('ChatContentSearchButton.react'),className:"_4vui _2ksk",getInput:(function(){return this.getInputElem();}).bind(this),getQuery:(function(){return this._getInputValue();}).bind(this),onLoad:(function(qe){this._contentSearchButton=qe;}).bind(this),onSelect:(function(qe,re){var se=this.getInputElem();se&&se.select&&se.select();if(qe.platformFBID.toString()===wa.MessengerAppID){this._stickerSelected(qe.resultID.toString());}else{this._photoUploader&&this._photoUploader.uploadURL({attribution_app_id:qe.platformFBID,errorDialogParams:{body:xc._("There was a problem sending this GIF. Choose another one and try again."),title:xc._("Couldn't Send GIF")},external_image_url:qe.source.url,preview_url:qe.media.preview?qe.media.preview.url:qe.media.thumbnail.url,source:qe.source});this._messagesView&&this._messagesView.scrollToBottom();}}).bind(this)}),this._contentSearchNode);n.addClass(this._inputContainerNode,"_35li");k.bumpEntityKey('chat.web','content_search_button.mounting_attempted');}},_initializeEmojiSearch:function(){if(this._emojiSearchNode){tb.render(sb.createElement(l,{bootloadPlaceholder:sb.createElement('div',{style:{height:27}}),bootloadLoader:sa('ChatEmojiSearchButton.react'),className:"_4vui _32cu",getInput:(function(){return this.getInputElem();}).bind(this),getQuery:(function(){return this._getInputValue();}).bind(this),onLoad:(function(qe){this._contentEmojiButton=qe;}).bind(this),onSelect:function(){}}),this._emojiSearchNode);n.addClass(this._inputContainerNode,"_32cv");k.bumpEntityKey('chat.web','chat_emoji_search.mounting_attempted');}},_initializeDragDropTarget:function(){if(pc.canUploadFiles){var qe=ha.scry(this._tabElem,"._1ia");if(qe&&qe.length>0){this._dropTarget=new ja(qe[0]);this._dropTarget.setOnFilesDropCallback(this._filesDropped.bind(this));this._dropTarget.setOnURLDropCallback(this._linkDropped.bind(this));this._dropTarget.enable();}}},_initializeP2PChatThreadBannerContainer:function(){var qe=ha.scry(this._tabElem,"._2hc2");if(qe&&qe.length>0){this._p2pChatThreadBannerContainerEl=qe[0];this._p2pChatThreadBannerContainer=new ub(jb,this._p2pChatThreadBannerContainerEl);this._p2pChatThreadBannerContainer.setProps({isVisible:this.isChatViewable(),otherUserID:xa.getUserIDFromThreadID(this._threadID),threadID:this._threadID});}},setP2PChatThreadBannerContainerVisibility:function(){if(this._p2pChatThreadBannerContainer)this._p2pChatThreadBannerContainer.setProps({isVisible:this.isChatViewable()});},isChatViewable:function(){return (this._tabElem&&n.hasClass(this._tabElem,'opened')&&!n.hasClass(this._tabElem,'hidden_elem'));},_initializeP2P:function(){this._sendMoneyDialogStoreSub=mb.addListener('change',this._onP2PSendMoneyDialogStoreChange.bind(this));if(this._isP2PEnabled())this._renderOrionTrigger();},_initializeHotLike:function(){var qe=nd.getThreadMetaNow(this._threadID),re=qe?qe.custom_like_icon:null;if(this._getNode('hotLikeContainer')){tb.render(sb.createElement(gb,{className:"_3s0d",customLike:re,onMouseDown:(function(){if(this._contentSearchButton)this._contentSearchButton.hideFlyout();}).bind(this),sendSticker:this._stickerSelected.bind(this),threadID:this._threadID}),this._getNode('hotLikeContainer'));n.addClass(this._inputContainerNode,"_n4k");}},_initializeUnloadListeners:function(){this._checkUnsentMessages=tc((function(){if(this._hasUnfinishedPost())return xc._("You haven't sent your message yet. Do you want to leave without sending?");if(hd.getNumberLocalMessages(this._threadID))return xc._("Your message is still being sent. Are you sure you want to leave?");return null;}).bind(this));vb.onBeforeUnload(this._checkUnsentMessages,false);this._logUnsentPhotos=tc(le.bind(null,this));vb.onUnload(this._logUnsentPhotos);},_handlePUSubmit:function(qe,re){je(this,pb.UPLOAD_START,re);de(this,'',[],(function(se){if(this._threadID!==se.thread_id){this._newThreadIDFromPhotoUpload=se.thread_id;if(this._messagesView)this._messagesView.setNewThreadID(se.thread_id);}se.content_attachment=null;gd.addAttachmentPlaceholder(se,re.upload_id,re);}).bind(this));oe('submit',re);this._focusInput();},_handlePULastUploadFailed:function(qe,re){je(this,pb.CLIENT_ERROR,re);oe('failed',re);gd.cancelAttachmentPlaceholder(re.upload_id,re);var se=xc._("Photo Upload Failed"),te=xc._("Please try again. Make sure you are uploading a valid photo.");if(re.errorDialogParams){se=re.errorDialogParams.title||se;te=re.errorDialogParams.body||te;}zb.show(se,te);},_handlePULastUploadCanceled:function(qe,re){je(this,pb.CANCEL_DURING_UPLOAD,re);oe('canceled',re);gd.cancelAttachmentPlaceholder(re.upload_id,re);},_handlePUAllUploadsCompleted:function(qe,re){je(this,pb.ALL_UPLOADS_DONE,re);oe('completed',re);gd.confirmAttachmentPlaceholder(re.upload_id,re);var se=re.image_ids.length||re.attachments.length;ce(this,se);},_stickerSelected:function(qe){de(this,'',[],(function(re){re.has_attachment=true;re.sticker_id=qe;gd.send(re);this.focus();}).bind(this));this._messagesView&&this._messagesView.scrollToBottom();},_emoticonSelected:function(qe){var re=la.symbols[qe];if(!re)return;if(p.get('chat_react_input')){this._chatInput.insertEmoticon(re);return;}this._selectionPosition=this._selectionPosition||new xb(this._getNode('input'));var se=hc.getInstance(this._getNode('input')),te=se.getValue(),ue=ka.insertEmoticon(re,te,this._selectionPosition.getPos());se.setValue(ue.result);this._selectionPosition.setPos(ue.start,ue.end);},_orionTriggered:function(){de(this,'',[],(function(qe){this.focus();}).bind(this));this._messagesView&&this._messagesView.scrollToBottom();},_onStickerFlyoutShown:function(qe){var re=this._stickersFlyout.props.packID;if(re!==bc.SEARCH_PACK_ID)this.focus();qe();this._stickersFlyoutShown=true;},_searchStickers:function(qe,re){this._stickersFlyout&&this._stickersFlyout.setProps({packID:bc.SEARCH_PACK_ID,trigger:qe},re);},_onStickerFlyoutHidden:function(){this._stickersFlyoutShown=false;this.focus();},_setTitleHref:function(qe){if(p.get('chat_react_header')){this._title&&this._title.setProps({href:qe});}else{var re=this._getNode('titlebarText');re.setAttribute('href',qe);re.removeAttribute('rel');n.removeClass(re,'noLink');}},_unblockSend:function(){if(!this._blocked||ge(this))return;this._blocked=false;be(this);this._sheetController.closeUploadWarningTabSheet();},_logOpenTab:function(){new i('/ajax/chat/opentab_tracking.php',{threadID:this._threadID,userID:this._getCanonicalUserID(),signatureID:this._signatureID}).send();}});function oe(qe,re){td.debug('photo_uploader:'+qe,babelHelpers._extends({},re));}function pe(qe,re){if(!re)return qe;var se=re.getImageFiles();if(se.length>0){qe.image_ids=se;qe.has_attachment=true;}var te=re.getAnimatedImageFiles();if(te.length>0){qe.gif_ids=te;qe.has_attachment=true;}var ue=re.getVideoFiles();if(ue.length>0){qe.video_ids=ue;qe.has_attachment=true;}var ve=re.getAudioFiles();if(ve.length>0){qe.audio_ids=ve;qe.has_attachment=true;}var we=re.getFiles();if(we.length>0){qe.file_ids=we;qe.has_attachment=true;}return qe;}f.exports=ke;},null);
fbid:100000075573403
fbid:100000075573403]
"is_employee_away":false,"networks":[],"type":"user","vanity":"marianafpaulo","is_friend":true,"social_snippets":[],"is_messenger_user":false},{"fbid":1177521907,"gender":2,"href":"https:\/\/www.facebook.com\/tiago.diogo","id":"fbid:1177521907","image_src":"https:\/\/fbcdn-profile-a.akamaihd.net\/hprofile-ak-xaf1\/v\/t1.0-1\/p32x32\/10407252_10205534025208148_1261194969720010832_n.jpg?oh=fa9b246d7afe7c9324ba3bf13eb939d1&oe=56E68101&__gda__=1458114237_e4d6631ef26225833f79208bcfe955e8","big_image_src":"https:\/\/fbcdn-profile-a.akamaihd.net\/hprofile-ak-xaf1\/v\/t1.0-1\/p50x50\/10407252_10205534025208148_1261194969720010832_n.jpg?oh=3ca17a52b40f650e1447a6a39761c4a9&oe=56E6B0EE&__gda__=1454149202_05e5567771f504c9d96a1476ac265c05","name":"Tiago Diogo","short_name":"Tiago","employee":false,"is_employee_away":false,"networks":[],"type":"user","vanity":"tiago.diogo","is_friend":true,"social_snippets":[],"is_messenger_user":true},{"fbid":1743460630,"gender":2,"href":"https:\/\/www.facebook.com\/tiago.brito.9","id":"fbid:1743460630","image_src":"https:\/\/fbcdn-profile-a.akamaihd.net\/hprofile-ak-xfp1\/v\/t1.0-1\/p32x32\/10896938_4970348473519_7012878390038484353_n.jpg?oh=421adcd132322efc4639420da4078aa1&oe=56F1AF48&__gda__=1455267440_3edf3b11081802afb1f9d9062c433e38","big_image_src":"https:\/\/fbcdn-profile-a.akamaihd.net\/hprofile-ak-xfp1\/v\/t1.0-1\/p50x50\/10896938_4970348473519_7012878390038484353_n.jpg?oh=9d239c5119ac8fa4102ec34001dbc19c&oe=56BD4074&__gda__=1458357580_149695ea60113630af58c47fc2c36fd1","name":"Tiago Brito","short_name":"Tiago","employee":false,"is_employee_away":false,"networks":[],"type":"user","vanity":"tiago.brito.9","is_friend":true,"social_snippets":[],"is_messenger_user":false}],"unseen_thread_fbids":[{"thread_fbids":[],"other_user_fbids":null,"thread_ids":[],"folder":"inbox"}],"roger":{"100000680200678":{"100000680200678":1447692891832},"100008908081924":{"100008908081924":1447690710419},"1200993648":{"1200993648":1447690643051},"1658786171075059":{"1177521907":1447685846581,"1743460630":1447685846581},"1743460630":{"1743460630":1447684175934}},"delivery_receipts":[{"other_user_fbid":"100000680200678","thread_fbid":null,"time":1447692882905},{"other_user_fbid":"100008908081924","thread_fbid":null,"time":1447630416289},{"other_user_fbid":"1200993648","thread_fbid":null,"time":1447690643051},{"other_user_fbid":null,"thread_fbid":"1658786171075059","time":1447685846581},{"other_user_fbid":"1743460630","thread_fbid":null,"time":1447682200117}],"payload_source":"server_fetch_threadlist_info"},"bootloadable":{},"ixData":{},"lid":"6217794691271765635"}tent_quasar":false,"is_filtered_content_invalid_app":false,"forward_count":0,"forward_message_ids":[],"source":"source:chat:orca","source_tags":["source:messenger","source:chat","source:mobile"],"is_spoof_warning":false,"folder":"inbox","thread_fbid":"100000680200678","other_user_fbid":"100000680200678","body":"Se te servir de ideia","subject":null,"has_attachment":false,"attachments":[],"raw_attachments":null,"ranges":[],"thread_id":"mid.1414028124846:ddce568db74c17b061","action_id":null,"action_type":"ma-type:user-generated-message"},{"message_id":"mid.1446576865563:f3cef713a505df1b49","threading_id":null,"offline_threading_id":"6067383134173706524","author":"fbid:100000075573403","author_email":"100000075573403\u0040facebook.com","ephemeral_ttl_mode":null,"timestamp":1446576865566,"timestamp_absolute":"November 3","timestamp_relative":"Nov 3","t
data-fbid
.$fbid=2100000680200678<]
unread_thread_fbids
 qmfbid=%d
