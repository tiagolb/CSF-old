age"},{"message_id":"mid.1447684175873:f58333f672ead72710","threading_id":null,"offline_threading_id":"6072027538344346995","author":"fbid:1743460630","author_email":"1743460630\u0040facebook.com","ephemeral_ttl_mode":null,"timestamp":1447684175934,"timestamp_absolute":"Today","timestamp_relative":"2:29pm","timestamp_datetime":"2:29pm","timestamp_time_passed":0,"is_unread":false,"is_forward":false,"is_filtered_content":false,"is_filtered_content_bh":false,"is_filtered_content_account":false,"is_filtered_content_quasar":false,"is_filtered_content_invalid_app":false,"forward_count":0,"forward_message_ids":[],"source":"source:chat:web","source_tags":["source:chat"],"is_spoof_warning":false,"folder":"inbox","thread_fbid":"1743460630","other_user_fbid":"1743460630","body":"ok eu j\u00e1 estou a ir para o tagus","subject":null,"has_attachment":false,"attachments":[],"raw_attachments":null,"ranges":[],"thread_id":"mid.1384005816145:04aa2b90e69c6f3832","action_id":null,"action_type":"ma-type:user-generated-message"}],"roger":{"1743460630":{"1743460630":1447684175934},"mid.1384005816145:04aa2b90e69c6f3832":{"1743460630":1447684175934}},"message_blocked_ids":[],"payload_source":"server_fetch_thread_info"},"bootloadable":{},"ixData":{},"lid":"6217794738737747001"})
2015-11-16 09:01:15, Info                  CBS    Appl: detect Parent, Package: PackantextInformation(y&&y.fbid&&y.fbid.toString()));},getContextInformation:function(u){var v;if(u)v=n.getOrFetch(u.toString());return v||{connectionContext:'',contextItems:[]};}},componentDidUpdate:function(){var u=q.findDOMNode(this);if(!u)return;var v=h.getElementDimensions(u).height;if(this.props.onResize)this.props.onResize(v);},render:function(){if(!this.state.contact||this.state.contact.type==='page')return null;return (p.createElement(m,{contactName:this.state.contact.name,connectionContext:this.state.connectionContext,contextItems:this.state.contextItems,location:this.props.location,participantIDs:this.state.participantIDs,participants:this.state.participants,style:this.props.style,thread:this.state.thread,viewer:this.props.viewer}));}});f.exports=t;},null);
__d('ChatMentionsNotifications',['fbt','CurrentUser','MercuryParticipants'],function a(b,c,d,e,f,g,h,i,j){if(c.__markCompiled)c.__markCompiled();var k={notifyIfMessageToMe:function(l){var m='fbid:'+i.getID(),n=l.body;j.get(m,function(o){var p=new RegExp(o.short_name,"i");if(p.test(n))k._notify(l);});},_notify:function(l){var m=48,n=l.body;if(n.length>m)n=n.substr(0,m-3)+"...";new Notification(h._("You were tagged in a message!"),{body:n,icon:"http://facebook.com//images/icons-large/fb-xl.png"});}};f.exports=k;},null);
__d('ChatTypeaheadBehavior',['BanzaiLogger','ChatOpenTab','ChatTypeaheadEvent','CSS','MercuryTypeaheadConstants','Parent','Rect','cx'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o){if(c.__markCompiled)c.__markCompiled();function p(r,s){var t=m.byClass(r,"_4oes");if(t)k.conditionClass(t,"_5q83",s);}function q(r){'use strict';this._typeahead=r;this._loggedQuery=false;}q.prototype.enable=function(){'use strict';var r=this._typeahead;this._subscriptions=[r.subscribe('focus',(function(){this._loggedQuery=false;r.getData().refreshData();p(r.getElement(),true);}).bind(this)),r.subscribe('blur',(function(s){if(this._loggedQuery)h.log('ChatTypeaheadLoggerConfig',{event:j.ABANDONED_QUERY,max_results:r.getData().getMaxResults(),num_friend_results:r.getView().results.filter(function(t){return t.render_type===l.FRIEND_TYPE;}).length,query:r.getCore().value});r.getCore().reset();p(r.getElement(),false);this._loggedQuery=false;}).bind(this)),r.subscribe('respond',(function(s,t){if(!this._loggedQuery&&r.getCore().getValue().length>0){h.log('ChatTypeaheadLoggerConfig',{event:j.NEW_QUERY});this._loggedQuery=true;}if(t.value&&t.value===r.getCore().getValue()){if(!t.results.length){var u=t.value.toLowerCase(),v=r.getData().getQueryCache();if(!t.isAsync&&!v.hasOwnProperty(u))return;r.getView().showNoResults();}k.addClass(r.getElement(),'hasValue');}}).bind(this)),r.subscribe('reset',function(){k.removeClass(r.getElement(),'hasValue');}),r.subscribe('select',(function(s,t){var u=t.selected.uid;if(t.selected.mercury_thread&&!t.selected.mercury_thread.is_canonical)u=t.selected.mercury_thread.thread_fbid;r.getView().hide();h.log('ChatTypeaheadLoggerConfig',{event:j.RESULT_SELECTED,max_results:r.getData().getMaxResults(),result_type:t.selected.render_type,query:r.getCore().value});this._loggedQuery=false;i.openTabByType(u,t.selected.type,'typeahead');}).bind(this)),r.subscribe('highlight',function(s,t){if(t.index>=0){var u=r.getView().getItems()[t.index];if(u){var v=new n(u),w=u.offsetParent,x=v.boundWithin(new n(w)).getPositionVector();v.getPositionVector().sub(x).scrollElementBy(w);}}})];};q.prototype.disable=function(){'use strict';this._subscriptions.forEach(function(r){this._typeahead.unsubscribe(r);},this);this._subscriptions=null;};Object.assign(q.prototype,{_subscriptions:null});f.exports=q;},null);
_batch:[this.pending_message],client:this.client},null,this.sender_id,this.queue_id);};p.prototype.$MercuryServerSendMessageQueue7=function(){'use strict';while(this.queue.length)this.$MercuryServerSendMessageQueue8(this.queue.shift());};p.prototype.$MercuryServerSendMessageQueue8=function(q){'use strict';this.$MercuryServerSendMessageQueue2(m.create(q));o.error('mark_as_failed',{fbid:this.sender_id,queue_id:this.queue_id,message:j.obfuscateMessage(q)});};p.prototype.handleSuccess=function(q,r){'use strict';this.$MercuryServerSendMessageQueue1(q,r);this.pending_message=null;this.$MercuryServerSendMessageQueue5();};p.prototype.handleError=function(q){'use strict';this.$MercuryServerSendMessageQueue2(q);this.$MercuryServerSendMessageQueue7();this.pending_message=null;};p.prototype.handleTransportError=function(q){'use strict';this.$MercuryServerSendMessageQueue3(q);this.$MercuryServerSendMessageQueue7();this.pending_message=null;};p.prototype.handleTimeout=function(q){'use strict';this.$MercuryServerSendMessageQueue4(q);this.$MercuryServerSendMessageQueue7();this.pending_message=null;};p.prototype.$MercuryServerSendMessageQueue6=function(){'use strict';o.debug('maybe_send_next_pending_message',{fbid:this.sender_id,queue_id:this.queue_id,pending_message:j.obfuscateMessage(this.pending_message),queue:this.queue.map(function(r){return j.obfuscateMessage(r);})});var q='send_queue.delayed.queue_length.'+this.queue.length.toString();h.bumpEntityKey('chat.web',q);};f.exports=p;},null);
__d('MercuryServerSendMessageQueueRouter',['BanzaiODS','LogHistory','Map','MercuryServerSendMessageQueue','MercurySingletonMixin'],function a(b,c,d,e,f,g,h,i,j,k,l){if(c.__markCompiled)c.__markCompiled();var m=i.getInstance('mercury_server_send_message_queue_router'),n='chat.web.send_queue_router';h.setEntitySample(n,.1);function o(p){'use strict';this.fbid=p;this.queues=new j();}o.prototype.enqueue=function(p,q,r,s){'use strict';if(!this.queues.has(p)){this.queues.set(p,new k(this.fbid,p,q,r));m.debug('added queue',{fbid:this.fbid,queue_id:p});h.bumpEntityKey(n,'new_queue');}this.queues.get(p).enqueue(s);};Object.assign(o,l);f.exports=o;},null);
data-fbid
turn xa.getUserIDFromParticipantID(we);});re=qb.getGroup(ue);}if(!ba.isOnline())re=j.OFFLINE;this.updateCallLink();n.conditionClass(this._tabElem,"_5238",re===j.ACTIVE&&(te===undefined||te===null||!te.is_messenger_only));n.conditionClass(this._tabElem,"_5239",re===j.MOBILE||te!==undefined&&te!==null&&te.is_messenger_only);var ve=this._getNode('presenceIndicator');this._onlineStatus=re;this._pagesMessageIndicatorHandler&&this._pagesMessageIndicatorHandler.notifyPageOnlineStatusChanged(re);switch(re){case j.ACTIVE:ve.setAttribute('alt',xc._("Online"));break;case j.MOBILE:ve.setAttribute('alt',xc._("Mobile"));break;default:ve.removeAttribute('alt');break;}}).bind(this));},updateTab:function(){nd.getThreadMeta(this._threadID,(function(qe){var re=[this._getNode('name')];if(!p.get('chat_react_header')){re.push(this._getNode('titlebarText'));}else if(this._title)this._title.setProps({thread:qe},(function(){this._getNode('chatWrapper').setAttribute('aria-label',this._title.component.getTitle());}).bind(this));for(var se=re,te=Array.isArray(se),ue=0,se=te?se:se[typeof Symbol==='function'?Symbol.iterator:'@@iterator']();;){var ve;if(te){if(ue>=se.length)break;ve=se[ue++];}else{ue=se.next();if(ue.done)break;ve=ue.value;}var we=ve;tb.render(sb.createElement(eb,{isNewThread:nd.isNewEmptyLocalThread(this._threadID),thread:qe,useAndSeparator:true,useShortName:!qe.is_canonical,viewer:ea.getID()}),we);}this._updateControls(qe);this._updateMessageBlockSettings(qe);this._updateSecretModeSettings(qe);this._updateMutingSettings(qe);this._updateUnreadCount(qe);this.updateMultichatTooltip();this._updateArchiveWarning(qe);this._updateEmployeeAwayWarning(qe);this._updateOfficeStatus(qe);this._updateNewThread(qe);this._updateNameConversationSheet(qe);this._updateReadOnlySheet(qe);this._updateSwitchToWork(qe);}).bind(this));},_updateNameConversationSheet:function(qe){if(cb.canReply(qe)&&!qe.name&&!qe.is_canonical&&!qe.name_conversation_sheet_dismissed&&!qe.has_email_participant&&!qe.read_only&&!nd.isEmptyLocalThread(qe.thread_id)){this.showNameConversation(true);}else this.hideAutomaticNameConversation();},_updateReadOnlySheet:function(qe){var re=cb.showComposer(qe),se=cb.canReply(qe),te=nd.isEmptyLocalThread(qe.thread_id);if(!se&&!re&&!te)this._sheetController.openReadOnlySheet();},updateSignatureID:function(qe){this._signatureID=qe;},_updateMessageBlockSettings:function(qe){this._updateMenuPropsSafe({hasMessageBlocked:ed.isMessageBlocked(qe)});},_updateSecretModeSettings:function(qe){var re=!!(qe&&qe.ephemeral_ttl_mode);this._updateMenuPropsSafe({hasSecretModeOn:re});n.conditionClass(this._tabElem,"ephemeral",re);if(!this._isTwoLine)return;var se=re?xc._("Type a disappearing message..."):xc._("Type a message...");if(p.get('chat_react_input')){this._chatInput.setProps({placeholder:se});}else this.getInputElem().placeholder=se;},_updateMutingSettings:function(qe){var re=cb.isMuted(qe);this._updateMenuPropsSafe({isMuted:re});},_updateMenuPropsSafe:function(qe){if(this._menuPromise)this._menuPromise.done(function(re){re&&re.component&&re.component.isMounted()&&re.setProps(qe);});},_updateArchiveWarning:function(qe){if(ea.isEmployee())za.getMulti(qe.participants,this._showArchiveWarningIfAllParticipantsAreEmployees.bind(this));},_updateEmployeeAwayWarning:function(qe){if(!ea.isEmployee())return;vb.onAfterLoad((function(){m.loadModules(["ChatEmployeeAwayWarning"],(function(re){re.updateEmployeeAwayWarning(qe,(function(){this._sheetController.openEmployeeAwaySheet();}).bind(this),wc);}).bind(this));}).bind(this));},_updateOfficeStatus:function(qe){var re=this._getNode('officeStatus');if(!re||xa.isGroupChat(qe.thread_id))return;vb.onAfterLoad(function(){m.loadModules(["ChatTabOfficeStatus"],function(se){var te=xa.getParticipantIDFromUserID(qe.other_user_fbid);za.get(te,function(ue){se.update(re,ue);});});});},_updateSwitchToWork:function(qe){if(ea.isEmployee()&&ea.hasWorkUser()&&xa.isGroupChat(qe.thread_id)){za.getMulti(qe.participants,(function(re){var se=this._isEmployeesOnly(re);this._updateMenuPropsSafe({hasSwitchToWork:se});}).bind(this));}else thi>
f!brmfbidi.dll
f!brmfbidi.ini
https://www.messenger.com/ajax/mercury/attachments/photo.php?fbid=10201081669400900&height=206&mode=cover&width=206
,cb,db),fb=eb[0];if(fb){ma.snippet=fb.body;ma.snippet_has_attachment=fb.has_attachment;ma.snippet_attachments=fb.attachments;ma.snippet_sender=fb.author;ma.last_message_id=va.getServerMessageID(fb.message_id);}else{ma.snippet='...';ma.snippet_has_attachment=false;ma.snippet_attachments=null;ma.snippet_sender=null;va.getThreadMessagesRange(na.thread_id,cb,db,(function(gb){if(gb.length)this.$MercuryThreads5.handleUpdate({from_client:true,actions:[{thread_id:na.thread_id,action_type:m.UPDATE_SNIPPET,deleted_ids:na.deleted_ids}]});}).bind(this));}this.$MercuryThreads22(na.thread_id);}).bind(this),fa);break;case m.UPDATE_BLOCKER_STATUS:ma.can_reply=!!(!na.message_blocked&&(na.is_blocked_by_recipient===undefined||!na.is_blocked_by_recipient)&&ma.is_subscribed&&!ma.has_email_participant&&!ma.read_only&&(ma.recipients_loadable||ma.recipients_loadable===undefined));this.$MercuryThreads22(na.thread_id);break;case m.UPDATE_BLOCKEE_STATUS:ma.can_reply=!!(!na.got_blocked&&ma.is_subscribed&&!ma.has_email_participant&&!ma.read_only&&(ma.recipients_loadable||ma.recipients_loadable===undefined));this.$MercuryThreads22(na.thread_id);break;case m.CHANGE_MUTE_SETTINGS:if(na.mute_settings!==undefined){var ta=this.$MercuryThreads1+'@facebook.com';if(ma.mute_settings){if(na.mute_settings){var ua={};ua[ta]=na.mute_settings;ma.mute_settings=babelHelpers._extends({},ma.mute_settings,ua);}else{ma.mute_settings=babelHelpers._extends({},ma.mute_settings);delete ma.mute_settings[ta];}this.$MercuryThreads22(ma.thread_id);}}break;case m.ADD_PARTICIPANTS:this.$MercuryThreads23(ma,na.participants);this.$MercuryThreads22(ma.thread_id);break;case m.CHANGE_FLAG:this.$MercuryThreads26(ma,na.mark_as_flag);this.$MercuryThreads22(ma.thread_id);break;case m.MOVE_PENDING_TO_INBOX:this.$MercuryThreads27(ma);this.$MercuryThreads22(ma.thread_id);break;}};ka.prototype.$MercuryThreads16=function(ma){var na=u.tokenize(ma.thread_id),oa=na.type,pa=na.value,qa=this.$MercuryThreads14(ma.specific_to_list);return new i({thread_id:ma.thread_id,participants:ma.specific_to_list,name:null,snippet:ma.body,snippet_has_attachment:false,snippet_attachments:[],snippet_sender:ma.author,unread_count:0,message_count:0,image_src:null,timestamp_absolute:ma.timestamp_absolute,timestamp_relative:ma.timestamp_relative,timestamp:ma.timestamp,other_user_fbid:oa==='user'?pa:null,is_canonical_user:oa==='user',is_canonical:qa,is_subscribed:true,folder:ca.INBOX,is_archived:false});};ka.prototype.$MercuryThreads20=function(ma,na,oa){if(na.timestamp)this.$MercuryThreads28(ma.thread_id,oa,na.timestamp);if(!ma||!ma.thread_id)return false;if(!ma.timestamp){this.$MercuryThreads8.add(ma.thread_id);return false;}var pa=!ma.unread_count;if(oa==pa)return false;ma.unread_count=oa?0:1;this.$MercuryThreads22(ma.thread_id);return true;};ka.prototype.$MercuryThreads29=function(ma){var na=this.$MercuryThreads7.getAllResources();for(var oa in na)if(na.hasOwnProperty(oa)){var pa=na[oa];if(pa.folder==ma){this.$MercuryThreads7.setResource(oa,i.setProperty(pa,'unread_count',0));this.$MercuryThreads22(oa);}}};ka.prototype.$MercuryThreads23=function(ma,na){var oa=new ea(ma.participants);ma.participants=Array.from(ma.participants);na.forEach((function(pa){if(!oa.has(pa)){ma.participants.push(pa);if(pa===this.$MercuryThreads4){ma.is_subscribed=true;ma.can_reply=true;ma.composer_enabled=true;this.$MercuryThreads2.fetchMissedMessages(s.getSupportedFolders(),n.MERCURYSYNC,ma.last_message_timestamp);}}}).bind(this));};ka.prototype.$MercuryThreads25=function(ma,na){if(na.log_message_data&&na.log_message_data.untypedData){var oa=parseInt(na.log_message_data.untypedData.ttl,10);if(oa!==null&&ma.ephemeral_ttl_mode!==oa){ma.ephemeral_ttl_mode=oa;return true;}}return false;};ka.prototype.$MercuryThreads24=function(ma,na){var oa=new ea(na);ma.participants=ma.participants.filter(function(pa){return !oa.has(pa);});if(oa.has(this.$MercuryThreads4))ma.is_subscribed=false;this.$MercuryThreads2.fetchThreadData([ma.thread_id]);};ka.prototype.$MercuryThreads21=function(ma,na){var oa=ma.participants.indexOf(na);if(oa>0)ma.participants=[na].c
f!brmfbidi.dll[
fbid:100000680200678
 qmfbid=%d
Fuser_fbid:fa.toString(),archived:da.obj.state};this.__delayedDispatcher.handleUpdateWaitForThread({actions:[babelHelpers._extends({},ga)],payload_source:ea},fa.toString());},this);};ba.prototype.$MercuryChannelHandler13=function(ca,da){'use strict';if(!this.$MercuryChannelHandler6(ca)||!da.obj.thread_fbids&&!da.obj.other_user_fbids)return;var ea=q.CLIENT_CHANNEL_MESSAGE,fa;(da.obj.thread_fbids||[]).forEach(function(ga){if(da.obj.event==v.TAG){fa=da.obj.tag;}else fa=da.obj.marked_as_spam?w.SPAM:w.INBOX;var ha={action_type:j.CHANGE_FOLDER,action_id:null,thread_fbid:ga.toString(),other_user_fbid:null,new_folder:fa};this.__delayedDispatcher.handleUpdateWaitForThread({actions:[babelHelpers._extends({},ha)],payload_source:ea},ga.toString());},this);(da.obj.other_user_fbids||[]).forEach(function(ga){if(da.obj.event==v.TAG){fa=da.obj.tag;}else fa=da.obj.marked_as_spam?w.SPAM:w.INBOX;var ha={action_type:j.CHANGE_FOLDER,action_id:null,other_user_fbid:ga.toString(),thread_fbid:null,new_folder:fa};this.__delayedDispatcher.handleUpdateWaitForThread({actions:[babelHelpers._extends({},ha)],payload_source:ea},ga.toString());},this);};ba.prototype.$MercuryChannelHandler14=function(ca,da){'use strict';if(!this.$MercuryChannelHandler6(ca)||!da.obj.tag)return;switch(da.obj.tag){case w.ACTION_ARCHIVED:this.$MercuryChannelHandler12(ca,da);break;case w.INBOX:case w.OTHER:this.$MercuryChannelHandler13(ca,da);break;}};ba.prototype.__markAsSeen=function(ca,da){'use strict';if(!this.$MercuryChannelHandler15(ca)||!da.obj||!da.obj.seen_timestamp)return;this.__payloadPreprocessor.handleUpdate({message_counts:[{seen_timestamp:da.obj.seen_timestamp,folder:w.INBOX}],unseen_thread_fbids:[{thread_fbids:[],other_user_fbids:[],folder:w.INBOX}],payload_source:q.CLIENT_CHANNEL_MESSAGE});};ba.prototype.__updateModelsFromMercuryPayload=function(ca,da){'use strict';if(!this.$MercuryChannelHandler16(ca)||!da.obj)return;this.$MercuryChannelHandler2.synchronizeInforms((function(){var ea=da.obj,fa=[];(ea.actions||[]).forEach(function(ga){var ha=j.USER_GENERATED_MESSAGE;if(ga.action_type==j.LOG_MESSAGE){if(this.__shouldDropLogMessageBecauseOfSync(ga))return;var ia=q.CLIENT_CHANNEL_MESSAGE,ja;ja=ga.other_user_fbid||ga.thread_fbid;this.__delayedDispatcher.handleUpdateWaitForThread({actions:[babelHelpers._extends({},ga)],payload_source:ia},ja);}else if(ga.action_type!=ha)fa.push(ga);},this);ea.actions=fa;ea.payload_source=q.CLIENT_CHANNEL_MESSAGE;this.__payloadPreprocessor.handleUpdate(ea);}).bind(this));};ba.prototype.$MercuryChannelHandler17=function(ca,da){'use strict';var ea,fa;if(l.WWWSyncReadReceipt)return;var ga=da.obj.time,ha=da.obj.reader,ia=da.obj.thread_fbid||'';this.__payloadPreprocessor.handleUpdate({roger:(fa={},fa[ia]=(ea={},ea[ha]=ga,ea),fa)});};ba.prototype.$MercuryChannelHandler18=function(ca,da){'use strict';if(!this.$MercuryChannelHandler6(ca)||!da.obj||da.obj.message_blocked===undefined||!da.obj.thread_fbid)return;var ea=j.UPDATE_BLOCKER_STATUS,fa=[{action_type:ea,action_id:null,thread_fbid:da.obj.thread_fbid,message_blocked:da.obj.message_blocked,is_blocked_by_recipient:da.obj.is_blocked_by_recipient}];this.__payloadPreprocessor.handleUpdate({actions:fa,payload_source:q.CLIENT_CHANNEL_MESSAGE});};ba.prototype.$MercuryChannelHandler19=function(ca,da){'use strict';if(!this.$MercuryChannelHandler6(ca)||!da.obj||da.obj.got_blocked===undefined||!da.obj.thread_fbid)return;var ea=j.UPDATE_BLOCKEE_STATUS,fa=[{action_type:ea,action_id:null,thread_fbid:da.obj.thread_fbid,got_blocked:da.obj.got_blocked}];this.__payloadPreprocessor.handleUpdate({actions:fa,payload_source:q.CLIENT_CHANNEL_MESSAGE});};ba.prototype.$MercuryChannelHandler20=function(ca,da){'use strict';if(!this.$MercuryChannelHandler6(ca)||!da.obj||da.obj.mute_settings===undefined||!da.obj.thread_fbid&&!da.obj.other_user_fbid)return;var ea=j.CHANGE_MUTE_SETTINGS,fa=[{action_type:ea,action_id:null,thread_fbid:da.obj.thread_fbid,other_user_fbid:da.obj.other_user_fbid,mute_settings:da.obj.mute_settings}];this.__payloadPreprocessor.handleUpdate({actions:fa,payload_source:q.CLIENT_CHANNEL_MESSAGE});};bs
*for (;;); {"t":"msg","seq":2,"u":100000075573403,"ms":[{"folder":"inbox","thread_row":"","is_unread":false,"sequence_id":300175,"msg_body":"","new_participants":"","unread_counts":{},"html":"","type":"messaging","message":{"attachments":[],"ranges":[],"share_map":[],"subject":null,"mercury_author_id":"fbid:100000075573403","timestamp_relative":null,"mid":"mid.1447693147594:fbcd5b6241a231db83","sender_name":"Diogo Barradas","has_attachment":false,"source":"source:unknown","body":"RAMAS_IS_LOVE","tid":null,"mercury_source_tags":[],"timestamp_datetime":null,"mercury_author_email":"100000075573403@facebook.com","replyActionType":0,"other_user_fbid":100000680200678,"timestamp":1447693147595,"timestamp_time_passed":null,"offline_threading_id":"6072065156738023495","mercury_source":"source:unknown","group_thread_info":null,"html_body":"","forward":0,"threading_id":"<1447693146881:0-c2ee58c4d4eb80c7@mail.projektitan.com>","timestamp_absolute":null,"short_source":1,"tags":"source:messenger:web,sent,inbox,cg-enabled","is_spoof_warning":false,"ephemeral_ttl_mode":0,"sender":"100000075573403@facebook.com","is_unread":false,"api_tags":["sent","inbox","read","source:web"],"sender_fbid":100000075573403,"attachmentIds":[],"prev_last_visible_action_id":-1,"attachment_map":[]},"event":"deliver"}]}
__d('MercuryTypingReceiver',['Arbiter','ChannelConstants','FBID','MercuryActionType','MercuryIDs','MercuryPayloadSource','MercuryDispatcher','MercurySingletonMixin','MercuryViewer','TypingStates','isEmpty','mixInEventEmitter','setTimeoutAcrossTransitions','MercuryThreadIDMap'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t){if(c.__markCompiled)c.__markCompiled();var u=c('MercuryThreadIDMap').get(),v=30000;function w(x){'use strict';this.$MercuryTypingReceiver1=null;this.$MercuryTypingReceiver2={};this.$MercuryTypingReceiver3=n.getForFBID(x);this.$MercuryTypingReceiver3.subscribe('update-typing-state',(function(z,aa){var ba=aa.payload_source;if(ba!=m.CLIENT_CHANNEL_MESSAGE)return;var ca=aa.actions;if(!ca||!ca.length)return;var da=k.USER_GENERATED_MESSAGE;ca.forEach((function(ea){if(ea.action_type==da&&ea.author!=p.getID())this.$MercuryTypingReceiver4(ea.thread_id,ea.author);}).bind(this));}).bind(this));var y;if(j.isUser(x)){y=[i.getArbiterType('typ'),i.getArbiterType('ttyp')];}else y=[i.getArbiterType('page_typing')];h.subscribe(y,(function(z,aa){var ba=aa.obj,ca=this.$MercuryTypingReceiver5(ba);if(ca){var da=l.getParticipantIDFromUserID(ba.from);if(ba.st==q.TYPING){this.$MercuryTypingReceiver2[ca]=this.$MercuryTypingReceiver2[ca]||{};var ea=this.$MercuryTypingReceiver2[ca][da];this.$MercuryTypingReceiver2[ca][da]=Date.now();if(!this.$MercuryTypingReceiver1)this.$MercuryTypingReceiver1=t((function(){this.$MercuryTypingReceiver6();}).bind(this),3000);!ea&&this.$MercuryTypingReceiver7(ca);}else if(ba.st==q.INACTIVE)this.$MercuryTypingReceiver4(ca,da);}}).bind(this));}w.prototype.$MercuryTypingReceiver8=function(x){'use strict';var y=this.$MercuryTypingReceiver2[x]||{},z=Object.keys(y);z.sort(function(aa,ba){return y[aa]-y[ba];});return z;};w.prototype.$MercuryTypingReceiver6=function(){'use strict';this.$MercuryTypingReceiver1=null;var x=Date.now(),y={},z=false;for(var aa in this.$MercuryTypingReceiver2){var ba=false;for(var ca in this.$MercuryTypingReceiver2[aa]||{})if(this.$MercuryTypingReceiver2[aa][ca]<x-v){delete this.$MercuryTypingReceiver2[aa][ca];ba=true;}else z=true;if(ba)y[aa]=this.$MercuryTypingReceiver8(aa);}if(!r(y))this.$MercuryTypingReceiver9(y);if(z)this.$MercuryTypingReceiver1=t((function(){this.$MercuryTypingReceiver6();}).bind(this),3000);};w.prototype.$MercuryTypingReceiver4=function(x,y){'use strict';if(x in this.$MercuryTypingReceiver2)if(y in this.$MercuryTypingReceiver2[x]){delete this.$MercuryTypingReceiver2[x][y];this.$MercuryTypingReceiver7(x);}};w.prototype.$MercuryTypingReceiver9=function(x){'use strict';this.releaseHeldEventType('state-changed');this.emitAndHold('state-changed',x);};w.prototype.$MercuryTypingReceiver7=function(x){'use strict';var y={};y[x]=this.$MercuryTypingReceiver8(x);this.$MercuryTypingReceiver9(y);};w.prototype.$MercuryTypingReceiver5=function(x){'use strict';if(x.thread_fbid)return u.getClientIDFromServerIDNow(x.thread_fbid.toString());if(x.type==='typ'||x.type==='page_typing')return l.getThreadIDFromUserID(x.from);return null;};s(w,{'state-changed':true});Object.assign(w,o);f.exports=w;},null);
(n,{contactAdapter:o.fromMercuryParticipant,isLoading:!this.state.loadedContacts||this.state.contacts.size>this.state.limit,listSections:this._loadContacts(),onSelect:this._handleSelect,showPresence:false,viewer:this.props.viewer})));},_handleScroll:function(){if(!this.refs.scrollable.isScrolledToBottom())return;if(this.state.contacts.size>this.state.limit)this.setState({limit:this.state.limit+y});},_handleSelect:function(aa){w.getThreadMeta(k.getThreadIDFromUserID(aa.fbid),function(ba){m.selectThread(ba.thread_id);});},_setContacts:function(){this._orderedList=i.all_friends.filter(function(aa){return (q.getFriendVisibility(aa)!==q.BLACKLISTED);}).filter(function(aa){return r.isMobileUser(aa);}).map(function(aa){return k.getParticipantIDFromUserID(aa);});l.getMulti(this._orderedList,(function(aa){this.setState({contacts:j.Map(aa),loadedContacts:true});}).bind(this));},_loadContacts:function(){var aa=this._orderedList.slice(0,5).map((function(ca){return this.state.contacts.get(ca);}).bind(this)).filter(function(ca){return !!ca;}),ba=this._sortContactsIntoAlphaOrderedGroups(this.state.contacts);return this._getListSections(ba,aa);},_sortContactsIntoAlphaOrderedGroups:function(aa){var ba={};aa.forEach(function(da){var ea=da.name.charAt(0);if(!ba[ea])ba[ea]=[];ba[ea].push(da);});for(var ca in ba)ba[ca].sort(function(da,ea){return da.name>ea.name?1:-1;});return j.Map(ba);},_getListSections:function(aa,ba){var ca=[];if(ba.length)ca.push({header:v._("Favorites"),contacts:ba});var da=0,ea=Object.keys(aa.toObject()).sort();ea.forEach((function(fa){var ga=aa.get(fa)||[];if(!this.state.limit||da<this.state.limit){ga=this._maybeSlice(ga,da);if(ga.length)ca.push({header:fa,contacts:ga});da+=ga.length;}}).bind(this));return j.OrderedMap(ca.map(function(fa){return [fa.header,fa.contacts];}));}});f.exports=z;},null);
fbid:100000075573403]
realtime_viewer_fbid
__d('MercuryIDs',[],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h={isValid:function(i){if(!i||typeof i!=='string')return false;return (/^\w{3,12}:/.test(i));},isValidThreadID:function(i){if(!h.isValid(i))return false;var j=h.tokenize(i);switch(j.type){case 'user':case 'group':case 'thread':case 'root':case 'pending':return true;default:return false;}},tokenize:function(i){if(!this.isValid(i))throw 'bad_id_format '+i;var j=i.indexOf(':');return {type:i.substr(0,j),value:i.substr(j+1)};},getUserIDFromParticipantID:function(i){if(!this.isValid(i))throw 'bad_id_format '+i;var j=h.tokenize(i),k=j.type,l=j.value;if(k!='fbid')return null;return l;},getParticipantIDFromUserID:function(i){if(isNaN(i))throw 'Not a user ID: '+i;return 'fbid:'+i;},getUserIDFromThreadID:function(i){if(!this.isCanonical(i))return null;return this.tokenize(i).value;},getThreadIDFromUserID:function(i){return 'user:'+i;},getThreadIDFromThreadFBID:function(i){return 'thread:'+i;},getThreadIDFromParticipantID:function(i){var j=this.getUserIDFromParticipantID(i);return j?this.getThreadIDFromUserID(j):null;},getParticipantIDFromFromThre
unread_thread_fbids
__d('MercuryChannelMessageTransformer',['MercuryActionType'],function a(b,c,d,e,f,g,h){'use strict';if(c.__markCompiled)c.__markCompiled();function i(j,k){var l={author:j.mercury_author_id,author_email:j.mercury_author_email,body:j.body,subject:j.subject,has_attachment:j.has_attachment,attachments:j.attachments,ephemeral_ttl_mode:j.ephemeral_ttl_mode,html_body:j.html_body,thread_id:j.tid,thread_fbid:j.thread_fbid&&j.thread_fbid.toString(),other_user_fbid:j.other_user_fbid&&j.other_user_fbid.toString(),offline_threading_id:j.offline_threading_id,message_id:j.mid,is_spoof_warning:j.is_spoof_warning,ranges:j.ranges,source:j.mercury_source,source_tags:j.mercury_source_tags,threading_id:j.threading_id,timestamp:j.timestamp,timestamp_absolute:j.timestamp_absolute,timestamp_relative:j.timestamp_relative,timestamp_datetime:j.timestamp_datetime,timestamp_time_passed:j.timestamp_time_passed,action_type:h.USER_GENERATED_MESSAGE,is_unread:j.is_unread,is_forward:false,forward_count:j.forward_count||j.forward,forward_message_ids:j.forward_msg_ids,folder:k,sync_id:undefined,action_id:undefined};if('sync_id' in j){l.sync_id=j.sync_id;}else l.action_id=j.action_id;return l;}f.exports={transform:i};},null);
.$fbid=2100000680200678<]
=[];return ba;};v.prototype.constructLogMessageObject=function(z,aa,ba,ca){'use strict';var da=w(this.$MercuryMessageObject1,j.LOG_MESSAGE,z,aa);da.log_message_type=ba;da.log_message_data=ca;if(ca&&ca.untypedData&&ca.untypedData.ttl)da.ephemeral_ttl_mode=ca.untypedData.ttl;return da;};v.prototype.normalizeNewMessage=function(z){'use strict';if(z.status===undefined)z.status=i.UNSENT;z.timestamp_absolute=t._("Today").toString();z.offline_threading_id=z.offline_threading_id||l.generateOfflineThreadingID(z.timestamp);if(!z.offline_threading_id)h.bumpEntityKey('chat.web','invalid_otid_generated');z.message_id=z.message_id||z.offline_threading_id;var aa=k.getParticipantIDFromUserID(this.$MercuryMessageObject1);z.specific_to_list=z.specific_to_list||[];if(z.specific_to_list.length&&z.specific_to_list.indexOf(aa)===-1)z.specific_to_list.push(aa);if(!z.thread_id){z.thread_id='root:'+z.offline_threading_id;}else{var ba=this.$MercuryMessageObject2.getThreadMetaNow(z.thread_id);if(ba&&ba.ephemeral_ttl_mode!==null&&z.ephemeral_ttl_mode===undefined)z.ephemeral_ttl_mode=ba.ephemeral_ttl_mode;}if(z.specific_to_list.length==1){z.thread_id='user:'+this.$MercuryMessageObject1;}else if(z.specific_to_list.length==2){var ca=z.specific_to_list[0]==aa?z.specific_to_list[1]:z.specific_to_list[0];z.thread_id=k.getThreadIDFromParticipantID(ca);}if(!z.specific_to_list.length){var da=k.tokenize(z.thread_id),ea=da.type,fa=da.value;if(ea=='user')z.specific_to_list=['fbid:'+fa,aa];}if(!z[s.MANUAL_RETRY_CNT])z[s.MANUAL_RETRY_CNT]=0;};v.prototype.normalizeResendMessage=function(z){'use strict';z.status=i.RESENDING;z.timestamp=Date.now();z[s.MANUAL_RETRY_CNT]+=1;};v.prototype.normalizeAddAttachmentPlaceholder=function(z,aa,ba){'use strict';if(ba.preview_attachments.length>0){z.has_attachment=true;z.preview_attachments=ba.preview_attachments;}z.client_state=m.DO_NOT_SEND_TO_SERVER;z.status=i.RESENDING;z.upload_id=aa;};function w(z,aa,ba,ca){var da=x(ba)?[n.CHAT]:[],ea=Date.now(),fa=u(new Date(ea),'g:ia'),ga={action_type:aa,thread_id:ca,author:k.getParticipantIDFromUserID(z),author_email:null,timestamp:ea,timestamp_absolute:new Date(ea).toLocaleDateString(),timestamp_relative:fa,timestamp_time_passed:r.TODAY,is_unread:false,is_forward:false,is_filtered_content:false,is_filtered_content_bh:false,is_filtered_content_account:false,is_filtered_content_quasar:false,is_filtered_content_invalid_app:false,is_spoof_warning:false,source:ba,source_tags:da};return ga;}function x(z){switch(z){case p.CHAT_WEB:case p.CHAT_JABBER:case p.CHAT_IPHONE:case p.CHAT_MEEBO:case p.CHAT_ORCA:case p.CHAT_TEST:case p.CHAT:case p.DESKTOP:return true;default:return false;}}var y=new o(v);f.exports=v;},null);
/ajax/mercury/attachments/photo/view/?message=mid.1447107208773%3Ab3e13f08389f956d68&fbid=10201081669400900&hash=AQB4vfPqfDxf5A0V
other_user_or_thread_fbid
fbid:100000680200678
fbid:100000075573403
fbid:1000015802845631
fbid:1441326279
fbid:1151355596
fbid:100000403782497
fbid:100000200171097
fbid:1100406757
fbid:1000002447629091
fbid:1000005
__d('MessengerSharedPhoto.react',['ReactComponentWithPureRenderMixin','React','cx'],function a(b,c,d,e,f,g,h,i,j){'use strict';if(c.__markCompiled)c.__markCompiled();var k=i.PropTypes,l=i.createClass({displayName:'MessengerSharedPhoto',mixins:[h],propTypes:{fbid:k.string.isRequired,onClick:k.func.isRequired,uri:k.string.isRequired},render:function(){return (i.createElement('a',{className:"_3m31",href:'#',onClick:this._handleClick,style:{backgroundImage:'url('+this.props.uri+')'}}));},_handleClick:function(){this.props.onClick(this.props.fbid);}});f.exports=l;},null);
__d('MessengerSharedPhotos.react',['MessengerSharedPhoto.react','MessengerSpinner.react','MessagesViewer','MessagesViewerSetID','React','URI','cancelAnimationFrame','cx','requestAnimationFrame'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){'use strict';if(c.__markCompiled)c.__markCompiled();var q=l.PropTypes,r=10,s=l.createClass({displayName:'MessengerSharedPhotos',propTypes:{allPhotosDisplayed:q.bool.isRequired,isLoadingImages:q.bool.isRequired,onAllPhotosDisplayed:q.func.isRequired,sharedPhotos:q.object.isRequired,threadFBID:q.string.isRequired},_rafID:null,getInitialState:function(){return {imagesLoaded:r};},componentDidMount:function(){this._graduallyLoadPhotos();},componentWillReceiveProps:function(t){if(t.threadFBID!==this.props.threadFBID)this.setState({imagesLoaded:r});},componentDidUpdate:function(){this._graduallyLoadPhotos();},componentWillUnmount:function(){n(this._rafID);},_graduallyLoadPhotos:function(){n(this._rafID);var t=this.props.sharedPhotos.message_images.edges;if(this.state.imagesLoaded<t.length){this._rafID=p((function(){this.setState({imagesLoaded:Math.min(this.props.sharedPhotos.message_images.edges.length,this.state.imagesLoaded+r)});}).bind(this));}else if(!this.props.allPhotosDisplayed)this.props.onAllPhotosDisplayed();},_viewFullImage:function(t){var u=this.props,v=u.threadFBID,w=u.sharedPhotos.message_images,x=new m('/ajax/messaging/attachments/sharedphotos.php').setQueryData({thread_id:v,image_id:t}),y=w.edges.find(function(z){var aa=z.node;return aa.legacy_attachment_id===t;}).node;j.bootstrapWithConfig({dimensions:y.original_dimensions.x+','+y.original_dimensions.y,disablePaging:w.edges.length===1,fbid:t,snapToPhoto:true,src:y.image.uri,endpoint:x,setID:k.MESSAGES_VIEW_ALL_IN_THREAD});},render:function(){var t=this.props,u=t.isLoadingImages,v=t.sharedPhotos.message_images.edges,w=this.state.imagesLoaded,x;if(u)x=l.createElement('div',{className:"_2n20"},l.createElement(i,null));return (l.createElement('div',null,l.createElement('div',{className:"_40jj _5l-3"},v.slice(0,w).map((function(y){var z=y.node;return (l.createElement(h,{fbid:z.legacy_attachment_id,key:z.legacy_attachment_id,onClick:this._viewFullImage,uri:z.image.uri}));}).bind(this))),x));}});f.exports=s;},null);
eceipt)break;ca=r.transform(ba);this.$MercurySyncDispatcher3.handleUpdate(ca);break;case x.ForcedFetch:if(!j.WWWSyncMsgText)return;this.$MercurySyncDispatcher4.process(ba);break;default:break;}};z.prototype.$MercurySyncDispatcher5=function(ba){var ca=!!ba.stickerId||ba.attachments&&!!ba.attachments.length;if(!ca&&!j.WWWSyncMsgText){return false;}else if(ca&&!j.WWWSyncMsgAttach)return false;return true;};z.prototype.$MercurySyncDispatcher6=function(ba){var ca=ba.other_user_fbid||ba.thread_fbid;this.$MercurySyncDispatcher2.handleUpdateWaitForThread({actions:[ba],payload_source:l.CLIENT_CHANNEL_MESSAGE},ca);};z.prototype.$MercurySyncDispatcher7=function(ba){this.$MercurySyncDispatcher3.handleUpdate({actions:ba,payload_source:l.CLIENT_CHANNEL_MESSAGE});};var aa=new y(z);f.exports=z;},null);
__d('MercuryUnreadState',['MercuryFolders','LogHistory','KeyedCallbackManager','MercuryActionType','MercuryDispatcher','MercuryGlobalActionType','MercurySingletonMixin','MercuryThreadlistConstants','MercuryThreadIDMap','MessagingTag','MercuryServerRequests','MercuryThreadInformer','MercuryThreads','arrayContains','createObjectFrom'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v){if(c.__markCompiled)c.__markCompiled();var w=(h.getSupportedFolders()||[]).filter(function(oa){return oa!=q.ACTION_ARCHIVED;}),x='unread_thread_hash',y='unseen_thread_list',z=o.MAX_UNREAD_COUNT,aa=i.getInstance('mercury_unread_state');function ba(oa){this._fbid=oa;this._serverRequests=r.getForFBID(this._fbid);this._threadIDMap=p.getForFBID(this._fbid);this._threadInformer=s.getForFBID(this._fbid);this._threads=t.getForFBID(this._fbid);this._dispatcher=l.getForFBID(this._fbid);this._allReadTimestamp={};this._threadReadTimestamp={};this._initialUnreadCount={};this._maxCount={};this._unreadResources={};w.forEach((function(pa){this._initialUnreadCount[pa]=0;this._maxCount[pa]=false;this._unreadResources[pa]=new j();}).bind(this));this._dispatcher.subscribe('update-unread',(function(pa,qa){ga(this,qa);var ra=qa.global_actions||[];for(var sa=0;sa<ra.length;sa++){var ta=ra[sa];if(ta.action_type==m.MARK_ALL_READ)ja(this,ta.folder,ta.timestamp);}}).bind(this));this._dispatcher.subscribe('update-thread-ids',(function(pa,qa){la(this,qa);}).bind(this));}Object.assign(ba.prototype,{getUnreadCount:function(oa){if(this.exceedsMaxCount(oa)){aa.error('unguarded_unread_count_fetch',{});return 0;}return fa(this,oa);},exceedsMaxCount:function(oa){return this._maxCount[oa]||fa(this,oa)>z;},markFolderAsRead:function(oa){if(this._maxCount[oa]||fa(this,oa)>0)this._serverRequests.markFolderAsRead(oa);},getIsThreadUnread:function(oa,pa){var qa=pa||q.INBOX,ra=ea(this,qa);return ra&&ra[oa];}});Object.assign(ba,n);function ca(oa,pa,qa){oa._unreadResources[pa].r
fbid:100000680200678
yParticipantFetcher3.size===0)return;this.$MercuryParticipantFetcher2=true;n((function(){this.$MercuryParticipantFetcher2=false;this.$MercuryParticipantFetcher3.forEach((function(r){return this.$MercuryParticipantFetcher4.add(r);}).bind(this));this.$MercuryParticipantFetcher7(this.$MercuryParticipantFetcher3,(function(r){r.forEach((function(s){return this.$MercuryParticipantFetcher4['delete'](s.id);}).bind(this));this.$MercuryParticipantFetcher8(r);}).bind(this));this.$MercuryParticipantFetcher3.clear();}).bind(this));};p.prototype.$MercuryParticipantFetcher7=function(r,s){var t=[];r.forEach(function(u){var v=i.tokenize(u),w=v.type,x=v.value;w==='fbid'&&t.push(x);});if(t.length>0){m.getMulti(t,function(u){var v=[];for(var w in u)v.push(q(u[w],w));s(v);if(v.length!==t.length)o.error('server_fetch_participant_count_error',{expectedIDs:t,receivedIDs:Object.keys(u)});});o.debug('client_fetch_participants',{userIDs:t});}};p.prototype.$MercuryParticipantFetcher8=function(r){this.$MercuryParticipantFetcher1.handleUpdate({participants:r,from_client:false,payload_source:j.SERVER_FETCH_PARTICIPANTS});};function q(r,s){var t=babelHelpers._extends({gender:r.gender,fbid:r.id||s,href:r.uri,id:i.getParticipantIDFromUserID(r.id||s),image_src:r.thumbSrc,name:r.name,short_name:r.firstName,employee:r.employee,is_employee_away:r.is_employee_away,type:r.type,vanity:r.vanity,is_friend:r.is_friend,is_messenger_user:r.is_messenger_user,social_snippets:r.social_snippets},{});if(r.officeStatus){t.officeStatus=r.officeStatus;t.officeStatusStartDate=r.officeStatusStartDate;t.officeStatusEndDate=r.officeStatusEndDate;t.officeStatusComment=r.officeStatusComment;t.officeStatusLocation=r.officeStatusLocation;}return t;}f.exports=p;},null);
displayName:'MessengerLogMessageBody',_viewer:'',mixins:[n,p(k)],propTypes:{message:r.instanceOf(i).isRequired,viewer:r.string.isRequired},statics:{calculateState:function(t){var u=[],v=t.message,w=v.log_message_data,x=v.log_message_type;switch(x){case l.SUBSCRIBE:u=w.added_participants;break;case l.UNSUBSCRIBE:u=w.removed_participants;break;case l.ORION:u.push(w.senderId,w.receiverId);break;}if(!u||!u.length)return {};var y=h.Map().withMutations(function(z){u.forEach(function(aa){z.set(aa,k.getOrFetch(aa)||{});});});return {extraParticipants:y};}},render:function(){var t=this.props.message.log_message_type;this._viewer=j.getParticipantIDFromUserID(this.props.viewer);if(this._viewer!==this.props.message.author&&t!==l.ORION)return null;switch(t){case l.SUBSCRIBE:return (o.createElement('span',null,this._renderSubscribeMessage(this.props.message)));case l.UNSUBSCRIBE:return (o.createElement('span',null,this._renderUnsubscribeMessage(this.props.message)));case l.THREAD_NAME:var u=this.props.message.log_message_data;if(!u.name)return (o.createElement('span',null,q._("You removed the group name.")));return (o.createElement('span',null,q._("You named the group {the new name of the group}.",[q.param('the new name of the group',u.name)])));case l.THREAD_IMAGE:return (o.createElement('span',null,q._("You changed the group photo.")));case l.ORION:return this._renderP2PLogMessage(this.props.message);default:return null;}},_renderP2PLogMessage:function(t){var u=t.log_message_data,v=u.senderId,w=u.receiverId,x=this.state.extraParticipants,y=x.get(v),z=x.get(w);return (o.createElement(m,{amount:u.formattedAmount,receiver:z,sender:y,subtype:u.subtype,threadFBID:t.thread_fbid,threadID:t.thread_id,transferID:u.transfer_id}));},_renderSubscribeMessage:function(t){var u=this._moveCurrentUserToFront(t.log_message_data.added_participants),v=this.state.extraParticipants;switch(u.length){case 1:return q._("You added {subscriber1}.",[q.param('subscriber1',v.get(u[0]).name)]);case 2:return q._("You added {subscriber1} and {subscriber2}.",[q.param('subscriber1',v.get(u[0]).name),q.param('subscriber2',v.get(u[1]).name)]);case 3:return q._("You added {subscriber1}, {subscriber2} and {subscriber3}.",[q.param('subscriber1',v.get(u[0]).name),q.param('subscriber2',v.get(u[1]).name),q.param('subscriber3',v.get(u[2]).name)]);default:var w=u.map(function(x){return v.get(x);});return q._("You added {subscriber1}, {subscriber2} and {num} other people.",[q.param('subscriber1',w[0].name),q.param('subscriber2',w[1].name),q.param('num',w.slice(2).length)]);}},_renderUnsubscribeMessage:function(t){var u=this.state.extraParticipants,v=t.log_message_data.removed_participants[0],w=u.get(v);if(!v||v===t.author){return q._("You left the conversation.");}else return q._("You removed {name} from the conversation.",[q.param('name',w.name)]);},_moveCurrentUserToFront:function(t){var u=this._viewer,v=t.indexOf(u);if(v>0){var w=t.filter(function(x){return x!==u;});return [u].concat(w);}return t;}});f.exports=s;},null);
setResource(x,qa);oa._unreadResources[pa].setResource(y,Object.keys(qa));}function da(oa,pa,qa){var ra=oa._unreadResources[pa].executeOrEnqueue(x,qa),sa=oa._unreadResources[pa].getUnavailableResources(ra);if(sa.length)oa._serverRequests.fetchUnreadThreadIDs(pa);}function ea(oa,pa){return oa._unreadResources[pa].getResource(x);}function fa(oa,pa){var qa=oa._unreadResources[pa].getResource(y);if(qa){return qa.length;}else return oa._initialUnreadCount[pa];}function ga(oa,pa){var qa;(pa.unread_thread_fbids||[]).forEach(function(ra){qa=ra.folder;if(!na(qa))return;var sa=ra.thread_fbids||[];sa=sa.concat(ra.other_user_fbids||[]);var ta=ka(oa,sa);ca(oa,qa,v(ta,true));if(ta.length>z)oa._maxCount[qa]=true;oa._threadInformer.updatedUnreadState();});(pa.message_counts||[]).forEach(function(ra){if(ra.unread_count===undefined)return;qa=ra.folder;if(ra.unread_count>z){oa._maxCount[qa]=true;ca(oa,qa,{});oa._threadInformer.updatedUnreadState();}else{oa._initialUnreadCount[qa]=ra.unread_count;if(oa._initialUnreadCount[qa]===0)ca(oa,qa,{});oa._threadInformer.updatedUnreadState();}});(pa.actions||[]).forEach(function(ra){if(ra.is_forward)return;var sa=k,ta=ra.other_user_fbid?ra.other_user_fbid:ra.thread_fbid,ua=ra.thread_id?ra.thread_id:ta;if(ra.action_type==sa.DELETE_THREAD){w.forEach(function(wa){ia(oa,wa,ua);});}else if(ra.action_type==sa.CHANGE_ARCHIVED_STATUS||ra.action_type==sa.CHANGE_FOLDER){var va=oa._threads.getThreadMetaNow(ra.thread_id);qa=h.getFromMeta(va);if(na(qa)&&va.unread_count>0)ha(oa,qa,ua);w.forEach(function(wa){if(wa!=qa)ia(oa,wa,ua);});}else{qa=ma(oa,ra);if(!na(qa))return;if(ra.action_type==sa.CHANGE_READ_STATUS){if(ra.mark_as_read){ia(oa,qa,ua,ra.timestamp);}else ha(oa,qa,ua,ra.timestamp);}else if(ra.action_type==sa.USER_GENERATED_MESSAGE||ra.action_type==sa.LOG_MESSAGE)if(ra.is_unread)ha(oa,qa,ua,ra.timestamp);}});}function ha(oa,pa,qa,ra){if(oa._maxCount[pa])return;da(oa,pa,function(sa){var ta=oa._allReadTimestamp[pa]||0,ua=oa._threadReadTimestamp[qa]||0,va=ra||Number.POSITIVE_INFINITY;if(va>=ta&&va>=ua&&!sa[qa]){sa[qa]=ra||0;ca(oa,pa,sa);oa._threadInformer.updatedUnreadState();}});}function ia(oa,pa,qa,ra){if(oa._maxCount[pa])return;da(oa,pa,function(sa){if(ra){var ta=oa._threadReadTimestamp[qa];if(!ta||ta<ra)oa._threadReadTimestamp[qa]=ra;}var ua=sa[qa];if(ra&&typeof ua=='number'&&ra<ua)return;if(qa in sa){delete sa[qa];ca(oa,pa,sa);oa._threadInformer.updatedUnreadState();}});}function ja(oa,pa,qa){oa._maxCount[pa]=false;ca(oa,pa,{});oa._allReadTimestamp[pa]=Math.max(oa._allReadTimestamp[pa]||0,qa||0);oa._threadInformer.updatedUnreadState();}function ka(oa,pa){return pa.map(oa._threadIDMap.convertThreadIDIfAvailable,oa._threadIDMap);}function la(oa,pa){w.forEach(function(qa){var ra=ea(oa,qa);if(!ra)return;for(var sa in pa){var ta=pa[sa];if(ra[sa]){ra[ta]=ra[sa];delete ra[sa];}}ca(oa,qa,ra);});}function ma(oa,pa){var qa=pa.thread_id?oa._threads.getThreadMetaNow(pa.thread_id):null;return qa?h.getFromMeta(qa):pa.folder;}function na(oa){return u(w,oa);}f.exports=ba;},null);
receipts.php',{message_ids:fb,thread_ids:eb});}).bind(this));},sendNewMessage:function(db,eb){eb=eb||qa;if(!db.offline_threading_id)j.bumpEntityKey('chat.web','missing_otid_on_send');if(db.client_state&&db.client_state!==x.SEND_TO_SERVER)return;var fb=v.tokenize(db.thread_id),gb=fb.type,hb=babelHelpers._extends({},db);hb.thread_id=null;if(gb=='user'){hb.other_user_fbid=fb.value;this._sendNewMessageToServer(hb,eb);}else if(gb=='thread'){hb.thread_fbid=fb.value;this._sendNewMessageToServer(hb,eb);}else if(gb=='root'&&fb.value==hb.offline_threading_id){hb.client_thread_id=db.thread_id;this._sendNewMessageToServer(hb,eb);}else{!v.isLocalThread(db.thread_id)?na(0):undefined;this.__threadIDMap.getServerIDFromClientID(db.thread_id,(function(ib){hb.thread_fbid=ib;this._sendNewMessageToServer(hb,eb);}).bind(this));}},_sendNewMessageToServer:function(db,eb){h.inform(k.ATTEMPT_RECONNECT);this._sentMessagesTimestamp[db.message_id]=Date.now();ca.getForFBID(this._fbid).enqueue(db.other_user_fbid||db.thread_fbid||db.client_thread_id,this._sendMessageQueueOptions,eb,db);},markSeen:function(){var db=this._lastActionTimestamp;this.__sendRequest('/ajax/mercury/mark_seen.php',{seen_timestamp:db});},_handleSendMessageErrorCommon:function(db,eb,fb,gb){pa.debug('handle_send_message_error_common',{reliability_error_status:fb,request_error_status:eb});var hb=db.getData(),ib=hb.message_batch,jb=ib.map(function(lb){var mb={action_type:o.SEND_MESSAGE,other_user_fbid:lb.other_user_fbid,thread_fbid:lb.thread_fbid,client_message_id:lb.message_id,message_id:lb.message_id,client_thread_id:lb.client_thread_id,status:eb,error_data:gb};return mb;});jb.forEach(function(lb){if(lb.action_type===o.SEND_MESSAGE&&lb.status===n.ERROR)z.log(lb);},this);var kb={actions:jb,payload_source:y.CLIENT_HANDLE_ERROR};this._payloadPreprocessor.handleUpdate(kb);},handleSendMessageError:function(db){var eb=db.getPayload(),fb=null,gb=null;if(eb&&eb.error_payload){fb=n.UNCONFIRMED;gb='send_error';}else{fb=n.ERROR;gb='request_error'+sa(db);}var hb=db.error;if(hb===1404102)i.verboseErrorHandler(db);var ib=/<.*>/.test(db.getErrorDescription())?db.getErrorSummary():db.getErrorDescription();this._handleSendMessageErrorCommon(db.getRequest(),fb,gb,{type:t.SERVER,code:db.getError(),description:ib,is_transient:db.isTransient()});},handleSendMessageTransportError:function(db){this._handleSendMessageErrorCommon(db.getRequest(),n.ERROR,'transport_error'+sa(db),{type:t.TRANSPORT,code:db.getError(),is_transient:true});},handleSendMessageTimeout:function(db){this._handleSendMessageErrorCommon(db,n.ERROR,'transport_timeout',{type:t.TIMEOUT,is_transient:true});},getLastActionTimestamp:function(){return this._lastActionTimestamp;},updateLastActionTimestamp:function(db){if(db)this._lastActionTimestamp=Math.max(this._lastActionTimestamp,db);},markThreadFetched:function(db){delete this._fetchingThreads[db];},_createServerErrorLogMessage:function(db){return {action_type:o.LOG_MESSAGE,thread_id:db,message_id:db,timestamp:Date.now(),timestamp_absolute:'',timestamp_relative:'',is_unread:false,source:ea.UNKNOWN,log_message_type:w.SERVER_ERROR,log_message_data:{}};},_getForAsyncRequest:function(db){var eb=db.getData(),fb=eb.request_user_id?eb.request_user_id:l.getID();return cb.getForFBID(fb);},__handleUpdate:function(db,eb){this._getForAsyncRequest(eb)._payloadPreprocessor.handleUpdate(db);},_handleThreadInfoError:function(db){var eb=this._getForAsyncRequest(db.getRequest());eb.handleThreadInfoError(db);},_handleSendMessageError:function(db){var eb=this._getForAsyncRequest(db.getRequest());eb.handleSendMessageError(db);},_handleSendMessageTransportError:function(db){var eb=this._getForAsyncRequest(db.getRequest());eb.handleSendMessageTransportError(db);},_handleSendMessageTimeout:function(db){var eb=this._getForAsyncRequest(db);eb.handleSendMessageTimeout(db);},_registerEndpoints:function(){var db=null;if(ba.msgrRegion)db={name:'X-MSGR-Region',value:ba.msgrRegion};var eb={'/ajax/mercury/thread_sync.php':{request_user_id:this._fbid,mode:ja.IDEMPOTENT,customHeader:db,handler:(function(fb,gb){return this.S
=[];return ba;};v.prototype.constructLogMessageObject=function(z,aa,ba,ca){'use strict';var da=w(this.$MercuryMessageObject1,j.LOG_MESSAGE,z,aa);da.log_message_type=ba;da.log_message_data=ca;if(ca&&ca.untypedData&&ca.untypedData.ttl)da.ephemeral_ttl_mode=ca.untypedData.ttl;return da;};v.prototype.normalizeNewMessage=function(z){'use strict';if(z.status===undefined)z.status=i.UNSENT;z.timestamp_absolute=t._("Today").toString();z.offline_threading_id=z.offline_threading_id||l.generateOfflineThreadingID(z.timestamp);if(!z.offline_threading_id)h.bumpEntityKey('chat.web','invalid_otid_generated');z.message_id=z.message_id||z.offline_threading_id;var aa=k.getParticipantIDFromUserID(this.$MercuryMessageObject1);z.specific_to_list=z.specific_to_list||[];if(z.specific_to_list.length&&z.specific_to_list.indexOf(aa)===-1)z.specific_to_list.push(aa);if(!z.thread_id){z.thread_id='root:'+z.offline_threading_id;}else{var ba=this.$MercuryMessageObject2.getThreadMetaNow(z.thread_id);if(ba&&ba.ephemeral_ttl_mode!==null&&z.ephemeral_ttl_mode===undefined)z.ephemeral_ttl_mode=ba.ephemeral_ttl_mode;}if(z.specific_to_list.length==1){z.thread_id='user:'+this.$MercuryMessageObject1;}else if(z.specific_to_list.length==2){var ca=z.specific_to_list[0]==aa?z.specific_to_list[1]:z.specific_to_list[0];z.thread_id=k.getThreadIDFromParticipantID(ca);}if(!z.specific_to_list.length){var da=k.tokenize(z.thread_id),ea=da.type,fa=da.value;if(ea=='user')z.specific_to_list=['fbid:'+fa,aa];}if(!z[s.MANUAL_RETRY_CNT])z[s.MANUAL_RETRY_CNT]=0;};v.prototype.normalizeResendMessage=function(z){'use strict';z.status=i.RESENDING;z.timestamp=Date.now();z[s.MANUAL_RETRY_CNT]+=1;};v.prototype.normalizeAddAttachmentPlaceholder=function(z,aa,ba){'use strict';if(ba.preview_attachments.length>0){z.has_attachment=true;z.preview_attachments=ba.preview_attachments;}z.client_state=m.DO_NOT_SEND_TO_SERVER;z.status=i.RESENDING;z.upload_id=aa;};function w(z,aa,ba,ca){var da=x(ba)?[n.CHAT]:[],ea=Date.now(),fa=u(new Date(ea),'g:ia'),ga={action_type:aa,thread_id:ca,author:k.getParticipantIDFromUserID(z),author_email:null,timestamp:ea,timestamp_absolute:new Date(ea).toLocaleDateString(),timestamp_relative:fa,timestamp_time_passed:r.TODAY,is_unread:false,is_forward:false,is_filtered_content:false,is_filtered_content_bh:false,is_filtered_content_account:false,is_filtered_content_quasar:false,is_filtered_content_invalid_app:false,is_spoof_warning:false,source:ba,source_tags:da};return ga;}function x(z){switch(z){case p.CHAT_WEB:case p.CHAT_JABBER:case p.CHAT_IPHONE:case p.CHAT_MEEBO:case p.CHAT_ORCA:case p.CHAT_TEST:case p.CHAT:case p.DESKTOP:return true;default:return false;}}var y=new o(v);f.exports=v;},null);
yParticipantFetcher3.size===0)return;this.$MercuryParticipantFetcher2=true;n((function(){this.$MercuryParticipantFetcher2=false;this.$MercuryParticipantFetcher3.forEach((function(r){return this.$MercuryParticipantFetcher4.add(r);}).bind(this));this.$MercuryParticipantFetcher7(this.$MercuryParticipantFetcher3,(function(r){r.forEach((function(s){return this.$MercuryParticipantFetcher4['delete'](s.id);}).bind(this));this.$MercuryParticipantFetcher8(r);}).bind(this));this.$MercuryParticipantFetcher3.clear();}).bind(this));};p.prototype.$MercuryParticipantFetcher7=function(r,s){var t=[];r.forEach(function(u){var v=i.tokenize(u),w=v.type,x=v.value;w==='fbid'&&t.push(x);});if(t.length>0){m.getMulti(t,function(u){var v=[];for(var w in u)v.push(q(u[w],w));s(v);if(v.length!==t.length)o.error('server_fetch_participant_count_error',{expectedIDs:t,receivedIDs:Object.keys(u)});});o.debug('client_fetch_participants',{userIDs:t});}};p.prototype.$MercuryParticipantFetcher8=function(r){this.$MercuryParticipantFetcher1.handleUpdate({participants:r,from_client:false,payload_source:j.SERVER_FETCH_PARTICIPANTS});};function q(r,s){var t=babelHelpers._extends({gender:r.gender,fbid:r.id||s,href:r.uri,id:i.getParticipantIDFromUserID(r.id||s),image_src:r.thumbSrc,name:r.name,short_name:r.firstName,employee:r.employee,is_employee_away:r.is_employee_away,type:r.type,vanity:r.vanity,is_friend:r.is_friend,is_messenger_user:r.is_messenger_user,social_snippets:r.social_snippets},{});if(r.officeStatus){t.officeStatus=r.officeStatus;t.officeStatusStartDate=r.officeStatusStartDate;t.officeStatusEndDate=r.officeStatusEndDate;t.officeStatusComment=r.officeStatusComment;t.officeStatusLocation=r.officeStatusLocation;}return t;}f.exports=p;},null);
__d("CreditCardFormParam",[],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={ACCOUNT_ID:"account_id",ACCOUNT_COUNTRY_CODE:"account_country_code",APP_ID:"app_id",CARD_EXPIRATION:"exp",CARD_FBID:"cc_fbid",CARD_ID:"cc_id",CARD_TYPE:"cardType",CITY:"city",CONTEXT_ID:"context_id",COUNTRY:"country",CSC_LENGTH:"csc_length",EMAIL:"email",FIRST_NAME:"firstName",TRACKING_ID:"tracking_id",JSFAIL_SOURCE:"jsfail_source",KEYPRESS_TIMES:"kpts",LAST_NAME:"lastName",MONTH:"month",STATE:"state",STREET:"street",STREET_2:"street2",VALIDATE_ADDRESS:"validate_address",VALIDATE_NAME:"validate_name",VALIDATE_ZIP:"validate_zip",YEAR:"year",ZIP:"zip",VALIDATOR_CHECKS:"checks",CARD_NUMBER:"creditCardNumber",CSC:"csc",CARD_NUMBER_FIRST_6:"creditCardNumber_first6",CARD_NUMBER_LAST_4:"creditCardNumber_last4",CARD_NUMBER_TOKEN:"creditCardNumber_token",CSC_TOKEN:"csc_token",AUTH_LEVEL_FLAG:"auth_level",AUTH_AMOUNT:"auth_amount",AUTH_CURRENCY:"auth_currency",AUTO_EXPAND_AUTH_LEVEL_FLAG:"auto_expand_auth_level",PAYMENT_ITEM_TYPE:"payment_item_type",CREDENTIAL_ID:"credential_id",IS_STORED_BALANCE:"is_stored_balance",FLOW_TYPE:"flow_type",STORED_BALANCE_STATUS:"stored_balance_status"};},null,{});
__d('MessengerPhoto.react',['Image.react','MercuryAttachmentType','React','URI','cx','joinClasses'],function a(b,c,d,e,f,g,h,i,j,k,l,m){'use strict';if(c.__markCompiled)c.__markCompiled();var n=j.PropTypes,o=206,p=450;function q(u){if(u.metadata){if(u.attach_type===i.VIDEO)return u.metadata.inbox_preview;return new k('/ajax/mercury/attachments/photo.php').addQueryData({fbid:u.metadata.fbid,height:o,mode:'cover',request_user_id:u.metadata.pageid,width:o}).toString();}return null;}function r(u){if(u.preview_uploading)return {height:u.preview_height||o,src:u.preview_url,width:u.preview_width||o};var v=q(u);if(v)return babelHelpers._extends({src:v},u.metadata.inbox_size);if(u.preview_url)return {height:u.preview_height,src:u.preview_url,width:u.preview_width};if(u.media)return u.media.playable&&u.media.animated_image?babelHelpers._extends({},u.media.animated_image_size,{src:u.media.animated_image}):babelHelpers._extends({},u.media.image_size,{src:u.media.image});}function s(u,v){if(u.preview_uploading)return u.preview_url?0:o;var w=u.media?r(u):{height:u.preview_height,width:u.preview_width};return Math.min(w.height*Math.min(1,p/w.width),p);}var t=j.createClass({displayName:'MessengerPhoto',contextTypes:{width:n.number},propTypes:{attachment:n.object.isRequired,isSingle:n.bool.isRequired,onClick:n.func},render:function(){var u=this.props.attachment,v=r(u);if(!v)return null;var w=this._getImageFromMetadata(v),x={};if(v.src)x.backgroundImage='url('+v.src+')';if(this.props.isSingle){var y=s(u,this.context);if(y)x.minHeight=y;}var z=!!this.props.attachment.app_attribution;return (j.createElement('div',{className:m(this.props.className,"_4tsk"+(z?' '+"_mxz":'')+(this.props.isSingle&&!z?' '+"_52mr":'')+(u.preview_uploading&&!v.src?' '+"_3etv":'')),style:x,onClick:this._onClick},w,j.createElement('a',{className:"_4tsl",href:v.src},this.
tom_like_icon":null,"titan_originated_thread_id":"\u003C1414028124518:199292367-4078056338\u0040mail.projektitan.com>"}],"actions":[{"message_id":"mid.1447692891827:b7807521a52f2bbc89","threading_id":null,"offline_threading_id":"6072064085512834551","author":"fbid:100000680200678","author_email":"100000680200678\u0040facebook.com","ephemeral_ttl_mode":null,"timestamp":1447692891832,"timestamp_absolute":"Today","timestamp_relative":"4:54pm","timestamp_datetime":"4:54pm","timestamp_time_passed":0,"is_unread":false,"is_forward":false,"is_filtered_content":false,"is_filtered_content_bh":false,"is_filtered_content_account":false,"is_filtered_content_quasar":false,"is_filtered_content_invalid_app":false,"forward_count":0,"forward_message_ids":[],"source":"source:messenger:web","source_tags":[],"is_spoof_warning":false,"folder":"inbox","thread_fbid":"100000680200678","other_user_fbid":"100000680200678","body":"RAMAS_IS_THE_WORD","subject":null,"has_attachment":false,"attachments":[],"raw_attachments":null,"ranges":[
id.1414028124846:ddce568db74c17b061","action_id":null,"action_type":"ma-type:user-generated-message"}],"participants":[{"fbid":100000680200678,"gender":2,"href":"https:\/\/www.facebook.com\/daviduart3","id":"fbid:100000680200678","image_src":"https:\/\/scontent.xx.fbcdn.net\/hprofile-xap1\/v\/t1.0-1\/p32x32\/12234850_1061630600536270_3416102644215011805_n.jpg?oh=9ac85df3cc7663d37c0df8b23b5039d3&oe=56B2F54C","big_image_src":"https:\/\/scontent.xx.fbcdn.net\/hprofile-xap1\/v\/t1.0-1\/p50x50\/12234850_1061630600536270_3416102644215011805_n.jpg?oh=7c887dea1778445bbf469134b7b520ed&oe=56EBF68C","name":"David Duarte","short_name":"David","employee":false,"is_employee_away":false,"networks":[],"type":"user","vanity":"daviduart3","is_friend":true,"social_snippets":[],"is_messenger_user":true},{"fbid":100000075573403,"gender":2,"href":"https:\/\/www.facebook.com\/diogo.barradas.71","id":"fbid:100000075573403","image_src":"https:\/\/fbcdn-profile-a.akamaihd.net\/hprofile-ak-xft1\/v\/t1.0-1\/p32x32\/11430107_1029900610355782_5323887418682892768_n.jpg?oh=2184a3a8812329f17cc360a0bfc61f44&oe=56B3F6D0&__gda__=1455265447_3fb78e74f425b2e8ffb3965ae324c1ef","big_image_src":"https:\/\/fbcdn-profile-a.akamaihd.net\/hprofile-ak-xft1\/v\/t1.0-1\/p50x50\/11430107_1029900610355782_5323887418682892768_n.jpg?oh=52a7c80a3b4116d8479e83e2bb125725&oe=56BA5910&__gda__=1458082407_ef21a42da065571c4aff10bc8489d2c5","name":"Diogo Barradas","short_name":"Diogo","employee":false,"is_employee_away":false,"networks":[],"type":"user","vanity":"diogo.barradas.71","is_friend":false,"social_snippets":[],"is_messenger_user":true}],"message_counts":[{"unread_count":1,"unseen_count":0,"seen_timestamp":1447692891832,"last_action_id":null,"folder":"inbox"}],"unseen_thread_ids":[{"thread_fbids":[],"other_user_fbids":null,"thread_ids":[],"folder":"inbox"}],"unseen_thread_fbids":[{"thread_fbids":[],"other_user_fbids":null,"thread_ids":[],"folder":"inbox"}],"payload_source":"server_thread_sync"},"bootloadable":s = false;
eceipt)break;ca=r.transform(ba);this.$MercurySyncDispatcher3.handleUpdate(ca);break;case x.ForcedFetch:if(!j.WWWSyncMsgText)return;this.$MercurySyncDispatcher4.process(ba);break;default:break;}};z.prototype.$MercurySyncDispatcher5=function(ba){var ca=!!ba.stickerId||ba.attachments&&!!ba.attachments.length;if(!ca&&!j.WWWSyncMsgText){return false;}else if(ca&&!j.WWWSyncMsgAttach)return false;return true;};z.prototype.$MercurySyncDispatcher6=function(ba){var ca=ba.other_user_fbid||ba.thread_fbid;this.$MercurySyncDispatcher2.handleUpdateWaitForThread({actions:[ba],payload_source:l.CLIENT_CHANNEL_MESSAGE},ca);};z.prototype.$MercurySyncDispatcher7=function(ba){this.$MercurySyncDispatcher3.handleUpdate({actions:ba,payload_source:l.CLIENT_CHANNEL_MESSAGE});};var aa=new y(z);f.exports=z;},null);
__d('MercuryUnreadState',['MercuryFolders','LogHistory','KeyedCallbackManager','MercuryActionType','MercuryDispatcher','MercuryGlobalActionType','MercurySingletonMixin','MercuryThreadlistConstants','MercuryThreadIDMap','MessagingTag','MercuryServerRequests','MercuryThreadInformer','MercuryThreads','arrayContains','createObjectFrom'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v){if(c.__markCompiled)c.__markCompiled();var w=(h.getSupportedFolders()||[]).filter(function(oa){return oa!=q.ACTION_ARCHIVED;}),x='unread_thread_hash',y='unseen_thread_list',z=o.MAX_UNREAD_COUNT,aa=i.getInstance('mercury_unread_state');function ba(oa){this._fbid=oa;this._serverRequests=r.getForFBID(this._fbid);this._threadIDMap=p.getForFBID(this._fbid);this._threadInformer=s.getForFBID(this._fbid);this._threads=t.getForFBID(this._fbid);this._dispatcher=l.getForFBID(this._fbid);this._allReadTimestamp={};this._threadReadTimestamp={};this._initialUnreadCount={};this._maxCount={};this._unreadResources={};w.forEach((function(pa){this._initialUnreadCount[pa]=0;this._maxCount[pa]=false;this._unreadResources[pa]=new j();}).bind(this));this._dispatcher.subscribe('update-unread',(function(pa,qa){ga(this,qa);var ra=qa.global_actions||[];for(var sa=0;sa<ra.length;sa++){var ta=ra[sa];if(ta.action_type==m.MARK_ALL_READ)ja(this,ta.folder,ta.timestamp);}}).bind(this));this._dispatcher.subscribe('update-thread-ids',(function(pa,qa){la(this,qa);}).bind(this));}Object.assign(ba.prototype,{getUnreadCount:function(oa){if(this.exceedsMaxCount(oa)){aa.error('unguarded_unread_count_fetch',{});return 0;}return fa(this,oa);},exceedsMaxCount:function(oa){return this._maxCount[oa]||fa(this,oa)>z;},markFolderAsRead:function(oa){if(this._maxCount[oa]||fa(this,oa)>0)this._serverRequests.markFolderAsRead(oa);},getIsThreadUnread:function(oa,pa){var qa=pa||q.INBOX,ra=ea(this,qa);return ra&&ra[oa];}});Object.assign(ba,n);function ca(oa,pa,qa){oa._unreadResources[pa].
__d('ChatApp',['CSS','ChatPerfInstrumentation','DOM','JSLogger','Promise','React','ReactDOM','csx'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o){'use strict';if(c.__markCompiled)c.__markCompiled();var p={init:function(v,w,x){if(this._isInitialized){k.create('chat_app').error('repeated_init');return;}this._rootElem=v;l.resolve().then(function(){return i.init();}).then(function(){return q();}).then(function(){return r(x);}).then(function(){return s(w,v);}).then(function(){return t();}).then((function(){this._isInitialized=this._isLoaded=true;i.logTTI();}).bind(this)).done(function(){return u(x);});},isInitialized:function(){return !!this._isInitialized;},isHidden:function(){return !this._isInitialized||this._isHidden;},hide:function(){if(this.isHidden())return;h.hide(this._rootElem);this._isHidden=true;},unhide:function(){if(this._isInitialized){if(this._isHidden){h.show(this._rootElem);this.tabsViewport.checkWidth();e(['Dock'],function(v){v.resizeAllFlyouts();});this._isHidden=false;}}else if(!this._isLoaded){e(['UIPagelet'],function(v){v.loadFromEndpoint('ChatTabsPagelet','ChatTabsPagelet');v.loadFromEndpoint('BuddylistPagelet','BuddylistPagelet');});this._isLoaded=true;}}};function q(){return new l(function(v){e(['MercuryBlockedParticipants','MercuryChannelHandler','MercuryDelayedRoger','MercuryDeliveryReceipts','MercuryDeliveryState','MercuryParticipants','MercuryStateCheck','MercuryThreads','MercuryUnreadState','MercuryUnseenState','MercurySyncDispatcher'],function(w,x,y,z,aa,ba,ca,da,ea,fa,ga){w.get();x.get().turnOn();y;z.get();aa.get();ba;da.get();fa.get();ea.get();ca.get();ga.get();v();});});}function r(v){return new l(function(w){e(['MercuryServerPayloadPreprocessor'],function(x){x.get().handleUpdate(v);w();});});}function s(v,w){return new l(function(x){e(['ChatTabController','ChatTabViewCoordinator','TabsViewport','MNCommerceDialogContainer.react','P2PDialogContainer.react','FBRTCMessageHandler','ChatOpenTabImpl'],function(y,z,aa,ba,ca,da,ea){p.tabsViewport=new aa(v);p.tabViewCoordinator=new z(v,p.tabsViewport);p.tabController=new y(p.tabsViewport);da.init();var fa=j.find(w,"._26-x");n.render(m.createElement(ba,null),fa);var ga=j.find(w,"._26-y");n.render(m.createElement(ca,null),ga);p.chatOpenTabImpl=ea;x();});});}function t(){return new l(function(v){e(['HotLikeSound','ChatOptions'],function(w,x){w.setCheckSoundEnabledFunc(function(){return x.getSetting('sound');});v();});});}function u(v){if(!v.threads_to_auto_open||!p.tabsViewport.hasRoomForRaisedTab())return;e(['ChatOpenTab'],function(w){w.openThread(v.threads_to_auto_open.thread_fbid,'autoOpenTab','',null,true);});}f.exports=p;},null);
__d('MessagesViewer',['AsyncRequest','Bootloader','DOM','MessagesViewerSetID','PhotoStore','React','ReactDOM','Run','emptyFunction','ge'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){if(c.__markCompiled)c.__markCompiled();var r={bootstrapWithElem:function(u){r.bootstrapWithConfig({fbid:u.getAttribute('data-fbid'),dimensions:u.getAttribute('data-dimensions'),src:u.getAttribute('href'),endpoint:u.getAttribute('data-endpoint'),disablePaging:u.getAttribute('data-disablepaging')},u);},bootstrapWithConfig:function(u,v){var w=u.setID;if(!w)w=k.MESSAGES;t(function(x,y){s(m.createElement(x,{actorid:u.actorid,dimensions:[u.dimensions],disablepaging:u.disablePaging,disableForward:u.disableForward,open:true,photoid:u.fbid,reverse:false,rootClassName:u.rootClassName,setid:w,snapToPhoto:u.snapToPhoto,thumbsrc:u.src}));if(!l.hasBeenCreated(w)&&u.endpoint){var z=new h(u.endpoint);if(v)z.setRelativeTo(v);z.send();}});},renderVideo:function(u){t(function(v,w){s(m.createElement(w,u));});},preload:function(){o.onAfterLoad(function(){return t(p);});}};function s(u){var v=q('messages_viewer');if(!v){v=j.create('div',{id:'messages_viewer'});document.body.appendChild(v);}u=n.render(u,v);u.subscribeOnce('close',function(){n.unmountComponentAtNode(v);});}function t(u){i.loadModules(["SpotlightMessagesViewer","MessagingVideoViewer.react"],u);}f.exports=r;},null);
__d('MessengerPhotosGroup.react',['ChatSpeakingSticker.react','MercuryAttachmentType','MercuryConfig','MessengerPhoto.react','MessengerVideo.react','MessagesViewer','ReactComponentWithPureRenderMixin','React','Vector','cx','joinClasses'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){'use strict';if(c.__markCompiled)c.__markCompiled();var s='empty-spacer',t=o.PropTypes,u=o.createClass({displayName:'MessengerPhotosGroup',mixins:[n],propTypes:{attachType:t.string,attachments:t.arrayOf(t.object).isRequired,message:t.object},componentDidMount:function(){m.preload();},render:function(){var v=this.props.attachments;return (o.createElement('div',{className:this._getRootClassNameFor(v)},this._rowsFor(v)));},_onChildClicked:function(v){if(v.preview_uploading)return;if(v.attach_type===i.VIDEO){m.renderVideo({disableForward:true,rootClassName:"_1j1h",videoID:v.metadata.fbid,videoSize:new p(v.metadata.dimensions.width,v.metadata.dimensions.height),videoURI:v.url});}else if(v.attach_type===i.PHOTO||v.attach_type===i.ANIMATED_IMAGE){m.bootstrapWithConfig({dimensions:v.metadata.dimensions,disablePaging:this.props.attachments.length===1,disableForward:!j.MessengerForwardingEnabled,endpoint:v.url,fbid:v.metadata.fbid,rootC
\fbidis
layName:'MessengerActiveUsersList',mixins:[m,o],propTypes:{contactAdapter:s.func.isRequired,contacts:s.array.isRequired,isUserAvailable:s.bool.isRequired,onAvailabilityChange:s.func,renderOnly:s.number,viewer:s.string.isRequired,viewerData:s.instanceOf(h)},render:function(){var u;if(this.props.isUserAvailable)u=n.createElement('div',null,n.createElement('div',{className:"_3ggt"},q._("Active Facebook Friends ({number_of_contacts})",[q.param('number_of_contacts',this.props.contacts.length)])),n.createElement('ul',null,this._maybeSlice(this.props.contacts,0).map((function(v){return (n.createElement(k,{contactAdapter:this.props.contactAdapter,extraActionsEnabled:false,key:v.id,onSelect:this._handleSelect,rawContact:v,showPresence:true,viewer:this.props.viewer}));}).bind(this))),this._getIncrementalDisplaySpinner(this.props.contacts.length));return (n.createElement('div',null,n.createElement(l,{isUserAvailable:this.props.isUserAvailable,onAvailabilityChange:this.props.onAvailabilityChange,viewerData:this.props.viewerData}),u));},_handleSelect:function(u){r.getThreadMeta(i.getThreadIDFromUserID(u.fbid),function(v){j.selectThread(v.thread_id);});}});f.exports=t;},null);
__d('P2PAPI',['AsyncRequest','CreditCardFormParam','P2PActions','P2PAPIUtils','P2PPasswordProtectionParam','P2PPaymentCampaignNames','P2PPaymentRequestStatus','P2PPaymentRequestsStore','P2PTransferParam','PaymentTokenProxyUtils','ImmutableObject','XMoneypennyPaymentsCreateController','XP2PAddressesController','XP2PAddressCreateController','XP2PBannerDismissalsUpdateController','XP2PBannerStatesController','XP2PBannerViewsUpdateController','XP2PCardBINValidateController','XP2PCreditCardDeleteController','XP2PCreditCardUpdateController','XP2PCreditCardCreateController','XP2PCreditCardVerifyController','XP2PCreditCardsController','XP2PCurrentUserProfileDataController','XP2PExtensiveTransferDetailsController','XP2PFriendPickerController','XP2PPasswordProtectionStatusController','XP2PPasswordProtectionStatusUpdateController','XP2PPaymentRequestCreateController','XP2PPaymentRequestDeclineController','XP2PPlatformMsgrCommerceCartCreateController','XP2PPlatformSetShippingAddressController','XP2PPresetCreditCardSetController','XP2PProductItemBannerController','XP2PProductItemBannerDismissalController','XP2PProductItemBannerMarkSoldController','XP2PTransactionsCampaignCreateController','XP2PTransactionsCancelController','XP2PTransactionsCreateController','XP2PTransactionsController','XP2PTransactionsDeclineController','XP2PUserEligibilityController','emptyFunction','isEmpty'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba,ca,da,ea,fa,ga,ha,ia,ja,ka,la,ma,na,oa,pa,qa,ra,sa,ta,ua,va,wa,xa,ya){'use strict';if(c.__markCompiled)c.__markCompiled();var za={getAllCreditCards:function(){var ab=da.getURIBuilder().getURI();new h().setURI(ab).setMethod('GET').setReadOnly(true).setAllowCrossPageTransition(true).setHandler((function(bb){var cb=bb.getPayload();if(!cb.error)j.updateCreditCards(cb);}).bind(this)).send();},createTransaction:function(ab){var bb=ta.getURIBuilder().getURI(),cb={},db=ab.formData,eb=ab.success||xa,fb=ab.error||xa;cb[i.CREDENTIAL_ID]=db[i.CREDENTIAL_ID];cb.amount=db.amount;cb.receiver_id=db.receiverId;cb.offline_threading_id=k.genOfflineThreadingID();cb.group_thread_fbid=db.group_thread_fbid;cb.platform_context_id=db.platform_context_id;cb.shipping_address_id=db.shippingAddressID;cb.shipping_option_id=db.shippingOptionID;cb.memo_text=db.memoText;cb.payment_request_id=db.paymentRequestID;new h().setData(cb).setMethod('POST').setURI(bb).setAllowCrossPageTransition(true).setHandler((function(gb){var hb=gb?gb.getPayload():{};if(hb.error){fb(hb.error);}else{eb(hb);this.getAllCreditCards();if(cb.payment_request_id){var ib=o.getPaymentRequestByID(cb.payment_request_id);if(ib){ib=ib.set('currentStatus',n.TRANSFER_COMPLETED);j.paymentRequestUpdated(ib);}}}}).bind(this)).setErrorHandler((function(){fb({message:k.getUncaughtErrorMessage()});}).bind(this)).send();},addCreditCard:function(ab){j.ignoreCreditCardChannelEvents();var bb=ba.getURIBuilder().getURI().getPath(),cb=ab.onSuccess||xa,db=ab.onError||xa,eb=q.getURI({tpe:bb});ab=k.prepareCardMutationData(ab);var fb=new r(ab),gb=ab.platformContext;j.creditCardSaving();new h().setAllowCrossOrigin(true).setURI(eb).setData(ab).setMethod('POST').setHandler((function(hb){var ib=hb.getPayload();if(!ib.errors){fb=r.set(fb,ib);j.addCreditCard(fb);if(ib.isPreset)j.transferAccepted();if(gb)j.checkoutCreditCardSelected(ib[i.CREDENTIAL_ID]);cb();}else{j.addCreditCardError(babelHelpers._extends({requestID:fb.requestID},ib));db(ib);}j.allowCreditCardChannelEvents();}).bind(this)).setErrorHandler((function(){j.addCreditCardError({requestID:fb.requestID,errors:{general:{message:k.getUncaughtErrorMessage()}}});j.allowCreditCardChannelEvents();}).bind(this)).send();},getTransactions:function(ab){ab=ab||{};var bb={},cb=ab,db=ua.getURIBuilder().getURI(),eb=new r(cb);if(cb.since)bb.since=cb.since;return new h().setData(bb).setURI(db).setMethod('GET').setReadOnly(true).setHandler((function(fb){var gb=fb.getPayload();if(!gb.error){j.updateTransfers(gb);}else j.updateTransfersError(babelHelpers._extends({r|
__d('MercuryIDs',[],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h={isValid:function(i){if(!i||typeof i!=='string')return false;return (/^\w{3,12}:/.test(i));},isValidThreadID:function(i){if(!h.isValid(i))return false;var j=h.tokenize(i);switch(j.type){case 'user':case 'group':case 'thread':case 'root':case 'pending':return true;default:return false;}},tokenize:function(i){if(!this.isValid(i))throw 'bad_id_format '+i;var j=i.indexOf(':');return {type:i.substr(0,j),value:i.substr(j+1)};},getUserIDFromParticipantID:function(i){if(!this.isValid(i))throw 'bad_id_format '+i;var j=h.tokenize(i),k=j.type,l=j.value;if(k!='fbid')return null;return l;},getParticipantIDFromUserID:function(i){if(isNaN(i))throw 'Not a user ID: '+i;return 'fbid:'+i;},getUserIDFromThreadID:function(i){if(!this.isCanonical(i))return null;return this.tokenize(i).value;},getThreadIDFromUserID:function(i){return 'user:'+i;},getThreadIDFromThreadFBID:function(i){return 'thread:'+i;},getThreadIDFromParticipantID:function(i){var j=this.getUserIDFromParticipantID(i);return j?this.getThreadIDFromUserID(j):null;},getParticipantIDFromFromThrehis.head_ === token && this.tail_ === token) {
__d('SidebarFitWindowHeight',['Arbiter','ArbiterMixin','Event','Style','SubscriptionsHandler','UITinyViewportAction','Vector','mixin','queryThenMutateDOM'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){if(c.__markCompiled)c.__markCompiled();var q,r;q=babelHelpers.inherits(s,o(i));r=nuPropsSafe({hasSwitchToWork:false});},_updateControls:function(qe,re,se){var te=false;if(qe&&qe.thread_id){var ue=xa.tokenize(qe.thread_id);if(ue.type==='user'){var ve=ue.value;te=!na.isUser(ve);}}var we=cb.showComposer(qe)&&(!zc(qe.participants)||!!re)&&!this._pendingActions,xe=this._getNode('footer');n.conditionShow(xe,we);this._updateMenuPropsSafe({isEmptyChat:nd.isNewEmptyLocalThread(qe.thread_id),show:we});if(te)this._updateMenuPropsSafe({showAddFriend:null});var ye=we&&!te;if(p.get('chat_react_header')){this._addToThreadButton&&this._addToThreadButton.setProps({shown:ye});}else n.conditionShow(this._getNode('addToThreadLink'),ye);if(se&&se.length===1&&wa.ShowContextBanner&&wa.ShowContextBannerNullState){this._messagesView&&this._messagesView.renderContextBanner(null,se[0].info&&se[0].info.uid);}else this._messagesView&&this._messagesView.unmountContextBanner();this._resizeInputContainer();this._updateOrionTrigger();},_updateOrionTrigger:function(){if(this._orionTrigger){this._setOrionTriggerProps();}else this._renderOrionTrigger();},_setOrionTriggerProps:function(){this.getParticipantIDsForOrionNUX((function(qe,re){za.getMulti(qe,(function(se){var te=[],ue,ve=nd.isNewEmptyLocalThread(this._threadID);for(var we in se){ue=this._getUserIdFromParticipantID(we);if(ue!==ea.getID())te.push(qa.set(se[we],{userID:ue}));}if(this._orionTrigger)this._orionTrigger.setProps(babelHelpers._extends({participants:te,isNewEmptyLocalThread:ve,isGroupChat:xa.isGroupChat(this._threadID)&&!ve,threadID:this._threadID,threadFBID:re},mb.getStateByThreadID(this._threadID),{referrer:ab.CHAT}));}).bind(this));}).bind(this));},_getUserIdFromParticipantID:function(qe){return xa.getUserIDFromParticipantID(qe);},_onP2PSendMoneyDialogStoreChange:function(){var qe=mb.getStateByThreadID(this._threadID);if(qe&&qe.referrer!==ab.WEB_INBOX)this._updateOrionTrigger();},_unsubscribeP2PSendMoneyDialogStore:function(){if(this._sendMoneyDialogStoreSub){this._sendMoneyDialogStoreSub.remove();this._sendMoneyDialogStoreSub=null;}},_isP2PEnabled:function(){return kb.P2PEnabled;},_canP2PSend:function(){return (this._isP2PEnabled());},_renderOrionTrigger:function(){var qe=this._getCanonicalUserID();if(this._canP2PSend()&&qe!==ea.getID()){this._orionTriggerContainer=this._getNode('orionTriggerContainer');this._orionTrigger=new ub(lb,this._orionTriggerContainer);this._orionTrigger.setProps({flyoutAlignment:this._isTwoLine?'right':undefined,onTrigger:this._orionTriggered.bind(this)});n.addClass(this._inputContainerNode,"_11d6");this._setOrionTriggerProps();}},getParticipantIDsForOrionNUX:function(qe){var re=this._sheetController.getAddFriendsParticipants(),se=this._getCanonicalUserID();if(se){qe([xa.getParticipantIDFromUserID(se)]);}else if(nd.isNewEmptyLocalThread(this._threadID)&&re){qe(re);}else nd.getThreadMeta(this._threadID,function(te){qe(te.participants,te.thread_fbid);});},_resizeInputContainer:function(){if(!this._isTwoLine){var qe=this._tabElem.clientWidth,re=2,se=qe-(this._inputContainerNode.clientWidth+re),te=ua.isRTL()?'left':'right';dc.set(this._iconsContainerNode,te,se+'px');}if(!p.get('chat_react_input'))hc.getInstance(this._getNode('input')).update();},_updateNewThread:function(qe){if(nd.isNewEmptyLocalThread(qe.thread_id))this.showAddFriend();},_isEmployeesOnly:function(qe){for(var re in qe)if(!qe[re].employee)return false;return true;},_showArchiveWarningIfAllParticipantsAreEmployees:function(qe){var re=this._isEmployeesOnly(qe),se=p.get('chat_react_header'),te=se?this._getNode('archiveContainer'):this._getNode('titanArchiveWarning');if(te){if(this._titlebarTooltipAnchor)n.conditionClass(this._titlebarTooltipAnchor,'narrowTitleBar',re);n.conditionShow(te,re);if(se)this._archiveWarning&&this._archiveWarning.setProps({shown:re});}},updateMultichatTooltip:function(){nd.getThreadMeta(this._threadID,(function(qe){if(!qe.is_canonical){var re;if(p.get('chat_react_header')){re=tb.findDOMNode(this._title.component);}else re=this._titlebarTooltipAnchor;ud(re,qe.participants);}}).bind(this));},_getNode:function(qe){return this._tabTemplate.getNode(qe);},_get
aCanonicalUserID:function(){return xa.getUserIDFromThreadID(this._threadID);},_listen:function(qe,event,re,se){var te=this._getNode(qe);if(te){this._eventListeners.push(ma.listen(te,event,re.bind(this)));}else if(!se)throw new Error('Could not find node "'+qe+'"');},_closePreClicked:function(qe){this._closeMouseDown=true;},_closeClicked:function(qe){le(this);v.closeTab(this._threadID);if(qe instanceof fc){qe.stopPropagation();return;}qe.kill();},_closeEnter:function(qe){if(qe.keyCode===ta.RETURN)this._closeClicked(qe);},_nubClicked:function(qe){qe.kill();return y.inform('nub-activated',this._threadID);},_dockKeyDown:function(event){if(event.keyCode===ta.RETURN||event.keyCode===ta.SPACE){y.inform('nub-activated',this._threadID);event.kill();}else this._handleHotkeyPressed(event);},_handleHotkeyPressed:function(event){if(event.keyCode===ta.ESC){this._handleEscape();if(p.get('chat_react_input'))event=new ga(event);event.kill();}else if(event.keyCode===ta.TAB)this._handleTabPressed(event);},_handleTabPressed:function(event){if(!event.ctrlKey){var qe=y.inform('tab-pressed',{id:this._threadID,shiftPressed:event.shiftKey});if(p.get('chat_react_input'))event=new ga(event);!qe&&event.kill();return true;}},_handleEscape:function(){if(this._stickersFlyoutShown){this._toggleStickersFlyoutShown(false);return;}le(this);if(this.hasEmptyInput()){y.inform('esc-pressed',this._threadID);}else{var qe=xc._("Are you sure you want to close this chat window?"),re=xc._("You haven't sent your message.");zb.showConfirm(qe,re,(function(se){if(se){y.inform('esc-pressed',this._threadID);}else this.focus();}).bind(this),{autofocusConfirm:true});}},_titleClicked:function(event){var qe=event.getTarget();if(!ob.byClass(qe,'titlebarText')&&!ob.byClass(qe,'uiSelector')&&!ob.byClass(qe,'addToThread')&&!ob.byClass(qe,'optionMenu')&&!ob.byClass(qe,'videoicon')&&!ob.byClass(qe,'phoneicon')&&!ob.byClass(qe,"_1fu3")&&!ob.byClass(qe,"_1fu4")&&!ob.byClass(qe,'close')){event.kill();v.lowerTab(this._threadID);this.focus();}},_groupCallEnter:function(qe){if(qe.keyCode===ta.RETURN)this._groupCallClicked(qe);},_groupCallClicked:function(qe){if(qe.target)qe.target.blur();if(this._videoCallLinkEnabled){var re;if(qe.target&&(n.hasClass(qe.target,'phoneicon')||n.hasClass(qe.target,"_1fu4"))){re='chat_tab_voice_icon';}else re='chat_tab_icon';nd.getThreadMeta(this._threadID,function(se){var te=se.participants.map(function(ve){return xa.getUserIDFromParticipantID(ve);}),ue=te.filter(function(ve){return ve!==ea.getID();});y.inform('group-call-clicked',{threadID:'GROUP:'+se.thread_fbid.toString(),usersToCall:ue,clickSource:re,audioOnly:re==='chat_tab_voice_icon'});});}if(p.get('chat_react_header')){qe.stopPropagation();}else return false;},_callEnter:function(qe){if(qe.keyCode===ta.RETURN)this._callClicked(qe);},_callClicked:function(qe){if(qe.target)qe.target.blur();var re=this._getCanonicalUserID();if(this._videoCallLinkEnabled){var se;if(qe.target&&(n.hasClass(qe.target,'phoneicon')||n.hasClass(qe.target,"_1fu4"))){se='chat_tab_voice_icon';}else se='chat_tab_icon';y.inform('video-call-clicked',{threadID:this._threadID,userID:re,clickSource:se,audioOnly:se==='chat_tab_voice_icon'});}if(p.get('chat_react_header')){qe.stopPropagation();}else return false;},_addFriendLinkClicked:function(){this.showAddFriend();},_getUserParticipants:function(qe){var re=[];qe.forEach(function(se){var te=xa.getUserIDFromParticipantID(se);te&&re.push(te);});return re;},_enableDesktopNotif:function(){Notification.requestPermission();},_inputPasted:function(event){if(lc.chrome()){var qe=event.clipboardData||event.originalEvent.clipboardData;if(!qe||!qe.items||qe.items.length<1)return;var re=qe.items[0].type;if(re!=='image/png')return;if(qe.items[0].getAsFile){var se=qe.items[0].getAsFile();this._photoUploader.uploadFile(se);}}},_focusInput:function(){q.processEvent('focus');if(p.get('chat_react_input')){this._chatInput&&this._chatInput.isMounted()&&this._chatInput.focus();}else this._getNode('input').focus();},_focusTab:function(){n.addClass(this._tabElem,'focusedTab');this.tryMarkAsRead();this._close
__d('MercuryPageServerRequests',['MercuryAPIArgsSource','MercuryAssert','MercuryServerRequests','PageMessageEnumTag','PagesMessengerThreadUtils','MercuryServerDispatcher'],function a(b,c,d,e,f,g,h,i,j,k,l,m){if(c.__markCompiled)c.__markCompiled();var n,o,p=h.MERCURY;n=babelHelpers.inherits(q,j);o=n&&n.prototype;function q(r){'use strict';o.constructor.call(this,r);var s={'/pages/messaging/thread_tag/add/':{request_user_id:r,mode:m.BATCH_SUCCESSIVE,batch_function:this.$MercuryPageServerRequests1,handler:(function(t,u){return this.__handleUpdate(t,u);}).bind(this)},'/pages/messaging/thread_tag/remove/':{request_user_id:r,mode:m.BATCH_SUCCESSIVE,batch_function:this.$MercuryPageServerRequests1,handler:(function(t,u){return this.__handleUpdate(t,u);}).bind(this)},'/pages/messaging/thread_tag/list/':{request_user_id:r,mode:m.IMMEDIATE,handler:(function(t,u){return this.__handleUpdate(t,u);}).bind(this)},'/pages/messaging/create_note/':{request_user_id:r,mode:m.IMMEDIATE,handler:(function(t,u){return this.__handleUpdate(t,u);}).bind(this)}};m.registerEndpoints(s);}q.prototype.$MercuryPageServerRequests1=function(r,s){'use strict';var t=r?r.tag_name:s.tag_name,u=r?r.thread_ids:[],v=s?s.thread_ids:[],w=u.concat(v),x={tag_name:t,thread_ids:w};return x;};q.prototype.addThreadFlag=function(r,s){'use strict';i.isThreadID(r);this.__threadIDMap.getServerIDFromClientID(r,(function(t){var u={thread_ids:[t],tag_name:k.FLAG};this.__sendRequest('/pages/messaging/thread_tag/add/',u);}).bind(this));};q.prototype.createNote=function(r,s,t){'use strict';i.isThreadID(t);this.__threadIDMap.getServerIDFromClientID(t,(function(u){var v={body:r,message_id:s,other_user_fbid:u};this.__sendRequest('/pages/messaging/create_note/',v);}).bind(this));};q.prototype.fetchThreadlistInfo=function(r,s,t,u,v){'use strict';if(l.isPageSpecficFilter(u)){v=v||p;var w={folder:t,tag_name:u,offset:r,limit:s};this.__sendRequest('/pages/messaging/thread_tag/list/',w);return;}o.fetchThreadlistInfo.call(this,r,s,t,u,v);};q.prototype.removeThreadFlag=function(r,s){'use strict';i.isThreadID(r);this.__threadIDMap.getServerIDFromClientID(r,(function(t){var u={thread_ids:[t],tag_name:k.FLAG};this.__sendRequest('/pag 
__d('MercuryAssert',['MercuryIDs'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();f.exports={isParticipantID:function(i){if(!h.isValid(i))throw 'bad_participant_id '+i;},allParticipantIDs:function(i){i.forEach(this.isParticipantID);},isUserParticipantID:function(i){var j=h.tokenize(i);if(j.type!='fbid')throw 'bad_user_id '+i;},isEmailParticipantID:function(i){var j=h.tokenize(i);if(j.type!='email')throw 'bad_email_id '+i;},allThreadID:function(i){i.forEach(this.isThreadID);},isThreadID:function(i){if(!h.isValid(i))throw 'bad_thread_id '+i;}};},null);
__d('MercuryServerPayloadPreprocessor',['CurrentEnvironment','MercuryIDs','MercuryConfig','MercuryActionStatus','MercuryActionType','MercuryAttachment','MercuryDispatcher','MercurySendErrorLogger','MercurySingletonMixin','MercuryThreadIDMap','StoryAttachmentStyle','invariant','URI'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t){'use strict';if(c.__markCompiled)c.__markCompiled();function u(v){this.$MercuryServerPayloadPreprocessor1=v;this.$MercuryServerPayloadPreprocessor2=q.getForFBID(this.$MercuryServerPayloadPreprocessor1);this.$MercuryServerPayloadPreprocessor3=n.getForFBID(this.$MercuryServerPayloadPreprocessor1);}u.prototype.handleUpdate=function(v){var w={};!!v.from_client?s(0):undefined;(v.threads||[]).forEach((function(oa){this.$MercuryServerPayloadPreprocessor4(oa,w);var pa=this.$MercuryServerPayloadPreprocessor2.getServerIDFromClientIDNow(oa.thread_id);e(['MercuryServerRequests'],(function(qa){var ra=qa.getForFBID(this.$MercuryServerPayloadPreprocessor1);ra.markThreadFetched(oa.thread_id);ra.markThreadFetched(pa);ra.updateLastActionTimestamp(oa.timestamp);}).bind(this));}).bind(this));(v.ordered_threadlists||[]).forEach((function(oa){var pa=oa.thread_fbids||[];pa=pa.concat(oa.other_user_fbids||[]);oa.thread_ids=pa.map((function(qa){return this.$MercuryServerPayloadPreprocessor2.getClientIDFromServerIDNow(qa.toString());}).bind(this));}).bind(this));if(v.pinned_threads&&v.pinned_threads.thread_fbids)v.pinned_threads.thread_fbids=v.pinned_threads.thread_fbids.map((function(oa){return this.$MercuryServerPayloadPreprocessor2.getClientIDFromServerIDNow(oa);}).bind(this));if(v.delivery_receipts){var x={};for(var y=v.delivery_receipts,z=Array.isArray(y),aa=0,y=z?y:y[typeof Symbol==='function'?Symbol.iterator:'@@iterator']();;){var ba;if(z){if(aa>=y.length)break;ba=y[aa++];}else{aa=y.next();if(aa.done)break;ba=aa.value;}var ca=ba,da=ca.other_user_fbid?i.getThreadIDFromUserID(ca.other_user_fbid):this.$MercuryServerPayloadPreprocessor2.getClientIDFromServerIDNow(ca.thread_fbid);x[da]=ca.time;}v.delivery_receipts=x;}v.actions=v.actions||[];v.actions.forEach((function(oa){if(oa.action_type===l.SEND_MESSAGE&&oa.status===k.ERROR)o.log(oa);var pa=null,qa=null;if(oa.other_user_fbid){qa=i.getThreadIDFromUserID(oa.other_user_fbid);pa=oa.other_user_fbid;}else if(oa.thread_fbid){qa=i.getThreadIDFromThreadFBID(oa.thread_fbid);pa=oa.thread_fbid;}else if(oa.thread_id){qa=i.getThreadIDFromThreadFBID(oa.thread_id);pa=oa.thread_id;}else if(oa.status&&oa.status!=k.SUCCESS&&oa.client_thread_id){qa=oa.client_thread_id;}else s(0);pa=pa&&pa.toString();oa.thread_id=this.$MercuryServerPayloadPreprocessor2.hasClientIDForServerID(pa)?this.$MercuryServerPayloadPreprocessor2.getClientIDFromServerIDNow(pa):qa;if(oa.action_type==l.SEND_MESSAGE&&oa.client_thread_id&&pa){oa.thread_id=oa.client_thread_id;this.$MercuryServerPayloadPreprocessor2.forceSetServerIDToClientID(pa,oa.client_thread_id);w[pa]=oa.client_thread_id;}!oa.thread_id?s(0):undefined;if(!v.payload_source||!v.payload_source.startsWith('server'))e(['MercuryServerRequests'],(function(ra){ra.getForFBID(this.$MercuryServerPayloadPreprocessor1).updateLastActionTimestamp(oa.timestamp);}).bind(this));}).bind(this));this.$MercuryServerPayloadPreprocessor5(v);this.$MercuryServerPayloadPreprocessor6(v);if(v.end_of_history){var ea=[];for(var fa=0;fa<v.end_of_history.length;fa++){var ga=v.end_of_history[fa];if(ga.type=='user'){ea.push('user:'+ga.fbid);}else if(
__d('MercuryTimestampTracker',['MercuryActionType','MercuryPayloadSource','MercurySingletonMixin','MercuryDispatcher'],function a(b,c,d,e,f,g,h,i,j,k){if(c.__markCompiled)c.__markCompiled();function l(m){this._fbid=m;this._dispatcher=k.getForFBID(this._fbid);this._lastTimestamp=0;this._dispatcher.subscribe('update-messages',(function(n,o){if(!o.actions||!o.actions.length)return;if(o.payload_source==i.CLIENT_SEND_MESSAGE||o.payload_source==i.UNKNOWN)return;for(var p=0;p<o.actions.length;p++){var q=o.actions[p],r=q.action_type;if(r==h.USER_GENERATED_MESSAGE&&q.thread_id&&q.timestamp>this._lastTimestamp)this._lastTimestamp=q.timestamp;}}).bind(this));}Object.assign(l.prototype,{getLastUserMessageTimestamp:function(){return this._lastTimestamp;}});Object.assign(l,j);f.exports=l;},null);
es":[],"thread_id":"mid.1384005816145:04aa2b90e69c6f3832","action_id":null,"action_type":"ma-type:user-generated-message"},{"message_id":"mid.1447640232698:adb6cd07ccc04bb336","threading_id":null,"offline_threading_id":"6071843218556236443","author":"fbid:1743460630","author_email":"1743460630\u0040facebook.com","ephemeral_ttl_mode":null,"timestamp":1447640232712,"timestamp_absolute":"Today","timestamp_relative":"2:17am","timestamp_datetime":"2:17am","timestamp_time_passed":0,"is_unread":false,"is_forward":false,"is_filtered_content":false,"is_filtered_content_bh":false,"is_filtered_content_account":false,"is_filtered_content_quasar":false,"is_filtered_content_invalid_app":false,"forward_count":0,"forward_message_ids":[],"source":"source:titan:m_tablet","source_tags":[],"is_spoof_warning":false,"folder":"inbox","thread_fbid":"1743460630","other_user_fbid":"1743460630","body":"Devo almo\u00e7ar em casa mas confirmo amanh\u00e3","subject":null,"has_attachment":false,"attachments":[],"raw_attachments":null,"ranges":[],"thread_id":"mid.1384005816145:04aa2b90e69c6f3832","action_id":null,"action_type":"ma-type:user-generated-message"},{"message_id":"mid.1447670965669:ed464e284618b47606","threading_id":null,"offline_threading_id":"6071972131157517954","author":"fbid:1743460630","author_email":"1743460630\u0040facebook.com","ephemeral_ttl_mode":null,"timestamp":1447670965729,"timestamp_absolute":"Today","timestamp_relative":"10:49am","timestamp_datetime":"10:49am","timestamp_time_passed":0,"is_unread":false,"is_forward":false,"is_filtered_content":false,"is_filtered_content_bh":false,"is_filtered_content_account":false,"is_filtered_content_quasar":false,"is_filtered_content_invalid_app":false,"forward_count":0,"forward_message_ids":[],"source":"source:chat:web","source_tags":["source:chat"],"is_spoof_warning":false,"folder":"inbox","thread_fbid":"1743460630","other_user_fbid":"1743460630","body":"vou comer aqui em casa","subject":null,"has_attachment":false,"attachments":[],"raw_attachments":null,"ranges":[],"thread_id":"mid.1384005816145:04aa2b90e69c6f3832","action_id":null,"action_type":"ma-type:user-generated-message"},{"message_id":"mid.1447671401052:fe47e42656bcae5399","threading_id":null,"offline_threading_id":"6071973951466432572","author":"fbid:100000075573403","author_email":"100000075573403\u0040facebook.com","ephemeral_ttl_mode":null,"timestamp":1447671401054,"timestamp_absolute":"Today","timestamp_relative":"10:56am","timestamp_datetime":"10:56am","timestamp_time_passed":0,"is_unread":false,"is_forward":false,"is_filtered_content":false,"is_filtered_content_bh":false,"is_filtered_content_account":false,"is_filtered_content_quasar":false,"is_filtered_content_invalid_app":false,"forward_count":0,"forward_message_ids":[],"source":"source:chat:orca","source_tags":["source:messenger","source:chat","source:mobile"],"is_spoof_warning":false,"folder":"inbox","thread_fbid":"1743460630","other_user_fbid":"1743460630","body":"Roger","subject":null,"has_attachment":false,"attachments":[],"raw_attachments":null,"ranges":[],"thread_id":"mid.1384005816145:04aa2b90e69c6f3832","action_id":null,"action_type":"ma-type:user-generated-message"},{"message_id":"mid.1447682200114:582e06d0fdd9b6ff25","threading_id":null,"offline_threading_id":"6072019245141471136","author":"fbid:100000075573403","author_email":"100000075573403\u0040facebook.com","ephemeral_ttl_mode":null,"timestamp":1447682200117,"timestamp_absolute":"Today","timestamp_relative":"1:56pm","timestamp_datetime":"1:56pm","timestamp_time_passed":0,"is_unread":false,"is_forward":false,"is_filtered_content":false,"is_filtered_content_bh":false,"is_filtered_content_account":false,"is_filtered_content_quasar":false,"is_filtered_content_invalid_app":false,"forward_count":0,"forward_message_ids":[],"source":"source:chat:web","source_tags":["source:chat"],"is_spoof_warning":false,"folder":"inbox","thread_fbid":"1743460630","other_user_fbid":"1743460630","body":"tou na sala do neiist","subject":null,"has_attachment":false,"attachments":[],"raw_attachments":null,"ranges":[],"thread_id":"m
fbid:1743460630
fbid:1822184745
fbid:1000009657850841
fbid:1000004222366901
fbid:1000011631871501
fbid:1000009086904431
fbid:1000009376990981
fbid:1000037
ka){var la=ja._threads.getThreadMetaNow(ka),ma=[k.ALL];if(!la){var na={error:'no_thread_metadata',tid:ka};w.warn('no_thread_metadata',na);return [];}if(la.unread_count)ma.push(p.UNREAD);if(!la.is_canonical)ma.push(p.GROUPS);var oa=la.page_thread_info;if(oa&&oa.flagged)ma.push(q.FLAG);return ma;}function ga(ja,ka,la,ma){var na=ja._threads.getThreadMetaNow(ka);return !!(na&&na.timestamp&&ea(ja,ka)==la&&v(fa(ja,ka),ma));}function ha(ja){this._fbid=ja;this._serverRequests=s.getForFBID(this._fbid);this._threadIDMap=o.getForFBID(this._fbid);this._threadInformer=t.getForFBID(this._fbid);this._threads=u.getForFBID(this._fbid);this._dispatcher=j.getForFBID(this._fbid);this._threadlistOrderMap={};y.forEach((function(ka){this._threadlistOrderMap[ka]={};x.forEach((function(la){this._threadlistOrderMap[ka][la]=new r((function(ma){return this._threads.getThreadMetaNow(ma).timestamp;}).bind(this),function(ma,na){return na-ma;},this._threadIDMap.canLinkExternally.bind(this._threadIDMap));}).bind(this));}).bind(this));this._dispatcher.subscribe('update-threadlist',(function(ka,la){if(!ia(la))return;var ma=la.ordered_threadlists;if(ma&&ma.length){aa(this,ma);}else{var na=(la.actions||[]).filter(function(oa){return oa.thread_id;});ca(this,la.threads||[]);ba(this,na);}this._threadInformer.updatedThreadlist();}).bind(this));}Object.assign(ha.prototype,{getThreadlistOrderMap:function(ja,ka){if(!this._threadlistOrderMap[ja][ka]){x=x.concat([ka]);y.forEach((function(la){this._threadlistOrderMap[la][ka]=new r((function(ma){return this._threads.getThreadMetaNow(ma).timestamp;}).bind(this),function(ma,na){return na-ma;},this._threadIDMap.canLinkExternally.bind(this._threadIDMap));}).bind(this));}return this._threadlistOrderMap[ja][ka];},getThreadlist:function(ja,ka,la,ma,na,oa){return this.getFilteredThreadlist(ja,ka,la,k.ALL,ma,na,oa);},getFilteredThreadlist:function(ja,ka,la,ma,na,oa,pa){var qa=this.getThreadlistOrderMap(la,ma),ra=qa.executeOrEnqueue(ja,ka,na,oa),sa=qa.getUnavailableResources(ra),ta=qa.getError(ja,ka,oa);if(sa.length||ta){if(qa.getCurrentArraySize()<ja){var ua={start:ja,limit:ka,filter:ma,resources_size:qa.getCurrentArraySize()};w.warn('range_with_gap',ua);}qa.setError(false);this._serverRequests.fetchThreadlistInfo(qa.getCurrentArraySize(),sa.length,la,ma==k.ALL?null:ma,pa);}return ra;},getThreadlistUntilTimestamp:function(ja,ka,la){la=la||k.ALL;return this.getThreadlistOrderMap(ka,la).getElementsUntil(ja);},getAvailableThreadlistNow:function(ja,ka){ka=ka||k.ALL;return this.getThreadlistOrderMap(ja,ka).getAllResources();},getThreadCount:function(ja,ka){ka=ka||k.ALL;return this.getThreadlistOrderMap(ja,ka).getCurrentArraySize();},hasLoadedThreadlist:function(ja,ka){ka=ka||k.ALL;return this.getThreadlistOrderMap(ja,ka).hasReachedEndOfArray();},unsubscribe:function(ja,ka,la){la=la||k.ALL;this.getThreadlistOrderMap(ka,la).unsubscribe(ja);}});Object.assign(ha,n);function ia(ja){switch(ja.payload_source){case m.CLIENT_CHANGE_ARCHIVED_STATUS:case m.CLIENT_CHANGE_READ_STATUS:case m.CLIENT_CHANGE_FOLDER:case m.CLIENT_CHANNEL_MESSAGE:case m.CLIENT_DELETE_MESSAGES:case m.CLIENT_DELETE_THREAD:case m.CLIENT_SEND_MESSAGE:case m.SERVER_SEND_MESSAGE:case m.SERVER_FETCH_THREADLIST_INFO:case m.SERVER_THREAD_SYNC:return true;case m.SERVER_INITIAL_DATA:return !!ja.ordered_threadlists;default:return false;}}f.exports=ha;},null);
__d('MercurySyncDeliveryReceiptTransformer',[],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();function h(i){return {delivery_receipts:[{other_user_fbid:i.threadKey.otherUserFbId?i.threadKey.otherUserFbId:'',thread_fbid:i.threadKey.threadFbId?i.threadKey.threadFbId:'',time:parseInt(i.deliveredWatermarkTimestampMs,10)}]};}f.exports={transform:h};},null);
14","author":"fbid:100000075573403","author_email":"100000075573403\u0040facebook.com","ephemeral_ttl_mode":null,"timestamp":1447190559233,"timestamp_absolute":"Tuesday","timestamp_relative":"Tue","timestamp_datetime":"Tuesday 9:22pm","timestamp_time_passed":1,"is_unread":false,"is_forward":false,"is_filtered_content":false,"is_filtered_content_bh":false,"is_filtered_content_account":false,"is_filtered_content_quasar":false,"is_filtered_content_invalid_app":false,"forward_count":0,"forward_message_ids":[],"source":"source:chat:web","source_tags":["source:chat"],"is_spoof_warning":false,"folder":"inbox","thread_fbid":"1743460630","other_user_fbid":"1743460630","body":"ri bastante com o detalhe dos bot\u00f5es de punho no fim lol","subject":null,"has_attachment":false,"attachments":[],"raw_attachments":null,"ranges":[],"thread_id":"mid.1384005816145:04aa2b90e69c6f3832","action_id":null,"action_type":"ma-type:user-generated-message"},{"message_id":"mid.1447194244096:b7a63698e48ec27e49","threading_id":null,"offline_threading_id":"6069972605852066747","author":"fbid:1743460630","author_email":"1743460630\u0040facebook.com","ephemeral_ttl_mode":null,"timestamp":1447194244136,"timestamp_absolute":"Tuesday","timestamp_relative":"Tue","timestamp_datetime":"Tuesday 10:24pm","timestamp_time_passed":1,"is_unread":false,"is_forward":false,"is_filtered_content":false,"is_filtered_content_bh":false,"is_filtered_content_account":false,"is_filtered_content_quasar":false,"is_filtered_content_invalid_app":false,"forward_count":0,"forward_message_ids":[],"source":"source:chat:web","source_tags":["source:chat"],"is_spoof_warning":false,"folder":"inbox","thread_fbid":"1743460630","other_user_fbid":"1743460630","body":"ahah ya","subject":null,"has_attachment":false,"attachments":[],"raw_attachments":null,"ranges":[],"thread_id":"mid.1384005816145:04aa2b90e69c6f3832","action_id":null,"action_type":"ma-type:user-generated-message"},{"message_id":"mid.1447413971571:0201b0785003ff2245","threading_id":null,"offline_threading_id":"6070894218815379956","author":"fbid:100000075573403","author_email":"100000075573403\u0040facebook.com","ephemeral_ttl_mode":null,"timestamp":1447413971603,"timestamp_absolute":"Friday","timestamp_relative":"Fri","timestamp_datetime":"Friday 11:26am","timestamp_time_passed":1,"is_unread":false,"is_forward":false,"is_filtered_content":false,"is_filtered_content_bh":false,"is_filtered_content_account":false,"is_filtered_content_quasar":false,"is_filtered_content_invalid_app":false,"forward_count":0,"forward_message_ids":[],"source":"source:chat:web","source_tags":["source:chat"],"is_spoof_warning":false,"folder":"inbox","thread_fbid":"1743460630","other_user_fbid":"1743460630","body":"yeca","subject":null,"has_attachment":false,"attachments":[],"raw_attachments":null,"ranges":[],"thread_id":"mid.1384005816145:04aa2b90e69c6f3832","action_id":null,"action_type":"ma-type:user-generated-message"},{"message_id":"mid.1447413977954:28b4ec4237581f2e37","threading_id":null,"offline_threading_id":"6070894245691987265","author":"fbid:100000075573403","author_email":"100000075573403\u0040facebook.com","ephemeral_ttl_mode":null,"timestamp":1447413977956,"timestamp_absolute":"Friday","timestamp_relative":"Fri","timestamp_datetime":"Friday 11:26am","timestamp_time_passed":1,"is_unread":false,"is_forward":false,"is_filtered_content":false,"is_filtered_content_bh":false,"is_filtered_content_account":false,"is_filtered_content_quasar":false,"is_filtered_content_invalid_app":false,"forward_count":0,"forward_message_ids":[],"source":"source:chat:web","source_tags":["source:chat"],"is_spoof_warning":false,"folder":"inbox","thread_fbid":"1743460630","other_user_fbid":"1743460630","body":"almo\u00e7amos por volta da uma?","subject":null,"has_attachment":false,"attachments":[],"raw_attachments":null,"ranges":[],"thread_id":"mid.1384005816145:04aa2b90e69c6f3832","action_id":null,"action_type":"ma-type:user-generated-message"},{"message_id":"mid.1447415336651:9ef99191e798b37789","threading_id":null,"offline_threading_id":"6070899945614488394","author
e:user-generated-message"},{"message_id":"mid.1447640232698:adb6cd07ccc04bb336","threading_id":null,"offline_threading_id":"6071843218556236443","author":"fbid:1743460630","author_email":"1743460630\u0040facebook.com","ephemeral_ttl_mode":null,"timestamp":1447640232712,"timestamp_absolute":"Today","timestamp_relative":"2:17am","timestamp_datetime":"2:17am","timestamp_time_passed":0,"is_unread":false,"is_forward":false,"is_filtered_content":false,"is_filtered_content_bh":false,"is_filtered_content_account":false,"is_filtered_content_quasar":false,"is_filtered_content_invalid_app":false,"forward_count":0,"forward_message_ids":[],"source":"source:titan:m_tablet","source_tags":[],"is_spoof_warning":false,"folder":"inbox","thread_fbid":"1743460630","other_user_fbid":"1743460630","body":"Devo almo\u00e7ar em casa mas confirmo amanh\u00e3","subject":null,"has_attachment":false,"attachments":[],"raw_attachments":null,"ranges":[],"thread_id":"mid.1384005816145:04aa2b90e69c6f3832","action_id":null,"action_type":"ma-type:user-generated-message"},{"message_id":"mid.1447670965669:ed464e284618b47606","threading_id":null,"offline_threading_id":"6071972131157517954","author":"fbid:1743460630","author_email":"1743460630\u0040facebook.com","ephemeral_ttl_mode":null,"timestamp":1447670965729,"timestamp_absolute":"Today","timestamp_relative":"10:49am","timestamp_datetime":"10:49am","timestamp_time_passed":0,"is_unread":false,"is_forward":false,"is_filtered_content":false,"is_filtered_content_bh":false,"is_filtered_content_account":false,"is_filtered_content_quasar":false,"is_filtered_content_invalid_app":false,"forward_count":0,"forward_message_ids":[],"source":"source:chat:web","source_tags":["source:chat"],"is_spoof_warning":false,"folder":"inbox","thread_fbid":"1743460630","other_user_fbid":"1743460630","body":"vou comer aqui em casa","subject":null,"has_attachment":false,"attachments":[],"raw_attachments":null,"ranges":[],"thread_id":"mid.1384005816145:04aa2b90e69c6f3832","action_id":null,"action_type":"ma-type:user-generated-message"},{"message_id":"mid.1447671401052:fe47e42656bcae5399","threading_id":null,"offline_threading_id":"6071973951466432572","author":"fbid:100000075573403","author_email":"100000075573403\u0040facebook.com","ephemeral_ttl_mode":null,"timestamp":1447671401054,"timestamp_absolute":"Today","timestamp_relative":"10:56am","timestamp_datetime":"10:56am","timestamp_time_passed":0,"is_unread":false,"is_forward":false,"is_filtered_content":false,"is_filtered_content_bh":false,"is_filtered_content_account":false,"is_filtered_content_quasar":false,"is_filtered_content_invalid_app":false,"forward_count":0,"forward_message_ids":[],"source":"source:chat:orca","source_tags":["source:messenger","source:chat","source:mobile"],"is_spoof_warning":false,"folder":"inbox","thread_fbid":"1743460630","other_user_fbid":"1743460630","body":"Roger","subject":null,"has_attachment":false,"attachments":[],"raw_attachments":null,"ranges":[],"thread_id":"mid.1384005816145:04aa2b90e69c6f3832","action_id":null,"action_type":"ma-type:user-generated-message"},{"message_id":"mid.1447682200114:582e06d0fdd9b6ff25","threading_id":null,"offline_threading_id":"6072019245141471136","author":"fbid:100000075573403","author_email":"100000075573403\u0040facebook.com","ephemeral_ttl_mode":null,"timestamp":1447682200117,"timestamp_absolute":"Today","timestamp_relative":"1:56pm","timestamp_datetime":"1:56pm","timestamp_time_passed":0,"is_unread":false,"is_forward":false,"is_filtered_content":false,"is_filtered_content_bh":false,"is_filtered_content_account":false,"is_filtered_content_quasar":false,"is_filtered_content_invalid_app":false,"forward_count":0,"forward_message_ids":[],"source":"source:chat:web","source_tags":["source:chat"],"is_spoof_warning":false,"folder":"inbox","thread_fbid":"1743460630","other_user_fbid":"1743460630","body":"tou na sala do neiist","subject":null,"has_attachment":false,"attachments":[],"raw_attachments":null,"ranges":[],"thread_id":"mid.1384005816145:04aa2b90e69c6f3832","action_id":null,"action_type":"ma-type:user-generated-mess
%_serverRequests.changeThreadFolder(ia,ha);}).bind(this));this.__dispatcher.handleUpdate(this.$MercuryThreadActions4(ga,ha));};fa.prototype['delete']=function(ga,ha){this.batchDelete([ga],ha);};fa.prototype.batchDelete=function(ga,ha){ga.forEach((function(ia){this.__serverRequests.deleteThread(ia,ha);}).bind(this));this.__dispatcher.handleUpdate(this.__constructClientPayload(ga,k.DELETE_THREAD,q.CLIENT_DELETE_THREAD));};fa.prototype.openNotificationSettings=function(ga){aa.isThreadID(ga);this.__serverRequests.__threadIDMap.getServerIDFromClientID(ga,function(ha){var ia=ba.getURIBuilder().setString('thread_key_id',ha).setBool('modify',false).getURI();new i().setURI(ia).send();});};fa.prototype.unmute=function(ga){this.updateMuteSetting(ga,0);};fa.prototype.updateMuteSetting=function(ga,ha){this.__serverRequests.changeMutingOnThread(ga,ha);this.__dispatcher.handleUpdate(this.__constructClientPayload([ga],k.CHANGE_MUTE_SETTINGS,q.CLIENT_CHANGE_MUTE_SETTINGS,{mute_settings:ha}));};fa.prototype.blockMessages=function(ga){var ha=y.getURIBuilder().setInt('thread_fbid',n.getUserIDFromThreadID(ga)).setEnum('location','www_chat_head').getURI();h.send(new i(ha));};fa.prototype.unblockMessages=function(ga){var ha=JSON.stringify({reportable_ent_token:n.getUserIDFromThreadID(ga),initial_action_name:p.block_messages});new i(new z('/ajax/nfx/messenger_undo_block').addQueryData({story_location:'messenger',context:ha})).send();};fa.prototype.turnOffSecretMode=function(ga){if(ea.isEmptyLocalThread(ga))return;ca.send(da.constructLogMessageObject(u.TITAN_WEB,ga,o.GENERIC_ADMIN_TEXT,{untypedData:{ttl:j.TTL_OFF}}),null,l.WEBMESSENGER);};fa.prototype.turnOnSecretMode=function(ga){if(ea.isEmptyLocalThread(ga))return;ca.send(da.constructLogMessageObject(u.TITAN_WEB,ga,o.GENERIC_ADMIN_TEXT,{untypedData:{ttl:j.TTL_1HOUR}}),null,l.WEBMESSENGER);};fa.prototype.leaveGroup=function(ga){if(!ea.isEmptyLocalThread(ga))ca.send(da.constructLogMessageObject(u.TITAN_WEB,ga,o.UNSUBSCRIBE,{removed_participants:[v.getID()]}),null,l.WEBMESSENGER);};fa.prototype.addParticipants=function(ga,ha){this.__dispatcher.handleUpdate(this.__constructClientPayload([ga],k.ADD_PARTICIPANTS,q.CLIENT_ADD_PARTICIPANTS,{participants:ha}));};fa.prototype.unpinThread=function(ga){this.__serverRequests.unpinThread(ga);this.__dispatcher.handleUpdate(this.__constructClientPayload([ga],k.UNPIN_THREAD,q.CLIENT_UNPIN_THREAD));};fa.prototype.movePendingToInbox=function(ga){this.__dispatcher.handleUpdate(this.__constructClientPayload([ga],k.MOVE_PENDING_TO_INBOX,q.CLIENT_MOVE_PENDING_TO_INBOX));};fa.prototype.updateSnippet=function(ga,ha){this.__dispatcher.handleUpdate(this.__constructClientPayload([ga],k.UPDATE_SNIPPET,q.CLIENT_UPDATE_SNIPPET,{deleted_ids:ha}));};fa.prototype.invalidateState=function(ga,ha){var ia=x.getURIBuilder().setInt('other_user_or_thread_fbid',ga||ha).getURI();new i().setURI(ia).setHandler((function(ja){this.__payloadPreprocessor.handleUpdate(ja.getPayload());}).bind(this)).send();};fa.prototype.$MercuryThreadActions2=function(ga,ha,ia){return this.__constructClientPayload(ga,k.CHANGE_READ_STATUS,q.CLIENT_CHANGE_READ_STATUS,{mark_as_read:ha,source:ia});};fa.prototype.$MercuryThreadActions3=function(ga,ha){return this.__constructClientPayload(ga,k.CHANGE_ARCHIVED_STATUS,q.CLIENT_CHANGE_ARCHIVED_STATUS,{archived:ha});};fa.prototype.$MercuryThreadActions4=function(ga,ha){return this.__constructClientPayload(ga,k.CHANGE_FOLDER,q.CLIENT_CHANGE_FOLDER,{new_folder:ha});};fa.prototype.__constructClientPayload=function(ga,ha,ia,ja){return {actions:ga.map(function(ka){return babelHelpers._extends({action_type:ha,action_id:null,thread_id:ka},ja);}),from_client:true,payload_source:ia};};Object.assign(fa,t);f.exports=fa;},null);
curyChannelHandler1);this.$MercuryChannelHandler2=t.getForFBID(this.$MercuryChannelHandler1);this.$MercuryChannelHandler3=p.getForFBID(this.$MercuryChannelHandler1);this.__delayedDispatcher=m.getForFBID(this.$MercuryChannelHandler1);this.$MercuryChannelHandler4=[];}ba.prototype.getInstanceFBID=function(){'use strict';return this.$MercuryChannelHandler1;};ba.prototype.$MercuryChannelHandler5=function(ca,da){'use strict';if(!this.$MercuryChannelHandler6(ca)||!da.obj||!da.obj.message)return;var ea=da.obj.message,fa=ea.other_user_fbid?ea.other_user_fbid:ea.thread_fbid;fa=fa.toString();var ga=k.transform(ea,da.obj.folder);if(this.__shouldDropMessageBecauseOfSync(ea))return;var ha=[babelHelpers._extends({},ga)];ha=ha.concat(ea.forward_actions||[]);var ia=q.CLIENT_CHANNEL_MESSAGE;this.__delayedDispatcher.handleUpdateWaitForThread({actions:ha,payload_source:ia},fa);};ba.prototype.$MercuryChannelHandler7=function(ca,da){'use strict';if(l.WWWSyncDeliveryReceipt)return;var ea=da.obj.other_user_fbid,fa=da.obj.thread_fbid;if(!this.$MercuryChannelHandler6(ca)||!ea&&!fa)return;this.__payloadPreprocessor.handleUpdate({delivery_receipts:[{other_user_fbid:ea?ea.toString():'',thread_fbid:fa?fa.toString():'',time:da.obj.timestamp}]});};ba.prototype.$MercuryChannelHandler8=function(ca,da){'use strict';if(!this.$MercuryChannelHandler6(ca)||!da.obj||!da.obj.thread_fbids&&!da.obj.other_user_fbids)return;var ea=[],fa=da.obj.event==v.READ;if(fa&&l.WWWSyncMarkRead)return;(da.obj.thread_fbids||[]).forEach(function(ga){ea.push({action_type:j.CHANGE_READ_STATUS,action_id:null,thread_fbid:ga,mark_as_read:fa,timestamp:da.obj.timestamp||0,folder:da.obj.folder_info[ga]});});(da.obj.other_user_fbids||[]).forEach(function(ga){ea.push({action_type:j.CHANGE_READ_STATUS,action_id:null,other_user_fbid:ga,mark_as_read:fa,timestamp:da.obj.timestamp||0,folder:da.obj.folder_info[ga]});});this.__payloadPreprocessor.handleUpdate({actions:ea,payload_source:q.CLIENT_CHANNEL_MESSAGE});};ba.prototype.$MercuryChannelHandler9=function(ca,da){'use strict';if(!this.$MercuryChannelHandler6(ca)||!da.obj||!(da.obj.thread_fbids||da.obj.other_user_fbids))return;var ea=[];(da.obj.thread_fbids||[]).forEach(function(fa){ea.push({action_type:j.DELETE_THREAD,action_id:null,thread_fbid:fa});});(da.obj.other_user_fbids||[]).forEach(function(fa){ea.push({action_type:j.DELETE_THREAD,action_id:null,other_user_fbid:fa});});this.__payloadPreprocessor.handleUpdate({actions:ea,payload_source:q.CLIENT_CHANNEL_MESSAGE});};ba.prototype.$MercuryChannelHandler10=function(ca,da){'use strict';if(!this.$MercuryChannelHandler6(ca)||!da.obj||!da.obj.thread_fbids&&!da.obj.other_user_fbids||!da.obj.mids)return;var ea=da.obj.thread_fbids.length?da.obj.thread_fbids[0]:null,fa=da.obj.other_user_fbids.length?da.obj.other_user_fbids[0]:null,ga={action_type:j.DELETE_MESSAGES,action_id:null,thread_fbid:ea,other_user_fbid:fa,message_ids:da.obj.mids};if(l.MessengerGlobalDeleteGK){if(da.obj.updated_thread)return;this.__payloadPreprocessor.handleUpdate({actions:[ga],payload_source:q.CLIENT_CHANNEL_MESSAGE});return;}this.__payloadPreprocessor.handleUpdate({actions:[ga],payload_source:q.CLIENT_CHANNEL_MESSAGE});};ba.prototype.$MercuryChannelHandler11=function(ca,da){'use strict';if(!this.$MercuryChannelHandler6(ca)||!da.obj||!da.obj.folder)return;var ea={action_type:n.MARK_ALL_READ,action_id:da.obj.action_id,folder:da.obj.folder};this.__payloadPreprocessor.handleUpdate({global_actions:[ea]});};ba.prototype.$MercuryChannelHandler12=function(ca,da){'use strict';if(!this.$MercuryChannelHandler6(ca)||!da.obj.thread_fbids&&!da.obj.other_user_fbids)return;var ea=q.CLIENT_CHANNEL_MESSAGE;(da.obj.thread_fbids||[]).forEach(function(fa){var ga={action_type:j.CHANGE_ARCHIVED_STATUS,action_id:null,thread_fbid:fa.toString(),other_user_fbid:null,archived:da.obj.state};this.__delayedDispatcher.handleUpdateWaitForThread({actions:[babelHelpers._extends({},ga)],payload_source:ea},fa.toString());},this);(da.obj.other_user_fbids||[]).forEach(function(fa){var ga={action_type:j.CHANGE_ARCHIVED_STATUS,action_id:null,thread_fbid:null,other_
fbid:1268561902
fbid:1000003859864751
fbid:1000021282651391
fbid:1000010767027941
fbid:1000003670633181
fbid:1000003616260191
thread_fbid
other_user_fbid
UserIDFromParticipantID(we);});re=qb.getGroup(ue);}if(!ba.isOnline())re=j.OFFLINE;this.updateCallLink();n.conditionClass(this._tabElem,"_5238",re===j.ACTIVE&&(te===undefined||te===null||!te.is_messenger_only));n.conditionClass(this._tabElem,"_5239",re===j.MOBILE||te!==undefined&&te!==null&&te.is_messenger_only);var ve=this._getNode('presenceIndicator');this._onlineStatus=re;this._pagesMessageIndicatorHandler&&this._pagesMessageIndicatorHandler.notifyPageOnlineStatusChanged(re);switch(re){case j.ACTIVE:ve.setAttribute('alt',xc._("Online"));break;case j.MOBILE:ve.setAttribute('alt',xc._("Mobile"));break;default:ve.removeAttribute('alt');break;}}).bind(this));},updateTab:function(){nd.getThreadMeta(this._threadID,(function(qe){var re=[this._getNode('name')];if(!p.get('chat_react_header')){re.push(this._getNode('titlebarText'));}else if(this._title)this._title.setProps({thread:qe},(function(){this._getNode('chatWrapper').setAttribute('aria-label',this._title.component.getTitle());}).bind(this));for(var se=re,te=Array.isArray(se),ue=0,se=te?se:se[typeof Symbol==='function'?Symbol.iterator:'@@iterator']();;){var ve;if(te){if(ue>=se.length)break;ve=se[ue++];}else{ue=se.next();if(ue.done)break;ve=ue.value;}var we=ve;tb.render(sb.createElement(eb,{isNewThread:nd.isNewEmptyLocalThread(this._threadID),thread:qe,useAndSeparator:true,useShortName:!qe.is_canonical,viewer:ea.getID()}),we);}this._updateControls(qe);this._updateMessageBlockSettings(qe);this._updateSecretModeSettings(qe);this._updateMutingSettings(qe);this._updateUnreadCount(qe);this.updateMultichatTooltip();this._updateArchiveWarning(qe);this._updateEmployeeAwayWarning(qe);this._updateOfficeStatus(qe);this._updateNewThread(qe);this._updateNameConversationSheet(qe);this._updateReadOnlySheet(qe);this._updateSwitchToWork(qe);}).bind(this));},_updateNameConversationSheet:function(qe){if(cb.canReply(qe)&&!qe.name&&!qe.is_canonical&&!qe.name_conversation_sheet_dismissed&&!qe.has_email_participant&&!qe.read_only&&!nd.isEmptyLocalThread(qe.thread_id)){this.showNameConversation(true);}else this.hideAutomaticNameConversation();},_updateReadOnlySheet:function(qe){var re=cb.showComposer(qe),se=cb.canReply(qe),te=nd.isEmptyLocalThread(qe.thread_id);if(!se&&!re&&!te)this._sheetController.openReadOnlySheet();},updateSignatureID:function(qe){this._signatureID=qe;},_updateMessageBlockSettings:function(qe){this._updateMenuPropsSafe({hasMessageBlocked:ed.isMessageBlocked(qe)});},_updateSecretModeSettings:function(qe){var re=!!(qe&&qe.ephemeral_ttl_mode);this._updateMenuPropsSafe({hasSecretModeOn:re});n.conditionClass(this._tabElem,"ephemeral",re);if(!this._isTwoLine)return;var se=re?xc._("Type a disappearing message..."):xc._("Type a message...");if(p.get('chat_react_input')){this._chatInput.setProps({placeholder:se});}else this.getInputElem().placeholder=se;},_updateMutingSettings:function(qe){var re=cb.isMuted(qe);this._updateMenuPropsSafe({isMuted:re});},_updateMenuPropsSafe:function(qe){if(this._menuPromise)this._menuPromise.done(function(re){re&&re.component&&re.component.isMounted()&&re.setProps(qe);});},_updateArchiveWarning:function(qe){if(ea.isEmployee())za.getMulti(qe.participants,this._showArchiveWarningIfAllParticipantsAreEmployees.bind(this));},_updateEmployeeAwayWarning:function(qe){if(!ea.isEmployee())return;vb.onAfterLoad((function(){m.loadModules(["ChatEmployeeAwayWarning"],(function(re){re.updateEmployeeAwayWarning(qe,(function(){this._sheetController.openEmployeeAwaySheet();}).bind(this),wc);}).bind(this));}).bind(this));},_updateOfficeStatus:function(qe){var re=this._getNode('officeStatus');if(!re||xa.isGroupChat(qe.thread_id))return;vb.onAfterLoad(function(){m.loadModules(["ChatTabOfficeStatus"],function(se){var te=xa.getParticipantIDFromUserID(qe.other_user_fbid);za.get(te,function(ue){se.update(re,ue);});});});},_updateSwitchToWork:function(qe){if(ea.isEmployee()&&ea.hasWorkUser()&&xa.isGroupChat(qe.thread_id)){za.getMulti(qe.participants,(function(re){var se=this._isEmployeesOnly(re);this._updateMenuPropsSafe({hasSwitchToWork:se});}).bind(this));}else this._updateMe
__d('ChatTypeaheadBehavior',['BanzaiLogger','ChatOpenTab','ChatTypeaheadEvent','CSS','MercuryTypeaheadConstants','Parent','Rect','cx'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o){if(c.__markCompiled)c.__markCompiled();function p(r,s){var t=m.byClass(r,"_4oes");if(t)k.conditionClass(t,"_5q83",s);}function q(r){'use strict';this._typeahead=r;this._loggedQuery=false;}q.prototype.enable=function(){'use strict';var r=this._typeahead;this._subscriptions=[r.subscribe('focus',(function(){this._loggedQuery=false;r.getData().refreshData();p(r.getElement(),true);}).bind(this)),r.subscribe('blur',(function(s){if(this._loggedQuery)h.log('ChatTypeaheadLoggerConfig',{event:j.ABANDONED_QUERY,max_results:r.getData().getMaxResults(),num_friend_results:r.getView().results.filter(function(t){return t.render_type===l.FRIEND_TYPE;}).length,query:r.getCore().value});r.getCore().reset();p(r.getElement(),false);this._loggedQuery=false;}).bind(this)),r.subscribe('respond',(function(s,t){if(!this._loggedQuery&&r.getCore().getValue().length>0){h.log('ChatTypeaheadLoggerConfig',{event:j.NEW_QUERY});this._loggedQuery=true;}if(t.value&&t.value===r.getCore().getValue()){if(!t.results.length){var u=t.value.toLowerCase(),v=r.getData().getQueryCache();if(!t.isAsync&&!v.hasOwnProperty(u))return;r.getView().showNoResults();}k.addClass(r.getElement(),'hasValue');}}).bind(this)),r.subscribe('reset',function(){k.removeClass(r.getElement(),'hasValue');}),r.subscribe('select',(function(s,t){var u=t.selected.uid;if(t.selected.mercury_thread&&!t.selected.mercury_thread.is_canonical)u=t.selected.mercury_thread.thread_fbid;r.getView().hide();h.log('ChatTypeaheadLoggerConfig',{event:j.RESULT_SELECTED,max_results:r.getData().getMaxResults(),result_type:t.selected.render_type,query:r.getCore().value});this._loggedQuery=false;i.openTabByType(u,t.selected.type,'typeahead');}).bind(this)),r.subscribe('highlight',function(s,t){if(t.index>=0){var u=r.getView().getItems()[t.index];if(u){var v=new n(u),w=u.offsetParent,x=v.boundWithin(new n(w)).getPositionVector();v.getPositionVector().sub(x).scrollElementBy(w);}}})];};q.prototype.disable=function(){'use strict';this._subscriptions.forEach(function(r){this._typeahead.unsubscribe(r);},this);this._subscriptions=null;};Object.assign(q.prototype,{_subscriptions:null});f.exports=q;},null);
2for (;;); {"t":"msg","seq":6,"u":100000075573403,"ms":[{"st":1,"from":100000680200678,"to":100000075573403,"from_mobile":false,"realtime_viewer_fbid":100000075573403,"type":"typ"}]}rev=2045436
for (;;); {"t":"msg","seq":16,"u":100000075573403,"ms":[{"unread":1,"unseen":0,"other_unseen":0,"other_unread":0,"seen_timestamp":0,"realtime_viewer_fbid":100000075573403,"type":"inbox"}]}
__d('ChatMentionsNotifications',['fbt','CurrentUser','MercuryParticipants'],function a(b,c,d,e,f,g,h,i,j){if(c.__markCompiled)c.__markCompiled();var k={notifyIfMessageToMe:function(l){var m='fbid:'+i.getID(),n=l.body;j.get(m,function(o){var p=new RegExp(o.short_name,"i");if(p.test(n))k._notify(l);});},_notify:function(l){var m=48,n=l.body;if(n.length>m)n=n.substr(0,m-3)+"...";new Notification(h._("You were tagged in a message!"),{body:n,icon:"http://facebook.com//images/icons-large/fb-xl.png"});}};f.exports=k;},null);
fbid
,cb,db),fb=eb[0];if(fb){ma.snippet=fb.body;ma.snippet_has_attachment=fb.has_attachment;ma.snippet_attachments=fb.attachments;ma.snippet_sender=fb.author;ma.last_message_id=va.getServerMessageID(fb.message_id);}else{ma.snippet='...';ma.snippet_has_attachment=false;ma.snippet_attachments=null;ma.snippet_sender=null;va.getThreadMessagesRange(na.thread_id,cb,db,(function(gb){if(gb.length)this.$MercuryThreads5.handleUpdate({from_client:true,actions:[{thread_id:na.thread_id,action_type:m.UPDATE_SNIPPET,deleted_ids:na.deleted_ids}]});}).bind(this));}this.$MercuryThreads22(na.thread_id);}).bind(this),fa);break;case m.UPDATE_BLOCKER_STATUS:ma.can_reply=!!(!na.message_blocked&&(na.is_blocked_by_recipient===undefined||!na.is_blocked_by_recipient)&&ma.is_subscribed&&!ma.has_email_participant&&!ma.read_only&&(ma.recipients_loadable||ma.recipients_loadable===undefined));this.$MercuryThreads22(na.thread_id);break;case m.UPDATE_BLOCKEE_STATUS:ma.can_reply=!!(!na.got_blocked&&ma.is_subscribed&&!ma.has_email_participant&&!ma.read_only&&(ma.recipients_loadable||ma.recipients_loadable===undefined));this.$MercuryThreads22(na.thread_id);break;case m.CHANGE_MUTE_SETTINGS:if(na.mute_settings!==undefined){var ta=this.$MercuryThreads1+'@facebook.com';if(ma.mute_settings){if(na.mute_settings){var ua={};ua[ta]=na.mute_settings;ma.mute_settings=babelHelpers._extends({},ma.mute_settings,ua);}else{ma.mute_settings=babelHelpers._extends({},ma.mute_settings);delete ma.mute_settings[ta];}this.$MercuryThreads22(ma.thread_id);}}break;case m.ADD_PARTICIPANTS:this.$MercuryThreads23(ma,na.participants);this.$MercuryThreads22(ma.thread_id);break;case m.CHANGE_FLAG:this.$MercuryThreads26(ma,na.mark_as_flag);this.$MercuryThreads22(ma.thread_id);break;case m.MOVE_PENDING_TO_INBOX:this.$MercuryThreads27(ma);this.$MercuryThreads22(ma.thread_id);break;}};ka.prototype.$MercuryThreads16=function(ma){var na=u.tokenize(ma.thread_id),oa=na.type,pa=na.value,qa=this.$MercuryThreads14(ma.specific_to_list);return new i({thread_id:ma.thread_id,participants:ma.specific_to_list,name:null,snippet:ma.body,snippet_has_attachment:false,snippet_attachments:[],snippet_sender:ma.author,unread_count:0,message_count:0,image_src:null,timestamp_absolute:ma.timestamp_absolute,timestamp_relative:ma.timestamp_relative,timestamp:ma.timestamp,other_user_fbid:oa==='user'?pa:null,is_canonical_user:oa==='user',is_canonical:qa,is_subscribed:true,folder:ca.INBOX,is_archived:false});};ka.prototype.$MercuryThreads20=function(ma,na,oa){if(na.timestamp)this.$MercuryThreads28(ma.thread_id,oa,na.timestamp);if(!ma||!ma.thread_id)return false;if(!ma.timestamp){this.$MercuryThreads8.add(ma.thread_id);return false;}var pa=!ma.unread_count;if(oa==pa)return false;ma.unread_count=oa?0:1;this.$MercuryThreads22(ma.thread_id);return true;};ka.prototype.$MercuryThreads29=function(ma){var na=this.$MercuryThreads7.getAllResources();for(var oa in na)if(na.hasOwnProperty(oa)){var pa=na[oa];if(pa.folder==ma){this.$MercuryThreads7.setResource(oa,i.setProperty(pa,'unread_count',0));this.$MercuryThreads22(oa);}}};ka.prototype.$MercuryThreads23=function(ma,na){var oa=new ea(ma.participants);ma.participants=Array.from(ma.participants);na.forEach((function(pa){if(!oa.has(pa)){ma.participants.push(pa);if(pa===this.$MercuryThreads4){ma.is_subscribed=true;ma.can_reply=true;ma.composer_enabled=true;this.$MercuryThreads2.fetchMissedMessages(s.getSupportedFolders(),n.MERCURYSYNC,ma.last_message_timestamp);}}}).bind(this));};ka.prototype.$MercuryThreads25=function(ma,na){if(na.log_message_data&&na.log_message_data.untypedData){var oa=parseInt(na.log_message_data.untypedData.ttl,10);if(oa!==null&&ma.ephemeral_ttl_mode!==oa){ma.ephemeral_ttl_mode=oa;return true;}}return false;};ka.prototype.$MercuryThreads24=function(ma,na){var oa=new ea(na);ma.participants=ma.participants.filter(function(pa){return !oa.has(pa);});if(oa.has(this.$MercuryThreads4))ma.is_subscribed=false;this.$MercuryThreads2.fetchThreadData([ma.thread_id]);};ka.prototype.$MercuryThreads21=function(ma,na){var oa=ma.participants.indexOf(na);if(oa>0)ma.participants=[na].cm
__d('MercuryMessages',['BanzaiODS','EventEmitter','ImmutableObject','LogHistory','Map','MercuryActionStatus','MercuryActionType','MercuryAssert','MercuryDispatcher','MercuryLogMessageType','MercuryMessageClientState','MercuryPayloadSource','MercurySingletonMixin','MercuryMessageActions','MercuryMessageIDs','RangedCallbackManager','MercurySendMessageFields','MercuryServerRequests','MercuryThreadActions','MercuryThreadInformer','MercuryThreads','URI','invariant','isMessengerDotComURI','mergeDeep','setImmediate'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba,ca,da,ea,fa,ga){'use strict';if(c.__markCompiled)c.__markCompiled();var ha=new i(),ia=k.getInstance('mercury_messages');function ja(sa,ta){var ua=ta;if(sa._localIdsMap[ta])ua=sa._localIdsMap[ta];return sa._messages.get(ua);}function ka(sa){switch(sa){case s.UNKNOWN:case s.SERVER_INITIAL_DATA:case s.SERVER_FETCH_THREAD_INFO:case s.SERVER_THREAD_SYNC:return true;}return false;}function la(sa,ta){if(!sa._threadsToMessages[ta])sa._threadsToMessages[ta]=new w(function(ua){return ja(sa,ua).timestamp;},function(ua,va){return va-ua;});return sa._threadsToMessages[ta];}function ma(sa,ta,ua){ta.forEach(function(va){var wa=la(sa,va);wa.setReachedEndOfArray();sa._emitReorderedChange(va,ua);});}function na(sa){this._fbid=sa;this._messageActions=u.getForFBID(this._fbid);this._serverRequests=y.getForFBID(this._fbid);this._threadInformer=aa.getForFBID(this._fbid);this._threads=ba.getForFBID(this._fbid);this._threadActions=z.getForFBID(this._fbid);this._dispatcher=p.getForFBID(this._fbid);this._didChange=false;this._failedHistoryFetchThreads={};this._threadsToMessages={};this._localTitanMessagesCount={};this._messages=new l();this._localIdsMap={};this._dispatcher.subscribe('update-messages',(function(ta,ua){var va=(ua.actions||[]).filter(function(xa){var ya=xa.action_type,za=(xa.is_forward||xa.thread_id)&&(ya==n.LOG_MESSAGE||ya==n.USER_GENERATED_MESSAGE||ya==n.SEND_MESSAGE||ya==n.DELETE_THREAD||ya==n.DELETE_MESSAGES||ya==n.MARK_MESSAGES_SPAM),ab=xa.upload_id&&xa.upload_data&&(ya==n.CANCEL_ATTACHMENT_PLACEHOLDER||ya==n.CONFIRM_ATTACHMENT_PLACEHOLDER),bb=xa.note&&ya==n.CREATE_PAGE_ADMIN_NOTE,cb=xa.replaced_message_id&&ya==n.REPLACE_MESSAGE;return za||ab||bb||cb;}),wa=ka(ua.payload_source);this.handleUpdates(va,wa,ua.payload_source,ua.from_client);if(ua.end_of_history)ma(this,ua.end_of_history,ua.payload_source);if(this._didChange){this._didChange=false;ha.emit('change');}}).bind(this));this._dispatcher.subscribe('invalidate-thread-state',(function(ta,ua){this._invalidateThreadState(ua);}).bind(this));ia.debug('constructed',{fbid:this._fbid});}Object.assign(na.prototype,{getMessagesFromIDs:function(sa){return (sa||[]).map(ja.bind(null,this)).filter(function(ta){]?
=w&&w.prototype;function y(z,aa){'use strict';if(l.ScrollableSidebarTypeaheadGK){var ba=o.renderDOM();k.appendContent(z,ba.root);var ca=o.fromNative(ba.root);x.constructor.call(this,ba.content,aa);this.$ChatTypeaheadView1=ba;this.$ChatTypeaheadView2=ca;}else x.constructor.call(this,z,aa);this.showingLoadingIndicator=false;this.typeObjects={};this.typeObjectsOrder=[];this.typeObjects[i.NON_FRIEND_TYPE]={uid:i.NON_FRIEND_TYPE,type:i.HEADER_TYPE,text:v._("MORE PEOPLE")};this.typeObjects[i.PAGE_TYPE]={disabled:true,uid:i.PAGE_TYPE,type:i.HEADER_TYPE,text:v._("BUSINESSES")};this.typeObjects[i.THREAD_TYPE]={uid:i.THREAD_TYPE,type:i.HEADER_TYPE,text:v._("GROUP CONVERSATIONS")};this.typeObjects[i.FB4C_TYPE]={uid:i.FB4C_TYPE,type:i.HEADER_TYPE,text:v._("CO-WORKERS")};this.typeObjects[i.FRIEND_TYPE]={disabled:true,uid:i.FRIEND_TYPE,type:i.HEADER_TYPE,text:v._("FRIENDS")};this.$ChatTypeaheadView3();}y.prototype.reset=function(){'use strict';if(this.value==='')this.clearContent();this.index=-1;this.items=[];this.results=[];this.value='';this.inform('reset');return this;};y.prototype.clearContent=function(){'use strict';this.hideLoadingIndicator();k.empty(this.content);};y.prototype.buildBuckets=function(z,aa){'use strict';var ba=aa.filter(function(ca){var da=ca.render_type||ca.type;if(da==='thread'){var ea='fbid:'+j.getID();if(!t(ca.mercury_thread.participants,ea))return false;var fa=ca.participants_to_render.some(function(ha){return p.queryMatchesName(z,ha.name);}),ga=p.queryMatchesName(z,ca.mercury_thread.name);if(!fa&&!ga)return false;}return true;}).reverse();this.$ChatTypeaheadView3(z);return x.buildBuckets.call(this,z,ba);};y.prototype.getDefaultIndex=function(z){'use strict';if(z.length===0)return -1;var aa=z.length-1;while(!this.isHighlightable(z[aa])&&aa>=0)aa--;return aa;};y.prototype.showLoadingIndicator=function(){'use strict';if(!this.showingLoadingIndicator){n.render(m.createElement('div',{className:'spinnerContainer'},m.createElement(s,{className:"_3-8i",background:'light',size:'small',paused:false})),this.content);this.showingLoadingIndicator=true;}};y.prototype.hideLoadingIndicator=function(){'use strict';if(this.showingLoadingIndicator){n.unmountComponentAtNode(this.content);this.showingLoadingIndicator=false;}};y.prototype.showNoResults=function(){'use strict';var z=v._("Friend not found.");if(r.is_work_user)z=v._("Co-worker not found.");this.hideLoadingIndicator();k.setContent(this.content,k.create('div',{className:"noResults _3-9a"},z));};y.prototype.hide=function(){'use strict';this.clearContent();return x.hide.call(this);};y.prototype.next=function(){'use strict';x.next.call(this);if(l.ScrollableSidebarTypeaheadGK)this.$ChatTypeaheadView2.scrollIntoView(this.selected,false);};y.prototype.prev=function(){'use strict';x.prev.call(this);if(l.ScrollableSidebarTypeaheadGK)this.$ChatTypeaheadView2.scrollIntoView(this.selected,false);};y.prototype.setMaxHeight=function(z){'use strict';q.set(this.$ChatTypeaheadView1.wrap,'max-height',z+'px');};y.prototype.render=function(z,aa,ba){'use strict';if(l.ScrollableSidebarTypeaheadGK)var ca=this.value!==z||this.$ChatTypeaheadView2.isScrolledToBottom();if(!aa.length){if(z&&z.length>1)this.showLoadingIndicator();}else this.hideLoadingIndicator();x.render.call(this,z,aa,ba);if(l.ScrollableSidebarTypeaheadGK&&ca)this.$ChatTypeaheadView2.scrollToBottom(false);};y.prototype.$ChatTypeaheadView3=function(z){'use strict';if(l.WWWMessengerMoneyPennyGK&&z&&l.HoistAgentsKeywords&&l.HoistAgentsKeywords.indexOf(z.toLowerCase())!==-1){this.typeObjectsOrder=[i.NON_FRIEND_TYPE,i.THREAD_TYPE,i.FB4C_TYPE,i.FRIEND_TYPE,i.PAGE_TYPE];}else this.typeObjectsOrder=[i.NON_FRIEND_TYPE,i.PAGE_TYPE,i.THREAD_TYPE,i.FB4C_TYPE,i.FRIEND_TYPE];};f.exports=y;},null);
thread_fbids1
other_user_fbids1
fbid1
fbid:1000006802006781
fbid:1000000755734031
fbid:1000089080819241
fbid:1200993648
fbid:1177521907
reateElement(t,{alignH:'center',position:'above',tooltip:va},w._({"*":"{num} more"},[w.param('num',ua.length,[0])])));}var ta=pa.map(function(ua){return ra[ua];});if(na.author==k.getID()){oa(w._("You added {subscriber1}, {subscriber2} and {more_people}.",[w.param('subscriber1',la(ta[0])),w.param('subscriber2',la(ta[1])),w.param('more_people',sa(ta.slice(2)))]));}else if(pa[0]==k.getID()){oa(w._("{actor} added you, {subscriber2} and {more_people}.",[w.param('actor',la(ra[na.author])),w.param('subscriber2',la(ta[1])),w.param('more_people',sa(ta.slice(2)))]));}else oa(w._("{actor} added {subscriber1}, {subscriber2} and {more_people}.",[w.param('actor',la(ra[na.author])),w.param('subscriber1',la(ta[0])),w.param('subscriber2',la(ta[1])),w.param('more_people',sa(ta.slice(2)))]));});}function ga(na,oa){var pa=[na.author],qa=na.log_message_data.removed_participants,ra;if(qa.length===1){ra=qa[0];pa.push(ra);}o.getMulti(pa,function(sa){var ta=sa[na.author],ua=sa[ra];if(na.author==k.getID()){if(!ra||ra==na.author){oa(w._("You left the conversation."));}else oa(w._("You removed {name} from the conversation.",[w.param('name',la(ua))]));}else if(!ra||ra==na.author){oa(w._("{actor} left the conversation.",[w.param('actor',la(ta))]));}else if(ra==k.getID()){oa(w._("{actor} removed you from the conversation.",[w.param('actor',la(ta))]));}else oa(w._("{actor} removed {name} from the conversation.",[w.param('actor',la(ta)),w.param('name',la(ua))]));});}function ha(na,oa){var pa=na.log_message_data.name;if(na.author==k.getID()){if(pa){oa(w._("You named the conversation: {name}.",[w.param('name',p.createElement('span',{className:"_5wzs"},p.createElement(s,{renderEmoticons:true,renderEmoji:true,text:pa})))]));}else oa(w._("You removed the conversation name."));}else o.get(na.author,function(qa){var ra=la(qa);if(pa){oa(w._("{actor} named the conversation: {name}.",[w.param('actor',ra),w.param('name',p.createElement('span',{className:"_5wzs"},pa))]));}else oa(w._("{actor} removed the conversation name.",[w.param('actor',ra)]));});}function ia(na,oa){if(na.author==k.getID()){if(na.log_message_data.image){oa(w._("You changed the conversation picture."));}else oa(w._("You removed the conversation picture."));}else o.get(na.author,function(pa){var qa=la(pa);if(na.log_message_data.image){oa(w._("{actor} changed the conversation picture.",[w.param('actor',qa)]));}else oa(w._("{actor} removed the conversation picture.",[w.param('actor',qa)]));});}function ja(na,oa){if(na.author==k.getID()){oa(w._("You changed the wallpaper."));}else o.get(na.author,function(pa){var qa=la(pa);oa(w._("{actor} changed the wallpaper.",[w.param('actor',qa)]));});}function ka(na,oa){var pa=na.log_message_body,qa=na.log_message_data;switch(qa.message_type){case n.TURN_ON_PUSH:if(pa&&pa.length>0)pa=w._("{admin-text-message} for Messenger on mobile.",[w.param('admin-text-message',pa.substring(0,pa.length-1))]);break;case n.RTC_CALL_LOG:pa=p.createElement(u,{message:pa,conferenceId:qa.untypedData.conference_id,isVideoCall:qa.untypedData.is_video_call==='1',event:qa.untypedData.event});break;}oa(pa);}function la(na,oa){var pa=na.fbid,qa=j.constructEndpoint({id:pa});if(na.href)return (p.createElement('a',{className:"_5wzt",href:na.href,'data-hovercard':qa},oa?na.short_name:na.name));return na.name;}function ma(na){var oa=na.indexOf(k.getID());if(oa>0){var pa=na.filter(function(qa){return qa!==k.getID();});return [k.getID()].concat(pa);}return na;}},null);
__d('ImageSourceRequest',['CurrentUser','ImageSourceType','KeyedCallbackManager','PhotoResizeModeConst','MercuryServerDispatcher','arrayContains'],function a(b,c,d,e,f,g,h,i,j,k,l,m){if(c.__markCompiled)c.__markCompiled();function n(){'use strict';this._request={fbid:null,type:null,width:null,height:null,resize_mode:null};this._callback=null;}n.prototype.setFBID=function(r){'use strict';this._request.fbid=r;return this;};n.prototype.setType=function(r){'use strict';if(!m([i.PROFILE_PICTURE,i.IMAGE],r))throw new TypeError('ImageSourceRequest.setType: invalid type '+r);this._request.type=r;return this;};n.prototype.setDimensions=function(r,s){'use strict';this._request.width=r;this._request.height=s;return this;};n.prototype.setResizeMode=function(r){'use strict';if(!m([k.COVER,k.CONTAIN],r))throw new TypeError('ImageSourceRequest.setResizeMode: invalid resize mode '+r);this._request.resize_mode=r;return this;};n.prototype.setCallback=function(r){'use strict';this._callback=r;return this;};n.prototype.send=function(){'use strict';if(!this._request.fbid||!this._request.width||!this._request.height||!this._request.type||!this._request.resize_mode||!this._callback)throw new Error('ImageSourceRequest: You must set all the fields');var r=p(),s=q(this._request);r.executeOrEnqueue(s,this._callback);if(r.getUnavailableResourcesFromRequest(s).length===1){l.trySend('/ajax/image_source.php',{requests:[this._request]});return true;}return false;};var o=null;function p(){if(o)return o;var r=new j();o=r;l.registerEndpoints({'/ajax/image_source.php':{request_user_id:h.getID(),mode:l.BATCH_DEFERRED_MULTI,batch_function:function(s,t){var u;(u=s.requests).push.apply(u,t.requests);return s;},handler:function(s,t){var u=t.getData().requests;for(var v=0;v<u.length;++v)r.setResource(q(u[v]),s[v]);}}});return r;}function q(r){return [r.fbid,r.type,r.width,r.height,r.resize_mode].join('|');}f.exports=n;},null);
$map_fbid:100000361626019
__d('MessengerDetailViewHeader.react',['Event','immutable','ImmutableObject','Link.react','MercuryParticipantTypes','MercuryThreadTitle.react','MessengerConfig','MessengerDomIDs','MessengerInfoPanelVisibility','MessengerPresenceStatus.react','MessengerRTCCallButton.react','ReactComponentWithPureRenderMixin','FBRTCSupport','React','ReactDOM','Style','cx','fbt','debounce'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z){'use strict';if(c.__markCompiled)c.__markCompiled();var aa=u.PropTypes,ba=u.createClass({displayName:'MessengerDetailViewHeader',mixins:[s],propTypes:{contactData:aa.object,infoPanelVisibility:aa.number.isRequired,onInfoPanelToggle:aa.func.isRequired,participants:aa.instanceOf(i.Map).isRequired,thread:aa.instanceOf(j),viewer:aa.string.isRequired},componentDidMount:function(){this._resizeCallback=h.listen(window,'resize',z(this._calculateTruncationState,20,this));},componentWillUnmount:function(){this._resizeCallback.remove();},componentDidUpdate:function(){this._calculateTruncationState();},render:function(){var ca=this.props,da=ca.thread,ea=ca.viewer,fa=ca.infoPanelVisibility,ga=ca.onInfoPanelToggle;if(!da)return null;var ha=y._("Conversation Information"),ia=this._renderPresenceStatus();return (u.createElement('div',{className:"_5742"+(ia===null?' '+"_1_fz":''),ref:'root'},u.createElement('div',{className:"_5743",key:'threadTitle',ref:'title'},u.createElement('h2',{className:"_17w2",id:o.THREAD_TITLE},u.createElement(m,{className:"_3oh-",ref:'mercuryTitle',thread:da,viewer:ea})),ia),u.createElement('ul',{className:"_fl2",key:'buttonsContainer',ref:'buttons'},this._renderAudioCallButton(),this._renderVideoCallButton(),u.createElement('li',null,u.createElement(k,{'aria-expanded':fa===p.VISIBLE,'aria-label':ha,className:"_fl3"+(fa===p.AUTO?' '+"_20na":'')+(fa===p.HIDDEN?' '+"_20nb":'')+(' '+"_30yy"),onClick:ga,role:'button',title:ha}),u.createElement('div',{'aria-owns':o.THREAD_INFO_PANEL})))));},_renderAudioCallButton:function(){if(this._shouldShowCallButton())return (u.createElement('li',null,u.createElement(r,{className:"_30yy",isVideo:false,calleeID:this.props.thread.other_user_fbid,calleeName:this.props.contactData.contact.name})));},_renderVideoCallButton:function(){if(this._shouldShowCallButton())return (u.createElement('li',null,u.createElement(r,{className:"_30yy",isVideo:true,calleeID:this.props.thread.other_user_fbid,calleeName:this.props.contactData.contact.name})));},_shouldShowCallButton:function(){var ca=this.props.thread;return !!(t.isWebrtcSupported()&&t.isOSSupported()&&this.props.contactData&&this.props.contactData.contact.type!==l.PAGE&&n.EnableRtcGK&&ca&&ca.is_canonical&&ca.participants.length>1);},_renderPresenceStatus:function(){if(!this.props.contactData)return null;return (u.createElement(q,{className:"_2v6o",isUserActive:this.props.contactData.isUserActive,lastActive:this.props.contactData.lastActive,platform:this.props.contactData.platform}));},_calculateTruncationState:function(){var ca=v.findDOMNode(this.refs.root),da=v.findDOMNode(this.refs.title),ea=v.findDOMNode(this.refs.buttons),fa=v.findDOMNode(this.refs.mercuryTitle);if(!fa||!da)return;var ga=Math.ceil(.5*(ca.offsetWidth+fa.offsetWidth)),ha=ca.offsetWidth-ea.offsetWidth-12;if(ga<=ha&&!n.IsMessengerDesktop){w.set(ca,'text-align','center');w.set(da,'width','auto');}else{w.set(ca,'text-align','left');var ia=Math.max(ca.offsetWidth-ea.offsetWidth-11,0);w.set(da,'width',ia+'px');}}});f.exports=ba;},null);
for (;;);{"__ar":1,"payload":{"actions":[{"message_id":"mid.1447106750417:cf5c8122792ddf7245","threading_id":null,"offline_threading_id":"6069605629308267553","author":"fbid:1743460630","author_email":"1743460630\u0040facebook.com","ephemeral_ttl_mode":null,"timestamp":1447106750421,"timestamp_absolute":"November 9","timestamp_relative":"Mon","timestamp_datetime":"November 9th, 10:05pm","timestamp_time_passed":3,"is_unread":false,"is_forward":false,"is_filtered_content":false,"is_filtered_content_bh":false,"is_filtered_content_account":false,"is_filtered_content_quasar":false,"is_filtered_content_invalid_app":false,"forward_count":0,"forward_message_ids":[],"source":"source:chat:web","source_tags":["source:chat"],"is_spoof_warning":false,"folder":"inbox","thread_fbid":"1743460630","other_user_fbid":"1743460630","body":"mas achei que ias gostar de saber que estes tipos existem xD","subject":null,"has_attachment":false,"attachments":[],"raw_attachments":null,"ranges":[],"thread_id":"mid.1384005816145:04aa2b90e69c6f3832","action_id":null,"action_type":"ma-type:user-generated-message"},{"message_id":"mid.1447106989912:8e442991a6e1cd1442","threading_id":null,"offline_threading_id":"6069606685562341021","author":"fbid:100000075573403","author_email":"100000075573403\u0040facebook.com","ephemeral_ttl_mode":null,"timestamp":1447106989917,"timestamp_absolute":"November 9","timestamp_relative":"Mon","timestamp_datetime":"November 9th, 10:09pm","timestamp_time_passed":3,"is_unread":false,"is_forward":false,"is_filtered_content":false,"is_filtered_content_bh":false,"is_filtered_content_account":false,"is_filtered_content_quasar":false,"is_filtered_content_invalid_app":false,"forward_count":0,"forward_message_ids":[],"source":"source:chat:web","source_tags":["source:chat"],"is_spoof_warning":false,"folder":"inbox","thread_fbid":"1743460630","other_user_fbid":"1743460630","body":"n fazia puto xD","subject":null,"has_attachment":false,"attachments":[],"raw_attachments":null,"ranges":[],"thread_id":"mid.1384005816145:04aa2b90e69c6f3832","action_id":null,"action_type":"ma-type:user-generated-message"},{"message_id":"mid.1447107046106:17ca572c4d65b25e41","threading_id":null,"offline_threading_id":"6069606869513739009","author":"fbid:1743460630","author_email":"1743460630\u0040facebook.com","ephemeral_ttl_mode":null,"timestamp":1447107046110,"timestamp_absolute":"November 9","timestamp_relative":"Mon","timestamp_datetime":"November 9th, 10:10pm","timestamp_time_passed":3,"is_unread":false,"is_forward":false,"is_filtered_content":false,"is_filtered_content_bh":false,"is_filtered_content_account":false,"is_filtered_content_quasar":false,"is_filtered_content_invalid_app":false,"forward_count":0,"forward_message_ids":[],"source":"source:chat:web","source_tags":["source:chat"],"is_spoof_warning":false,"folder":"inbox","thread_fbid":"1743460630","other_user_fbid":"1743460630","body":"pois eu suspeitei xD","subject":null,"has_attachment":false,"attachments":[],"raw_attachments":null,"ranges":[],"thread_id":"mid.1384005816145:04aa2b90e69c6f3832","action_id":null,"action_type":"ma-type:user-generated-message"},{"message_id":"mid.1447107208773:b3e13f08389f956d68","threading_id":null,"offline_threading_id":"6069607551850542891","author":"fbid:1743460630","author_email":"1743460630\u0040facebook.com","ephemeral_ttl_mode":null,"timestamp":1447107208823,"timestamp_absolute":"November 9","timestamp_relative":"Mon","timestamp_datetime":"November 9th, 10:13pm","timestamp_time_passed":3,"is_unread":false,"is_forward":false,"is_filtered_content":false,"is_filtered_content_bh":false,"is_filtered_content_account":false,"is_filtered_content_quasar":false,"is_filtered_content_invalid_app":false,"forward_count":0,"forward_message_ids":[],"source":"source:chat:web","source_tags":["source:chat"],"is_spoof_warning":false,"folder":"inbox","thread_fbid":"1743460630","other_user_fbid":"1743460630","body":"","subject":null,"has_attachment":true,"attachments":[{"app_attribution":null,"attach_type":"photo","name":"image-10201081669400900","url":"\/ajax\/mercur.1447190559180:2cd432398fa0789660","threading_id":null,"offline_threading_id":"6069957150432645514","author":"fbid:100000075573403","author_email":"100000075573403\u0040facebook.com","ephemeral_ttl_mode":null,"timestamp":1447190559233,"timestamp_absolute":"Tuesday","timestamp_relative":"Tue","timestamp_datetime":"Tuesday 9:22pm","timestamp_time_passed":1,"is_unread":false,"is_forward":false,"is_filtered_content":false,"is_filtered_content_bh":false,"is_filtered_content_account":false,"is_filtered_content_quasar":false,"is_filtered_content_invalid_app":false,"forward_count":0,"forward_message_ids":[],"source":"source:chat:web","source_tags":["source:chat"],"is_spoof_warning":false,"folder":"inbox","thread_fbid":"1743460630","other_user_fbid":"1743460630","body":"ri bastante com o detalhe dos bot\u00f5es de punho no fim lol","subject":null,"has_attachment":false,"attachments":[],"raw_attachments":null,"ranges":[],"thread_id":"mid.1384005816145:04aa2b90e69c6f3832","action_id":null,"action_type":"ma-type:user-generated-message"},{"message_id":"mid.1447194244096:b7a63698e48ec27e49","threading_id":null,"offline_threading_id":"6069972605852066747","author":"fbid:1743460630","author_email":"1743460630\u0040facebook.com","ephemeral_ttl_mode":null,"timestamp":1447194244136,"timestamp_absolute":"Tuesday","timestamp_relative":"Tue","timestamp_datetime":"Tuesday 10:24pm","timestamp_time_passed":1,"is_unread":false,"is_forward":false,"is_filtered_content":false,"is_filtered_content_bh":false,"is_filtered_content_account":false,"is_filtered_content_quasar":false,"is_filtered_content_invalid_app":false,"forward_count":0,"forward_message_ids":[],"source":"source:chat:web","source_tags":["source:chat"],"is_spoof_warning":false,"folder":"inbox","thread_fbid":"1743460630","other_user_fbid":"1743460630","body":"ahah ya","subject":null,"has_attachment":false,"attachments":[],"raw_attachments":null,"ranges":[],"thread_id":"mid.1384005816145:04aa2b90e69c6f3832","action_id":null,"action_type":"ma-type:user-generated-message"},{"message_id":"mid.1447413971571:0201b0785003ff2245","threading_id":null,"offline_threading_id":"6070894218815379956","author":"fbid:100000075573403","author_email":"100000075573403\u0040facebook.com","ephemeral_ttl_mode":null,"timestamp":1447413971603,"timestamp_absolute":"Friday","timestamp_relative":"Fri","timestamp_datetime":"Friday 11:26am","timestamp_time_passed":1,"is_unread":false,"is_forward":false,"is_filtered_content":false,"is_filtered_content_bh":false,"is_filtered_content_account":false,"is_filtered_content_quasar":false,"is_filtered_content_invalid_app":false,"forward_count":0,"forward_message_ids":[],"source":"source:chat:web","source_tags":["source:chat"],"is_spoof_warning":false,"folder":"inbox","thread_fbid":"1743460630","other_user_fbid":"1743460630","body":"yeca","subject":null,"has_attachment":false,"attachments":[],"raw_attachments":null,"ranges":[],"thread_id":"mid.1384005816145:04aa2b90e69c6f3832","action_id":null,"action_type":"ma-type:user-generated-message"},{"message_id":"mid.1447413977954:28b4ec4237581f2e37","threading_id":null,"offline_threading_id":"6070894245691987265","author":"fbid:100000075573403","author_email":"100000075573403\u0040facebook.com","ephemeral_ttl_mode":null,"timestamp":1447413977956,"timestamp_absolute":"Friday","timestamp_relative":"Fri","timestamp_datetime":"Friday 11:26am","timestamp_time_passed":1,"is_unread":false,"is_forward":false,"is_filtered_content":false,"is_filtered_content_bh":false,"is_filtered_content_account":false,"is_filtered_content_quasar":false,"is_filtered_content_invalid_app":false,"forward_count":0,"forward_message_ids":[],"source":"source:chat:web","source_tags":["source:chat"],"is_spoof_warning":false,"folder":"inbox","thread_fbid":"1743460630","other_user_fbid":"1743460630","body":"almo\u00e7amos por volta da uma?","subject":null,"has_attachment":false,"attachments":[],"raw_attachments":null,"ranges":[],"thread_id":"mid.1384005816145:04aa2b90e69c6f3832","action_id":null,"action_type":"ma-type:user-generated-message"},{"message_id":"mid.1447415336
}llableHeight:ea,isCollapsed:ga,onToggle:fa,threadFBID:ha.thread_fbid}));},_renderMembers:function(){var ca=this.props,da=ca.peopleSectionCollapsed,ea=ca.onPeopleSectionToggle;return (x.createElement('div',null,x.createElement('div',{className:"_502q"}),x.createElement('h4',{className:"_3tl0 _2ds5"},z._("People"),x.createElement('div',{className:"_2ds6 _30yy"},x.createElement('div',{onClick:ea},da?z._("Show"):z._("Hide")))),x.createElement('div',{className:(da?"hidden_elem":'')+(' '+"_3tl1")},x.createElement(q,{actionsClass:s,className:"_4wc-",contactAdapter:o.fromMercuryParticipant,disableRole:true,extraActionsEnabled:this.props.thread.is_subscribed,listSections:i.OrderedMap([[null,this.props.participants.filter(function(fa){return !!fa;}).toArray()]]),onSelect:this._handleContactSelect,onAction:this._handleContactAction,viewer:this.props.viewer}),this._renderAddPeopleLink())));},_renderAddPeopleLink:function(){if(!l.canReply(this.props.thread))return null;return (x.createElement(k,{className:"_4rph",onClick:this._handleAddPeopleClick},x.createElement(h,null,x.createElement('div',{className:"_4rpi"}),x.createElement('div',{className:"_4rpj"},z._("Add People")))));},_renderFacebookProfile:function(){if(!this.props.contact||!this.props.contact.href||this.props.contact.fbid.toString()===p.MoneyPennyFBID)return null;var ca=this.props.contact.href,da=this.props.contact.type==='page'?z._("Facebook Page"):z._("Facebook Profile");return (x.createElement('div',null,x.createElement('div',{className:"_502q"}),x.createElement('h4',{className:"_3tl0"},da),x.createElement('div',{className:"_3tl1"},x.createElement(k,{className:"_3oh-",href:ca,target:'_blank'},ca.replace('www.','')))));},_handleContactSelect:function(ca){this.props.onContactSelect(o.fromMercuryParticipant(ca));},_handleContactAction:function(ca,da){this.props.onContactAction(ca,o.fromMercuryParticipant(da));},_handleAddPeopleClick:function(event){event.preventDefault();m.showDialog(n,{thread:this.props.thread,viewer:this.props.viewer});}});f.exports=ba;},null);
/ajax/mercury/attachments/photo.php?fbid=10201081669400900&height=20
fbidentity`
__d('MercuryThreads',['EventEmitter','ImmutableObject','KeyedCallbackManager','LogHistory','Map','MercuryActionType','MercuryAPIArgsSource','MercuryAssert','MercuryAttachment','MercuryConfig','MercuryDispatcher','MercuryFolders','MercuryGlobalActionType','MercuryIDs','MercuryLogMessageType','MercuryLoggingHelper','MercuryPayloadSource','MercuryServerRequests','MercurySingletonProvider','MercuryThreadInfo','MercuryThreadInformer','MessagingTag','MercuryDisplayTimeFilterMessageRenderer','Set','emptyFunction','ifRequired','setImmediate'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba,ca,da,ea,fa,ga,ha){'use strict';if(c.__markCompiled)c.__markCompiled();var ia=new h(),ja=k.getInstance('mercury_threads');function ka(ma){this.$MercuryThreads1=ma;this.$MercuryThreads2=y.getForFBID(this.$MercuryThreads1);this.$MercuryThreads3=ba.getForFBID(this.$MercuryThreads1);this.$MercuryThreads4=u.getParticipantIDFromUserID(this.$MercuryThreads1);this.$MercuryThreads5=r.getForFBID(this.$MercuryThreads1);this.$MercuryThreads6=false;this.$MercuryThreads7=new j();this.$MercuryThreads8=new ea();this.$MercuryThreads9=false;this.$MercuryThreads10=new ea();this.$MercuryThreads11=new ea();this.$MercuryThreads12();}ka.getForFBID=function(ma){return la.getForFBID(ma);};ka.get=function(){return la.get();};ka.prototype.getThreadMetaNow=function(ma){o.isThreadID(ma);return this.$MercuryThreads7.getResource(ma);};ka.prototype.getOrFetch=function(ma){var na=this.getThreadMetaNow(ma);if(!na&&!this.$MercuryThreads11.has(ma))this.$MercuryThreads10.add(ma);if(this.$MercuryThreads10.size>0&&!this.$MercuryThreads9)this.$MercuryThreads13();return na;};ka.prototype.$MercuryThreads13=function(){if(this.$MercuryThreads9)return;this.$MercuryThreads9=true;ha((function(){this.$MercuryThreads9=false;this.$MercuryThreads10.forEach((function(ma){return this.$MercuryThreads11.add(ma);}).bind(this));this.getMultiThreadMeta(Array.from(this.$MercuryThreads10),(function(ma){for(var na in ma)ma.hasOwnProperty(na)&&this.$MercuryThreads11['delete'](na);}).bind(this));this.$MercuryThreads10.clear();}).bind(this));};ka.prototype.getThreadMeta=function(ma,na,oa){return this.getMultiThreadMeta([ma],function(pa){return na(pa[ma]);},oa);};ka.prototype.getMultiThreadMeta=function(ma,na,oa){o.allThreadID(ma);var pa=this.$MercuryThreads7.executeOrEnqueue(ma,na),qa=this.$MercuryThreads7.getUnavailableResources(pa);if(qa.length){var ra=[];for(var sa=0;sa<qa.length;sa++){var ta=qa[sa],ua=u.tokenize(ta),va=ua.type,wa=ua.value;if(va=='user'){var xa=u.getParticipantIDFromUserID(wa);this.createNewLocalThread(ta,xa===this.$MercuryThreads4?[this.$MercuryThreads4]:[this.$MercuryThreads4,xa]);}else ra.push(ta);}if(ra.length)this.$MercuryThreads2.fetchThreadData(ra,oa);}return pa;};ka.addListener=function(ma,na){return ia.addListener(ma,na);};ka.prototype.unsubscribe=function(ma){this.$MercuryThreads7.unsubscribe(ma);};ka.prototype.getCanonicalThreadToParticipant=function(ma,na,oa,pa){var qa=u.getThreadIDFromParticipantID(ma),ra=this.$MercuryThreads7.getResource(qa);if(typeof ra=='undefined'){ra=this.createNewLocalThread(qa,this.$MercuryThreads4===ma?[this.$MercuryThreads4]:[this.$MercuryThreads4,ma],na);!pa&&this.$MercuryThreads2.fetchThreadData([qa],oa);}return ra;};ka.prototype.createNewLocalThread=function(ma,na,oa){var pa=this.$MercuryThreads7.getResource(ma);if(!pa){var qa=u.tokenize(ma),ra=qa.type,sa=qa.value;pa=new i({thread_id:ma,participants:Array.from(na),name:'',snippet:'',snippet_has_attachment:false,snippet_sender:null,unread_count:oa?oa:0,message_count:0,image_src:null,timestamp_absolute:null,timestamp_relative:null,timestamp:null,other_user_fbid:ra==='user'?sa:null,is_canonical_user:ra=='user',is_canonical:this.$MercuryThreads14(na),is_subscribed:true,folder:ca.INBOX,is_archived:false});this.$MercuryThreads7.setResource(ma,pa);}return pa;};ka.prototype.isEmptyLocalThread=function(ma){var na=this.$MercuryThreads7.getResource(ma);if(!na)return false;return aa.isEmptyLocalThread(na);};ka.prototype.isNewEmptyLocalThread=function(ma){var na=this.$MercuryThreads7.getResource(ma);if(!na)return false;return aa.isNewEmptyLocalThread(na);};ka.prototype.$MercuryThreads15=function(ma,na){if(!ma||!ma.length)return;var oa=new l(),pa=new l(),qa=new l(),ra=[];for(var sa=0;sa<ma.length;sa++){var ta=ma[sa];if(ta.is_forward)continue;var ua=ta.action_type;if(ua==m.LOG_MESSAGE&&ta.log_message_type==v.SERVER_ERROR)continue;var va=!!(ta.sync_id||ta.action_id||ta.is_from_iris),wa=ta.thread_id;o.isThreadID(wa);var xa=this.$MercuryThreads7.getResource(wa);if(!xa&&!va&&ua==m.USER_GENERATED_MESSAGE){xa=this.$MercuryThreads16(ta);this.$MercuryThreads7.setResource(wa,xa);}if(!xa)continue;if(ua==m.LOG_MESSAGE||ua==m.USER_GENERATED_MESSAGE)va=!na;if(xa.server_timestamp&&ta.timestamp<=xa.server_timestamp&&va)continue;if(!qa.has(wa))qa.set(wa,babelHelpers._extends({},xa));this.$MercuryThreads17(qa.get(wa),ta,na);if(ua==m.USER_GENERATED_MESSAGE)oa.set(wa,ta);if(ua==m.USER_GENERATED_MESSAGE||ua==m.LOG_MESSAGE||ua==m.SEND_MESSAGE)if(ta&&ta.timestamp&&(!pa.has(wa)||ta.timestamp>pa.get(wa).timestamp))pa.set(wa,ta);}qa.forEach((function(ya,za){var ab=pa.get(za),bb=oa.get(za);if(bb){this.$MercuryThreads18(ya,bb);}els
__d('ChatTabPolicy',['ChatBehavior','JSLogger','MercuryActionType','MercuryLogMessageType','MercuryAssert','MercuryConfig','MercuryGroupThreadMentions','MercuryIDs','MercuryParticipantTypes','MercurySourceType','MercuryThreadInfo','MercuryViewer','MessagingTag','PresencePrivacy','ShortProfiles','WorkModeConfig','MercuryBlockedParticipants','MercuryThreadActions'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w){if(c.__markCompiled)c.__markCompiled();var x=c('MercuryBlockedParticipants').get(),y=c('MercuryThreadActions').get(),z=i.create('tab_policy');f.exports={messageIsAllowed:function(aa,ba,ca){var da=aa.thread_id,ea=ba.message_id;l.isThreadID(da);l.isParticipantID(ba.author);var fa;if(r.isMuted(aa)){fa={thread_id:da,message_id:ea,mute_settings:aa.mute_settings};z.log('message_thread_muted',fa);if(m.GroupChatMentionsGK)n.messageMentionsViewer(ba,function(ia){if(ia)ca();});return;}if(aa.read_only){fa={thread_id:da,message_id:ea,mode:aa.mode};z.log('message_read_only',fa);return;}if(ba.source==q.EMAIL||ba.source==q.TITAN_EMAIL_REPLY){fa={thread_id:da,message_id:ea,source:ba.source};z.log('message_source_not_allowed',fa);return;}var ga=o.getUserIDFromParticipantID(ba.author);if(!ga){z.log('message_bad_author',{thread_id:da,message_id:ea,user:ga});return;}if(ba.action_type!=j.USER_GENERATED_MESSAGE&&!this._messageIsNewlyCreatedGroup(ba,aa)){fa={thread_id:da,message_id:ea,type:ba.action_type};z.log('message_non_user_generated',fa);return;}if(aa.is_canonical_user&&!h.notifiesUserMessages()){z.log('message_jabber',{thread_id:da,message_id:ea});y.markSeen(da,true);return;}if(aa.is_canonical&&!aa.other_user_fbid){z.log('message_canonical_contact',{thread_id:da,message_id:ea});return;}if(aa.folder!=t.INBOX){z.log('message_folder',{thread_id:da,message_id:ea,folder:aa.folder});return;}if(x.isPresentInGroupThread(aa)){fa={thread_id:da,message_id:ea};z.log('message_blocked_participants',fa);return;}var ha=o.getUserIDFromParticipantID(s.getID());v.getMulti([ga,ha],function(ia){if(!u.allows(ga)){z.log('message_privacy',{thread_id:da,message_id:ea,user:ga});return;}var ja=ia[ga].employee&&ia[ha].employee,ka=w.is_work_user;if(!ja&&!ka&&!ia[ga].isCommercePage&&ia[ga].type!==p.FRIEND){z.log('message_non_friend',{thread_id:da,message_id:ea,user:ga});return;}ca();});},_messageIsNewlyCreatedGroup:function(aa,ba){return aa.action_type===j.LOG_ME)
__handleUpdate(fb,gb);}).bind(this),connection_retries:3},'/ajax/mercury/thread_info.php':{request_user_id:this._fbid,mode:ja.BATCH_DEFERRED_MULTI,customHeader:db,batch_function:ta,handler:(function(fb,gb){return this.__handleUpdate(fb,gb);}).bind(this),error_handler:(function(fb){return this._handleThreadInfoError(fb);}).bind(this)},'/ajax/mercury/mark_folder_as_read.php':{request_user_id:this._fbid,mode:ja.IMMEDIATE,customHeader:db,handler:(function(fb,gb){return this.__handleUpdate(fb,gb);}).bind(this)},'/ajax/mercury/change_read_status.php':{request_user_id:this._fbid,mode:ja.BATCH_SUCCESSIVE,customHeader:db,batch_function:wa,handler:(function(fb,gb){return this.__handleUpdate(fb,gb);}).bind(this)},'/ajax/mercury/mark_seen.php':{request_user_id:this._fbid,mode:ja.BATCH_SUCCESSIVE,customHeader:db,batch_function:xa,handler:(function(fb,gb){return this.__handleUpdate(fb,gb);}).bind(this)},'/ajax/mercury/threadlist_info.php':{request_user_id:this._fbid,mode:ja.BATCH_SUCCESSIVE_UNIQUE,customHeader:db,batch_function:va,handler:(function(fb,gb){return this.__handleUpdate(fb,gb);}).bind(this)},'/ajax/mercury/mark_spam.php':{request_user_id:this._fbid,mode:ja.IMMEDIATE,customHeader:db,handler:(function(fb,gb){return this.__handleUpdate(fb,gb);}).bind(this)},'/ajax/mercury/unmark_spam.php':{request_user_id:this._fbid,mode:ja.IMMEDIATE,customHeader:db,handler:(function(fb,gb){return this.__handleUpdate(fb,gb);}).bind(this)},'/ajax/mercury/unread_threads.php':{request_user_id:this._fbid,mode:ja.BATCH_SUCCESSIVE_UNIQUE,customHeader:db,batch_function:ua,handler:(function(fb,gb){return this.__handleUpdate(fb,gb);}).bind(this)},'/ajax/chat/settings.php':{request_user_id:this._fbid,mode:ja.IMMEDIATE,customHeader:db},'/ajax/mercury/change_archived_status.php':{request_user_id:this._fbid,mode:ja.BATCH_SUCCESSIVE,customHeader:db,batch_function:za,handler:(function(fb,gb){return this.__handleUpdate(fb,gb);}).bind(this)},'/ajax/mercury/delete_thread.php':{request_user_id:this._fbid,mode:ja.BATCH_SUCCESSIVE,customHeader:db,batch_function:bb,handler:(function(fb,gb){return this.__handleUpdate(fb,gb);}).bind(this)},'/ajax/mercury/delete_messages.php':{request_user_id:this._fbid,mode:ja.IMMEDIATE,customHeader:db,handler:(function(fb,gb){return this.__handleUpdate(fb,gb);}).bind(this)},'/ajax/mercury/delivery_receipts.php':{request_user_id:this._fbid,mode:ja.IMMEDIATE,customHeader:db,handler:(function(fb,gb){return this.__handleUpdate(fb,gb);}).bind(this)},'/ajax/mercury/move_thread.php':{request_user_id:this._fbid,mode:ja.BATCH_SUCCESSIVE,customHeader:db,batch_function:ab,handler:(function(fb,gb){return this.__handleUpdate(fb,gb);}).bind(this)},'/ajax/mercury/change_mute_thread.php':{request_user_id:this._fbid,mode:ja.IMMEDIATE,customHeader:db,handler:(function(fb,gb){return this.__handleUpdate(fb,gb);}).bind(this)},'/mercury/pinned_threads/':{request_user_id:this._fbid,mode:ja.BATCH_SUCCESSIVE_UNIQUE,customHeader:db,handler:(function(fb,gb){return this.__handleUpdate(fb,gb);}).bind(this)},'/mercury/unpin_thread/':{request_user_id:this._fbid,mode:ja.IMMEDIATE,customHeader:db,handler:(function(fb,gb){return this.__handleUpdate(fb,gb);}).bind(this)}};ja.registerEndpoints(eb);},__sendRequest:function(db,eb,fb){ja.trySend(db,eb,fb,this._fbid);}});Object.assign(cb,da);f.exports=cb;},null);
=s[u++];}else{u=s.next();if(u.done)break;v=u.value;}var w=v;if(w.action_type!==i.UPDATE_BLOCKER_STATUS)continue;if(w.message_blocked){this.$MercuryBlockedParticipants4(w.thread_fbid);}else this.$MercuryBlockedParticipants5(w.thread_fbid);}}).bind(this));}m.prototype.getFBID=function(){return this.$MercuryBlockedParticipants1;};m.prototype.setIDs=function(o){this.$MercuryBlockedParticipants2=o;};m.prototype.getIDs=function(){return this.$MercuryBlockedParticipants6();};m.prototype.$MercuryBlockedParticipants6=function(){return this.$MercuryBlockedParticipants2;};m.prototype.$MercuryBlockedParticipants4=function(o){this.$MercuryBlockedParticipants2.add(h.getParticipantIDFromUserID(o));};m.prototype.$MercuryBlockedParticipants5=function(o){this.$MercuryBlockedParticipants2['delete'](h.getParticipantIDFromUserID(o));};m.prototype.isMessageBlocked=function(o){if(!o.is_canonical)return false;var p=o.participants.filter((function(q){return q!=h.getParticipantIDFromUserID(this.getFBID());}).bind(this));return !p.every((function(q){return !this.$MercuryBlockedParticipants2.has(q);}).bind(this));};m.prototype.isPresentInGroupThread=function(o){if(!o.is_canonical&&this.$MercuryBlockedParticipants7(o).length>0)return true;return false;};m.prototype.inGroupThread=function(o){if(o.is_canonical)return [];return this.$MercuryBlockedParticipants7(o);};m.prototype.$MercuryBlockedParticipants7=function(o){var p=o.participants.filter((function(r){return r!=h.getParticipantIDFromUserID(this.getFBID());}).bind(this)),q=p.filter((function(r){return this.$MercuryBlockedParticipants2.has(r)!==false;}).bind(this));return q;};var n=new k(m);f.exports=m;},null);
__d('MercuryUnseenState',['MercuryFolders','KeyedCallbackManager','LogHistory','MercuryActionType','MercuryDispatcher','MercurySingletonMixin','MercuryThreadInfo','MercuryThreadlistConstants','MercuryThreadIDMap','MessagingTag','MercuryServerRequests','MercuryThreadInformer','MercuryThreads','createObjectFrom','isEmpty'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v){if(c.__markCompiled)c.__markCompiled();var w=o.MAX_UNSEEN_COUNT,x='unseen_thread_hash',y='unseen_thread_list',z=j.getInstance('mercury_unseen_state');function aa(pa){this._fbid=pa;this._serverRequests=r.getForFBID(this._fbid);this._threadIDMap=p.getForFBID(this._fbid);this._threads=t.getForFBID(this._fbid);this._threadInformer=s.getForFBID(this._fbid);this._dispatcher=l.getForFBID(this._fbid);this._initialUnseenCount=null;this._lastSeenTimestamp=0;this._maxCount=false;this._pendingServerUpdates=false;this._unseenResources=new i();this._dispatcher.subscribe('update-unseen',(function(qa,ra){ga(this,ra);}).bind(this));this._dispatcher.subscribe('update-thread-ids',(function(qa,ra){ma(this,ra);}).bind(this));}Object.assign(aa.prototype,{getUnseenCount:function(){if(this.exceedsMaxCount()){z.error('unguarded_unseen_count_fetch',{});return 0;}return fa(this)||0;},exceedsMaxCount:function(){return this._maxCount||fa(this)>w;},markAsSeen:function(){var pa=fa(this);if(pa===null){this._pendingServerUpdates=true;}else if(pa>0||this._maxCount){this._serverRequests.markSeen();var qa=this._serverRequests.getLastActionTimestamp();ha(this,qa,[]);}}});Object.assign(aa,m);function ba(pa,qa,ra){var sa={};sa[qa]=0;ja(pa,sa,ra);}function ca(pa,qa){pa._unseenResources.setResource(x,qa);pa._unseenResources.setResource(y,Object.keys(qa));}function da(pa,qa){var ra=pa._unseenResources.executeOrEnqueue(x,qa),sa=pa._unseenResources.getUnavailableResources(ra);if(sa.length)pa._serverRequests.fetchUnseenThreadIDs();}function ea(pa){return pa._unseenResources.getResource(x);}function fa(pa){var qa=pa._unseenResources.getResource(y);if(qa){return qa.length;}else return pa._initialUnseenCount;}function ga(pa,qa){var ra=oa(qa);if(qa.unseen_thread_fbids){qa.unseen_thread_fbids.forEach(function(cb){if(cb.folder!=q.INBOX)return;var db=cb.thread_fbids||[];db=db.concat(cb.other_user_fbids||[]);var eb=la(pa,db),fb=pa._lastSeenTimestamp;if(ra&&ra.seen_timestamp)fb=ra.seen_timestamp;ha(pa,fb,eb);if(ra&&ra.unseen_count>w)pa._maxCount=true;});}else if(ra&&ra.seen
2ddf7245","threading_id":null,"offline_threading_id":"6069605629308267553","author":"fbid:1743460630","author_email":"1743460630\u0040facebook.com","ephemeral_ttl_mode":null,"timestamp":1447106750421,"timestamp_absolute":"November 9","timestamp_relative":"Mon","timestamp_datetime":"November 9th, 10:05pm","timestamp_time_passed":3,"is_unread":false,"is_forward":false,"is_filtered_content":false,"is_filtered_content_bh":false,"is_filtered_content_account":false,"is_filtered_content_quasar":false,"is_filtered_content_invalid_app":false,"forward_count":0,"forward_message_ids":[],"source":"source:chat:web","source_tags":["source:chat"],"is_spoof_warning":false,"folder":"inbox","thread_fbid":"1743460630","other_user_fbid":"1743460630","body":"mas achei que ias gostar de saber que estes tipos existem xD","subject":null,"has_attachment":false,"attachments":[],"raw_attachments":null,"ranges":[],"thread_id":"mid.1384005816145:04aa2b90e69c6f3832","action_id":null,"action_type":"ma-type:user-generated-message"},{"message_id":"mid.1447106989912:8e442991a6e1cd1442","threading_id":null,"offline_threading_id":"6069606685562341021","author":"fbid:100000075573403","author_email":"100000075573403\u0040facebook.com","ephemeral_ttl_mode":null,"timestamp":1447106989917,"timestamp_absolute":"November 9","timestamp_relative":"Mon","timestamp_datetime":"November 9th, 10:09pm","timestamp_time_passed":3,"is_unread":false,"is_forward":false,"is_filtered_content":false,"is_filtered_content_bh":false,"is_filtered_content_account":false,"is_filtered_content_quasar":false,"is_filtered_content_invalid_app":false,"forward_count":0,"forward_message_ids":[],"source":"source:chat:web","source_tags":["source:chat"],"is_spoof_warning":false,"folder":"inbox","thread_fbid":"1743460630","other_user_fbid":"1743460630","body":"n fazia puto xD","subject":null,"has_attachment":false,"attachments":[],"raw_attachments":null,"ranges":[],"thread_id":"mid.1384005816145:04aa2b90e69c6f3832","action_id":null,"action_type":"ma-type:user-generated-message"},{"message_id":"mid.1447107046106:17ca572c4d65b25e41","threading_id":null,"offline_threading_id":"6069606869513739009","author":"fbid:1743460630","author_email":"1743460630\u0040facebook.com","ephemeral_ttl_mode":null,"timestamp":1447107046110,"timestamp_absolute":"November 9","timestamp_relative":"Mon","timestamp_datetime":"November 9th, 10:10pm","timestamp_time_passed":3,"is_unread":false,"is_forward":false,"is_filtered_content":false,"is_filtered_content_bh":false,"is_filtered_content_account":false,"is_filtered_content_quasar":false,"is_filtered_content_invalid_app":false,"forward_count":0,"forward_message_ids":[],"source":"source:chat:web","source_tags":["source:chat"],"is_spoof_warning":false,"folder":"inbox","thread_fbid":"1743460630","other_user_fbid":"1743460630","body":"pois eu suspeitei xD","subject":null,"has_attachment":false,"attachments":[],"raw_attachments":null,"ranges":[],"thread_id":"mid.1384005816145:04aa2b90e69c6f3832","action_id":null,"action_type":"ma-type:user-generated-message"},{"message_id":"mid.1447107208773:b3e13f08389f956d68","threading_id":null,"offline_threading_id":"6069607551850542891","author":"fbid:1743460630","author_email":"1743460630\u0040facebook.com","ephemeral_ttl_mode":null,"timestamp":1447107208823,"timestamp_absolute":"November 9","timestamp_relative":"Mon","timestamp_datetime":"November 9th, 10:13pm","timestamp_time_passed":3,"is_unread":false,"is_forward":false,"is_filtered_content":false,"is_filtered_content_bh":false,"is_filtered_content_account":false,"is_filtered_content_quasar":false,"is_filtered_content_invalid_app":false,"forward_count":0,"forward_message_ids":[],"source":"source:chat:web","source_tags":["source:chat"],"is_spoof_warning":false,"folder":"inbox","thread_fbid":"1743460630","other_user_fbid":"1743460630","body":"","subject":null,"has_attachment":true,"attachments":[{"app_attribution":null,"attach_type":"photo","name":"image-10201081669400900","url":"\/ajax\/mercury\/attachments\/photo\/view\/?message=mid.1447107208773\u00253Ab3e13f08389f956d68&fbid=102010816/]
69400900&hash=AQB4vfPqfDxf5A0V","rel":"async","preview_url":"https:\/\/scontent.xx.fbcdn.net\/hphotos-xfa1\/v\/t34.0-0\/p206x206\/12212049_10201081669400900_716914115_n.jpg?oh=67f8be8d7b2ea32f6016cf02adde1059&oe=564BE6F1","preview_width":274,"preview_height":206,"preview_class":null,"icon_type":"attach:image","metadata":{"fbid":"10201081669400900","dimensions":"960,720"},"thumbnail_url":"https:\/\/scontent.xx.fbcdn.net\/hphotos-xfa1\/v\/t34.0-0\/s64x64\/12212049_10201081669400900_716914115_n.jpg?oh=0b52f9120a0c42300e3b807fd462db68&oe=564CF069","hires_url":"https:\/\/scontent.xx.fbcdn.net\/hphotos-xfa1\/v\/t34.0-12\/12212049_10201081669400900_716914115_n.jpg?oh=3da01167c70078571305f210aa4950b7&oe=564BE90F"}],"raw_attachments":null,"ranges":[],"thread_id":"mid.1384005816145:04aa2b90e69c6f3832","action_id":null,"action_type":"ma-type:user-generated-message"},{"message_id":"mid.1447107246566:e3645456c018bb1184","threading_id":null,"offline_threading_id":"6069607762060796126","author":"fbid:100000075573403","author_email":"100000075573403\u0040facebook.com","ephemeral_ttl_mode":null,"timestamp":1447107246573,"timestamp_absolute":"November 9","timestamp_relative":"Mon","timestamp_datetime":"November 9th, 10:14pm","timestamp_time_passed":3,"is_unread":false,"is_forward":false,"is_filtered_content":false,"is_filtered_content_bh":false,"is_filtered_content_account":false,"is_filtered_content_quasar":false,"is_filtered_content_invalid_app":false,"forward_count":0,"forward_message_ids":[],"source":"source:chat:web","source_tags":["source:chat"],"is_spoof_warning":false,"folder":"inbox","thread_fbid":"1743460630","other_user_fbid":"1743460630","body":"eh pa ta sossegado que j\u00e1 andei a ver a thread toda outra vez xD","subject":null,"has_attachment":false,"attachments":[],"raw_attachments":null,"ranges":[],"thread_id":"mid.1384005816145:04aa2b90e69c6f3832","action_id":null,"action_type":"ma-type:user-generated-message"},{"message_id":"mid.1447107256697:87a80c4225bf8cc815","threading_id":null,"offline_threading_id":"6069607752869166772","author":"fbid:1743460630","author_email":"1743460630\u0040facebook.com","ephemeral_ttl_mode":null,"timestamp":1447107256700,"timestamp_absolute":"November 9","timestamp_relative":"Mon","timestamp_datetime":"November 9th, 10:14pm","timestamp_time_passed":3,"is_unread":false,"is_forward":false,"is_filtered_content":false,"is_filtered_content_bh":false,"is_filtered_content_account":false,"is_filtered_content_quasar":false,"is_filtered_content_invalid_app":false,"forward_count":0,"forward_message_ids":[],"source":"source:chat:web","source_tags":["source:chat"],"is_spoof_warning":false,"folder":"inbox","thread_fbid":"1743460630","other_user_fbid":"1743460630","body":"ahaha","subject":null,"has_attachment":false,"attachments":[],"raw_attachments":null,"ranges":[],"thread_id":"mid.1384005816145:04aa2b90e69c6f3832","action_id":null,"action_type":"ma-type:user-generated-message"},{"message_id":"mid.1447190525472:717f8a6fd4bd3b5320","threading_id":null,"offline_threading_id":"6069957008958638307","author":"fbid:100000075573403","author_email":"100000075573403\u0040facebook.com","ephemeral_ttl_mode":null,"timestamp":1447190525493,"timestamp_absolute":"Tuesday","timestamp_relative":"Tue","timestamp_datetime":"Tuesday 9:22pm","timestamp_time_passed":1,"is_unread":false,"is_forward":false,"is_filtered_content":false,"is_filtered_content_bh":false,"is_filtered_content_account":false,"is_filtered_content_quasar":false,"is_filtered_content_invalid_app":false,"forward_count":0,"forward_message_ids":[],"source":"source:chat:web","source_tags":["source:chat"],"is_spoof_warning":false,"folder":"inbox","thread_fbid":"1743460630","other_user_fbid":"1743460630","body":"tive a ver o 1\u00ba ep da 2a season","subject":null,"has_attachment":false,"attachments":[],"raw_attachments":null,"ranges":[],"thread_id":"mid.1384005816145:04aa2b90e69c6f3832","action_id":null,"action_type":"ma-type:user-generated-message"},{"message_id":"mid.1447190559180:2cd432398fa0789660","threading_id":null,"offline_threading_id":"60699571504326455
__d('MercuryTimestampTracker',['MercuryActionType','MercuryPayloadSource','MercurySingletonMixin','MercuryDispatcher'],function a(b,c,d,e,f,g,h,i,j,k){if(c.__markCompiled)c.__markCompiled();function l(m){this._fbid=m;this._dispatcher=k.getForFBID(this._fbid);this._lastTimestamp=0;this._dispatcher.subscribe('update-messages',(function(n,o){if(!o.actions||!o.actions.length)return;if(o.payload_source==i.CLIENT_SEND_MESSAGE||o.payload_source==i.UNKNOWN)return;for(var p=0;p<o.actions.length;p++){var q=o.actions[p],r=q.action_type;if(r==h.USER_GENERATED_MESSAGE&&q.thread_id&&q.timestamp>this._lastTimestamp)this._lastTimestamp=q.timestamp;}}).bind(this));}Object.assign(l.prototype,{getLastUserMessageTimestamp:function(){return this._lastTimestamp;}});Object.assign(l,j);f.exports=l;},null);
__d('MessengerPhoto.react',['Image.react','MercuryAttachmentType','React','URI','cx','joinClasses'],function a(b,c,d,e,f,g,h,i,j,k,l,m){'use strict';if(c.__markCompiled)c.__markCompiled();var n=j.PropTypes,o=206,p=450;function q(u){if(u.metadata){if(u.attach_type===i.VIDEO)return u.metadata.inbox_preview;return new k('/ajax/mercury/attachments/photo.php').addQueryData({fbid:u.metadata.fbid,height:o,mode:'cover',request_user_id:u.metadata.pageid,width:o}).toString();}return null;}function r(u){if(u.preview_uploading)return {height:u.preview_height||o,src:u.preview_url,width:u.preview_width||o};var v=q(u);if(v)return babelHelpers._extends({src:v},u.metadata.inbox_size);if(u.preview_url)return {height:u.preview_height,src:u.preview_url,width:u.preview_width};if(u.media)return u.media.playable&&u.media.animated_image?babelHelpers._extends({},u.media.animated_image_size,{src:u.media.animated_image}):babelHelpers._extends({},u.media.image_size,{src:u.media.image});}function s(u,v){if(u.preview_uploading)return u.preview_url?0:o;var w=u.media?r(u):{height:u.preview_height,width:u.preview_width};return Math.min(w.height*Math.min(1,p/w.width),p);}var t=j.createClass({displayName:'MessengerPhoto',contextTypes:{width:n.number},propTypes:{attachment:n.object.isRequired,isSingle:n.bool.isRequired,onClick:n.func},render:function(){var u=this.props.attachment,v=r(u);if(!v)return null;var w=this._getImageFromMetadata(v),x={};if(v.src)x.backgroundImage='url('+v.src+')';if(this.props.isSingle){var y=s(u,this.context);if(y)x.minHeight=y;}var z=!!this.props.attachment.app_attribution;return (j.createElement('div',{className:m(this.props.className,"_4tsk"+(z?' '+"_mxz":'')+(this.props.isSingle&&!z?' '+"_52mr":'')+(u.preview_uploading&&!v.src?' '+"_3etv":'')),style:x,onClick:this._onClick},w,j.createElement('a',{className:"_4tsl",href:v.src},this.
__d('MercuryMessages',['BanzaiODS','EventEmitter','ImmutableObject','LogHistory','Map','MercuryActionStatus','MercuryActionType','MercuryAssert','MercuryDispatcher','MercuryLogMessageType','MercuryMessageClientState','MercuryPayloadSource','MercurySingletonMixin','MercuryMessageActions','MercuryMessageIDs','RangedCallbackManager','MercurySendMessageFields','MercuryServerRequests','MercuryThreadActions','MercuryThreadInformer','MercuryThreads','URI','invariant','isMessengerDotComURI','mergeDeep','setImmediate'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba,ca,da,ea,fa,ga){'use strict';if(c.__markCompiled)c.__markCompiled();var ha=new i(),ia=k.getInstance('mercury_messages');function ja(sa,ta){var ua=ta;if(sa._localIdsMap[ta])ua=sa._localIdsMap[ta];return sa._messages.get(ua);}function ka(sa){switch(sa){case s.UNKNOWN:case s.SERVER_INITIAL_DATA:case s.SERVER_FETCH_THREAD_INFO:case s.SERVER_THREAD_SYNC:return true;}return false;}function la(sa,ta){if(!sa._threadsToMessages[ta])sa._threadsToMessages[ta]=new w(function(ua){return ja(sa,ua).timestamp;},function(ua,va){return va-ua;});return sa._threadsToMessages[ta];}function ma(sa,ta,ua){ta.forEach(function(va){var wa=la(sa,va);wa.setReachedEndOfArray();sa._emitReorderedChange(va,ua);});}function na(sa){this._fbid=sa;this._messageActions=u.getForFBID(this._fbid);this._serverRequests=y.getForFBID(this._fbid);this._threadInformer=aa.getForFBID(this._fbid);this._threads=ba.getForFBID(this._fbid);this._threadActions=z.getForFBID(this._fbid);this._dispatcher=p.getForFBID(this._fbid);this._didChange=false;this._failedHistoryFetchThreads={};this._threadsToMessages={};this._localTitanMessagesCount={};this._messages=new l();this._localIdsMap={};this._dispatcher.subscribe('update-messages',(function(ta,ua){var va=(ua.actions||[]).filter(function(xa){var ya=xa.action_type,za=(xa.is_forward||xa.thread_id)&&(ya==n.LOG_MESSAGE||ya==n.USER_GENERATED_MESSAGE||ya==n.SEND_MESSAGE||ya==n.DELETE_THREAD||ya==n.DELETE_MESSAGES||ya==n.MARK_MESSAGES_SPAM),ab=xa.upload_id&&xa.upload_data&&(ya==n.CANCEL_ATTACHMENT_PLACEHOLDER||ya==n.CONFIRM_ATTACHMENT_PLACEHOLDER),bb=xa.note&&ya==n.CREATE_PAGE_ADMIN_NOTE,cb=xa.replaced_message_id&&ya==n.REPLACE_MESSAGE;return za||ab||bb||cb;}),wa=ka(ua.payload_source);this.handleUpdates(va,wa,ua.payload_source,ua.from_client);if(ua.end_of_history)ma(this,ua.end_of_history,ua.payload_source);if(this._didChange){this._didChange=false;ha.emit('change');}}).bind(this));this._dispatcher.subscribe('invalidate-thread-state',(function(ta,ua){this._invalidateThreadState(ua);}).bind(this));ia.debug('constructed',{fbid:this._fbid});}Object.assign(na.prototype,{getMessagesFromIDs:function(sa){return (sa||[]).map(ja.bind(null,this)).filter(function(ta){s
__d('MercurySyncMarkReadTransformer',['MercuryActionType','MessagingTag'],function a(b,c,d,e,f,g,h,i){'use strict';if(c.__markCompiled)c.__markCompiled();function j(k){return k.threadKeys.map(function(l){return {action_type:h.CHANGE_READ_STATUS,action_id:null,other_user_fbid:l.otherUserFbId,thread_fbid:l.threadFbId,mark_as_read:true,timestamp:parseInt(k.watermarkTimestamp,10),folder:i.INBOX};});}f.exports={transform:j};},null);
__d('MercurySyncNewMessageTransformer',['IrisProtocolMessageLifetime','MercuryActionType','MercuryIDs','MercuryTimestamp','MessagingTag'],function a(b,c,d,e,f,g,h,i,j,k,l){'use strict';if(c.__markCompiled)c.__markCompiled();function m(n,o){var p=parseInt(o.messageMetadata.timestamp,10),q=k.getFormatedTimestamp(p),r=[];if(o.attachments)r=o.attachments.map(function(t){return t.mercury;});var s=o.messageMetadata.tags?o.messageMetadata.tags[0]:undefined;return {message_id:o.messageMetadata.messageId,threading_id:null,offline_threading_id:o.messageMetadata.offlineThreadingId,author:j.getParticipantIDFromUserID(o.messageMetadata.actorFbId),author_email:o.messageMetadata.actorFbId+'@facebook.com',ephemeral_ttl_mode:o.ttl?h[o.ttl]:0,timestamp:p,timestamp_absolute:q.absolute,timestamp_relative:q.relative,timestamp_datetime:q.relative,timestamp_time_passed:k.getTimeBucket(p),is_unread:n!==o.messageMetadata.actorFbId,is_forward:false,is_filtered_content:false,is_filtered_content_bh:false,is_filtered_content_account:false,is_filtered_content_quasar:false,is_filtered_content_invalid_app:false,forward_count:0,forward_message_ids:[],source:s,is_spoof_warning:false,folder:l.INBOX,thread_fbid:o.messageMetadata.threadKey.threadFbId,other_user_fbid:o.messageMetadata.threadKey.otherUserFbId,body:o.body!==undefined?o.body:'',html_body:null,subject:null,has_attachment:r.length>0,attachments:r,ranges:undefined,thread_id:null,action_id:null,action_type:i.USER_GENERATED_MESSAGE,is_from_iris:true};}f.exports={transform:m};},null);
ga.type=='thread'&&this.$MercuryServerPayloadPreprocessor2.hasClientIDForServerID(ga.fbid))ea.push(this.$MercuryServerPayloadPreprocessor2.getClientIDFromServerIDNow(ga.fbid));}v.end_of_history=ea;}if(v.roger){var ha={};for(var ia in v.roger){var ja=Object.keys(v.roger[ia]),ka;if(ia){ka=this.$MercuryServerPayloadPreprocessor2.getClientIDFromServerIDNow(ia);}else if(ja.length===1)ka=i.getThreadIDFromUserID(ja[0]);if(ka){var la=v.roger[ia];ha[ka]={};for(var ma in la)if(la.hasOwnProperty(ma)){var na=i.getParticipantIDFromUserID(ma);ha[ka][na]=la[ma];}}}v.roger=ha;}v.newlyAddedClientIDs=w;v.preprocessed=true;this.$MercuryServerPayloadPreprocessor3.handleUpdate(v);};u.prototype.$MercuryServerPayloadPreprocessor4=function(v,w){var x=v.other_user_fbid?v.other_user_fbid:v.thread_fbid;!x?s(0):undefined;var y=this.$MercuryServerPayloadPreprocessor2.getClientIDFromServerIDNow(x);if(!y){y=v.other_user_fbid?i.getThreadIDFromUserID(v.other_user_fbid):i.getThreadIDFromThreadFBID(v.thread_fbid);this.$MercuryServerPayloadPreprocessor2.setServerIDToClientID(x,y);this.$MercuryServerPayloadPreprocessor2.setDeprecatedServerIDToClientID(v.thread_id,y);w[x]=y;}v.thread_id=y;};u.prototype.$MercuryServerPayloadPreprocessor5=function(v){v.actions.forEach(function(w){if(w.action_type===l.USER_GENERATED_MESSAGE){w.attachments=w.attachments||[];w.attachments.forEach(function(x){if(m.isShareAttachment(x)&&h.messengerdotcom){var y=new t(x.share.uri);if(!y.getDomain())x.share.uri=y.setDomain('facebook.com').setSubdomain(t.getRequestURI().getSubdomain()).setProtocol('https').toString();}});}});};u.prototype.$MercuryServerPayloadPreprocessor6=function(v){if(!j.MercuryGenieRendering)return;v.actions.forEach(function(w){if(w.action_type!==l.USER_GENERATED_MESSAGE)return;var x=w;if(!x.has_attachment||!x.attachments)return;for(var y=x.attachments.length-1;y>=0;y-=1){var z=x.attachments[y];if(!z.share||!z.share.style_list||z.share.style_list[0]!=r.GENIE_MESSAGE)continue;if(z.share.target.genie_id)x.author=i.getParticipantIDFromUserID(z.share.target.genie_id);if(z.share.target&&!z.share.target.attachment){x.attachments.splice(y,1);x.has_attachment=x.attachments.length>0;}}});};Object.assign(u,p);f.exports=u;},null);
__d('MercuryViewer',['CurrentUser','MercuryAssert'],function a(b,c,d,e,f,g,h,i){'use strict';if(c.__markCompiled)c.__markCompiled();var j='fbid:'+h.getID(),k={getID:function(){return j;},isViewer:function(l){i.isParticipantID(l);return l===j;}};f.exports=k;},null);
__d("XMercuryInvalidateThreadStateController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/mercury\/invalidate_thread_state\/",{other_user_or_thread_fbid:{type:"Int",required:true}});},null,{});
__d("XNFXMessengerBlockActionController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/nfx\/block_messages\/",{thread_fbid:{type:"Int",required:true},av:{type:"Int"},location:{type:"Enum",required:true,enumType:1},__asyncDialog:{type:"Int"}});},null,{});
_serverRequests.changeThreadFolder(ia,ha);}).bind(this));this.__dispatcher.handleUpdate(this.$MercuryThreadActions4(ga,ha));};fa.prototype['delete']=function(ga,ha){this.batchDelete([ga],ha);};fa.prototype.batchDelete=function(ga,ha){ga.forEach((function(ia){this.__serverRequests.deleteThread(ia,ha);}).bind(this));this.__dispatcher.handleUpdate(this.__constructClientPayload(ga,k.DELETE_THREAD,q.CLIENT_DELETE_THREAD));};fa.prototype.openNotificationSettings=function(ga){aa.isThreadID(ga);this.__serverRequests.__threadIDMap.getServerIDFromClientID(ga,function(ha){var ia=ba.getURIBuilder().setString('thread_key_id',ha).setBool('modify',false).getURI();new i().setURI(ia).send();});};fa.prototype.unmute=function(ga){this.updateMuteSetting(ga,0);};fa.prototype.updateMuteSetting=function(ga,ha){this.__serverRequests.changeMutingOnThread(ga,ha);this.__dispatcher.handleUpdate(this.__constructClientPayload([ga],k.CHANGE_MUTE_SETTINGS,q.CLIENT_CHANGE_MUTE_SETTINGS,{mute_settings:ha}));};fa.prototype.blockMessages=function(ga){var ha=y.getURIBuilder().setInt('thread_fbid',n.getUserIDFromThreadID(ga)).setEnum('location','www_chat_head').getURI();h.send(new i(ha));};fa.prototype.unblockMessages=function(ga){var ha=JSON.stringify({reportable_ent_token:n.getUserIDFromThreadID(ga),initial_action_name:p.block_messages});new i(new z('/ajax/nfx/messenger_undo_block').addQueryData({story_location:'messenger',context:ha})).send();};fa.prototype.turnOffSecretMode=function(ga){if(ea.isEmptyLocalThread(ga))return;ca.send(da.constructLogMessageObject(u.TITAN_WEB,ga,o.GENERIC_ADMIN_TEXT,{untypedData:{ttl:j.TTL_OFF}}),null,l.WEBMESSENGER);};fa.prototype.turnOnSecretMode=function(ga){if(ea.isEmptyLocalThread(ga))return;ca.send(da.constructLogMessageObject(u.TITAN_WEB,ga,o.GENERIC_ADMIN_TEXT,{untypedData:{ttl:j.TTL_1HOUR}}),null,l.WEBMESSENGER);};fa.prototype.leaveGroup=function(ga){if(!ea.isEmptyLocalThread(ga))ca.send(da.constructLogMessageObject(u.TITAN_WEB,ga,o.UNSUBSCRIBE,{removed_participants:[v.getID()]}),null,l.WEBMESSENGER);};fa.prototype.addParticipants=function(ga,ha){this.__dispatcher.handleUpdate(this.__constructClientPayload([ga],k.ADD_PARTICIPANTS,q.CLIENT_ADD_PARTICIPANTS,{participants:ha}));};fa.prototype.unpinThread=function(ga){this.__serverRequests.unpinThread(ga);this.__dispatcher.handleUpdate(this.__constructClientPayload([ga],k.UNPIN_THREAD,q.CLIENT_UNPIN_THREAD));};fa.prototype.movePendingToInbox=function(ga){this.__dispatcher.handleUpdate(this.__constructClientPayload([ga],k.MOVE_PENDING_TO_INBOX,q.CLIENT_MOVE_PENDING_TO_INBOX));};fa.prototype.updateSnippet=function(ga,ha){this.__dispatcher.handleUpdate(this.__constructClientPayload([ga],k.UPDATE_SNIPPET,q.CLIENT_UPDATE_SNIPPET,{deleted_ids:ha}));};fa.prototype.invalidateState=function(ga,ha){var ia=x.getURIBuilder().setInt('other_user_or_thread_fbid',ga||ha).getURI();new i().setURI(ia).setHandler((function(ja){this.__payloadPreprocessor.handleUpdate(ja.getPayload());}).bind(this)).send();};fa.prototype.$MercuryThreadActions2=function(ga,ha,ia){return this.__constructClientPayload(ga,k.CHANGE_READ_STATUS,q.CLIENT_CHANGE_READ_STATUS,{mark_as_read:ha,source:ia});};fa.prototype.$MercuryThreadActions3=function(ga,ha){return this.__constructClientPayload(ga,k.CHANGE_ARCHIVED_STATUS,q.CLIENT_CHANGE_ARCHIVED_STATUS,{archived:ha});};fa.prototype.$MercuryThreadActions4=function(ga,ha){return this.__constructClientPayload(ga,k.CHANGE_FOLDER,q.CLIENT_CHANGE_FOLDER,{new_folder:ha});};fa.prototype.__constructClientPayload=function(ga,ha,ia,ja){return {actions:ga.map(function(ka){return babelHelpers._extends({action_type:ha,action_id:null,thread_id:ka},ja);}),from_client:true,payload_source:ia};};Object.assign(fa,t);f.exports=fa;},null);
__d('MercuryLogMessageRenderer',['Bootloader','CSS','HovercardLink','MercuryViewer','MessagesViewer','MercuryLogMessageType','MessagingGenericAdminTextType','MercuryParticipants','React','ReactDOM','Image.react','TextWithEntities.react','TooltipLink.react','MercuryRtcCallLogMessage.react','cx','fbt','ix'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x){if(c.__markCompiled)c.__markCompiled();var y={renderText:function(na,oa){switch(na.log_message_type){case m.SUBSCRIBE:ba(na,oa);break;case m.UNSUBSCRIBE:ga(na,oa);break;case m.THREAD_NAME:ha(na,oa);break;case m.THREAD_IMAGE:ia(na,oa);break;case m.WALLPAPER:ja(na,oa);break;case m.GENERIC_ADMIN_TEXT:ka(na,oa);break;default:h.loadModules(["MercurySpecialLogMessageRenderer"],function(pa){pa.renderText(na,oa);});break;}},renderIcon:function(na){return (p.createElement(r,{className:z(na),src:x('images/spacer.gif')}));},renderLegacy:function(na,oa,pa,qa){z(qa).split(' ').forEach(function(ra){return ra&&i.addClass(na,ra);});this.renderText(qa,function(ra){q.render(p.createElement('span',null,ra),oa);});this.renderAttachmentLegacy(pa,qa);},renderAttachmentLegacy:function(na,oa){if(oa.log_message_type==m.THREAD_IMAGE){var pa=oa.log_message_data.image;if(pa&&pa.preview_url){q.render(p.createElement(r,{className:"_z6a",onClick:function(){return aa(pa);},src:pa.preview_url}),na);i.show(na);}}}};f.exports=y;function z(na){var oa=na.log_message_type,pa=na.log_message_data;return "_5wzu"+(oa==m.SUBSCRIBE?' '+"_5wzj":'')+(oa==m.UNSUBSCRIBE?' '+"_5wzk":'')+(oa==m.THREAD_NAME?' '+"_5wzl":'')+(oa==m.THREAD_IMAGE?' '+"_5wzm":'')+(oa==m.VIDEO_CALL&&pa.answered?' '+"_5wzn":'')+(oa==m.VIDEO_CALL&&!pa.answered?' '+"_5wzo":'')+(oa==m.PHONE_CALL&&pa.answered?' '+"_5wzp":'')+(oa==m.PHONE_CALL&&!pa.answered?' '+"_5wzq":'')+(oa==m.SERVER_ERROR?' '+"_5wzr":'');}function aa(na){l.bootstrapWithConfig({src:na.preview_url,endpoint:na.url,fbid:na.metadata.fbid,dimensions:na.metadata.dimensions,disablePaging:true},null);}function ba(na,oa){var pa=ma(na.log_message_data.added_participants);switch(pa.length){case 1:ca(na,oa,pa);break;case 2:da(na,oa,pa);break;case 3:ea(na,oa,pa);break;default:fa(na,oa,pa);break;}}function ca(na,oa,pa){var qa=[na.author,pa[0]];o.getMulti(qa,function(ra){if(na.author==k.getID()){oa(w._("You added {subscriber1}.",[w.param('subscriber1',la(ra[pa[0]]))]));}else if(pa[0]==k.getID()){oa(w._("{actor} added you.",[w.param('actor',la(ra[na.author]))]));}else oa(w._("{actor} added {subscriber1}.",[w.param('actor',la(ra[na.author])),w.param('subscriber1',la(ra[pa[0]]))]));});}function da(na,oa,pa){var qa=[na.author].concat(pa);o.getMulti(qa,function(ra){if(na.author==k.getID()){oa(w._("You added {subscriber1} and {subscriber2}.",[w.param('subscriber1',la(ra[pa[0]])),w.param('subscriber2',la(ra[pa[1]]))]));}else if(pa[0]==k.getID()){oa(w._("{actor} added you and {subscriber2}.",[w.param('actor',la(ra[na.author])),w.param('subscriber2',la(ra[pa[1]]))]));}else oa(w._("{actor} added {subscriber1} and {subscriber2}.",[w.param('actor',la(ra[na.author])),w.param('subscriber1',la(ra[pa[0]])),w.param('subscriber2',la(ra[pa[1]]))]));});}function ea(na,oa,pa){var qa=[na.author].concat(pa);o.getMulti(qa,function(ra){if(na.author==k.getID()){oa(w._("You added {subscriber1}, {subscriber2} and {subscriber3}.",[w.param('subscriber1',la(ra[pa[0]])),w.param('subscriber2',la(ra[pa[1]])),w.param('subscriber3',la(ra[pa[2]]))]));}else if(pa[0]==k.getID()){oa(w._("{actor} added you, {subscriber2} and {subscriber3}.",[w.param('actor',la(ra[na.author])),w.param('subscriber2',la(ra[pa[1]])),w.param('subscriber3',la(ra[pa[2]]))]));}else oa(w._("{actor} added {subscriber1}, {subscriber2} and {subscriber3}.",[w.param('actor',la(ra[na.author])),w.param('subscriber1',la(ra[pa[0]])),w.param('subscriber2',la(ra[pa[1]])),w.param('subscriber3',la(ra[pa[2]]))]));});}function fa(na,oa,pa){var qa=[na.author].concat(pa);o.getMulti(qa,function(ra){function sa(ua){var va=p.createElement('div',null,ua.map(function(wa){return p.createElement('div',null,wa.name);}));return (p.cX
__d('ChatTabPolicy',['ChatBehavior','JSLogger','MercuryActionType','MercuryLogMessageType','MercuryAssert','MercuryConfig','MercuryGroupThreadMentions','MercuryIDs','MercuryParticipantTypes','MercurySourceType','MercuryThreadInfo','MercuryViewer','MessagingTag','PresencePrivacy','ShortProfiles','WorkModeConfig','MercuryBlockedParticipants','MercuryThreadActions'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w){if(c.__markCompiled)c.__markCompiled();var x=c('MercuryBlockedParticipants').get(),y=c('MercuryThreadActions').get(),z=i.create('tab_policy');f.exports={messageIsAllowed:function(aa,ba,ca){var da=aa.thread_id,ea=ba.message_id;l.isThreadID(da);l.isParticipantID(ba.author);var fa;if(r.isMuted(aa)){fa={thread_id:da,message_id:ea,mute_settings:aa.mute_settings};z.log('message_thread_muted',fa);if(m.GroupChatMentionsGK)n.messageMentionsViewer(ba,function(ia){if(ia)ca();});return;}if(aa.read_only){fa={thread_id:da,message_id:ea,mode:aa.mode};z.log('message_read_only',fa);return;}if(ba.source==q.EMAIL||ba.source==q.TITAN_EMAIL_REPLY){fa={thread_id:da,message_id:ea,source:ba.source};z.log('message_source_not_allowed',fa);return;}var ga=o.getUserIDFromParticipantID(ba.author);if(!ga){z.log('message_bad_author',{thread_id:da,message_id:ea,user:ga});return;}if(ba.action_type!=j.USER_GENERATED_MESSAGE&&!this._messageIsNewlyCreatedGroup(ba,aa)){fa={thread_id:da,message_id:ea,type:ba.action_type};z.log('message_non_user_generated',fa);return;}if(aa.is_canonical_user&&!h.notifiesUserMessages()){z.log('message_jabber',{thread_id:da,message_id:ea});y.markSeen(da,true);return;}if(aa.is_canonical&&!aa.other_user_fbid){z.log('message_canonical_contact',{thread_id:da,message_id:ea});return;}if(aa.folder!=t.INBOX){z.log('message_folder',{thread_id:da,message_id:ea,folder:aa.folder});return;}if(x.isPresentInGroupThread(aa)){fa={thread_id:da,message_id:ea};z.log('message_blocked_participants',fa);return;}var ha=o.getUserIDFromParticipantID(s.getID());v.getMulti([ga,ha],function(ia){if(!u.allows(ga)){z.log('message_privacy',{thread_id:da,message_id:ea,user:ga});return;}var ja=ia[ga].employee&&ia[ha].employee,ka=w.is_work_user;if(!ja&&!ka&&!ia[ga].isCommercePage&&ia[ga].type!==p.FRIEND){z.log('message_non_friend',{thread_id:da,message_id:ea,user:ga});return;}ca();});},_messageIsNewlyCreatedGroup:function(aa,ba){return aa.action_type===j.LOG_MESSAGE&&aa.los
ib=ib||qa;var jb,kb,lb=v.tokenize(db),mb=this.__threadIDMap.getServerIDFromClientIDNow(db),nb=false;if(mb){jb=mb;kb=lb.type=='user'?'user_ids':'thread_fbids';}else{jb=lb.value;switch(lb.type){case 'user':kb='user_ids';nb=true;break;case 'thread':kb='thread_fbids';break;}}var ob={messages:{},threads:{},client:ib};if(kb){ob.messages[kb]={};ob.messages[kb][jb]={offset:eb,timestamp:gb,limit:fb};if(nb)ob.threads[kb]=[jb];this.__sendRequest('/ajax/mercury/thread_info.php',ob,hb);}else this.__threadIDMap.getServerIDFromClientID(db,(function(pb){ob.messages.thread_fbids={};ob.messages.thread_fbids[pb]={offset:eb,timestamp:gb,limit:fb};this.__sendRequest('/ajax/mercury/thread_info.php',ob,hb);}).bind(this));},handleThreadInfoError:function(db){var eb=db.getRequest().getData(),fb=[];if(eb.messages){for(var gb in eb.messages.thread_fbids)fb.push(this._createServerErrorLogMessage(this.__threadIDMap.getClientIDFromServerIDNow(gb)));for(var hb in eb.messages.user_ids)fb.push(this._createServerErrorLogMessage('user:'+hb));for(var ib in eb.messages.group_ids)fb.push(this._createServerErrorLogMessage('group:'+ib));}if(fb.length)this._dispatcher.handleUpdate({actions:fb,from_client:true,payload_source:y.CLIENT_CHANNEL_MESSAGE});if(eb.threads&&(eb.threads.user_ids||eb.threads.group_ids||eb.threads.thread_ids)){var jb=5,kb=true;if(!eb.retry_count){eb.retry_count=0;if(eb.messages)delete eb.messages;}else if(eb.retry_count>=jb){kb=false;(eb.threads.thread_ids||[]).forEach((function(mb){if(mb in this._fetchingThreads)delete this._fetchingThreads[mb];}).bind(this));}if(kb){var lb=Math.pow(2,eb.retry_count)*1000;oa((function(){pa.log('retry_thread',eb);this.__sendRequest('/ajax/mercury/thread_info.php',eb);}).bind(this),lb);eb.retry_count++;}}},markFolderAsRead:function(db){this.__sendRequest('/ajax/mercury/mark_folder_as_read.php',{folder:db});var eb=[{action_type:u.MARK_ALL_READ,action_id:null,folder:db}];this._dispatcher.handleUpdate({global_actions:eb,from_client:true,payload_source:y.CLIENT_CHANGE_READ_STATUS});},changeThreadReadStatus:function(db,eb,fb,gb,hb,ib){q.isThreadID(db);this.__threadIDMap.getServerIDFromClientID(db,(function(jb){var kb,lb={ids:(kb={},kb[jb]=eb,kb),source:fb,watermarkTimestamp:gb,titanOriginatedThreadId:hb,shouldSendReadReceipt:ib};this.__sendRequest('/ajax/mercury/change_read_status.php',lb);}).bind(this));},changeThreadArchivedStatus:function(db,eb,fb){q.isThreadID(db);this.__threadIDMap.getServerIDFromClientID(db,(function(gb){var hb={ids:{},source:fb};hb.ids[gb]=eb;this.__sendRequest('/ajax/mercury/change_archived_status.php',hb);}).bind(this));},changeThreadFolder:function(db,eb){q.isThreadID(db);this.__threadIDMap.getServerIDFromClientID(db,(function(fb){var gb={};gb[eb]=[fb];this.__sendRequest('/ajax/mercury/move_thread.php',gb);}).bind(this));},changeMutingOnThread:function(db,eb){q.isThreadID(db);this.__threadIDMap.getServerIDFromClientID(db,(function(fb){this.__sendRequest('/ajax/mercury/change_mute_thread.php',{thread_fbid:fb,mute_settings:eb,payload_source:qa});}).bind(this));},markThreadSpam:function(db,eb){q.isThreadID(db);this.__threadIDMap.getServerIDFromClientID(db,(function(fb){this.__sendRequest('/ajax/mercury/mark_spam.php',{id:fb,source:eb});}).bind(this));},unmarkThreadSpam:function(db,eb){q.isThreadID(db);this.__threadIDMap.getServerIDFromClientID(db,(function(fb){this.__sendRequest('/ajax/mercury/unmark_spam.php',{id:fb,source:eb});}).bind(this));},deleteThread:function(db,eb){q.isThreadID(db);this.__threadIDMap.getServerIDFromClientID(db,(function(fb){var gb={ids:[fb],source:eb};this.__sendRequest('/ajax/mercury/delete_thread.php',gb);}).bind(this));},unpinThread:function(db){q.isThreadID(db);this.__threadIDMap.getServerIDFromClientID(db,(function(eb){this.__sendRequest('/mercury/unpin_thread/',{id:eb});}).bind(this));},deleteMessages:function(db,eb){ga.getServerIDs(eb||[],(function(fb){this.__sendRequest('/ajax/mercury/delete_messages.php',{message_ids:fb});}).bind(this));},sendDeliveryReceipts:function(db,eb){ga.getServerIDs(db||[],(function(fb){this.__sendRequest('/ajax/mercury/delivery_2
receipts.php',{message_ids:fb,thread_ids:eb});}).bind(this));},sendNewMessage:function(db,eb){eb=eb||qa;if(!db.offline_threading_id)j.bumpEntityKey('chat.web','missing_otid_on_send');if(db.client_state&&db.client_state!==x.SEND_TO_SERVER)return;var fb=v.tokenize(db.thread_id),gb=fb.type,hb=babelHelpers._extends({},db);hb.thread_id=null;if(gb=='user'){hb.other_user_fbid=fb.value;this._sendNewMessageToServer(hb,eb);}else if(gb=='thread'){hb.thread_fbid=fb.value;this._sendNewMessageToServer(hb,eb);}else if(gb=='root'&&fb.value==hb.offline_threading_id){hb.client_thread_id=db.thread_id;this._sendNewMessageToServer(hb,eb);}else{!v.isLocalThread(db.thread_id)?na(0):undefined;this.__threadIDMap.getServerIDFromClientID(db.thread_id,(function(ib){hb.thread_fbid=ib;this._sendNewMessageToServer(hb,eb);}).bind(this));}},_sendNewMessageToServer:function(db,eb){h.inform(k.ATTEMPT_RECONNECT);this._sentMessagesTimestamp[db.message_id]=Date.now();ca.getForFBID(this._fbid).enqueue(db.other_user_fbid||db.thread_fbid||db.client_thread_id,this._sendMessageQueueOptions,eb,db);},markSeen:function(){var db=this._lastActionTimestamp;this.__sendRequest('/ajax/mercury/mark_seen.php',{seen_timestamp:db});},_handleSendMessageErrorCommon:function(db,eb,fb,gb){pa.debug('handle_send_message_error_common',{reliability_error_status:fb,request_error_status:eb});var hb=db.getData(),ib=hb.message_batch,jb=ib.map(function(lb){var mb={action_type:o.SEND_MESSAGE,other_user_fbid:lb.other_user_fbid,thread_fbid:lb.thread_fbid,client_message_id:lb.message_id,message_id:lb.message_id,client_thread_id:lb.client_thread_id,status:eb,error_data:gb};return mb;});jb.forEach(function(lb){if(lb.action_type===o.SEND_MESSAGE&&lb.status===n.ERROR)z.log(lb);},this);var kb={actions:jb,payload_source:y.CLIENT_HANDLE_ERROR};this._payloadPreprocessor.handleUpdate(kb);},handleSendMessageError:function(db){var eb=db.getPayload(),fb=null,gb=null;if(eb&&eb.error_payload){fb=n.UNCONFIRMED;gb='send_error';}else{fb=n.ERROR;gb='request_error'+sa(db);}var hb=db.error;if(hb===1404102)i.verboseErrorHandler(db);var ib=/<.*>/.test(db.getErrorDescription())?db.getErrorSummary():db.getErrorDescription();this._handleSendMessageErrorCommon(db.getRequest(),fb,gb,{type:t.SERVER,code:db.getError(),description:ib,is_transient:db.isTransient()});},handleSendMessageTransportError:function(db){this._handleSendMessageErrorCommon(db.getRequest(),n.ERROR,'transport_error'+sa(db),{type:t.TRANSPORT,code:db.getError(),is_transient:true});},handleSendMessageTimeout:function(db){this._handleSendMessageErrorCommon(db,n.ERROR,'transport_timeout',{type:t.TIMEOUT,is_transient:true});},getLastActionTimestamp:function(){return this._lastActionTimestamp;},updateLastActionTimestamp:function(db){if(db)this._lastActionTimestamp=Math.max(this._lastActionTimestamp,db);},markThreadFetched:function(db){delete this._fetchingThreads[db];},_createServerErrorLogMessage:function(db){return {action_type:o.LOG_MESSAGE,thread_id:db,message_id:db,timestamp:Date.now(),timestamp_absolute:'',timestamp_relative:'',is_unread:false,source:ea.UNKNOWN,log_message_type:w.SERVER_ERROR,log_message_data:{}};},_getForAsyncRequest:function(db){var eb=db.getData(),fb=eb.request_user_id?eb.request_user_id:l.getID();return cb.getForFBID(fb);},__handleUpdate:function(db,eb){this._getForAsyncRequest(eb)._payloadPreprocessor.handleUpdate(db);},_handleThreadInfoError:function(db){var eb=this._getForAsyncRequest(db.getRequest());eb.handleThreadInfoError(db);},_handleSendMessageError:function(db){var eb=this._getForAsyncRequest(db.getRequest());eb.handleSendMessageError(db);},_handleSendMessageTransportError:function(db){var eb=this._getForAsyncRequest(db.getRequest());eb.handleSendMessageTransportError(db);},_handleSendMessageTimeout:function(db){var eb=this._getForAsyncRequest(db);eb.handleSendMessageTimeout(db);},_registerEndpoints:function(){var db=null;if(ba.msgrRegion)db={name:'X-MSGR-Region',value:ba.msgrRegion};var eb={'/ajax/mercury/thread_sync.php':{request_user_id:this._fbid,mode:ja.IDEMPOTENT,customHeader:db,handler:(function(fb,gb){return this.
"is_employee_away":false,"networks":[],"type":"user","vanity":"marianafpaulo","is_friend":true,"social_snippets":[],"is_messenger_user":false},{"fbid":1177521907,"gender":2,"href":"https:\/\/www.facebook.com\/tiago.diogo","id":"fbid:1177521907","image_src":"https:\/\/fbcdn-profile-a.akamaihd.net\/hprofile-ak-xaf1\/v\/t1.0-1\/p32x32\/10407252_10205534025208148_1261194969720010832_n.jpg?oh=fa9b246d7afe7c9324ba3bf13eb939d1&oe=56E68101&__gda__=1458114237_e4d6631ef26225833f79208bcfe955e8","big_image_src":"https:\/\/fbcdn-profile-a.akamaihd.net\/hprofile-ak-xaf1\/v\/t1.0-1\/p50x50\/10407252_10205534025208148_1261194969720010832_n.jpg?oh=3ca17a52b40f650e1447a6a39761c4a9&oe=56E6B0EE&__gda__=1454149202_05e5567771f504c9d96a1476ac265c05","name":"Tiago Diogo","short_name":"Tiago","employee":false,"is_employee_away":false,"networks":[],"type":"user","vanity":"tiago.diogo","is_friend":true,"social_snippets":[],"is_messenger_user":true},{"fbid":1743460630,"gender":2,"href":"https:\/\/www.facebook.com\/tiago.brito.9","id":"fbid:1743460630","image_src":"https:\/\/fbcdn-profile-a.akamaihd.net\/hprofile-ak-xfp1\/v\/t1.0-1\/p32x32\/10896938_4970348473519_7012878390038484353_n.jpg?oh=421adcd132322efc4639420da4078aa1&oe=56F1AF48&__gda__=1455267440_3edf3b11081802afb1f9d9062c433e38","big_image_src":"https:\/\/fbcdn-profile-a.akamaihd.net\/hprofile-ak-xfp1\/v\/t1.0-1\/p50x50\/10896938_4970348473519_7012878390038484353_n.jpg?oh=9d239c5119ac8fa4102ec34001dbc19c&oe=56BD4074&__gda__=1458357580_149695ea60113630af58c47fc2c36fd1","name":"Tiago Brito","short_name":"Tiago","employee":false,"is_employee_away":false,"networks":[],"type":"user","vanity":"tiago.brito.9","is_friend":true,"social_snippets":[],"is_messenger_user":false}],"unseen_thread_fbids":[{"thread_fbids":[],"other_user_fbids":null,"thread_ids":[],"folder":"inbox"}],"roger":{"100000680200678":{"100000680200678":1447692891832},"100008908081924":{"100008908081924":1447690710419},"1200993648":{"1200993648":1447690643051},"1658786171075059":{"1177521907":1447685846581,"1743460630":1447685846581},"1743460630":{"1743460630":1447684175934}},"delivery_receipts":[{"other_user_fbid":"100000680200678","thread_fbid":null,"time":1447692882905},{"other_user_fbid":"100008908081924","thread_fbid":null,"time":1447630416289},{"other_user_fbid":"1200993648","thread_fbid":null,"time":1447690643051},{"other_user_fbid":null,"thread_fbid":"1658786171075059","time":1447685846581},{"other_user_fbid":"1743460630","thread_fbid":null,"time":1447682200117}],"payload_source":"server_fetch_threadlist_info"},"bootloadable":{},"ixData":{},"lid":"6217794691271765635"}tent_quasar":false,"is_filtered_content_invalid_app":false,"forward_count":0,"forward_message_ids":[],"source":"source:chat:orca","source_tags":["source:messenger","source:chat","source:mobile"],"is_spoof_warning":false,"folder":"inbox","thread_fbid":"100000680200678","other_user_fbid":"100000680200678","body":"Se te servir de ideia","subject":null,"has_attachment":false,"attachments":[],"raw_attachments":null,"ranges":[],"thread_id":"mid.1414028124846:ddce568db74c17b061","action_id":null,"action_type":"ma-type:user-generated-message"},{"message_id":"mid.1446576865563:f3cef713a505df1b49","threading_id":null,"offline_threading_id":"6067383134173706524","author":"fbid:100000075573403","author_email":"100000075573403\u0040facebook.com","ephemeral_ttl_mode":null,"timestamp":1446576865566,"timestamp_absolute":"November 3","timestamp_relative":"Nov 3","t_
erits(y,h);x=w&&w.prototype;function y(z,aa){'use strict';if(l.ScrollableSidebarTypeaheadGK){var ba=o.renderDOM();k.appendContent(z,ba.root);var ca=o.fromNative(ba.root);x.constructor.call(this,ba.content,aa);this.$ChatTypeaheadView1=ba;this.$ChatTypeaheadView2=ca;}else x.constructor.call(this,z,aa);this.showingLoadingIndicator=false;this.typeObjects={};this.typeObjectsOrder=[];this.typeObjects[i.NON_FRIEND_TYPE]={uid:i.NON_FRIEND_TYPE,type:i.HEADER_TYPE,text:v._("MORE PEOPLE")};this.typeObjects[i.PAGE_TYPE]={disabled:true,uid:i.PAGE_TYPE,type:i.HEADER_TYPE,text:v._("BUSINESSES")};this.typeObjects[i.THREAD_TYPE]={uid:i.THREAD_TYPE,type:i.HEADER_TYPE,text:v._("GROUP CONVERSATIONS")};this.typeObjects[i.FB4C_TYPE]={uid:i.FB4C_TYPE,type:i.HEADER_TYPE,text:v._("CO-WORKERS")};this.typeObjects[i.FRIEND_TYPE]={disabled:true,uid:i.FRIEND_TYPE,type:i.HEADER_TYPE,text:v._("FRIENDS")};this.$ChatTypeaheadView3();}y.prototype.reset=function(){'use strict';if(this.value==='')this.clearContent();this.index=-1;this.items=[];this.results=[];this.value='';this.inform('reset');return this;};y.prototype.clearContent=function(){'use strict';this.hideLoadingIndicator();k.empty(this.content);};y.prototype.buildBuckets=function(z,aa){'use strict';var ba=aa.filter(function(ca){var da=ca.render_type||ca.type;if(da==='thread'){var ea='fbid:'+j.getID();if(!t(ca.mercury_thread.participants,ea))return false;var fa=ca.participants_to_render.some(function(ha){return p.queryMatchesName(z,ha.name);}),ga=p.queryMatchesName(z,ca.mercury_thread.name);if(!fa&&!ga)return false;}return true;}).reverse();this.$ChatTypeaheadView3(z);return x.buildBuckets.call(this,z,ba);};y.prototype.getDefaultIndex=function(z){'use strict';if(z.length===0)return -1;var aa=z.length-1;while(!this.isHighlightable(z[aa])&&aa>=0)aa--;return aa;};y.prototype.showLoadingIndicator=function(){'use strict';if(!this.showingLoadingIndicator){n.render(m.createElement('div',{className:'spinnerContainer'},m.createElement(s,{className:"_3-8i",background:'light',size:'small',paused:false})),this.content);this.showingLoadingIndicator=true;}};y.prototype.hideLoadingIndicator=function(){'use strict';if(this.showingLoadingIndicator){n.unmountComponentAtNode(this.content);this.showingLoadingIndicator=false;}};y.prototype.showNoResults=function(){'use strict';var z=v._("Friend not found.");if(r.is_work_user)z=v._("Co-worker not found.");this.hideLoadingIndicator();k.setContent(this.content,k.create('div',{className:"noResults _3-9a"},z));};y.prototype.hide=function(){'use strict';this.clearContent();return x.hide.call(this);};y.prototype.next=function(){'use strict';x.next.call(this);if(l.ScrollableSidebarTypeaheadGK)this.$ChatTypeaheadView2.scrollIntoView(this.selected,false);};y.prototype.prev=function(){'use strict';x.prev.call(this);if(l.ScrollableSidebarTypeaheadGK)this.$ChatTypeaheadView2.scrollIntoView(this.selected,false);};y.prototype.setMaxHeight=function(z){'use strict';q.set(this.$ChatTypeaheadView1.wrap,'max-height',z+'px');};y.prototype.render=function(z,aa,ba){'use strict';if(l.ScrollableSidebarTypeaheadGK)var ca=this.value!==z||this.$ChatTypeaheadView2.isScrolledToBottom();if(!aa.length){if(z&&z.length>1)this.showLoadingIndicator();}else this.hideLoadingIndicator();x.render.call(this,z,aa,ba);if(l.ScrollableSidebarTypeaheadGK&&ca)this.$ChatTypeaheadView2.scrollToBottom(false);};y.prototype.$ChatTypeaheadView3=function(z){'use strict';if(l.WWWMessengerMoneyPennyGK&&z&&l.HoistAgentsKeywords&&l.HoistAgentsKeywords.indexOf(z.toLowerCase())!==-1){this.typeObjectsOrder=[i.NON_FRIEND_TYPE,i.THREAD_TYPE,i.FB4C_TYPE,i.FRIEND_TYPE,i.PAGE_TYPE];}else this.typeObjectsOrder=[i.NON_FRIEND_TYPE,i.PAGE_TYPE,i.THREAD_TYPE,i.FB4C_TYPE,i.FRIEND_TYPE];};f.exports=y;},null);
setResource(x,qa);oa._unreadResources[pa].setResource(y,Object.keys(qa));}function da(oa,pa,qa){var ra=oa._unreadResources[pa].executeOrEnqueue(x,qa),sa=oa._unreadResources[pa].getUnavailableResources(ra);if(sa.length)oa._serverRequests.fetchUnreadThreadIDs(pa);}function ea(oa,pa){return oa._unreadResources[pa].getResource(x);}function fa(oa,pa){var qa=oa._unreadResources[pa].getResource(y);if(qa){return qa.length;}else return oa._initialUnreadCount[pa];}function ga(oa,pa){var qa;(pa.unread_thread_fbids||[]).forEach(function(ra){qa=ra.folder;if(!na(qa))return;var sa=ra.thread_fbids||[];sa=sa.concat(ra.other_user_fbids||[]);var ta=ka(oa,sa);ca(oa,qa,v(ta,true));if(ta.length>z)oa._maxCount[qa]=true;oa._threadInformer.updatedUnreadState();});(pa.message_counts||[]).forEach(function(ra){if(ra.unread_count===undefined)return;qa=ra.folder;if(ra.unread_count>z){oa._maxCount[qa]=true;ca(oa,qa,{});oa._threadInformer.updatedUnreadState();}else{oa._initialUnreadCount[qa]=ra.unread_count;if(oa._initialUnreadCount[qa]===0)ca(oa,qa,{});oa._threadInformer.updatedUnreadState();}});(pa.actions||[]).forEach(function(ra){if(ra.is_forward)return;var sa=k,ta=ra.other_user_fbid?ra.other_user_fbid:ra.thread_fbid,ua=ra.thread_id?ra.thread_id:ta;if(ra.action_type==sa.DELETE_THREAD){w.forEach(function(wa){ia(oa,wa,ua);});}else if(ra.action_type==sa.CHANGE_ARCHIVED_STATUS||ra.action_type==sa.CHANGE_FOLDER){var va=oa._threads.getThreadMetaNow(ra.thread_id);qa=h.getFromMeta(va);if(na(qa)&&va.unread_count>0)ha(oa,qa,ua);w.forEach(function(wa){if(wa!=qa)ia(oa,wa,ua);});}else{qa=ma(oa,ra);if(!na(qa))return;if(ra.action_type==sa.CHANGE_READ_STATUS){if(ra.mark_as_read){ia(oa,qa,ua,ra.timestamp);}else ha(oa,qa,ua,ra.timestamp);}else if(ra.action_type==sa.USER_GENERATED_MESSAGE||ra.action_type==sa.LOG_MESSAGE)if(ra.is_unread)ha(oa,qa,ua,ra.timestamp);}});}function ha(oa,pa,qa,ra){if(oa._maxCount[pa])return;da(oa,pa,function(sa){var ta=oa._allReadTimestamp[pa]||0,ua=oa._threadReadTimestamp[qa]||0,va=ra||Number.POSITIVE_INFINITY;if(va>=ta&&va>=ua&&!sa[qa]){sa[qa]=ra||0;ca(oa,pa,sa);oa._threadInformer.updatedUnreadState();}});}function ia(oa,pa,qa,ra){if(oa._maxCount[pa])return;da(oa,pa,function(sa){if(ra){var ta=oa._threadReadTimestamp[qa];if(!ta||ta<ra)oa._threadReadTimestamp[qa]=ra;}var ua=sa[qa];if(ra&&typeof ua=='number'&&ra<ua)return;if(qa in sa){delete sa[qa];ca(oa,pa,sa);oa._threadInformer.updatedUnreadState();}});}function ja(oa,pa,qa){oa._maxCount[pa]=false;ca(oa,pa,{});oa._allReadTimestamp[pa]=Math.max(oa._allReadTimestamp[pa]||0,qa||0);oa._threadInformer.updatedUnreadState();}function ka(oa,pa){return pa.map(oa._threadIDMap.convertThreadIDIfAvailable,oa._threadIDMap);}function la(oa,pa){w.forEach(function(qa){var ra=ea(oa,qa);if(!ra)return;for(var sa in pa){var ta=pa[sa];if(ra[sa]){ra[ta]=ra[sa];delete ra[sa];}}ca(oa,qa,ra);});}function ma(oa,pa){var qa=pa.thread_id?oa._threads.getThreadMetaNow(pa.thread_id):null;return qa?h.getFromMeta(qa):pa.folder;}function na(oa){return u(w,oa);}f.exports=ba;},null);
=s[u++];}else{u=s.next();if(u.done)break;v=u.value;}var w=v;if(w.action_type!==i.UPDATE_BLOCKER_STATUS)continue;if(w.message_blocked){this.$MercuryBlockedParticipants4(w.thread_fbid);}else this.$MercuryBlockedParticipants5(w.thread_fbid);}}).bind(this));}m.prototype.getFBID=function(){return this.$MercuryBlockedParticipants1;};m.prototype.setIDs=function(o){this.$MercuryBlockedParticipants2=o;};m.prototype.getIDs=function(){return this.$MercuryBlockedParticipants6();};m.prototype.$MercuryBlockedParticipants6=function(){return this.$MercuryBlockedParticipants2;};m.prototype.$MercuryBlockedParticipants4=function(o){this.$MercuryBlockedParticipants2.add(h.getParticipantIDFromUserID(o));};m.prototype.$MercuryBlockedParticipants5=function(o){this.$MercuryBlockedParticipants2['delete'](h.getParticipantIDFromUserID(o));};m.prototype.isMessageBlocked=function(o){if(!o.is_canonical)return false;var p=o.participants.filter((function(q){return q!=h.getParticipantIDFromUserID(this.getFBID());}).bind(this));return !p.every((function(q){return !this.$MercuryBlockedParticipants2.has(q);}).bind(this));};m.prototype.isPresentInGroupThread=function(o){if(!o.is_canonical&&this.$MercuryBlockedParticipants7(o).length>0)return true;return false;};m.prototype.inGroupThread=function(o){if(o.is_canonical)return [];return this.$MercuryBlockedParticipants7(o);};m.prototype.$MercuryBlockedParticipants7=function(o){var p=o.participants.filter((function(r){return r!=h.getParticipantIDFromUserID(this.getFBID());}).bind(this)),q=p.filter((function(r){return this.$MercuryBlockedParticipants2.has(r)!==false;}).bind(this));return q;};var n=new k(m);f.exports=m;},null);
__d('MercuryUnseenState',['MercuryFolders','KeyedCallbackManager','LogHistory','MercuryActionType','MercuryDispatcher','MercurySingletonMixin','MercuryThreadInfo','MercuryThreadlistConstants','MercuryThreadIDMap','MessagingTag','MercuryServerRequests','MercuryThreadInformer','MercuryThreads','createObjectFrom','isEmpty'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v){if(c.__markCompiled)c.__markCompiled();var w=o.MAX_UNSEEN_COUNT,x='unseen_thread_hash',y='unseen_thread_list',z=j.getInstance('mercury_unseen_state');function aa(pa){this._fbid=pa;this._serverRequests=r.getForFBID(this._fbid);this._threadIDMap=p.getForFBID(this._fbid);this._threads=t.getForFBID(this._fbid);this._threadInformer=s.getForFBID(this._fbid);this._dispatcher=l.getForFBID(this._fbid);this._initialUnseenCount=null;this._lastSeenTimestamp=0;this._maxCount=false;this._pendingServerUpdates=false;this._unseenResources=new i();this._dispatcher.subscribe('update-unseen',(function(qa,ra){ga(this,ra);}).bind(this));this._dispatcher.subscribe('update-thread-ids',(function(qa,ra){ma(this,ra);}).bind(this));}Object.assign(aa.prototype,{getUnseenCount:function(){if(this.exceedsMaxCount()){z.error('unguarded_unseen_count_fetch',{});return 0;}return fa(this)||0;},exceedsMaxCount:function(){return this._maxCount||fa(this)>w;},markAsSeen:function(){var pa=fa(this);if(pa===null){this._pendingServerUpdates=true;}else if(pa>0||this._maxCount){this._serverRequests.markSeen();var qa=this._serverRequests.getLastActionTimestamp();ha(this,qa,[]);}}});Object.assign(aa,m);function ba(pa,qa,ra){var sa={};sa[qa]=0;ja(pa,sa,ra);}function ca(pa,qa){pa._unseenResources.setResource(x,qa);pa._unseenResources.setResource(y,Object.keys(qa));}function da(pa,qa){var ra=pa._unseenResources.executeOrEnqueue(x,qa),sa=pa._unseenResources.getUnavailableResources(ra);if(sa.length)pa._serverRequests.fetchUnseenThreadIDs();}function ea(pa){return pa._unseenResources.getResource(x);}function fa(pa){var qa=pa._unseenResources.getResource(y);if(qa){return qa.length;}else return pa._initialUnseenCount;}function ga(pa,qa){var ra=oa(qa);if(qa.unseen_thread_fbids){qa.unseen_thread_fbids.forEach(function(cb){if(cb.folder!=q.INBOX)return;var db=cb.thread_fbids||[];db=db.concat(cb.other_user_fbids||[]);var eb=la(pa,db),fb=pa._lastSeenTimestamp;if(ra&&ra.seen_timestamp)fb=ra.seen_timestamp;ha(pa,fb,eb);if(ra&&ra.unseen_count>w)pa._maxCount=true;});}else if(ra&&ra.seene
(qe);},_getCanonicalUserID:function(){return xa.getUserIDFromThreadID(this._threadID);},_listen:function(qe,event,re,se){var te=this._getNode(qe);if(te){this._eventListeners.push(ma.listen(te,event,re.bind(this)));}else if(!se)throw new Error('Could not find node "'+qe+'"');},_closePreClicked:function(qe){this._closeMouseDown=true;},_closeClicked:function(qe){le(this);v.closeTab(this._threadID);if(qe instanceof fc){qe.stopPropagation();return;}qe.kill();},_closeEnter:function(qe){if(qe.keyCode===ta.RETURN)this._closeClicked(qe);},_nubClicked:function(qe){qe.kill();return y.inform('nub-activated',this._threadID);},_dockKeyDown:function(event){if(event.keyCode===ta.RETURN||event.keyCode===ta.SPACE){y.inform('nub-activated',this._threadID);event.kill();}else this._handleHotkeyPressed(event);},_handleHotkeyPressed:function(event){if(event.keyCode===ta.ESC){this._handleEscape();if(p.get('chat_react_input'))event=new ga(event);event.kill();}else if(event.keyCode===ta.TAB)this._handleTabPressed(event);},_handleTabPressed:function(event){if(!event.ctrlKey){var qe=y.inform('tab-pressed',{id:this._threadID,shiftPressed:event.shiftKey});if(p.get('chat_react_input'))event=new ga(event);!qe&&event.kill();return true;}},_handleEscape:function(){if(this._stickersFlyoutShown){this._toggleStickersFlyoutShown(false);return;}le(this);if(this.hasEmptyInput()){y.inform('esc-pressed',this._threadID);}else{var qe=xc._("Are you sure you want to close this chat window?"),re=xc._("You haven't sent your message.");zb.showConfirm(qe,re,(function(se){if(se){y.inform('esc-pressed',this._threadID);}else this.focus();}).bind(this),{autofocusConfirm:true});}},_titleClicked:function(event){var qe=event.getTarget();if(!ob.byClass(qe,'titlebarText')&&!ob.byClass(qe,'uiSelector')&&!ob.byClass(qe,'addToThread')&&!ob.byClass(qe,'optionMenu')&&!ob.byClass(qe,'videoicon')&&!ob.byClass(qe,'phoneicon')&&!ob.byClass(qe,"_1fu3")&&!ob.byClass(qe,"_1fu4")&&!ob.byClass(qe,'close')){event.kill();v.lowerTab(this._threadID);this.focus();}},_groupCallEnter:function(qe){if(qe.keyCode===ta.RETURN)this._groupCallClicked(qe);},_groupCallClicked:function(qe){if(qe.target)qe.target.blur();if(this._videoCallLinkEnabled){var re;if(qe.target&&(n.hasClass(qe.target,'phoneicon')||n.hasClass(qe.target,"_1fu4"))){re='chat_tab_voice_icon';}else re='chat_tab_icon';nd.getThreadMeta(this._threadID,function(se){var te=se.participants.map(function(ve){return xa.getUserIDFromParticipantID(ve);}),ue=te.filter(function(ve){return ve!==ea.getID();});y.inform('group-call-clicked',{threadID:'GROUP:'+se.thread_fbid.toString(),usersToCall:ue,clickSource:re,audioOnly:re==='chat_tab_voice_icon'});});}if(p.get('chat_react_header')){qe.stopPropagation();}else return false;},_callEnter:function(qe){if(qe.keyCode===ta.RETURN)this._callClicked(qe);},_callClicked:function(qe){if(qe.target)qe.target.blur();var re=this._getCanonicalUserID();if(this._videoCallLinkEnabled){var se;if(qe.target&&(n.hasClass(qe.target,'phoneicon')||n.hasClass(qe.target,"_1fu4"))){se='chat_tab_voice_icon';}else se='chat_tab_icon';y.inform('video-call-clicked',{threadID:this._threadID,userID:re,clickSource:se,audioOnly:se==='chat_tab_voice_icon'});}if(p.get('chat_react_header')){qe.stopPropagation();}else return false;},_addFriendLinkClicked:function(){this.showAddFriend();},_getUserParticipants:function(qe){var re=[];qe.forEach(function(se){var te=xa.getUserIDFromParticipantID(se);te&&re.push(te);});return re;},_enableDesktopNotif:function(){Notification.requestPermission();},_inputPasted:function(event){if(lc.chrome()){var qe=event.clipboardData||event.originalEvent.clipboardData;if(!qe||!qe.items||qe.items.length<1)return;var re=qe.items[0].type;if(re!=='image/png')return;if(qe.items[0].getAsFile){var se=qe.items[0].getAsFile();this._photoUploader.uploadFile(se);}}},_focusInput:function(){q.processEvent('focus');if(p.get('chat_react_input')){this._chatInput&&this._chatInput.isMounted()&&this._chatInput.focus();}else this._getNode('input').focus();},_focusTab:function(){n.addClass(this._tabElem,'focusedTab');this.tryMarkAsRead();T
({"__ar":1,"payload":{"actions":[{"thread_id":null,"thread_fbid":null,"other_user_fbid":"100000680200678","action_id":null,"action_type":"ma-type:update-action-id"}],"payload_source":"server_change_read_status"},"bootloadable":{},"ixData":{},"lid":"6217794764386010538"})
group_thread_fbid
ib=ib||qa;var jb,kb,lb=v.tokenize(db),mb=this.__threadIDMap.getServerIDFromClientIDNow(db),nb=false;if(mb){jb=mb;kb=lb.type=='user'?'user_ids':'thread_fbids';}else{jb=lb.value;switch(lb.type){case 'user':kb='user_ids';nb=true;break;case 'thread':kb='thread_fbids';break;}}var ob={messages:{},threads:{},client:ib};if(kb){ob.messages[kb]={};ob.messages[kb][jb]={offset:eb,timestamp:gb,limit:fb};if(nb)ob.threads[kb]=[jb];this.__sendRequest('/ajax/mercury/thread_info.php',ob,hb);}else this.__threadIDMap.getServerIDFromClientID(db,(function(pb){ob.messages.thread_fbids={};ob.messages.thread_fbids[pb]={offset:eb,timestamp:gb,limit:fb};this.__sendRequest('/ajax/mercury/thread_info.php',ob,hb);}).bind(this));},handleThreadInfoError:function(db){var eb=db.getRequest().getData(),fb=[];if(eb.messages){for(var gb in eb.messages.thread_fbids)fb.push(this._createServerErrorLogMessage(this.__threadIDMap.getClientIDFromServerIDNow(gb)));for(var hb in eb.messages.user_ids)fb.push(this._createServerErrorLogMessage('user:'+hb));for(var ib in eb.messages.group_ids)fb.push(this._createServerErrorLogMessage('group:'+ib));}if(fb.length)this._dispatcher.handleUpdate({actions:fb,from_client:true,payload_source:y.CLIENT_CHANNEL_MESSAGE});if(eb.threads&&(eb.threads.user_ids||eb.threads.group_ids||eb.threads.thread_ids)){var jb=5,kb=true;if(!eb.retry_count){eb.retry_count=0;if(eb.messages)delete eb.messages;}else if(eb.retry_count>=jb){kb=false;(eb.threads.thread_ids||[]).forEach((function(mb){if(mb in this._fetchingThreads)delete this._fetchingThreads[mb];}).bind(this));}if(kb){var lb=Math.pow(2,eb.retry_count)*1000;oa((function(){pa.log('retry_thread',eb);this.__sendRequest('/ajax/mercury/thread_info.php',eb);}).bind(this),lb);eb.retry_count++;}}},markFolderAsRead:function(db){this.__sendRequest('/ajax/mercury/mark_folder_as_read.php',{folder:db});var eb=[{action_type:u.MARK_ALL_READ,action_id:null,folder:db}];this._dispatcher.handleUpdate({global_actions:eb,from_client:true,payload_source:y.CLIENT_CHANGE_READ_STATUS});},changeThreadReadStatus:function(db,eb,fb,gb,hb,ib){q.isThreadID(db);this.__threadIDMap.getServerIDFromClientID(db,(function(jb){var kb,lb={ids:(kb={},kb[jb]=eb,kb),source:fb,watermarkTimestamp:gb,titanOriginatedThreadId:hb,shouldSendReadReceipt:ib};this.__sendRequest('/ajax/mercury/change_read_status.php',lb);}).bind(this));},changeThreadArchivedStatus:function(db,eb,fb){q.isThreadID(db);this.__threadIDMap.getServerIDFromClientID(db,(function(gb){var hb={ids:{},source:fb};hb.ids[gb]=eb;this.__sendRequest('/ajax/mercury/change_archived_status.php',hb);}).bind(this));},changeThreadFolder:function(db,eb){q.isThreadID(db);this.__threadIDMap.getServerIDFromClientID(db,(function(fb){var gb={};gb[eb]=[fb];this.__sendRequest('/ajax/mercury/move_thread.php',gb);}).bind(this));},changeMutingOnThread:function(db,eb){q.isThreadID(db);this.__threadIDMap.getServerIDFromClientID(db,(function(fb){this.__sendRequest('/ajax/mercury/change_mute_thread.php',{thread_fbid:fb,mute_settings:eb,payload_source:qa});}).bind(this));},markThreadSpam:function(db,eb){q.isThreadID(db);this.__threadIDMap.getServerIDFromClientID(db,(function(fb){this.__sendRequest('/ajax/mercury/mark_spam.php',{id:fb,source:eb});}).bind(this));},unmarkThreadSpam:function(db,eb){q.isThreadID(db);this.__threadIDMap.getServerIDFromClientID(db,(function(fb){this.__sendRequest('/ajax/mercury/unmark_spam.php',{id:fb,source:eb});}).bind(this));},deleteThread:function(db,eb){q.isThreadID(db);this.__threadIDMap.getServerIDFromClientID(db,(function(fb){var gb={ids:[fb],source:eb};this.__sendRequest('/ajax/mercury/delete_thread.php',gb);}).bind(this));},unpinThread:function(db){q.isThreadID(db);this.__threadIDMap.getServerIDFromClientID(db,(function(eb){this.__sendRequest('/mercury/unpin_thread/',{id:eb});}).bind(this));},deleteMessages:function(db,eb){ga.getServerIDs(eb||[],(function(fb){this.__sendRequest('/ajax/mercury/delete_messages.php',{message_ids:fb});}).bind(this));},sendDeliveryReceipts:function(db,eb){ga.getServerIDs(db||[],(function(fb){this.__sendRequest('/ajax/mercury/delivery_
curyChannelHandler1);this.$MercuryChannelHandler2=t.getForFBID(this.$MercuryChannelHandler1);this.$MercuryChannelHandler3=p.getForFBID(this.$MercuryChannelHandler1);this.__delayedDispatcher=m.getForFBID(this.$MercuryChannelHandler1);this.$MercuryChannelHandler4=[];}ba.prototype.getInstanceFBID=function(){'use strict';return this.$MercuryChannelHandler1;};ba.prototype.$MercuryChannelHandler5=function(ca,da){'use strict';if(!this.$MercuryChannelHandler6(ca)||!da.obj||!da.obj.message)return;var ea=da.obj.message,fa=ea.other_user_fbid?ea.other_user_fbid:ea.thread_fbid;fa=fa.toString();var ga=k.transform(ea,da.obj.folder);if(this.__shouldDropMessageBecauseOfSync(ea))return;var ha=[babelHelpers._extends({},ga)];ha=ha.concat(ea.forward_actions||[]);var ia=q.CLIENT_CHANNEL_MESSAGE;this.__delayedDispatcher.handleUpdateWaitForThread({actions:ha,payload_source:ia},fa);};ba.prototype.$MercuryChannelHandler7=function(ca,da){'use strict';if(l.WWWSyncDeliveryReceipt)return;var ea=da.obj.other_user_fbid,fa=da.obj.thread_fbid;if(!this.$MercuryChannelHandler6(ca)||!ea&&!fa)return;this.__payloadPreprocessor.handleUpdate({delivery_receipts:[{other_user_fbid:ea?ea.toString():'',thread_fbid:fa?fa.toString():'',time:da.obj.timestamp}]});};ba.prototype.$MercuryChannelHandler8=function(ca,da){'use strict';if(!this.$MercuryChannelHandler6(ca)||!da.obj||!da.obj.thread_fbids&&!da.obj.other_user_fbids)return;var ea=[],fa=da.obj.event==v.READ;if(fa&&l.WWWSyncMarkRead)return;(da.obj.thread_fbids||[]).forEach(function(ga){ea.push({action_type:j.CHANGE_READ_STATUS,action_id:null,thread_fbid:ga,mark_as_read:fa,timestamp:da.obj.timestamp||0,folder:da.obj.folder_info[ga]});});(da.obj.other_user_fbids||[]).forEach(function(ga){ea.push({action_type:j.CHANGE_READ_STATUS,action_id:null,other_user_fbid:ga,mark_as_read:fa,timestamp:da.obj.timestamp||0,folder:da.obj.folder_info[ga]});});this.__payloadPreprocessor.handleUpdate({actions:ea,payload_source:q.CLIENT_CHANNEL_MESSAGE});};ba.prototype.$MercuryChannelHandler9=function(ca,da){'use strict';if(!this.$MercuryChannelHandler6(ca)||!da.obj||!(da.obj.thread_fbids||da.obj.other_user_fbids))return;var ea=[];(da.obj.thread_fbids||[]).forEach(function(fa){ea.push({action_type:j.DELETE_THREAD,action_id:null,thread_fbid:fa});});(da.obj.other_user_fbids||[]).forEach(function(fa){ea.push({action_type:j.DELETE_THREAD,action_id:null,other_user_fbid:fa});});this.__payloadPreprocessor.handleUpdate({actions:ea,payload_source:q.CLIENT_CHANNEL_MESSAGE});};ba.prototype.$MercuryChannelHandler10=function(ca,da){'use strict';if(!this.$MercuryChannelHandler6(ca)||!da.obj||!da.obj.thread_fbids&&!da.obj.other_user_fbids||!da.obj.mids)return;var ea=da.obj.thread_fbids.length?da.obj.thread_fbids[0]:null,fa=da.obj.other_user_fbids.length?da.obj.other_user_fbids[0]:null,ga={action_type:j.DELETE_MESSAGES,action_id:null,thread_fbid:ea,other_user_fbid:fa,message_ids:da.obj.mids};if(l.MessengerGlobalDeleteGK){if(da.obj.updated_thread)return;this.__payloadPreprocessor.handleUpdate({actions:[ga],payload_source:q.CLIENT_CHANNEL_MESSAGE});return;}this.__payloadPreprocessor.handleUpdate({actions:[ga],payload_source:q.CLIENT_CHANNEL_MESSAGE});};ba.prototype.$MercuryChannelHandler11=function(ca,da){'use strict';if(!this.$MercuryChannelHandler6(ca)||!da.obj||!da.obj.folder)return;var ea={action_type:n.MARK_ALL_READ,action_id:da.obj.action_id,folder:da.obj.folder};this.__payloadPreprocessor.handleUpdate({global_actions:[ea]});};ba.prototype.$MercuryChannelHandler12=function(ca,da){'use strict';if(!this.$MercuryChannelHandler6(ca)||!da.obj.thread_fbids&&!da.obj.other_user_fbids)return;var ea=q.CLIENT_CHANNEL_MESSAGE;(da.obj.thread_fbids||[]).forEach(function(fa){var ga={action_type:j.CHANGE_ARCHIVED_STATUS,action_id:null,thread_fbid:fa.toString(),other_user_fbid:null,archived:da.obj.state};this.__delayedDispatcher.handleUpdateWaitForThread({actions:[babelHelpers._extends({},ga)],payload_source:ea},fa.toString());},this);(da.obj.other_user_fbids||[]).forEach(function(fa){var ga={action_type:j.CHANGE_ARCHIVED_STATUS,action_id:null,thread_fbid:null,other_"
/ajax/mercury/attachments/photo.php?fbid=10201081669400900&height=206&mode=cover&width=206
__d('MessagesViewer',['AsyncRequest','Bootloader','DOM','MessagesViewerSetID','PhotoStore','React','ReactDOM','Run','emptyFunction','ge'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){if(c.__markCompiled)c.__markCompiled();var r={bootstrapWithElem:function(u){r.bootstrapWithConfig({fbid:u.getAttribute('data-fbid'),dimensions:u.getAttribute('data-dimensions'),src:u.getAttribute('href'),endpoint:u.getAttribute('data-endpoint'),disablePaging:u.getAttribute('data-disablepaging')},u);},bootstrapWithConfig:function(u,v){var w=u.setID;if(!w)w=k.MESSAGES;t(function(x,y){s(m.createElement(x,{actorid:u.actorid,dimensions:[u.dimensions],disablepaging:u.disablePaging,disableForward:u.disableForward,open:true,photoid:u.fbid,reverse:false,rootClassName:u.rootClassName,setid:w,snapToPhoto:u.snapToPhoto,thumbsrc:u.src}));if(!l.hasBeenCreated(w)&&u.endpoint){var z=new h(u.endpoint);if(v)z.setRelativeTo(v);z.send();}});},renderVideo:function(u){t(function(v,w){s(m.createElement(w,u));});},preload:function(){o.onAfterLoad(function(){return t(p);});}};function s(u){var v=q('messages_viewer');if(!v){v=j.create('div',{id:'messages_viewer'});document.body.appendChild(v);}u=n.render(u,v);u.subscribeOnce('close',function(){n.unmountComponentAtNode(v);});}function t(u){i.loadModules(["SpotlightMessagesViewer","MessagingVideoViewer.react"],u);}f.exports=r;},null);
__d('MessengerPhotosGroup.react',['ChatSpeakingSticker.react','MercuryAttachmentType','MercuryConfig','MessengerPhoto.react','MessengerVideo.react','MessagesViewer','ReactComponentWithPureRenderMixin','React','Vector','cx','joinClasses'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){'use strict';if(c.__markCompiled)c.__markCompiled();var s='empty-spacer',t=o.PropTypes,u=o.createClass({displayName:'MessengerPhotosGroup',mixins:[n],propTypes:{attachType:t.string,attachments:t.arrayOf(t.object).isRequired,message:t.object},componentDidMount:function(){m.preload();},render:function(){var v=this.props.attachments;return (o.createElement('div',{className:this._getRootClassNameFor(v)},this._rowsFor(v)));},_onChildClicked:function(v){if(v.preview_uploading)return;if(v.attach_type===i.VIDEO){m.renderVideo({disableForward:true,rootClassName:"_1j1h",videoID:v.metadata.fbid,videoSize:new p(v.metadata.dimensions.width,v.metadata.dimensions.height),videoURI:v.url});}else if(v.attach_type===i.PHOTO||v.attach_type===i.ANIMATED_IMAGE){m.bootstrapWithConfig({dimensions:v.metadata.dimensions,disablePaging:this.props.attachments.length===1,disableForward:!j.MessengerForwardingEnabled,endpoint:v.url,fbid:v.metadata.fbid,rootC
_fbid
_batch:[this.pending_message],client:this.client},null,this.sender_id,this.queue_id);};p.prototype.$MercuryServerSendMessageQueue7=function(){'use strict';while(this.queue.length)this.$MercuryServerSendMessageQueue8(this.queue.shift());};p.prototype.$MercuryServerSendMessageQueue8=function(q){'use strict';this.$MercuryServerSendMessageQueue2(m.create(q));o.error('mark_as_failed',{fbid:this.sender_id,queue_id:this.queue_id,message:j.obfuscateMessage(q)});};p.prototype.handleSuccess=function(q,r){'use strict';this.$MercuryServerSendMessageQueue1(q,r);this.pending_message=null;this.$MercuryServerSendMessageQueue5();};p.prototype.handleError=function(q){'use strict';this.$MercuryServerSendMessageQueue2(q);this.$MercuryServerSendMessageQueue7();this.pending_message=null;};p.prototype.handleTransportError=function(q){'use strict';this.$MercuryServerSendMessageQueue3(q);this.$MercuryServerSendMessageQueue7();this.pending_message=null;};p.prototype.handleTimeout=function(q){'use strict';this.$MercuryServerSendMessageQueue4(q);this.$MercuryServerSendMessageQueue7();this.pending_message=null;};p.prototype.$MercuryServerSendMessageQueue6=function(){'use strict';o.debug('maybe_send_next_pending_message',{fbid:this.sender_id,queue_id:this.queue_id,pending_message:j.obfuscateMessage(this.pending_message),queue:this.queue.map(function(r){return j.obfuscateMessage(r);})});var q='send_queue.delayed.queue_length.'+this.queue.length.toString();h.bumpEntityKey('chat.web',q);};f.exports=p;},null);
__d('MercuryServerSendMessageQueueRouter',['BanzaiODS','LogHistory','Map','MercuryServerSendMessageQueue','MercurySingletonMixin'],function a(b,c,d,e,f,g,h,i,j,k,l){if(c.__markCompiled)c.__markCompiled();var m=i.getInstance('mercury_server_send_message_queue_router'),n='chat.web.send_queue_router';h.setEntitySample(n,.1);function o(p){'use strict';this.fbid=p;this.queues=new j();}o.prototype.enqueue=function(p,q,r,s){'use strict';if(!this.queues.has(p)){this.queues.set(p,new k(this.fbid,p,q,r));m.debug('added queue',{fbid:this.fbid,queue_id:p});h.bumpEntityKey(n,'new_queue');}this.queues.get(p).enqueue(s);};Object.assign(o,l);f.exports=o;},null);
__d('ImageSourceRequest',['CurrentUser','ImageSourceType','KeyedCallbackManager','PhotoResizeModeConst','MercuryServerDispatcher','arrayContains'],function a(b,c,d,e,f,g,h,i,j,k,l,m){if(c.__markCompiled)c.__markCompiled();function n(){'use strict';this._request={fbid:null,type:null,width:null,height:null,resize_mode:null};this._callback=null;}n.prototype.setFBID=function(r){'use strict';this._request.fbid=r;return this;};n.prototype.setType=function(r){'use strict';if(!m([i.PROFILE_PICTURE,i.IMAGE],r))throw new TypeError('ImageSourceRequest.setType: invalid type '+r);this._request.type=r;return this;};n.prototype.setDimensions=function(r,s){'use strict';this._request.width=r;this._request.height=s;return this;};n.prototype.setResizeMode=function(r){'use strict';if(!m([k.COVER,k.CONTAIN],r))throw new TypeError('ImageSourceRequest.setResizeMode: invalid resize mode '+r);this._request.resize_mode=r;return this;};n.prototype.setCallback=function(r){'use strict';this._callback=r;return this;};n.prototype.send=function(){'use strict';if(!this._request.fbid||!this._request.width||!this._request.height||!this._request.type||!this._request.resize_mode||!this._callback)throw new Error('ImageSourceRequest: You must set all the fields');var r=p(),s=q(this._request);r.executeOrEnqueue(s,this._callback);if(r.getUnavailableResourcesFromRequest(s).length===1){l.trySend('/ajax/image_source.php',{requests:[this._request]});return true;}return false;};var o=null;function p(){if(o)return o;var r=new j();o=r;l.registerEndpoints({'/ajax/image_source.php':{request_user_id:h.getID(),mode:l.BATCH_DEFERRED_MULTI,batch_function:function(s,t){var u;(u=s.requests).push.apply(u,t.requests);return s;},handler:function(s,t){var u=t.getData().requests;for(var v=0;v<u.length;++v)r.setResource(q(u[v]),s[v]);}}});return r;}function q(r){return [r.fbid,r.type,r.width,r.height,r.resize_mode].join('|');}f.exports=n;},null);
__d('MercurySyncMarkReadTransformer',['MercuryActionType','MessagingTag'],function a(b,c,d,e,f,g,h,i){'use strict';if(c.__markCompiled)c.__markCompiled();function j(k){return k.threadKeys.map(function(l){return {action_type:h.CHANGE_READ_STATUS,action_id:null,other_user_fbid:l.otherUserFbId,thread_fbid:l.threadFbId,mark_as_read:true,timestamp:parseInt(k.watermarkTimestamp,10),folder:i.INBOX};});}f.exports={transform:j};},null);
__d('MercurySyncNewMessageTransformer',['IrisProtocolMessageLifetime','MercuryActionType','MercuryIDs','MercuryTimestamp','MessagingTag'],function a(b,c,d,e,f,g,h,i,j,k,l){'use strict';if(c.__markCompiled)c.__markCompiled();function m(n,o){var p=parseInt(o.messageMetadata.timestamp,10),q=k.getFormatedTimestamp(p),r=[];if(o.attachments)r=o.attachments.map(function(t){return t.mercury;});var s=o.messageMetadata.tags?o.messageMetadata.tags[0]:undefined;return {message_id:o.messageMetadata.messageId,threading_id:null,offline_threading_id:o.messageMetadata.offlineThreadingId,author:j.getParticipantIDFromUserID(o.messageMetadata.actorFbId),author_email:o.messageMetadata.actorFbId+'@facebook.com',ephemeral_ttl_mode:o.ttl?h[o.ttl]:0,timestamp:p,timestamp_absolute:q.absolute,timestamp_relative:q.relative,timestamp_datetime:q.relative,timestamp_time_passed:k.getTimeBucket(p),is_unread:n!==o.messageMetadata.actorFbId,is_forward:false,is_filtered_content:false,is_filtered_content_bh:false,is_filtered_content_account:false,is_filtered_content_quasar:false,is_filtered_content_invalid_app:false,forward_count:0,forward_message_ids:[],source:s,is_spoof_warning:false,folder:l.INBOX,thread_fbid:o.messageMetadata.threadKey.threadFbId,other_user_fbid:o.messageMetadata.threadKey.otherUserFbId,body:o.body!==undefined?o.body:'',html_body:null,subject:null,has_attachment:r.length>0,attachments:r,ranges:undefined,thread_id:null,action_id:null,action_type:i.USER_GENERATED_MESSAGE,is_from_iris:true};}f.exports={transform:m};},null);
__d('MercuryServerPayloadPreprocessor',['CurrentEnvironment','MercuryIDs','MercuryConfig','MercuryActionStatus','MercuryActionType','MercuryAttachment','MercuryDispatcher','MercurySendErrorLogger','MercurySingletonMixin','MercuryThreadIDMap','StoryAttachmentStyle','invariant','URI'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t){'use strict';if(c.__markCompiled)c.__markCompiled();function u(v){this.$MercuryServerPayloadPreprocessor1=v;this.$MercuryServerPayloadPreprocessor2=q.getForFBID(this.$MercuryServerPayloadPreprocessor1);this.$MercuryServerPayloadPreprocessor3=n.getForFBID(this.$MercuryServerPayloadPreprocessor1);}u.prototype.handleUpdate=function(v){var w={};!!v.from_client?s(0):undefined;(v.threads||[]).forEach((function(oa){this.$MercuryServerPayloadPreprocessor4(oa,w);var pa=this.$MercuryServerPayloadPreprocessor2.getServerIDFromClientIDNow(oa.thread_id);e(['MercuryServerRequests'],(function(qa){var ra=qa.getForFBID(this.$MercuryServerPayloadPreprocessor1);ra.markThreadFetched(oa.thread_id);ra.markThreadFetched(pa);ra.updateLastActionTimestamp(oa.timestamp);}).bind(this));}).bind(this));(v.ordered_threadlists||[]).forEach((function(oa){var pa=oa.thread_fbids||[];pa=pa.concat(oa.other_user_fbids||[]);oa.thread_ids=pa.map((function(qa){return this.$MercuryServerPayloadPreprocessor2.getClientIDFromServerIDNow(qa.toString());}).bind(this));}).bind(this));if(v.pinned_threads&&v.pinned_threads.thread_fbids)v.pinned_threads.thread_fbids=v.pinned_threads.thread_fbids.map((function(oa){return this.$MercuryServerPayloadPreprocessor2.getClientIDFromServerIDNow(oa);}).bind(this));if(v.delivery_receipts){var x={};for(var y=v.delivery_receipts,z=Array.isArray(y),aa=0,y=z?y:y[typeof Symbol==='function'?Symbol.iterator:'@@iterator']();;){var ba;if(z){if(aa>=y.length)break;ba=y[aa++];}else{aa=y.next();if(aa.done)break;ba=aa.value;}var ca=ba,da=ca.other_user_fbid?i.getThreadIDFromUserID(ca.other_user_fbid):this.$MercuryServerPayloadPreprocessor2.getClientIDFromServerIDNow(ca.thread_fbid);x[da]=ca.time;}v.delivery_receipts=x;}v.actions=v.actions||[];v.actions.forEach((function(oa){if(oa.action_type===l.SEND_MESSAGE&&oa.status===k.ERROR)o.log(oa);var pa=null,qa=null;if(oa.other_user_fbid){qa=i.getThreadIDFromUserID(oa.other_user_fbid);pa=oa.other_user_fbid;}else if(oa.thread_fbid){qa=i.getThreadIDFromThreadFBID(oa.thread_fbid);pa=oa.thread_fbid;}else if(oa.thread_id){qa=i.getThreadIDFromThreadFBID(oa.thread_id);pa=oa.thread_id;}else if(oa.status&&oa.status!=k.SUCCESS&&oa.client_thread_id){qa=oa.client_thread_id;}else s(0);pa=pa&&pa.toString();oa.thread_id=this.$MercuryServerPayloadPreprocessor2.hasClientIDForServerID(pa)?this.$MercuryServerPayloadPreprocessor2.getClientIDFromServerIDNow(pa):qa;if(oa.action_type==l.SEND_MESSAGE&&oa.client_thread_id&&pa){oa.thread_id=oa.client_thread_id;this.$MercuryServerPayloadPreprocessor2.forceSetServerIDToClientID(pa,oa.client_thread_id);w[pa]=oa.client_thread_id;}!oa.thread_id?s(0):undefined;if(!v.payload_source||!v.payload_source.startsWith('server'))e(['MercuryServerRequests'],(function(ra){ra.getForFBID(this.$MercuryServerPayloadPreprocessor1).updateLastActionTimestamp(oa.timestamp);}).bind(this));}).bind(this));this.$MercuryServerPayloadPreprocessor5(v);this.$MercuryServerPayloadPreprocessor6(v);if(v.end_of_history){var ea=[];for(var fa=0;fa<v.end_of_history.length;fa++){var ga=v.end_of_history[fa];if(ga.type=='user'){ea.push('user:'+ga.fbid);}else if(
_timestamp){pa._lastSeenTimestamp=ra.seen_timestamp;if(ra.unseen_count>w){pa._maxCount=true;ca(pa,{});}else{pa._initialUnseenCount=ra.unseen_count;if(pa._initialUnseenCount===0)ca(pa,{});}}else{if(pa._maxCount)return;var sa=qa.actions;if(!sa||!sa.length)return;var ta={},ua={};for(var va=0;va<sa.length;va++){var wa=sa[va];if(wa.is_forward)continue;var xa=wa.action_type,ya=wa.other_user_fbid?wa.other_user_fbid:wa.thread_fbid,za=wa.thread_id?wa.thread_id:ya;if(xa==k.MARK_THREAD_SEEN){ba(pa,za,wa.persistent);continue;}if(!na(pa,wa))continue;if(xa==k.USER_GENERATED_MESSAGE||xa==k.LOG_MESSAGE){var ab=ta[za]?wa.timestamp>ta[za]:false,bb=ab||!ta[za];if(wa.is_unread&&bb)pa._threads.getThreadMeta(za,function(cb){var db=false;if(cb&&cb.last_read_timestamp)if(cb.last_read_timestamp>=wa.timestamp)db=true;if(!n.isMuted(cb)&&!db)ta[za]=wa.timestamp;});}else if(xa==k.CHANGE_READ_STATUS&&wa.mark_as_read)ua[za]=wa.timestamp;}ia(pa,ta);ja(pa,ua);}if(pa._pendingServerUpdates){pa._pendingServerUpdates=false;pa.markAsSeen();}}function ha(pa,qa,ra){var sa=ea(pa);if(sa===undefined||qa>pa._lastSeenTimestamp||pa._maxCount){pa._lastSeenTimestamp=qa;ra=ra||[];if(ra.length<=w)pa._maxCount=false;var ta={},ua=ea(pa)||{};for(var va in ua)if(ua[va]!==true){var wa=ua[va];if(ka(pa,wa))ta[va]=wa;}var xa=Object.assign(u(ra,true),ta);ca(pa,xa);pa._threadInformer.updatedUnseenState();}}function ia(pa,qa){if(pa._maxCount)return;var ra={},sa=false;for(var ta in qa){var ua=qa[ta];if(ka(pa,ua)){ra[ta]=ua;sa=true;}}if(!sa)return;da(pa,function(va){for(var wa in ra){var xa=ra[wa];if(!va[wa]&&ka(pa,xa))va[wa]=ra[wa];}ca(pa,va);pa._threadInformer.updatedUnseenState();});}function ja(pa,qa,ra){var sa=false;if(!v(qa))sa=true;if(sa)da(pa,function(ta){var ua=false;for(var va in qa){var wa=qa[va],xa=wa>=ta[va];if(ta[va]&&(!wa||xa)){delete ta[va];ua=true;}}if(ua){ca(pa,ta);pa._threadInformer.updatedUnseenState();if(ra&&fa(pa)===0)pa._serverRequests.markSeen();}});}function ka(pa,qa){return qa>pa._lastSeenTimestamp;}function la(pa,qa){return qa.map(pa._threadIDMap.convertThreadIDIfAvailable,pa._threadIDMap);}function ma(pa,qa){var ra=ea(pa);if(!ra)return;for(var sa in qa){var ta=qa[sa];if(ra[sa]){ra[ta]=ra[sa];delete ra[sa];}}ca(pa,ra);}function na(pa,qa){var ra=qa.thread_id?pa._threads.getThreadMetaNow(qa.thread_id):null,sa=ra?h.getFromMeta(ra):qa.folder;return sa===q.INBOX||sa===undefined;}function oa(pa){var qa=pa.message_counts||[];for(var ra=0;ra<qa.length;ra++)if(qa[ra].folder==q.INBOX)return qa[ra];return null;}f.exports=aa;},null);
;this.$MercuryThreads10=new ea();this.$MercuryThreads11=new ea();this.$MercuryThreads12();}ka.getForFBID=function(ma){return la.getForFBID(ma);};ka.get=function(){return la.get();};ka.prototype.getThreadMetaNow=function(ma){o.isThreadID(ma);return this.$MercuryThreads7.getResource(ma);};ka.prototype.getOrFetch=function(ma){var na=this.getThreadMetaNow(ma);if(!na&&!this.$MercuryThreads11.has(ma))this.$MercuryThreads10.add(ma);if(this.$MercuryThreads10.size>0&&!this.$MercuryThreads9)this.$MercuryThreads13();return na;};ka.prototype.$MercuryThreads13=function(){if(this.$MercuryThreads9)return;this.$MercuryThreads9=true;ha((function(){this.$MercuryThreads9=false;this.$MercuryThreads10.forEach((function(ma){return this.$MercuryThreads11.add(ma);}).bind(this));this.getMultiThreadMeta(Array.from(this.$MercuryThreads10),(function(ma){for(var na in ma)ma.hasOwnProperty(na)&&this.$MercuryThreads11['delete'](na);}).bind(this));this.$MercuryThreads10.clear();}).bind(this));};ka.prototype.getThreadMeta=function(ma,na,oa){return this.getMultiThreadMeta([ma],function(pa){return na(pa[ma]);},oa);};ka.prototype.getMultiThreadMeta=function(ma,na,oa){o.allThreadID(ma);var pa=this.$MercuryThreads7.executeOrEnqueue(ma,na),qa=this.$MercuryThreads7.getUnavailableResources(pa);if(qa.length){var ra=[];for(var sa=0;sa<qa.length;sa++){var ta=qa[sa],ua=u.tokenize(ta),va=ua.type,wa=ua.value;if(va=='user'){var xa=u.getParticipantIDFromUserID(wa);this.createNewLocalThread(ta,xa===this.$MercuryThreads4?[this.$MercuryThreads4]:[this.$MercuryThreads4,xa]);}else ra.push(ta);}if(ra.length)this.$MercuryThreads2.fetchThreadData(ra,oa);}return pa;};ka.addListener=function(ma,na){return ia.addListener(ma,na);};ka.prototype.unsubscribe=function(ma){this.$MercuryThreads7.unsubscribe(ma);};ka.prototype.getCanonicalThreadToParticipant=function(ma,na,oa,pa){var qa=u.getThreadIDFromParticipantID(ma),ra=this.$MercuryThreads7.getResource(qa);if(typeof ra=='undefined'){ra=this.createNewLocalThread(qa,this.$MercuryThreads4===ma?[this.$MercuryThreads4]:[this.$MercuryThreads4,ma],na);!pa&&this.$MercuryThreads2.fetchThreadData([qa],oa);}return ra;};ka.prototype.createNewLocalThread=function(ma,na,oa){var pa=this.$MercuryThreads7.getResource(ma);if(!pa){var qa=u.tokenize(ma),ra=qa.type,sa=qa.value;pa=new i({thread_id:ma,participants:Array.from(na),name:'',snippet:'',snippet_has_attachment:false,snippet_sender:null,unread_count:oa?oa:0,message_count:0,image_src:null,timestamp_absolute:null,timestamp_relative:null,timestamp:null,other_user_fbid:ra==='user'?sa:null,is_canonical_user:ra=='user',is_canonical:this.$MercuryThreads14(na),is_subscribed:true,folder:ca.INBOX,is_archived:false});this.$MercuryThreads7.setResource(ma,pa);}return pa;};ka.prototype.isEmptyLocalThread=function(ma){var na=this.$MercuryThreads7.getResource(ma);if(!na)return false;return aa.isEmptyLocalThread(na);};ka.prototype.isNewEmptyLocalThread=function(ma){var na=this.$MercuryThreads7.getResource(ma);if(!na)return false;return aa.isNewEmptyLocalThread(na);};ka.prototype.$MercuryThreads15=function(ma,na){if(!ma||!ma.length)return;var oa=new l(),pa=new l(),qa=new l(),ra=[];for(var sa=0;sa<ma.length;sa++){var ta=ma[sa];if(ta.is_forward)continue;var ua=ta.action_type;if(ua==m.LOG_MESSAGE&&ta.log_message_type==v.SERVER_ERROR)continue;var va=!!(ta.sync_id||ta.action_id||ta.is_from_iris),wa=ta.thread_id;o.isThreadID(wa);var xa=this.$MercuryThreads7.getResource(wa);if(!xa&&!va&&ua==m.USER_GENERATED_MESSAGE){xa=this.$MercuryThreads16(ta);this.$MercuryThreads7.setResource(wa,xa);}if(!xa)continue;if(ua==m.LOG_MESSAGE||ua==m.USER_GENERATED_MESSAGE)va=!na;if(xa.server_timestamp&&ta.timestamp<=xa.server_timestamp&&va)continue;if(!qa.has(wa))qa.set(wa,babelHelpers._extends({},xa));this.$MercuryThreads17(qa.get(wa),ta,na);if(ua==m.USER_GENERATED_MESSAGE)oa.set(wa,ta);if(ua==m.USER_GENERATED_MESSAGE||ua==m.LOG_MESSAGE||ua==m.SEND_MESSAGE)if(ta&&ta.timestamp&&(!pa.has(wa)||ta.timestamp>pa.get(wa).timestamp))pa.set(wa,ta);}qa.forEach((function(ya,za){var ab=pa.get(za),bb=oa.get(za);if(bb){this.$MercuryThreads18(ya,bb);}els-
__d('MessengerPresenceStatusUtils',['AvailableListConstants','LastMobileActiveTimes','MercuryIDs','PresenceStatus','fbt'],function a(b,c,d,e,f,g,h,i,j,k,l){'use strict';if(c.__markCompiled)c.__markCompiled();var m={getStatusFromCanonicalThread:function(n,o){var p=null;if(o&&o.is_canonical){var q=n.get(j.getParticipantIDFromFromThreadID(o.thread_id));if(q){var r=k.get(q.fbid),s,t,u=q.is_messenger_user?l._("Messenger"):l._("Facebook");if(r!==h.ACTIVE){s=i.get(q.fbid);t=i.getShortDisplay(q.fbid);}p={contact:q,platform:u,isUserActive:r===h.ACTIVE,lastActiveTS:s,lastActive:t};}}return p;}};f.exports=m;},null);
__d('MercuryLogMessageRenderer',['Bootloader','CSS','HovercardLink','MercuryViewer','MessagesViewer','MercuryLogMessageType','MessagingGenericAdminTextType','MercuryParticipants','React','ReactDOM','Image.react','TextWithEntities.react','TooltipLink.react','MercuryRtcCallLogMessage.react','cx','fbt','ix'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x){if(c.__markCompiled)c.__markCompiled();var y={renderText:function(na,oa){switch(na.log_message_type){case m.SUBSCRIBE:ba(na,oa);break;case m.UNSUBSCRIBE:ga(na,oa);break;case m.THREAD_NAME:ha(na,oa);break;case m.THREAD_IMAGE:ia(na,oa);break;case m.WALLPAPER:ja(na,oa);break;case m.GENERIC_ADMIN_TEXT:ka(na,oa);break;default:h.loadModules(["MercurySpecialLogMessageRenderer"],function(pa){pa.renderText(na,oa);});break;}},renderIcon:function(na){return (p.createElement(r,{className:z(na),src:x('images/spacer.gif')}));},renderLegacy:function(na,oa,pa,qa){z(qa).split(' ').forEach(function(ra){return ra&&i.addClass(na,ra);});this.renderText(qa,function(ra){q.render(p.createElement('span',null,ra),oa);});this.renderAttachmentLegacy(pa,qa);},renderAttachmentLegacy:function(na,oa){if(oa.log_message_type==m.THREAD_IMAGE){var pa=oa.log_message_data.image;if(pa&&pa.preview_url){q.render(p.createElement(r,{className:"_z6a",onClick:function(){return aa(pa);},src:pa.preview_url}),na);i.show(na);}}}};f.exports=y;function z(na){var oa=na.log_message_type,pa=na.log_message_data;return "_5wzu"+(oa==m.SUBSCRIBE?' '+"_5wzj":'')+(oa==m.UNSUBSCRIBE?' '+"_5wzk":'')+(oa==m.THREAD_NAME?' '+"_5wzl":'')+(oa==m.THREAD_IMAGE?' '+"_5wzm":'')+(oa==m.VIDEO_CALL&&pa.answered?' '+"_5wzn":'')+(oa==m.VIDEO_CALL&&!pa.answered?' '+"_5wzo":'')+(oa==m.PHONE_CALL&&pa.answered?' '+"_5wzp":'')+(oa==m.PHONE_CALL&&!pa.answered?' '+"_5wzq":'')+(oa==m.SERVER_ERROR?' '+"_5wzr":'');}function aa(na){l.bootstrapWithConfig({src:na.preview_url,endpoint:na.url,fbid:na.metadata.fbid,dimensions:na.metadata.dimensions,disablePaging:true},null);}function ba(na,oa){var pa=ma(na.log_message_data.added_participants);switch(pa.length){case 1:ca(na,oa,pa);break;case 2:da(na,oa,pa);break;case 3:ea(na,oa,pa);break;default:fa(na,oa,pa);break;}}function ca(na,oa,pa){var qa=[na.author,pa[0]];o.getMulti(qa,function(ra){if(na.author==k.getID()){oa(w._("You added {subscriber1}.",[w.param('subscriber1',la(ra[pa[0]]))]));}else if(pa[0]==k.getID()){oa(w._("{actor} added you.",[w.param('actor',la(ra[na.author]))]));}else oa(w._("{actor} added {subscriber1}.",[w.param('actor',la(ra[na.author])),w.param('subscriber1',la(ra[pa[0]]))]));});}function da(na,oa,pa){var qa=[na.author].concat(pa);o.getMulti(qa,function(ra){if(na.author==k.getID()){oa(w._("You added {subscriber1} and {subscriber2}.",[w.param('subscriber1',la(ra[pa[0]])),w.param('subscriber2',la(ra[pa[1]]))]));}else if(pa[0]==k.getID()){oa(w._("{actor} added you and {subscriber2}.",[w.param('actor',la(ra[na.author])),w.param('subscriber2',la(ra[pa[1]]))]));}else oa(w._("{actor} added {subscriber1} and {subscriber2}.",[w.param('actor',la(ra[na.author])),w.param('subscriber1',la(ra[pa[0]])),w.param('subscriber2',la(ra[pa[1]]))]));});}function ea(na,oa,pa){var qa=[na.author].concat(pa);o.getMulti(qa,function(ra){if(na.author==k.getID()){oa(w._("You added {subscriber1}, {subscriber2} and {subscriber3}.",[w.param('subscriber1',la(ra[pa[0]])),w.param('subscriber2',la(ra[pa[1]])),w.param('subscriber3',la(ra[pa[2]]))]));}else if(pa[0]==k.getID()){oa(w._("{actor} added you, {subscriber2} and {subscriber3}.",[w.param('actor',la(ra[na.author])),w.param('subscriber2',la(ra[pa[1]])),w.param('subscriber3',la(ra[pa[2]]))]));}else oa(w._("{actor} added {subscriber1}, {subscriber2} and {subscriber3}.",[w.param('actor',la(ra[na.author])),w.param('subscriber1',la(ra[pa[0]])),w.param('subscriber2',la(ra[pa[1]])),w.param('subscriber3',la(ra[pa[2]]))]));});}function fa(na,oa,pa){var qa=[na.author].concat(pa);o.getMulti(qa,function(ra){function sa(ua){var va=p.createElement('div',null,ua.map(function(wa){return p.createElement('div',null,wa.name);}))e
__handleUpdate(fb,gb);}).bind(this),connection_retries:3},'/ajax/mercury/thread_info.php':{request_user_id:this._fbid,mode:ja.BATCH_DEFERRED_MULTI,customHeader:db,batch_function:ta,handler:(function(fb,gb){return this.__handleUpdate(fb,gb);}).bind(this),error_handler:(function(fb){return this._handleThreadInfoError(fb);}).bind(this)},'/ajax/mercury/mark_folder_as_read.php':{request_user_id:this._fbid,mode:ja.IMMEDIATE,customHeader:db,handler:(function(fb,gb){return this.__handleUpdate(fb,gb);}).bind(this)},'/ajax/mercury/change_read_status.php':{request_user_id:this._fbid,mode:ja.BATCH_SUCCESSIVE,customHeader:db,batch_function:wa,handler:(function(fb,gb){return this.__handleUpdate(fb,gb);}).bind(this)},'/ajax/mercury/mark_seen.php':{request_user_id:this._fbid,mode:ja.BATCH_SUCCESSIVE,customHeader:db,batch_function:xa,handler:(function(fb,gb){return this.__handleUpdate(fb,gb);}).bind(this)},'/ajax/mercury/threadlist_info.php':{request_user_id:this._fbid,mode:ja.BATCH_SUCCESSIVE_UNIQUE,customHeader:db,batch_function:va,handler:(function(fb,gb){return this.__handleUpdate(fb,gb);}).bind(this)},'/ajax/mercury/mark_spam.php':{request_user_id:this._fbid,mode:ja.IMMEDIATE,customHeader:db,handler:(function(fb,gb){return this.__handleUpdate(fb,gb);}).bind(this)},'/ajax/mercury/unmark_spam.php':{request_user_id:this._fbid,mode:ja.IMMEDIATE,customHeader:db,handler:(function(fb,gb){return this.__handleUpdate(fb,gb);}).bind(this)},'/ajax/mercury/unread_threads.php':{request_user_id:this._fbid,mode:ja.BATCH_SUCCESSIVE_UNIQUE,customHeader:db,batch_function:ua,handler:(function(fb,gb){return this.__handleUpdate(fb,gb);}).bind(this)},'/ajax/chat/settings.php':{request_user_id:this._fbid,mode:ja.IMMEDIATE,customHeader:db},'/ajax/mercury/change_archived_status.php':{request_user_id:this._fbid,mode:ja.BATCH_SUCCESSIVE,customHeader:db,batch_function:za,handler:(function(fb,gb){return this.__handleUpdate(fb,gb);}).bind(this)},'/ajax/mercury/delete_thread.php':{request_user_id:this._fbid,mode:ja.BATCH_SUCCESSIVE,customHeader:db,batch_function:bb,handler:(function(fb,gb){return this.__handleUpdate(fb,gb);}).bind(this)},'/ajax/mercury/delete_messages.php':{request_user_id:this._fbid,mode:ja.IMMEDIATE,customHeader:db,handler:(function(fb,gb){return this.__handleUpdate(fb,gb);}).bind(this)},'/ajax/mercury/delivery_receipts.php':{request_user_id:this._fbid,mode:ja.IMMEDIATE,customHeader:db,handler:(function(fb,gb){return this.__handleUpdate(fb,gb);}).bind(this)},'/ajax/mercury/move_thread.php':{request_user_id:this._fbid,mode:ja.BATCH_SUCCESSIVE,customHeader:db,batch_function:ab,handler:(function(fb,gb){return this.__handleUpdate(fb,gb);}).bind(this)},'/ajax/mercury/change_mute_thread.php':{request_user_id:this._fbid,mode:ja.IMMEDIATE,customHeader:db,handler:(function(fb,gb){return this.__handleUpdate(fb,gb);}).bind(this)},'/mercury/pinned_threads/':{request_user_id:this._fbid,mode:ja.BATCH_SUCCESSIVE_UNIQUE,customHeader:db,handler:(function(fb,gb){return this.__handleUpdate(fb,gb);}).bind(this)},'/mercury/unpin_thread/':{request_user_id:this._fbid,mode:ja.IMMEDIATE,customHeader:db,handler:(function(fb,gb){return this.__handleUpdate(fb,gb);}).bind(this)}};ja.registerEndpoints(eb);},__sendRequest:function(db,eb,fb){ja.trySend(db,eb,fb,this._fbid);}});Object.assign(cb,da);f.exports=cb;},null);
"ka){var la=ja._threads.getThreadMetaNow(ka),ma=[k.ALL];if(!la){var na={error:'no_thread_metadata',tid:ka};w.warn('no_thread_metadata',na);return [];}if(la.unread_count)ma.push(p.UNREAD);if(!la.is_canonical)ma.push(p.GROUPS);var oa=la.page_thread_info;if(oa&&oa.flagged)ma.push(q.FLAG);return ma;}function ga(ja,ka,la,ma){var na=ja._threads.getThreadMetaNow(ka);return !!(na&&na.timestamp&&ea(ja,ka)==la&&v(fa(ja,ka),ma));}function ha(ja){this._fbid=ja;this._serverRequests=s.getForFBID(this._fbid);this._threadIDMap=o.getForFBID(this._fbid);this._threadInformer=t.getForFBID(this._fbid);this._threads=u.getForFBID(this._fbid);this._dispatcher=j.getForFBID(this._fbid);this._threadlistOrderMap={};y.forEach((function(ka){this._threadlistOrderMap[ka]={};x.forEach((function(la){this._threadlistOrderMap[ka][la]=new r((function(ma){return this._threads.getThreadMetaNow(ma).timestamp;}).bind(this),function(ma,na){return na-ma;},this._threadIDMap.canLinkExternally.bind(this._threadIDMap));}).bind(this));}).bind(this));this._dispatcher.subscribe('update-threadlist',(function(ka,la){if(!ia(la))return;var ma=la.ordered_threadlists;if(ma&&ma.length){aa(this,ma);}else{var na=(la.actions||[]).filter(function(oa){return oa.thread_id;});ca(this,la.threads||[]);ba(this,na);}this._threadInformer.updatedThreadlist();}).bind(this));}Object.assign(ha.prototype,{getThreadlistOrderMap:function(ja,ka){if(!this._threadlistOrderMap[ja][ka]){x=x.concat([ka]);y.forEach((function(la){this._threadlistOrderMap[la][ka]=new r((function(ma){return this._threads.getThreadMetaNow(ma).timestamp;}).bind(this),function(ma,na){return na-ma;},this._threadIDMap.canLinkExternally.bind(this._threadIDMap));}).bind(this));}return this._threadlistOrderMap[ja][ka];},getThreadlist:function(ja,ka,la,ma,na,oa){return this.getFilteredThreadlist(ja,ka,la,k.ALL,ma,na,oa);},getFilteredThreadlist:function(ja,ka,la,ma,na,oa,pa){var qa=this.getThreadlistOrderMap(la,ma),ra=qa.executeOrEnqueue(ja,ka,na,oa),sa=qa.getUnavailableResources(ra),ta=qa.getError(ja,ka,oa);if(sa.length||ta){if(qa.getCurrentArraySize()<ja){var ua={start:ja,limit:ka,filter:ma,resources_size:qa.getCurrentArraySize()};w.warn('range_with_gap',ua);}qa.setError(false);this._serverRequests.fetchThreadlistInfo(qa.getCurrentArraySize(),sa.length,la,ma==k.ALL?null:ma,pa);}return ra;},getThreadlistUntilTimestamp:function(ja,ka,la){la=la||k.ALL;return this.getThreadlistOrderMap(ka,la).getElementsUntil(ja);},getAvailableThreadlistNow:function(ja,ka){ka=ka||k.ALL;return this.getThreadlistOrderMap(ja,ka).getAllResources();},getThreadCount:function(ja,ka){ka=ka||k.ALL;return this.getThreadlistOrderMap(ja,ka).getCurrentArraySize();},hasLoadedThreadlist:function(ja,ka){ka=ka||k.ALL;return this.getThreadlistOrderMap(ja,ka).hasReachedEndOfArray();},unsubscribe:function(ja,ka,la){la=la||k.ALL;this.getThreadlistOrderMap(ka,la).unsubscribe(ja);}});Object.assign(ha,n);function ia(ja){switch(ja.payload_source){case m.CLIENT_CHANGE_ARCHIVED_STATUS:case m.CLIENT_CHANGE_READ_STATUS:case m.CLIENT_CHANGE_FOLDER:case m.CLIENT_CHANNEL_MESSAGE:case m.CLIENT_DELETE_MESSAGES:case m.CLIENT_DELETE_THREAD:case m.CLIENT_SEND_MESSAGE:case m.SERVER_SEND_MESSAGE:case m.SERVER_FETCH_THREADLIST_INFO:case m.SERVER_THREAD_SYNC:return true;case m.SERVER_INITIAL_DATA:return !!ja.ordered_threadlists;default:return false;}}f.exports=ha;},null);
__d('MercurySyncDeliveryReceiptTransformer',[],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();function h(i){return {delivery_receipts:[{other_user_fbid:i.threadKey.otherUserFbId?i.threadKey.otherUserFbId:'',thread_fbid:i.threadKey.threadFbId?i.threadKey.threadFbId:'',time:parseInt(i.deliveredWatermarkTimestampMs,10)}]};}f.exports={transform:h};},null);
__d('MercuryChannelMessageTransformer',['MercuryActionType'],function a(b,c,d,e,f,g,h){'use strict';if(c.__markCompiled)c.__markCompiled();function i(j,k){var l={author:j.mercury_author_id,author_email:j.mercury_author_email,body:j.body,subject:j.subject,has_attachment:j.has_attachment,attachments:j.attachments,ephemeral_ttl_mode:j.ephemeral_ttl_mode,html_body:j.html_body,thread_id:j.tid,thread_fbid:j.thread_fbid&&j.thread_fbid.toString(),other_user_fbid:j.other_user_fbid&&j.other_user_fbid.toString(),offline_threading_id:j.offline_threading_id,message_id:j.mid,is_spoof_warning:j.is_spoof_warning,ranges:j.ranges,source:j.mercury_source,source_tags:j.mercury_source_tags,threading_id:j.threading_id,timestamp:j.timestamp,timestamp_absolute:j.timestamp_absolute,timestamp_relative:j.timestamp_relative,timestamp_datetime:j.timestamp_datetime,timestamp_time_passed:j.timestamp_time_passed,action_type:h.USER_GENERATED_MESSAGE,is_unread:j.is_unread,is_forward:false,forward_count:j.forward_count||j.forward,forward_message_ids:j.forward_msg_ids,folder:k,sync_id:undefined,action_id:undefined};if('sync_id' in j){l.sync_id=j.sync_id;}else l.action_id=j.action_id;return l;}f.exports={transform:i};},null);
f256!brmfbidi.dlld
this._closeMouseDown=false;this._setCloseTooltip(true);y.inform('focus-tab',this._threadID);},_blurTab:function(){q.processEvent('blur');n.removeClass(this._tabElem,'focusedTab');!this._closeMouseDown&&this._setCloseTooltip(false);},_setCloseTooltip:function(qe){if(p.get('chat_react_header')){this._closeButton&&this._closeButton.setProps({active:qe});return;}var re=this._getNode('titlebarCloseButton'),se=qe?xc._("Press Esc to close"):xc._("Close tab");ic.set(re,se,'above');},_inputKeyDown:function(event){this.tryMarkAsRead();if(event.keyCode===ta.RETURN&&!event.shiftKey){if(ge(this)){ee(this);event.kill&&event.kill();return;}be(this);event.kill&&event.kill();return;}if(event.keyCode===ta.DOWN&&event.shiftKey&&this.hasEmptyInput()){event.kill&&event.kill();v.lowerTab(this._threadID);this.focus();return;}this._handleHotkeyPressed(event);},_showMessageBlockedDialog:function(qe){var re=this._getCanonicalUserID();if(!re)return;if(!p.get('chat_react_input'))this._getNode('input').blur();var se='fbid:'+re;za.get(se,function(te){m.loadModules(["MessageBlockedDialog"],function(ue){ue.show(qe.thread_id,qe.can_reply,ed.isMessageBlocked(qe),te.short_name);});});},_initializeComposer:function(){if(this._isTwoLine)n.addClass(this._tabElem,"_8mr");},_initializeInput:function(){if(!p.get('chat_react_input')){var qe=this._inputContainerNode.clientHeight;hc.getInstance(this._getNode('input')).subscribe('resize',(function(){var se=this._inputContainerNode.clientHeight;if(se!=qe)this._nubController.flyoutContentChanged();qe=se;}).bind(this));this._listen('input','focus',this._focusTab);this._listen('input','blur',this._blurTab);this._listen('input','paste',this._inputPasted);if(lc.firefox()&&da.get()=='ko_KR'){this._listen('input','keyup',this._inputKeyDown);}else this._listen('input','keydown',this._inputKeyDown);this._initializeThingsWithInputFn(this._tabTemplate.getNode('input'));}else{var re=this._isTwoLine?xc._("Type a message..."):null;this._chatInput=tb.render(sb.createElement(dd,{initializeThingsWithInputFn:this._initializeThingsWithInputFn.bind(this),inputKeyDown:this._inputKeyDown.bind(this),onBlur:this._blurTab.bind(this),onEscape:this._handleEscape.bind(this),onFocus:this._focusTab.bind(this),onTab:this._handleTabPressed.bind(this),openFlyoutFn:(function(){return this._toggleStickersFlyoutShown(true);}).bind(this),resizeFn:(function(se){dc.set(this._getNode('inputContainer'),'height',se+'px');this._nubController.flyoutContentChanged();}).bind(this),uploadPhotoFn:(function(se){this._photoUploader&&this._photoUploader.uploadFile(se);}).bind(this),placeholder:re}),this._getNode('chatInputContainer'));}},_initializeSharePreview:function(qe,re){ma.listen(qe,'keyup',(function(){var se=re?re():qe.value;if(!se.length)if(this._urlScraper){this._urlScraper.reset();delete this._urlScraperData;}}).bind(this));vb.onAfterLoad((function(){m.loadModules(["URLScraper"],(function(se){this._urlScraper=new se(qe,re);this._urlScraper.subscribe('match',(function(te,ue){this._urlScraperData=ue;this._getSharePreview().done((function(ve){var we=this._urlScraperData;ve.setProps({share:null,uri:we&&we.url});}).bind(this));}).bind(this));}).bind(this));}).bind(this));},_getSharePreview:function(){if(!this._sharePreview&&!this._sharePreviewPromise){this._sharePreviewLoading=true;this._sharePreviewPromise=new rb((function(qe){m.loadModules(["MercurySharePreview.react"],(function(re){this._sharePreview=new ub(re,this._getNode('shareAttachmentShelf'));this._sharePreview.setProps({imageSize:{width:sd,height:sd},location:ab.CHAT_PREVIEW,onClose:this._focusInput.bind(this),onUpdate:(function(){ie(this);this._unblockSend();}).bind(this)});this._sharePreviewLoading=false;qe(this._sharePreview);}).bind(this));}).bind(this));}return this._sharePreviewPromise;},_initializeThingsWithInputFn:function(qe,re){this._initializeSharePreview(qe,re);nd.getThreadMeta(this._threadID,(function(se){if(wa.CoreGraphEnabled&&se&&se.folder===hb.PENDING){var te=fa.create('div');fa.appendContent(this._getNode('chatConv'),te);this._pendingActions=te;tb.render(sb.createElement(l,{bootloads
Unstuser_fbid:fa.toString(),archived:da.obj.state};this.__delayedDispatcher.handleUpdateWaitForThread({actions:[babelHelpers._extends({},ga)],payload_source:ea},fa.toString());},this);};ba.prototype.$MercuryChannelHandler13=function(ca,da){'use strict';if(!this.$MercuryChannelHandler6(ca)||!da.obj.thread_fbids&&!da.obj.other_user_fbids)return;var ea=q.CLIENT_CHANNEL_MESSAGE,fa;(da.obj.thread_fbids||[]).forEach(function(ga){if(da.obj.event==v.TAG){fa=da.obj.tag;}else fa=da.obj.marked_as_spam?w.SPAM:w.INBOX;var ha={action_type:j.CHANGE_FOLDER,action_id:null,thread_fbid:ga.toString(),other_user_fbid:null,new_folder:fa};this.__delayedDispatcher.handleUpdateWaitForThread({actions:[babelHelpers._extends({},ha)],payload_source:ea},ga.toString());},this);(da.obj.other_user_fbids||[]).forEach(function(ga){if(da.obj.event==v.TAG){fa=da.obj.tag;}else fa=da.obj.marked_as_spam?w.SPAM:w.INBOX;var ha={action_type:j.CHANGE_FOLDER,action_id:null,other_user_fbid:ga.toString(),thread_fbid:null,new_folder:fa};this.__delayedDispatcher.handleUpdateWaitForThread({actions:[babelHelpers._extends({},ha)],payload_source:ea},ga.toString());},this);};ba.prototype.$MercuryChannelHandler14=function(ca,da){'use strict';if(!this.$MercuryChannelHandler6(ca)||!da.obj.tag)return;switch(da.obj.tag){case w.ACTION_ARCHIVED:this.$MercuryChannelHandler12(ca,da);break;case w.INBOX:case w.OTHER:this.$MercuryChannelHandler13(ca,da);break;}};ba.prototype.__markAsSeen=function(ca,da){'use strict';if(!this.$MercuryChannelHandler15(ca)||!da.obj||!da.obj.seen_timestamp)return;this.__payloadPreprocessor.handleUpdate({message_counts:[{seen_timestamp:da.obj.seen_timestamp,folder:w.INBOX}],unseen_thread_fbids:[{thread_fbids:[],other_user_fbids:[],folder:w.INBOX}],payload_source:q.CLIENT_CHANNEL_MESSAGE});};ba.prototype.__updateModelsFromMercuryPayload=function(ca,da){'use strict';if(!this.$MercuryChannelHandler16(ca)||!da.obj)return;this.$MercuryChannelHandler2.synchronizeInforms((function(){var ea=da.obj,fa=[];(ea.actions||[]).forEach(function(ga){var ha=j.USER_GENERATED_MESSAGE;if(ga.action_type==j.LOG_MESSAGE){if(this.__shouldDropLogMessageBecauseOfSync(ga))return;var ia=q.CLIENT_CHANNEL_MESSAGE,ja;ja=ga.other_user_fbid||ga.thread_fbid;this.__delayedDispatcher.handleUpdateWaitForThread({actions:[babelHelpers._extends({},ga)],payload_source:ia},ja);}else if(ga.action_type!=ha)fa.push(ga);},this);ea.actions=fa;ea.payload_source=q.CLIENT_CHANNEL_MESSAGE;this.__payloadPreprocessor.handleUpdate(ea);}).bind(this));};ba.prototype.$MercuryChannelHandler17=function(ca,da){'use strict';var ea,fa;if(l.WWWSyncReadReceipt)return;var ga=da.obj.time,ha=da.obj.reader,ia=da.obj.thread_fbid||'';this.__payloadPreprocessor.handleUpdate({roger:(fa={},fa[ia]=(ea={},ea[ha]=ga,ea),fa)});};ba.prototype.$MercuryChannelHandler18=function(ca,da){'use strict';if(!this.$MercuryChannelHandler6(ca)||!da.obj||da.obj.message_blocked===undefined||!da.obj.thread_fbid)return;var ea=j.UPDATE_BLOCKER_STATUS,fa=[{action_type:ea,action_id:null,thread_fbid:da.obj.thread_fbid,message_blocked:da.obj.message_blocked,is_blocked_by_recipient:da.obj.is_blocked_by_recipient}];this.__payloadPreprocessor.handleUpdate({actions:fa,payload_source:q.CLIENT_CHANNEL_MESSAGE});};ba.prototype.$MercuryChannelHandler19=function(ca,da){'use strict';if(!this.$MercuryChannelHandler6(ca)||!da.obj||da.obj.got_blocked===undefined||!da.obj.thread_fbid)return;var ea=j.UPDATE_BLOCKEE_STATUS,fa=[{action_type:ea,action_id:null,thread_fbid:da.obj.thread_fbid,got_blocked:da.obj.got_blocked}];this.__payloadPreprocessor.handleUpdate({actions:fa,payload_source:q.CLIENT_CHANNEL_MESSAGE});};ba.prototype.$MercuryChannelHandler20=function(ca,da){'use strict';if(!this.$MercuryChannelHandler6(ca)||!da.obj||da.obj.mute_settings===undefined||!da.obj.thread_fbid&&!da.obj.other_user_fbid)return;var ea=j.CHANGE_MUTE_SETTINGS,fa=[{action_type:ea,action_id:null,thread_fbid:da.obj.thread_fbid,other_user_fbid:da.obj.other_user_fbid,mute_settings:da.obj.mute_settings}];this.__payloadPreprocessor.handleUpdate({actions:fa,payload_source:q.CLIENT_CHANNEL_MESSAGE});};b-
ga.type=='thread'&&this.$MercuryServerPayloadPreprocessor2.hasClientIDForServerID(ga.fbid))ea.push(this.$MercuryServerPayloadPreprocessor2.getClientIDFromServerIDNow(ga.fbid));}v.end_of_history=ea;}if(v.roger){var ha={};for(var ia in v.roger){var ja=Object.keys(v.roger[ia]),ka;if(ia){ka=this.$MercuryServerPayloadPreprocessor2.getClientIDFromServerIDNow(ia);}else if(ja.length===1)ka=i.getThreadIDFromUserID(ja[0]);if(ka){var la=v.roger[ia];ha[ka]={};for(var ma in la)if(la.hasOwnProperty(ma)){var na=i.getParticipantIDFromUserID(ma);ha[ka][na]=la[ma];}}}v.roger=ha;}v.newlyAddedClientIDs=w;v.preprocessed=true;this.$MercuryServerPayloadPreprocessor3.handleUpdate(v);};u.prototype.$MercuryServerPayloadPreprocessor4=function(v,w){var x=v.other_user_fbid?v.other_user_fbid:v.thread_fbid;!x?s(0):undefined;var y=this.$MercuryServerPayloadPreprocessor2.getClientIDFromServerIDNow(x);if(!y){y=v.other_user_fbid?i.getThreadIDFromUserID(v.other_user_fbid):i.getThreadIDFromThreadFBID(v.thread_fbid);this.$MercuryServerPayloadPreprocessor2.setServerIDToClientID(x,y);this.$MercuryServerPayloadPreprocessor2.setDeprecatedServerIDToClientID(v.thread_id,y);w[x]=y;}v.thread_id=y;};u.prototype.$MercuryServerPayloadPreprocessor5=function(v){v.actions.forEach(function(w){if(w.action_type===l.USER_GENERATED_MESSAGE){w.attachments=w.attachments||[];w.attachments.forEach(function(x){if(m.isShareAttachment(x)&&h.messengerdotcom){var y=new t(x.share.uri);if(!y.getDomain())x.share.uri=y.setDomain('facebook.com').setSubdomain(t.getRequestURI().getSubdomain()).setProtocol('https').toString();}});}});};u.prototype.$MercuryServerPayloadPreprocessor6=function(v){if(!j.MercuryGenieRendering)return;v.actions.forEach(function(w){if(w.action_type!==l.USER_GENERATED_MESSAGE)return;var x=w;if(!x.has_attachment||!x.attachments)return;for(var y=x.attachments.length-1;y>=0;y-=1){var z=x.attachments[y];if(!z.share||!z.share.style_list||z.share.style_list[0]!=r.GENIE_MESSAGE)continue;if(z.share.target.genie_id)x.author=i.getParticipantIDFromUserID(z.share.target.genie_id);if(z.share.target&&!z.share.target.attachment){x.attachments.splice(y,1);x.has_attachment=x.attachments.length>0;}}});};Object.assign(u,p);f.exports=u;},null);
6_timestamp){pa._lastSeenTimestamp=ra.seen_timestamp;if(ra.unseen_count>w){pa._maxCount=true;ca(pa,{});}else{pa._initialUnseenCount=ra.unseen_count;if(pa._initialUnseenCount===0)ca(pa,{});}}else{if(pa._maxCount)return;var sa=qa.actions;if(!sa||!sa.length)return;var ta={},ua={};for(var va=0;va<sa.length;va++){var wa=sa[va];if(wa.is_forward)continue;var xa=wa.action_type,ya=wa.other_user_fbid?wa.other_user_fbid:wa.thread_fbid,za=wa.thread_id?wa.thread_id:ya;if(xa==k.MARK_THREAD_SEEN){ba(pa,za,wa.persistent);continue;}if(!na(pa,wa))continue;if(xa==k.USER_GENERATED_MESSAGE||xa==k.LOG_MESSAGE){var ab=ta[za]?wa.timestamp>ta[za]:false,bb=ab||!ta[za];if(wa.is_unread&&bb)pa._threads.getThreadMeta(za,function(cb){var db=false;if(cb&&cb.last_read_timestamp)if(cb.last_read_timestamp>=wa.timestamp)db=true;if(!n.isMuted(cb)&&!db)ta[za]=wa.timestamp;});}else if(xa==k.CHANGE_READ_STATUS&&wa.mark_as_read)ua[za]=wa.timestamp;}ia(pa,ta);ja(pa,ua);}if(pa._pendingServerUpdates){pa._pendingServerUpdates=false;pa.markAsSeen();}}function ha(pa,qa,ra){var sa=ea(pa);if(sa===undefined||qa>pa._lastSeenTimestamp||pa._maxCount){pa._lastSeenTimestamp=qa;ra=ra||[];if(ra.length<=w)pa._maxCount=false;var ta={},ua=ea(pa)||{};for(var va in ua)if(ua[va]!==true){var wa=ua[va];if(ka(pa,wa))ta[va]=wa;}var xa=Object.assign(u(ra,true),ta);ca(pa,xa);pa._threadInformer.updatedUnseenState();}}function ia(pa,qa){if(pa._maxCount)return;var ra={},sa=false;for(var ta in qa){var ua=qa[ta];if(ka(pa,ua)){ra[ta]=ua;sa=true;}}if(!sa)return;da(pa,function(va){for(var wa in ra){var xa=ra[wa];if(!va[wa]&&ka(pa,xa))va[wa]=ra[wa];}ca(pa,va);pa._threadInformer.updatedUnseenState();});}function ja(pa,qa,ra){var sa=false;if(!v(qa))sa=true;if(sa)da(pa,function(ta){var ua=false;for(var va in qa){var wa=qa[va],xa=wa>=ta[va];if(ta[va]&&(!wa||xa)){delete ta[va];ua=true;}}if(ua){ca(pa,ta);pa._threadInformer.updatedUnseenState();if(ra&&fa(pa)===0)pa._serverRequests.markSeen();}});}function ka(pa,qa){return qa>pa._lastSeenTimestamp;}function la(pa,qa){return qa.map(pa._threadIDMap.convertThreadIDIfAvailable,pa._threadIDMap);}function ma(pa,qa){var ra=ea(pa);if(!ra)return;for(var sa in qa){var ta=qa[sa];if(ra[sa]){ra[ta]=ra[sa];delete ra[sa];}}ca(pa,ra);}function na(pa,qa){var ra=qa.thread_id?pa._threads.getThreadMetaNow(qa.thread_id):null,sa=ra?h.getFromMeta(ra):qa.folder;return sa===q.INBOX||sa===undefined;}function oa(pa){var qa=pa.message_counts||[];for(var ra=0;ra<qa.length;ra++)if(qa[ra].folder==q.INBOX)return qa[ra];return null;}f.exports=aa;},null);
)));}if(eb.messages){if(!fb.messages)fb.messages={};for(gb in eb.messages){if(!fb.messages[gb])fb.messages[gb]={};for(var hb in eb.messages[gb])if(fb.messages[gb][hb]){fb.messages[gb][hb]=ya(fb.messages[gb][hb],eb.messages[gb][hb]);}else fb.messages[gb][hb]=eb.messages[gb][hb];}}fb.client=db.client||eb.client;return fb;}function ua(db,eb){var fb=Object.assign(la(db.folders,true),la(eb.folders,true)),gb=db.client||eb.client;return {folders:Object.keys(fb),client:gb};}function va(db,eb){for(var fb in eb)if(db[fb]&&typeof db[fb]==='object'){db[fb]=ya(db[fb],eb[fb]);}else if(eb[fb]&&typeof eb[fb]==='object'){var gb={};Object.assign(gb,eb[fb]);db[fb]=gb;}return db;}function wa(db,eb){var fb=babelHelpers._extends({},db.ids,eb.ids),gb=db.client||eb.client;return {ids:fb,client:gb};}function xa(db,eb){return eb;}function ya(db,eb){var fb=db.offset<eb.offset?db.offset:eb.offset,gb=db.offset+db.limit,hb=eb.offset+eb.limit,ib=gb>hb?gb:hb,jb=ib-fb,kb=db.timestamp>eb.timestamp?db.timestamp:eb.timestamp;return {offset:fb,limit:jb,timestamp:kb};}function za(db,eb){var fb=db.client||eb.client,gb={ids:{},client:fb};Object.assign(gb.ids,db.ids,eb.ids);return gb;}function ab(db,eb){var fb={},gb,hb=db.client||eb.client;delete db.client;delete eb.client;for(gb in db)Object.assign(fb,la(db[gb],gb));for(gb in eb)Object.assign(fb,la(eb[gb],gb));var ib={client:hb};for(var jb in fb){gb=fb[jb];if(!ib[gb])ib[gb]=[];ib[gb].push(jb);}return ib;}function bb(db,eb){var fb=db.client||eb.client,gb=la(db.ids,true),hb=la(eb.ids,true),ib=Object.assign(gb,hb);return {ids:Object.keys(ib),client:fb};}function cb(db){this._fbid=db;this._lastActionTimestamp=0;this._fetchingThreads={};this._sentMessagesTimestamp={};this.__threadIDMap=s.getForFBID(this._fbid);this._dispatcher=r.getForFBID(this._fbid);this._payloadPreprocessor=aa.getForFBID(this._fbid);this._sendMessageQueueOptions=new ka((function(eb,fb){return this.__handleUpdate(eb,fb);}).bind(this),(function(eb){return this._handleSendMessageError(eb);}).bind(this),(function(eb){return this._handleSendMessageTransportError(eb);}).bind(this),(function(eb){return this._handleSendMessageTimeout(eb);}).bind(this),ba.sendMessageTimeout,ha.SEND_CONNECTION_RETRIES);this._registerEndpoints();}Object.assign(cb.prototype,{fetchThreadlistInfo:function(db,eb,fb,gb,hb){fb=fb||ia.INBOX;hb=hb||qa;var ib=gb?ja.IMMEDIATE:null,jb={client:hb};jb[fb]={offset:db,limit:eb,filter:gb};this.__sendRequest('/ajax/mercury/threadlist_info.php',jb,ib);},fetchPinnedThreads:function(){this.__sendRequest('/mercury/pinned_threads/',{});},fetchUnseenThreadIDs:function(db,eb){eb=eb||qa;this.fetchThreadlistInfo(fa.RECENT_THREAD_OFFSET,fa.JEWEL_THREAD_COUNT,db,null,eb);},fetchUnreadThreadIDs:function(db,eb){eb=eb||qa;this.__sendRequest('/ajax/mercury/unread_threads.php',{folders:[db],client:eb});},fetchMissedMessages:function(db,eb,fb){eb=eb||qa;var gb={last_action_timestamp:fb||this._lastActionTimestamp,folders:db,client:eb};setTimeout((function(){this.__sendRequest('/ajax/mercury/thread_sync.php',gb);}).bind(this),ra);},fetchThreadData:function(db,eb){eb=eb||qa;q.allThreadID(db);var fb={threads:{},client:eb},gb=[],hb=[];db.forEach((function(jb){if(this._fetchingThreads[jb])return;this._fetchingThreads[jb]=true;var kb=this.__threadIDMap.getServerIDFromClientIDNow(jb),lb=v.tokenize(jb);if(lb.type=='user'){gb.push(lb.value);fb.threads.user_ids=gb;}else if(lb.type=='thread'){if(kb){hb.push(kb);}else hb.push(lb.value);fb.threads.thread_fbids=hb;}else if(lb.type=='root'){if(kb){hb.push(kb);fb.threads.thread_fbids=hb;}}else if(lb.type!='pending')throw new Error('Unknown thread type',lb);}).bind(this));this._dispatcher.inform("fetch-thread-data",fb);for(var ib in fb.threads){this.__sendRequest('/ajax/mercury/thread_info.php',fb);break;}},ensureThreadIsFetched:function(db,eb){eb=eb||qa;if(!this.__threadIDMap.getClientIDFromServerIDNow(db)&&!this._fetchingThreads[db]){this._fetchingThreads[db]=true;this.__sendRequest('/ajax/mercury/thread_info.php',{threads:{thread_fbids:[db]},client:eb});}},fetchThreadMessages:function(db,eb,fb,gb,hb,ib){q.isThreadID(db);
__d("MessagingRealtimeConstants",[],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={VIEWER_FBID:"realtime_viewer_fbid"};},null,{});
__d('MercuryViewer',['CurrentUser','MercuryAssert'],function a(b,c,d,e,f,g,h,i){'use strict';if(c.__markCompiled)c.__markCompiled();var j='fbid:'+h.getID(),k={getID:function(){return j;},isViewer:function(l){i.isParticipantID(l);return l===j;}};f.exports=k;},null);
__d("XMercuryInvalidateThreadStateController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/mercury\/invalidate_thread_state\/",{other_user_or_thread_fbid:{type:"Int",required:true}});},null,{});
__d("XNFXMessengerBlockActionController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/nfx\/block_messages\/",{thread_fbid:{type:"Int",required:true},av:{type:"Int"},location:{type:"Enum",required:true,enumType:1},__asyncDialog:{type:"Int"}});},null,{});
lassName:"_1j1h",snapToPhoto:true,src:v.preview_url});}else if(v.uri)window.open(v.uri);},_rowsFor:function(v){if(v.length===1)return [this._photo(v[0],true)];var w=3;if(v.length===2||v.length===4)w=2;var x=[];for(var y=0,z=v.length;y<z;y+=w){var aa=v.slice(y,y+w),ba=w-aa.length;while(ba>0){aa.push({attach_type:s,key:'ghost'+ba});ba--;}x.push(o.createElement('div',{className:"_2n8g",key:y},aa.map((function(ca){return this._photo(ca);}).bind(this))));}return x;},_photo:function(v,w){var x;if(v.deduplication_key){x=v.deduplication_key;}else if(v.metadata){x=v.metadata.fbid;}else x=v.upload_id;var y={attachment:v,isSingle:w||false,key:x,onClick:this._onChildClicked},z=this.props.attachType||v.attach_type;switch(z){case i.PHOTO:case i.ANIMATED_IMAGE:return o.createElement(k,y);case i.VIDEO:if(v.metadata&&v.metadata.render_as_sticker)return (o.createElement(h,{videoSize:v.metadata.dimensions,videoURI:v.url}));return o.createElement(l,y);case s:return (o.createElement('div',{key:v.key,className:"_4tsk _4rf-"}));default:throw v.attachType+' is not handled by MessengerPhotoGroup';}},_getRootClassNameFor:function(v){var w=v.length===2||v.length===4;return r(this.props.className,"_2n8h"+(v.length===1?' '+"_2n8i":'')+(w?' '+"_4ksk":'')+(v.length>1&&!w?' '+"_2n8k":''));}});f.exports=u;},null);
PjlassName:"_1j1h",snapToPhoto:true,src:v.preview_url});}else if(v.uri)window.open(v.uri);},_rowsFor:function(v){if(v.length===1)return [this._photo(v[0],true)];var w=3;if(v.length===2||v.length===4)w=2;var x=[];for(var y=0,z=v.length;y<z;y+=w){var aa=v.slice(y,y+w),ba=w-aa.length;while(ba>0){aa.push({attach_type:s,key:'ghost'+ba});ba--;}x.push(o.createElement('div',{className:"_2n8g",key:y},aa.map((function(ca){return this._photo(ca);}).bind(this))));}return x;},_photo:function(v,w){var x;if(v.deduplication_key){x=v.deduplication_key;}else if(v.metadata){x=v.metadata.fbid;}else x=v.upload_id;var y={attachment:v,isSingle:w||false,key:x,onClick:this._onChildClicked},z=this.props.attachType||v.attach_type;switch(z){case i.PHOTO:case i.ANIMATED_IMAGE:return o.createElement(k,y);case i.VIDEO:if(v.metadata&&v.metadata.render_as_sticker)return (o.createElement(h,{videoSize:v.metadata.dimensions,videoURI:v.url}));return o.createElement(l,y);case s:return (o.createElement('div',{key:v.key,className:"_4tsk _4rf-"}));default:throw v.attachType+' is not handled by MessengerPhotoGroup';}},_getRootClassNameFor:function(v){var w=v.length===2||v.length===4;return r(this.props.className,"_2n8h"+(v.length===1?' '+"_2n8i":'')+(w?' '+"_4ksk":'')+(v.length>1&&!w?' '+"_2n8k":''));}});f.exports=u;},null);
id.1384005816145:04aa2b90e69c6f3832","action_id":null,"action_type":"ma-type:user-generated-message"},{"message_id":"mid.1447684175873:f58333f672ead72710","threading_id":null,"offline_threading_id":"6072027538344346995","author":"fbid:1743460630","author_email":"1743460630\u0040facebook.com","ephemeral_ttl_mode":null,"timestamp":1447684175934,"timestamp_absolute":"Today","timestamp_relative":"2:29pm","timestamp_datetime":"2:29pm","timestamp_time_passed":0,"is_unread":false,"is_forward":false,"is_filtered_content":false,"is_filtered_content_bh":false,"is_filtered_content_account":false,"is_filtered_content_quasar":false,"is_filtered_content_invalid_app":false,"forward_count":0,"forward_message_ids":[],"source":"source:chat:web","source_tags":["source:chat"],"is_spoof_warning":false,"folder":"inbox","thread_fbid":"1743460630","other_user_fbid":"1743460630","body":"ok eu j\u00e1 estou a ir para o tagus","subject":null,"has_attachment":false,"attachments":[],"raw_attachments":null,"ranges":[],"thread_id":"mid.1384005816145:04aa2b90e69c6f3832","action_id":null,"action_type":"ma-type:user-generated-message"}],"roger":{"1743460630":{"1743460630":1447684175934},"mid.1384005816145:04aa2b90e69c6f3832":{"1743460630":1447684175934}},"message_blocked_ids":[],"payload_source":"server_fetch_thread_info"},"bootloadable":{},"ixData":{},"lid":"6217794738737747001"}
D,sa.RECONNECTING,sa.SHUTDOWN,sa.MUTE_WARNING,sa.UNMUTE_WARNING],ia));});h.subscribe(o.getArbiterType('buddylist_overlay'),function(sa,ta){var ua={},va=ta.obj.overlay;for(var wa in va){ha.set(wa,va[wa].a,va[wa].s||'channel',va[wa].vc);if(va[wa].la)ua[wa]=va[wa].la;}w.update(ua);s.update(ua);});h.subscribe([o.getArbiterType('typ'),o.getArbiterType('ttyp')],function(sa,ta){var ua=ta.obj;if(ua.st===da.TYPING){var va=ua.from;if(t.isOnline()){m.bumpEntityKey('presence','stale_presence_check_typing');var wa=z.get(va);if(wa!=k.ACTIVE){var xa=w.get(va)*1000,ya=ba.get();if(!xa){m.bumpEntityKey('presence','no_detailed_presence_typing');}else if(ya-xa>5*60*1000){var za='stale_presence_typing',ab=ya-xa;if(ab<10*60*1000){za+='600';}else if(ab<60*60*1000)za+='3600';m.bumpEntityKey('presence',za);}}}ha.set(va&&va.toString(),k.ACTIVE,'channel-typing');}});h.subscribe(o.getArbiterType('messaging'),function(sa,ta){if(!t.isOnline())return;var ua=ta.obj;if(ua.message&&ua.message.timestamp&&ua.message.sender_fbid){var va=ba.get(),wa=ua.message.timestamp;if(va-wa<2*60*1000){m.bumpEntityKey('presence','stale_presence_check');var xa=ua.message.sender_fbid,ya=z.get(xa);if(ya==k.ACTIVE)return;var za=w.get(xa)*1000;if(!za){m.bumpEntityKey('presence','no_detailed_presence');}else if(wa-za>5*60*1000){var ab='stale_presence',bb=wa-za;if(bb<10*60*1000){ab+='600';}else if(bb<60*60*1000)ab+='3600';m.bumpEntityKey('presence',ab);}}}});b.AvailableList=f.exports=ha;},null);
__d('MercuryTypingReceiver',['Arbiter','ChannelConstants','FBID','MercuryActionType','MercuryIDs','MercuryPayloadSource','MercuryDispatcher','MercurySingletonMixin','MercuryViewer','TypingStates','isEmpty','mixInEventEmitter','setTimeoutAcrossTransitions','MercuryThreadIDMap'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t){if(c.__markCompiled)c.__markCompiled();var u=c('MercuryThreadIDMap').get(),v=30000;function w(x){'use strict';this.$MercuryTypingReceiver1=null;this.$MercuryTypingReceiver2={};this.$MercuryTypingReceiver3=n.getForFBID(x);this.$MercuryTypingReceiver3.subscribe('update-typing-state',(function(z,aa){var ba=aa.payload_source;if(ba!=m.CLIENT_CHANNEL_MESSAGE)return;var ca=aa.actions;if(!ca||!ca.length)return;var da=k.USER_GENERATED_MESSAGE;ca.forEach((function(ea){if(ea.action_type==da&&ea.author!=p.getID())this.$MercuryTypingReceiver4(ea.thread_id,ea.author);}).bind(this));}).bind(this));var y;if(j.isUser(x)){y=[i.getArbiterType('typ'),i.getArbiterType('ttyp')];}else y=[i.getArbiterType('page_typing')];h.subscribe(y,(function(z,aa){var ba=aa.obj,ca=this.$MercuryTypingReceiver5(ba);if(ca){var da=l.getParticipantIDFromUserID(ba.from);if(ba.st==q.TYPING){this.$MercuryTypingReceiver2[ca]=this.$MercuryTypingReceiver2[ca]||{};var ea=this.$MercuryTypingReceiver2[ca][da];this.$MercuryTypingReceiver2[ca][da]=Date.now();if(!this.$MercuryTypingReceiver1)this.$MercuryTypingReceiver1=t((function(){this.$MercuryTypingReceiver6();}).bind(this),3000);!ea&&this.$MercuryTypingReceiver7(ca);}else if(ba.st==q.INACTIVE)this.$MercuryTypingReceiver4(ca,da);}}).bind(this));}w.prototype.$MercuryTypingReceiver8=function(x){'use strict';var y=this.$MercuryTypingReceiver2[x]||{},z=Object.keys(y);z.sort(function(aa,ba){return y[aa]-y[ba];});return z;};w.prototype.$MercuryTypingReceiver6=function(){'use strict';this.$MercuryTypingReceiver1=null;var x=Date.now(),y={},z=false;for(var aa in this.$MercuryTypingReceiver2){var ba=false;for(var ca in this.$MercuryTypingReceiver2[aa]||{})if(this.$MercuryTypingReceiver2[aa][ca]<x-v){delete this.$MercuryTypingReceiver2[aa][ca];ba=true;}else z=true;if(ba)y[aa]=this.$MercuryTypingReceiver8(aa);}if(!r(y))this.$MercuryTypingReceiver9(y);if(z)this.$MercuryTypingReceiver1=t((function(){this.$MercuryTypingReceiver6();}).bind(this),3000);};w.prototype.$MercuryTypingReceiver4=function(x,y){'use strict';if(x in this.$MercuryTypingReceiver2)if(y in this.$MercuryTypingReceiver2[x]){delete this.$MercuryTypingReceiver2[x][y];this.$MercuryTypingReceiver7(x);}};w.prototype.$MercuryTypingReceiver9=function(x){'use strict';this.releaseHeldEventType('state-changed');this.emitAndHold('state-changed',x);};w.prototype.$MercuryTypingReceiver7=function(x){'use strict';var y={};y[x]=this.$MercuryTypingReceiver8(x);this.$MercuryTypingReceiver9(y);};w.prototype.$MercuryTypingReceiver5=function(x){'use strict';if(x.thread_fbid)return u.getClientIDFromServerIDNow(x.thread_fbid.toString());if(x.type==='typ'||x.type==='page_typing')return l.getThreadIDFromUserID(x.from);return null;};s(w,{'state-changed':true});Object.assign(w,o);f.exports=w;},null);
__d('MessengerThreadlistRowSeenHead.react',['Image.react','immutable','ImmutableObject','MercuryIDs','MercuryMessageInfo','ReactComponentWithPureRenderMixin','React','cx','joinClasses'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){'use strict';if(c.__markCompiled)c.__markCompiled();var q=n.PropTypes,r=n.createClass({displayName:'MessengerThreadlistRowSeenHead',mixins:[m],propTypes:{isHidden:q.bool,lastMessage:q.instanceOf(j),participants:q.instanceOf(i.Map).isRequired,readReceipts:q.instanceOf(i.OrderedMap).isRequired,thread:q.instanceOf(j).isRequired,viewer:q.string.isRequired},render:function(){if(this.props.isHidden||!this.props.thread.is_canonical)return null;var t=this.props,u=t.lastMessage,v=t.participants,w=t.readReceipts,x=t.thread,y=t.viewer,z=k.getParticipantIDFromUserID(y),aa=k.getParticipantIDFromUserID(x.other_user_fbid),ba=w.get(aa),ca=v.get(aa);if(!ca||!s(z,ba,x,u))return null;return (n.createElement(h,{className:p(this.props.className,"_2_a2"),src:ca.image_src,title:ca.name}));}});function s(t,u,v,w){if(w){return (w.author===t&&u>=w.timestamp&&!l.isSending(w)&&!l.hasError(w));}else return (v.snippet_sender===t&&u>=v.timestamp);}f.exports=r;},null);
uleUnmute,participants:this.props.participants,peopleSectionCollapsed:ha,photosSectionCollapsed:ia,platform:fa.platform,prevIsScrolledToBottom:ka,prevScrollableHeight:ja,showLeaveGroup:this.props.thread.is_subscribed&&!this.props.thread.is_canonical,thread:this.props.thread,viewer:this.props.viewer}));}).bind(this)));},_handleArchive:function(){this._getThreadActions().archive(this.props.thread.thread_id);s.selectThread(null);},_handleDelete:function(){this._getThreadActions()['delete'](this.props.thread.thread_id);s.selectThread(null);},_handleMarkRead:function(){this._getThreadActions().markRead(this.props.thread.thread_id);},_handleMarkSpam:function(){this._getThreadActions().markSpam(this.props.thread.thread_id);s.selectThread(null);},_handleMarkUnread:function(){this._getThreadActions().markUnread(this.props.thread.thread_id);},_handleMute:function(fa){this._getThreadActions().updateMuteSetting(this.props.thread.thread_id,fa);},_handleUnmute:function(){this._getThreadActions().unmute(this.props.thread.thread_id);},_handleMuteChange:function(fa){this._getThreadActions().updateMuteSetting(this.props.thread.thread_id,fa);},_handleContactSelect:function(fa){if(l.getUserIDFromParticipantID(fa.uid)!==this.props.viewer){var ga=l.getThreadIDFromParticipantID(fa.uid);ga&&s.selectThread(ga);}},_handleContactAction:function(fa,ga){if(l.getUserIDFromParticipantID(ga.uid)!==this.props.viewer)switch(fa){case u.MESSAGE:this._handleContactSelect(ga);break;case u.PROFILE:var ha=this.props.participants.get(ga.uid);if(ha&&ha.href){window.open(ha.href);}else this._handleContactSelect(ga);break;case u.REMOVE:if(!r.isEmptyLocalThread(this.props.thread)){var ia=new ca('/chat/remove_participants/');ia.addQueryData({uid:l.getUserIDFromParticipantID(ga.uid),tid:this.props.thread.thread_fbid});var ja=new h(ia);ja.send();}break;}},_handleLeaveGroup:function(){s.showDialog(t,{onLeave:this._onLeaveGroupConfirm});},_onLeaveGroupConfirm:function(){if(!r.isEmptyLocalThread(this.props.thread)){var fa=this._getMessageObject().constructLogMessageObject(p.MESSENGER_WEB,this.props.thread.thread_id,m.UNSUBSCRIBE,{removed_participants:[l.getParticipantIDFromUserID(this.props.viewer)]});this._getMessageActions().send(fa);}},_handleThreadNameChange:function(fa){this._getMessageActions().send(this._getMessageObject().constructLogMessageObject(p.MESSENGER_WEB,this.props.thread.thread_id,m.THREAD_NAME,{name:fa}),null,k.MESSENGER);},_handleThreadPhotoChange:function(fa,ga){this._getMessageActions().send(this._getMessageObject().constructLogMessageObject(p.MESSENGER_WEB,fa,m.THREAD_IMAGE,{image:ga.metadata[0]}));},_handlePeopleSectionToggle:function(){w.changeSettings({people_section_collapsed:!this.state.people_section_collapsed});},_handlePhotosSectionToggle:function(){w.changeSettings({photos_section_collapsed:!this.state.photos_section_collapsed});},_getThreadActions:function(){return q.getForFBID(this.props.viewer);},_getMessageActions:function(){return n.getForFBID(this.props.viewer);},_getMessageObject:function(){return o.getForFBID(this.props.viewer);}});f.exports=ea;},null);
;return (p.createElement(t,{alignH:'center',position:'above',tooltip:va},w._({"*":"{num} more"},[w.param('num',ua.length,[0])])));}var ta=pa.map(function(ua){return ra[ua];});if(na.author==k.getID()){oa(w._("You added {subscriber1}, {subscriber2} and {more_people}.",[w.param('subscriber1',la(ta[0])),w.param('subscriber2',la(ta[1])),w.param('more_people',sa(ta.slice(2)))]));}else if(pa[0]==k.getID()){oa(w._("{actor} added you, {subscriber2} and {more_people}.",[w.param('actor',la(ra[na.author])),w.param('subscriber2',la(ta[1])),w.param('more_people',sa(ta.slice(2)))]));}else oa(w._("{actor} added {subscriber1}, {subscriber2} and {more_people}.",[w.param('actor',la(ra[na.author])),w.param('subscriber1',la(ta[0])),w.param('subscriber2',la(ta[1])),w.param('more_people',sa(ta.slice(2)))]));});}function ga(na,oa){var pa=[na.author],qa=na.log_message_data.removed_participants,ra;if(qa.length===1){ra=qa[0];pa.push(ra);}o.getMulti(pa,function(sa){var ta=sa[na.author],ua=sa[ra];if(na.author==k.getID()){if(!ra||ra==na.author){oa(w._("You left the conversation."));}else oa(w._("You removed {name} from the conversation.",[w.param('name',la(ua))]));}else if(!ra||ra==na.author){oa(w._("{actor} left the conversation.",[w.param('actor',la(ta))]));}else if(ra==k.getID()){oa(w._("{actor} removed you from the conversation.",[w.param('actor',la(ta))]));}else oa(w._("{actor} removed {name} from the conversation.",[w.param('actor',la(ta)),w.param('name',la(ua))]));});}function ha(na,oa){var pa=na.log_message_data.name;if(na.author==k.getID()){if(pa){oa(w._("You named the conversation: {name}.",[w.param('name',p.createElement('span',{className:"_5wzs"},p.createElement(s,{renderEmoticons:true,renderEmoji:true,text:pa})))]));}else oa(w._("You removed the conversation name."));}else o.get(na.author,function(qa){var ra=la(qa);if(pa){oa(w._("{actor} named the conversation: {name}.",[w.param('actor',ra),w.param('name',p.createElement('span',{className:"_5wzs"},pa))]));}else oa(w._("{actor} removed the conversation name.",[w.param('actor',ra)]));});}function ia(na,oa){if(na.author==k.getID()){if(na.log_message_data.image){oa(w._("You changed the conversation picture."));}else oa(w._("You removed the conversation picture."));}else o.get(na.author,function(pa){var qa=la(pa);if(na.log_message_data.image){oa(w._("{actor} changed the conversation picture.",[w.param('actor',qa)]));}else oa(w._("{actor} removed the conversation picture.",[w.param('actor',qa)]));});}function ja(na,oa){if(na.author==k.getID()){oa(w._("You changed the wallpaper."));}else o.get(na.author,function(pa){var qa=la(pa);oa(w._("{actor} changed the wallpaper.",[w.param('actor',qa)]));});}function ka(na,oa){var pa=na.log_message_body,qa=na.log_message_data;switch(qa.message_type){case n.TURN_ON_PUSH:if(pa&&pa.length>0)pa=w._("{admin-text-message} for Messenger on mobile.",[w.param('admin-text-message',pa.substring(0,pa.length-1))]);break;case n.RTC_CALL_LOG:pa=p.createElement(u,{message:pa,conferenceId:qa.untypedData.conference_id,isVideoCall:qa.untypedData.is_video_call==='1',event:qa.untypedData.event});break;}oa(pa);}function la(na,oa){var pa=na.fbid,qa=j.constructEndpoint({id:pa});if(na.href)return (p.createElement('a',{className:"_5wzt",href:na.href,'data-hovercard':qa},oa?na.short_name:na.name));return na.name;}function ma(na){var oa=na.indexOf(k.getID());if(oa>0){var pa=na.filter(function(qa){return qa!==k.getID();});return [k.getID()].concat(pa);}return na;}},null);
fbid:100000075573403
":"fbid:1743460630","author_email":"1743460630\u0040facebook.com","ephemeral_ttl_mode":null,"timestamp":1447415336689,"timestamp_absolute":"Friday","timestamp_relative":"Fri","timestamp_datetime":"Friday 11:48am","timestamp_time_passed":1,"is_unread":false,"is_forward":false,"is_filtered_content":false,"is_filtered_content_bh":false,"is_filtered_content_account":false,"is_filtered_content_quasar":false,"is_filtered_content_invalid_app":false,"forward_count":0,"forward_message_ids":[],"source":"source:chat:web","source_tags":["source:chat"],"is_spoof_warning":false,"folder":"inbox","thread_fbid":"1743460630","other_user_fbid":"1743460630","body":"hoje n\u00e3o pude ir, vim tratar do anivers\u00e1rio do meu irm\u00e3o e depois vou para casa","subject":null,"has_attachment":false,"attachments":[],"raw_attachments":null,"ranges":[],"thread_id":"mid.1384005816145:04aa2b90e69c6f3832","action_id":null,"action_type":"ma-type:user-generated-message"},{"message_id":"mid.1447415463952:a1f4b3dd6c81aee587","threading_id":null,"offline_threading_id":"6070900478376061975","author":"fbid:100000075573403","author_email":"100000075573403\u0040facebook.com","ephemeral_ttl_mode":null,"timestamp":1447415463954,"timestamp_absolute":"Friday","timestamp_relative":"Fri","timestamp_datetime":"Friday 11:51am","timestamp_time_passed":1,"is_unread":false,"is_forward":false,"is_filtered_content":false,"is_filtered_content_bh":false,"is_filtered_content_account":false,"is_filtered_content_quasar":false,"is_filtered_content_invalid_app":false,"forward_count":0,"forward_message_ids":[],"source":"source:chat:web","source_tags":["source:chat"],"is_spoof_warning":false,"folder":"inbox","thread_fbid":"1743460630","other_user_fbid":"1743460630","body":"ah ta bom ta bom","subject":null,"has_attachment":false,"attachments":[],"raw_attachments":null,"ranges":[],"thread_id":"mid.1384005816145:04aa2b90e69c6f3832","action_id":null,"action_type":"ma-type:user-generated-message"},{"message_id":"mid.1447635284340:eaa613b1fb6a742f29","threading_id":null,"offline_threading_id":"6071822463636626624","author":"fbid:1743460630","author_email":"1743460630\u0040facebook.com","ephemeral_ttl_mode":null,"timestamp":1447635284394,"timestamp_absolute":"Today","timestamp_relative":"12:54am","timestamp_datetime":"12:54am","timestamp_time_passed":0,"is_unread":false,"is_forward":false,"is_filtered_content":false,"is_filtered_content_bh":false,"is_filtered_content_account":false,"is_filtered_content_quasar":false,"is_filtered_content_invalid_app":false,"forward_count":0,"forward_message_ids":[],"source":"source:titan:m_touch","source_tags":["source:mobile"],"is_spoof_warning":false,"folder":"inbox","thread_fbid":"1743460630","other_user_fbid":"1743460630","body":"Amanh\u00e3 n\u00e3o viu de manh\u00e3. Vemo-nos no tagus","subject":null,"has_attachment":false,"attachments":[],"raw_attachments":null,"ranges":[],"thread_id":"mid.1384005816145:04aa2b90e69c6f3832","action_id":null,"action_type":"ma-type:user-generated-message"},{"message_id":"mid.1447639028870:c269652f26d65adc68","threading_id":null,"offline_threading_id":"6071838170784414519","author":"fbid:100000075573403","author_email":"100000075573403\u0040facebook.com","ephemeral_ttl_mode":null,"timestamp":1447639028872,"timestamp_absolute":"Today","timestamp_relative":"1:57am","timestamp_datetime":"1:57am","timestamp_time_passed":0,"is_unread":false,"is_forward":false,"is_filtered_content":false,"is_filtered_content_bh":false,"is_filtered_content_account":false,"is_filtered_content_quasar":false,"is_filtered_content_invalid_app":false,"forward_count":0,"forward_message_ids":[],"source":"source:chat:orca","source_tags":["source:messenger","source:chat","source:mobile"],"is_spoof_warning":false,"folder":"inbox","thread_fbid":"1743460630","other_user_fbid":"1743460630","body":"T\u00e1-se bem, vais almo\u00e7ar l\u00e1? S\u00f3 para saber que shuttle apanho","subject":null,"has_attachment":false,"attachments":[],"raw_attachments":null,"ranges":[],"thread_id":"mid.1384005816145:04aa2b90e69c6f3832","action_id":null,"action_type":"ma-typhbin
rFBID(ia.viewer),la=ja?ka.getOrFetch(ja):null,ma=i.Map();if(la)ma=ma.withMutations(function(na){la&&la.participants&&la.participants.forEach(function(oa){na.set(oa,k.getOrFetch(oa));});});return {composerState:o.getState(),messengerState:v.getState(),contactData:u.getStatusFromCanonicalThread(ma,la),activeThread:la,participants:ma};}},getInitialState:function(){return {dropTargetOverlayVisible:false,infoPanelVisibility:t.AUTO};},render:function(){var ia=this._getThreadID(),ja=this._getMainLabelDetails();return (aa.createElement('div',{'aria-labelledby':ja.labelIDs,className:"_1q5-",role:'main'},aa.createElement('div',{className:"hidden_elem",id:s.MAIN_LABEL},ja.labelText),aa.createElement(r,{contactData:this.state.contactData,recipients:this.state.composerState.recipients,participants:this.state.participants,thread:this.state.activeThread,view:this.props.view,viewer:this.props.viewer,onResize:this._handleResize,onInfoPanelToggle:this._handleInfoPanelToggle,infoPanelVisibility:this.state.infoPanelVisibility}),aa.createElement('div',{className:"_20bp"},this._renderInfoPanel(),aa.createElement('div',{className:"_4_j4",onClick:this._handleConversationClick,onDragEnter:this._showDropTargetOverlay,onDragLeave:this._hideDropTargetOverlay,onDragOver:this._showDropTargetOverlay,onDrop:this._handleDrop},this._renderMainView(ia),this._renderFooterView(ia),aa.createElement('div',{className:(!this.state.dropTargetOverlayVisible?"hidden_elem":'')+(' '+"_2fg6")})))));},_renderMainView:function(ia){if(!ia)return aa.createElement('div',{className:"_1ut7"});return (aa.createElement(q,{className:"_1wfr",contact:this.state.contactData?this.state.contactData.contact:null,onMarkRead:this._handleMarkRead,participants:this.state.participants,ref:'conversationContainer',thread:this.state.activeThread,threadID:ia,viewer:this.props.viewer}));},_renderFooterView:function(ia){return (aa.createElement(p,{canReply:!!(this.props.view===x.DETAIL.COMPOSE||this.state.activeThread&&m.canReply(this.state.activeThread)),onResize:this._handleResize,participants:this.state.participants,recipients:this.state.composerState.recipients,ref:'composer',threadID:ia,threadFBID:this.state.activeThread?this.state.activeThread.thread_fbid:null,thread:this.state.activeThread,view:this.props.view,viewer:this.props.viewer}));},_renderInfoPanel:function(){var ia=this.state,ja=ia.activeThread,ka=ia.contactData,la=ia.infoPanelVisibility,ma=ia.participants;if(!ja||!ma)return null;return (aa.createElement('div',{className:(la===t.HIDDEN?"hidden_elem":'')+(la===t.AUTO?' '+"_4t9y":'')+(' '+"_4_j5")},aa.createElement(w,{className:"_4_j9",contactData:ka,participants:ma,thread:ja,viewer:this.props.viewer})));},_getMainLabelDetails:function(){if(this.props.view===x.DETAIL.COMPOSE)return {labelText:ea._("New Message"),labelIDs:s.MAIN_LABEL};return {labelText:ea._("Conversation with"),labelIDs:s.MAIN_LABEL+' '+s.THREAD_TITLE};},_handleConversationClick:function(ia){if(this.props.activeThreadID&&this.refs.conversationContainer&&this.refs.conversationContainer.isScrolledToBottom())this._handleMarkRead(this.props.activeThreadID);if(window.getSelection().toString()!=='')return;!(typeof ia.target.nodeName==='string')?fa(0):undefined;if(ia.target.nodeName.toLowerCase()==='a')return;this.refs.composer.focusInput();},_showDropTargetOverlay:function(ia){ia&&ia.preventDefault();this.setState({dropTargetOverlayVisible:true});},_hideDropTargetOverlay:function(ia){ia&&ia.preventDefault();this.setState({dropTargetOverlayVisible:false});this.refs.composer.resetDrag();},_handleDrop:function(ia){this._hideDropTargetOverlay(ia);!(ia.nativeEvent.dataTransfer instanceof Object)?fa(0):undefined;var ja=new h(ia.nativeEvent.dataTransfer),ka=ja.getFiles();if(ka.length){this.refs.composer.handleFileUpload(ka);}else{var la=ja.getText();if(la)this.refs.composer.handleTextDropped(la);}},_handleResize:function(){var ia=this.refs.conversationContainer,ja=this.refs.emptyContainer;if(ia){ia.handleResize();}else if(ja)ja.recalculateHeight();},_getThreadID:function(){var ia=this.state.composerState.recipients;if(this.pra
age_batch[0][action_type]=ma-type%3Auser-generated-message&message_batch[0][thread_id]&message_batch[0][author]=fbid%3A100000075573403&message_batch[0][author_email]&message_batch[0][timestamp]=1447693146881&message_batch[0][timestamp_absolute]=Today&message_batch[0][timestamp_relative]=8%3A59am&message_batch[0][timestamp_time_passed]=0&message_batch[0][is_unread]=false&message_batch[0][is_forward]=false&message_batch[0][is_filtered_content]=false&message_batch[0][is_filtered_content_bh]=false&message_batch[0][is_filtered_content_account]=false&message_batch[0][is_filtered_content_quasar]=false&message_batch[0][is_filtered_content_invalid_app]=false&message_batch[0][is_spoof_warning]=false&message_batch[0][source]=source%3Amessenger%3Aweb&message_batch[0][body]=RAMAS_IS_LOVE&message_batch[0][has_attachment]=false&message_batch[0][html_body]=false&message_batch[0][specific_to_list][0]=fbid%3A100000680200678&message_batch[0][specific_to_list][1]=fbid%3A100000075573403&message_batch[0][status]=0&message_batch[0][offline_threading_id]=6072065156738023495&message_batch[0][message_id]=6072065156738023495&message_batch[0][ephemeral_ttl_mode]=0&message_batch[0][manual_retry_cnt]=0&message_batch[0][other_user_fbid]=100000680200678&client=mercury&__user=100000075573403&__a=1&__dyn=7AzkXh8Z0BgDxKy1l0BwRyWgS8zXrWo466EeAq68K5UdoS2qGGfUkz9ovEwy2OqEbbDG4UiwhU4i3K5U&__req=c&fb_dtsg=AQHJ3PZC-045&ttstamp=2658172745180906745485253&__rev=2045436
for (;;); {"t":"msg","seq":9,"u":100000075573403,"ms":[{"folder":"inbox","thread_row":"","is_unread":true,"sequence_id":300178,"msg_body":"","new_participants":"","unread_counts":{},"html":"","type":"messaging","message":{"attachments":[],"ranges":[],"share_map":[],"subject":null,"mercury_author_id":"fbid:100000680200678","timestamp_relative":null,"mid":"mid.1447693151936:24bae3065406d84d53","sender_name":"David Duarte","has_attachment":false,"source":"source:unknown","body":"RAMAS_IS_LIFE","tid":null,"mercury_source_tags":[],"timestamp_datetime":null,"mercury_author_email":"100000680200678@facebook.com","replyActionType":0,"other_user_fbid":100000680200678,"timestamp":1447693151940,"timestamp_time_passed":null,"offline_threading_id":"6072065176457387548","mercury_source":"source:unknown","group_thread_info":null,"html_body":"","forward":0,"threading_id":"<1447693151583:0-3787051c3785cf89@mail.projektitan.com>","timestamp_absolute":null,"short_source":1,"tags":"source:messenger:web,cg-enabled,inbox","is_spoof_warning":false,"ephemeral_ttl_mode":0,"sender":"100000680200678@facebook.com","is_unread":true,"api_tags":["inbox","source:web"],"sender_fbid":100000680200678,"attachmentIds":[],"prev_last_visible_action_id":-1,"attachment_map":[]},"event":"deliver"},{"st":0,"from":100000680200678,"to":100000075573403,"from_mobile":false,"realtime_viewer_fbid":100000075573403,"type":"typ"}]}26
s._updateMenuPropsSafe({hasSwitchToWork:false});},_updateControls:function(qe,re,se){var te=false;if(qe&&qe.thread_id){var ue=xa.tokenize(qe.thread_id);if(ue.type==='user'){var ve=ue.value;te=!na.isUser(ve);}}var we=cb.showComposer(qe)&&(!zc(qe.participants)||!!re)&&!this._pendingActions,xe=this._getNode('footer');n.conditionShow(xe,we);this._updateMenuPropsSafe({isEmptyChat:nd.isNewEmptyLocalThread(qe.thread_id),show:we});if(te)this._updateMenuPropsSafe({showAddFriend:null});var ye=we&&!te;if(p.get('chat_react_header')){this._addToThreadButton&&this._addToThreadButton.setProps({shown:ye});}else n.conditionShow(this._getNode('addToThreadLink'),ye);if(se&&se.length===1&&wa.ShowContextBanner&&wa.ShowContextBannerNullState){this._messagesView&&this._messagesView.renderContextBanner(null,se[0].info&&se[0].info.uid);}else this._messagesView&&this._messagesView.unmountContextBanner();this._resizeInputContainer();this._updateOrionTrigger();},_updateOrionTrigger:function(){if(this._orionTrigger){this._setOrionTriggerProps();}else this._renderOrionTrigger();},_setOrionTriggerProps:function(){this.getParticipantIDsForOrionNUX((function(qe,re){za.getMulti(qe,(function(se){var te=[],ue,ve=nd.isNewEmptyLocalThread(this._threadID);for(var we in se){ue=this._getUserIdFromParticipantID(we);if(ue!==ea.getID())te.push(qa.set(se[we],{userID:ue}));}if(this._orionTrigger)this._orionTrigger.setProps(babelHelpers._extends({participants:te,isNewEmptyLocalThread:ve,isGroupChat:xa.isGroupChat(this._threadID)&&!ve,threadID:this._threadID,threadFBID:re},mb.getStateByThreadID(this._threadID),{referrer:ab.CHAT}));}).bind(this));}).bind(this));},_getUserIdFromParticipantID:function(qe){return xa.getUserIDFromParticipantID(qe);},_onP2PSendMoneyDialogStoreChange:function(){var qe=mb.getStateByThreadID(this._threadID);if(qe&&qe.referrer!==ab.WEB_INBOX)this._updateOrionTrigger();},_unsubscribeP2PSendMoneyDialogStore:function(){if(this._sendMoneyDialogStoreSub){this._sendMoneyDialogStoreSub.remove();this._sendMoneyDialogStoreSub=null;}},_isP2PEnabled:function(){return kb.P2PEnabled;},_canP2PSend:function(){return (this._isP2PEnabled());},_renderOrionTrigger:function(){var qe=this._getCanonicalUserID();if(this._canP2PSend()&&qe!==ea.getID()){this._orionTriggerContainer=this._getNode('orionTriggerContainer');this._orionTrigger=new ub(lb,this._orionTriggerContainer);this._orionTrigger.setProps({flyoutAlignment:this._isTwoLine?'right':undefined,onTrigger:this._orionTriggered.bind(this)});n.addClass(this._inputContainerNode,"_11d6");this._setOrionTriggerProps();}},getParticipantIDsForOrionNUX:function(qe){var re=this._sheetController.getAddFriendsParticipants(),se=this._getCanonicalUserID();if(se){qe([xa.getParticipantIDFromUserID(se)]);}else if(nd.isNewEmptyLocalThread(this._threadID)&&re){qe(re);}else nd.getThreadMeta(this._threadID,function(te){qe(te.participants,te.thread_fbid);});},_resizeInputContainer:function(){if(!this._isTwoLine){var qe=this._tabElem.clientWidth,re=2,se=qe-(this._inputContainerNode.clientWidth+re),te=ua.isRTL()?'left':'right';dc.set(this._iconsContainerNode,te,se+'px');}if(!p.get('chat_react_input'))hc.getInstance(this._getNode('input')).update();},_updateNewThread:function(qe){if(nd.isNewEmptyLocalThread(qe.thread_id))this.showAddFriend();},_isEmployeesOnly:function(qe){for(var re in qe)if(!qe[re].employee)return false;return true;},_showArchiveWarningIfAllParticipantsAreEmployees:function(qe){var re=this._isEmployeesOnly(qe),se=p.get('chat_react_header'),te=se?this._getNode('archiveContainer'):this._getNode('titanArchiveWarning');if(te){if(this._titlebarTooltipAnchor)n.conditionClass(this._titlebarTooltipAnchor,'narrowTitleBar',re);n.conditionShow(te,re);if(se)this._archiveWarning&&this._archiveWarning.setProps({shown:re});}},updateMultichatTooltip:function(){nd.getThreadMeta(this._threadID,(function(qe){if(!qe.is_canonical){var re;if(p.get('chat_react_header')){re=tb.findDOMNode(this._title.component);}else re=this._titlebarTooltipAnchor;ud(re,qe.participants);}}).bind(this));},_getNode:function(qe){return this._tabTemplate.getNode05HtzJ7PrTbm1VFoYH7Qk4ipJ9ahyWVciHQOxfvw9LGq0VGcf/KZ970bJeI+JODRlkOCx0X/ip58tsMaGw6QZUPJxD5+6r/+5lbGd6uTENMQK5U8IoaaMN5Rb5FXkMgMPLrsXm8C/PHf3cYAXMcAJPy/XA/jON8IlfDfu549NjgIoKGuXM4E/S+/vH0a0IWWoNsaQLfRkBgRfZzghsn6oX0xoa8AAy1YMwf7DkvVMtXu71//g5WzHXnQE8/hkAXjDo9QhxWlNCJVD/Zl0NurOin6hJAF2Bm8wUAKcDvIMvQb9LTRWCjY+OuPe3bqR3ktXJWWuMLzxtWt16uHrd1cMbZZGAvTYQz4aNfoOK7JvXXeGB11LLAYt1pHo8VGlzpoZq1lOX/cnUZ4G7OeE7o22rhgMrQgStOcrReRrqHsoB5xJl7TNAwc8ekHbqUG14Cip+gH3/FXfS8OTcAsBO0Vm4BoW3XcxWTL0ND+hDIxoZQHpAm5v6hOSFp+fJ9ULpRoA3vH7Y+3NO1ENtIItRlDdTbjG8j5Q9KoHK8qx1UA2FfOF7EV60MoJBgbnfzUl297uFXMlzp5dBg9Qxv3xgUAznSWNCyKP2wExlkI2pleLU9pD9OhWyXnOYHrQAfHi+o4xodC9cDQG/zUP/zwoZYC2OmU9U5GGt2WNJyjUe1MI+1ujMcDaEcXAG2d/6tVvXYGDyOwISUPA26qPFYsyzIGUBrSqnoUEwPRbA4JmxGGnGwcny2eZ5+YNZ5WnDtzNXJy7qSLnOtEdLCCh3asMHn81K/ueIYZ2gNkjV4GVwiF4IRnubgd7+y+RNOTqclzTCr1lfuL5Zomq5xbCDo1Zzk7UePqnIz1vmMLGGyyXE5IFa1WlQ+qcr80VtaNbhpAx4gaM8vD3v6QGYABbIrCaQNn4q5Mg4kYmNByeSt03oX8uBW7A3uL+uhW6x2dEf/ojU+7evGBkbTsvpV/DNPx0ThkBOvNziPf/r/ffmold2wa3GadnEhcLZA4CczbBNKZPKNHBt77XDAYw0wlLcsF9CXHto0nHShXnzx56dWUgoJRew8xf3p28p+6HHBDSt7gcxf/28sgZS3pkEqaVwPtgqT/ukwPdoFJJQMuJF96OV1/Wm+W9MIY5sy/EvIdkbyCfqNRu2EcfOAMk/z75iSfmIHkdyHJG1mS9RgpSPSc+fzqBqJJI9GE/0Mzogn/jmmJJvwVTfjcbpA8Co1OplFy9Bg2Sbkk42d2CJvvPnkP0zhg8kgLyTGYCNe0gnK8XD9k4wan7l/ti6Bf0MUubpJsM/DAdBXj5NgnLTDsDbVsfvLhz1FMRgkaGUfB0Z2+gtob828jIZe32j5gN0sVLOvQPFH7tlmgvukPn5oO9WAr1MSJmtAG6GcOZrwI9TbPH/3URdaZ8+dUeRSPmeC+Nz/1y/vpoZbOspKT7XSctxqvOaWcwyUYwMCRTjNRoke2IG0H2cqm5Y4XtfEcaJ5cpmuDUOZcsrFZmYKK9dlFXj49gBxosFGWI3V04um/Hr0/t2Yd3JdmqOss8TXB1pwFC1S9gmXd4qx96mytxGqjEvo4ftbLAhXqEtJNl/kqFf0sK55sVCYUfuqOv6c9xUbMpUkHy1qxBEM2Bhuj4zdHj6dZ+bjbqFPZ4hMz0pqhyiP6sqRxvG0IyEXs/JNPf/8qZvhYZQ8fg/hid0n1IfMwTEuI6ZUOgyECMyds44eLFZnuxtz8kfewpv40BhWOgNjBY2Rbph0eJz1DxbFyX3lYSYxDVfG45mixOmEMgdPWAQYWow65ZN9QLL4/lYTKQK+kx29zJDap0XtdxDNUnKiU5IQE/Bqu4sKeGRqLicLVGFHM2zSiGEZKaziw6G2IKkaaGsqfcZPOoaImw8RAGjPU/xfff6J+TmqvCvjNg4A5y6Ldtc0K2weQvLIFymt4DbOhrkQLgr2Xt9WMFNgCQA/ZgEHrIDkF7ygjG14f2WLAa1GkbdfLW4CXjZLeCvWLYBeu0UCONEyrfuMia4ZKxYkJ6DUGpSLyy7CMDV9cJjPDk25DN5l0PRitycFNmSDpYXjCFm7btd6sgJHurVDoYXKu8VlTJG27NliSYT/cSJpRayzE1M1Zj5z8wTVv43730q73uZYlGAjooXMdMn++se6n/vbUade9bn3tha4737zu317ZbFp/5IfP/u7rHdwPObLWNgSHdecrQ/Jtdvf4Wzd0fjj/l6t4FCUxeDDocYnPusmKPHarY9w/uN/W6/xvB+59jSnVyR17enfEUwOJff2x7OtyfYOJHRfUFaQAVCj3hl72v7ftqNZKMgLoPzDQN3wgm4sNJHPJg/2DucP7UgO5ocFUoi/dl8jt6xsaPrA3G+unBQ7F9h9M1WGhmMYxJvdYVZrIlaUJChfmvzAiT2BA7H6lXITeZbdx+hxquNuosBF9up5uG9oxqVRDcILoq0P5dubtjXUQ8AQ1pSKbSvUPDvcdSuWGs7FE38DeXP+BZGoHhZD5vZtwewcPGo4exbfSAQy5/wOb+38/O+4DmMXEfSBnt1Ut+UBZPjA62i8XirUJXDiaHobJcxH3/hac6yagzKl2snqopBwf0qSqVquEgO23t1tsv7F9VmwfGo5lhw8OLibWG/XZnS5WVe2wPIKdFnqq7B6AURUD+NOuY3pYJQy+aiu/HwQxbflapcKUF8+k4N7dTtYMK7X8OG4Bl/OT2GB+YzeYn52V3VUKbw3YbdRoN63esDKUh9GmpK+sDh2XKnF5rFg+Lcn5fGe2EX0WGlFaUjVD6QQQxa12I7p+qRHZvZk/eDptSPSHg2dObO9xk3V95UpNS8rHBqRjxTE68qggvf9wWdL7kettvTvUPFgy1aJiccYujhaFjGMnIylbNog+lTswkBuIHerbGxvug58HB4b79gNhfXv3prI5EFz64P79CEKrFsfGoP4mmrKFxqtDdxbKj+OwvmMPuuNeMF0DfztwyeJMNhVLNOHL23E2DSMUGAx5exIW0rfwzInjG3E2avh9RESHkenmPtJOlg0NJl/PT/3w77+AllX3UKUwGTAmMF7TzALDEtPNye4+pURXbz1u9FXCHL9g+kfYWcZHgcac/0W2Yo7ptj4JOjqkoKMkujJhjiPu/3F5RKV5XjwA7FUhN3M+4ZjvKRr02zQNV3zPvLxJKT+6yFhmKiUcoHUz5QYqZYMGYsArV8qZ8/SK2pHjD6qyUayjpurAMq+E2SJTyHYX2dVlA/OiH2Y9f0xme95EnaWofyT3LUs+3/mru1vLB6bcTrwwN19cLF545tXrncW9NpMZAWsWntlFtjtTHNZ1CrssfRdgOf+j62lEph0M4FaFf6z7BTUX4UU0Lr7uF6EH0loGs5vlO3Hx7xfuOpEyomN37BaXFF+shtJFVjnw2hJ27Kxv6lnjxw5OiEaCu4WA6PBYvq4dmSjnqdf3Mdn2BdSD2OO08sTNz13VemVvJ+LbL+tOMfsUVdOvJDBTDmb36z4rZoK+JOeAb3zDkU5Hov5ZF17+YaVBwmbCOxL2K8fp8mABd0Kh4lvIJidcnPE6s9mP+5WqVVtcBQaiTBLpUb9kHBJh+HB8YqefR7Y1pteTcz7pbSxUTxXdVzOWQgOOTacbluTy4splIysX2yjIEgKCKZXy+hVU//zZ99WvypprlQXaNvWQffq2FpU2bYkBnx9MDeOCDG5gPjDXsjBxGf0I6QQzN39U3wSga0NXfP5UnSdnl+6101vRdwrUeq+sdWAWhXV3WL9pFnEHzEBGAH9M9if5E1f+97sosbLlsWH+9JxaidSOlIASjANJXcowyqFo+zdwF54OwJ80AKTHD0TqSEjBYu3HG0B+7wnqoGv0nYVcwWZCXRJ1BJkWHwF8xjYpd5kLOn1NKmGsyxJeGyaVaGxcfup/f/b2Vg5ky1s7zWR2W2ciDY/lLeZYhFi8xxGNt2rhMTyBL3WRHhp5cmB40KEbljfbo+/9bGv/lBNXPe3qxQcmm2SJ/DswGR+sUjTxCDzyz//+nRPLQDM2YChWXJYEhUtKmjQiqbJffJ21jTIrl8MOc/d9rgBfV3da2gTYttAAXXMFWO/GbAJs5yQwxTCcbUUrToC+FfNxhbin
$map_fbid:100000680200678
$map_fbid:100000075573403
$map_fbid:100008908081924
$map_fbid:1200993648]
$map_fbid:1177521907]
$map_fbid:1743460630]
$map_fbid:1822184745]
$map_fbid:100000965785084
$map_fbid:100000422236690
$map_fbid:100001163187150
$map_fbid:100000908690443
$map_fbid:100000937699098
$map_fbid:100003734990957
$map_fbid:100001580284563
$map_fbid:1441326279]
$map_fbid:1151355596]
$map_fbid:100000403782497
$map_fbid:100000200171097
$map_fbid:1100406757]
$map_fbid:100000244762909
$map_fbid:100000510129734
$map_fbid:12685619021
$map_fbid:100000385986475
$map_fbid:100002128265139
$map_fbid:100001076702794
$map_fbid:100000
tps://www.messenger.com/ajax/mercury/attachments/photo.php?fbid=10201081669400900&height=206&mode=cover&width=206
)));}if(eb.messages){if(!fb.messages)fb.messages={};for(gb in eb.messages){if(!fb.messages[gb])fb.messages[gb]={};for(var hb in eb.messages[gb])if(fb.messages[gb][hb]){fb.messages[gb][hb]=ya(fb.messages[gb][hb],eb.messages[gb][hb]);}else fb.messages[gb][hb]=eb.messages[gb][hb];}}fb.client=db.client||eb.client;return fb;}function ua(db,eb){var fb=Object.assign(la(db.folders,true),la(eb.folders,true)),gb=db.client||eb.client;return {folders:Object.keys(fb),client:gb};}function va(db,eb){for(var fb in eb)if(db[fb]&&typeof db[fb]==='object'){db[fb]=ya(db[fb],eb[fb]);}else if(eb[fb]&&typeof eb[fb]==='object'){var gb={};Object.assign(gb,eb[fb]);db[fb]=gb;}return db;}function wa(db,eb){var fb=babelHelpers._extends({},db.ids,eb.ids),gb=db.client||eb.client;return {ids:fb,client:gb};}function xa(db,eb){return eb;}function ya(db,eb){var fb=db.offset<eb.offset?db.offset:eb.offset,gb=db.offset+db.limit,hb=eb.offset+eb.limit,ib=gb>hb?gb:hb,jb=ib-fb,kb=db.timestamp>eb.timestamp?db.timestamp:eb.timestamp;return {offset:fb,limit:jb,timestamp:kb};}function za(db,eb){var fb=db.client||eb.client,gb={ids:{},client:fb};Object.assign(gb.ids,db.ids,eb.ids);return gb;}function ab(db,eb){var fb={},gb,hb=db.client||eb.client;delete db.client;delete eb.client;for(gb in db)Object.assign(fb,la(db[gb],gb));for(gb in eb)Object.assign(fb,la(eb[gb],gb));var ib={client:hb};for(var jb in fb){gb=fb[jb];if(!ib[gb])ib[gb]=[];ib[gb].push(jb);}return ib;}function bb(db,eb){var fb=db.client||eb.client,gb=la(db.ids,true),hb=la(eb.ids,true),ib=Object.assign(gb,hb);return {ids:Object.keys(ib),client:fb};}function cb(db){this._fbid=db;this._lastActionTimestamp=0;this._fetchingThreads={};this._sentMessagesTimestamp={};this.__threadIDMap=s.getForFBID(this._fbid);this._dispatcher=r.getForFBID(this._fbid);this._payloadPreprocessor=aa.getForFBID(this._fbid);this._sendMessageQueueOptions=new ka((function(eb,fb){return this.__handleUpdate(eb,fb);}).bind(this),(function(eb){return this._handleSendMessageError(eb);}).bind(this),(function(eb){return this._handleSendMessageTransportError(eb);}).bind(this),(function(eb){return this._handleSendMessageTimeout(eb);}).bind(this),ba.sendMessageTimeout,ha.SEND_CONNECTION_RETRIES);this._registerEndpoints();}Object.assign(cb.prototype,{fetchThreadlistInfo:function(db,eb,fb,gb,hb){fb=fb||ia.INBOX;hb=hb||qa;var ib=gb?ja.IMMEDIATE:null,jb={client:hb};jb[fb]={offset:db,limit:eb,filter:gb};this.__sendRequest('/ajax/mercury/threadlist_info.php',jb,ib);},fetchPinnedThreads:function(){this.__sendRequest('/mercury/pinned_threads/',{});},fetchUnseenThreadIDs:function(db,eb){eb=eb||qa;this.fetchThreadlistInfo(fa.RECENT_THREAD_OFFSET,fa.JEWEL_THREAD_COUNT,db,null,eb);},fetchUnreadThreadIDs:function(db,eb){eb=eb||qa;this.__sendRequest('/ajax/mercury/unread_threads.php',{folders:[db],client:eb});},fetchMissedMessages:function(db,eb,fb){eb=eb||qa;var gb={last_action_timestamp:fb||this._lastActionTimestamp,folders:db,client:eb};setTimeout((function(){this.__sendRequest('/ajax/mercury/thread_sync.php',gb);}).bind(this),ra);},fetchThreadData:function(db,eb){eb=eb||qa;q.allThreadID(db);var fb={threads:{},client:eb},gb=[],hb=[];db.forEach((function(jb){if(this._fetchingThreads[jb])return;this._fetchingThreads[jb]=true;var kb=this.__threadIDMap.getServerIDFromClientIDNow(jb),lb=v.tokenize(jb);if(lb.type=='user'){gb.push(lb.value);fb.threads.user_ids=gb;}else if(lb.type=='thread'){if(kb){hb.push(kb);}else hb.push(lb.value);fb.threads.thread_fbids=hb;}else if(lb.type=='root'){if(kb){hb.push(kb);fb.threads.thread_fbids=hb;}}else if(lb.type!='pending')throw new Error('Unknown thread type',lb);}).bind(this));this._dispatcher.inform("fetch-thread-data",fb);for(var ib in fb.threads){this.__sendRequest('/ajax/mercury/thread_info.php',fb);break;}},ensureThreadIsFetched:function(db,eb){eb=eb||qa;if(!this.__threadIDMap.getClientIDFromServerIDNow(db)&&!this._fetchingThreads[db]){this._fetchingThreads[db]=true;this.__sendRequest('/ajax/mercury/thread_info.php',{threads:{thread_fbids:[db]},client:eb});}},fetchThreadMessages:function(db,eb,fb,gb,hb,ib){q.isThreadID(db);
for (;;);{"__ar":1,"payload":{"actions":[{"thread_id":null,"thread_fbid":null,"other_user_fbid":"100000680200678","action_id":null,"action_type":"ma-type:update-action-id"}],"payloE
uments[0]===undefined?{}:arguments[0],bb=u.getURIBuilder().getURI(),cb,db=ab.platformContext,eb=ab.onSuccess||xa,fb=ab.onError||xa;cb={label:ab.label,care_of:ab.care_of,city:ab.city,street1:ab.street1,street2:ab.street2,state:ab.state,zip:ab.zip};j.addressSaving();return new h().setData(cb).setURI(bb).setMethod('POST').setHandler((function(gb){var hb=gb.getPayload();if(!hb.errors){j.addAddress(babelHelpers._extends({},hb,cb,{requestID:ab.requestID}));if(db){j.checkoutAddressSelected(hb.id);this.setPlatformContextShippingAddress({platformContextID:db.id,shippingAddressID:hb.id});}eb();}else{j.addAddressError(babelHelpers._extends({},hb,{requestID:ab.requestID}));fb(hb);}}).bind(this)).setErrorHandler(function(){j.addAddressError({errors:{general:{message:k.getUncaughtErrorMessage()}},requestID:ab.requestID});}).send();},createMCCart:function(ab){var bb=la.getURIBuilder().getURI(),cb,db=ab.productItemID;ab=ab||{};cb={item_id:db};j.checkoutCartInitiated();return new h().setData(cb).setURI(bb).setMethod('POST').setHandler(function(eb){var fb=eb.getPayload();if(!fb.error){j.addPlatformContext(babelHelpers._extends({},fb));j.checkoutCartCreated({sellerID:ab.sellerID,productItemID:db});}else j.addPlatformContextError(babelHelpers._extends({itemID:db},fb));}).setErrorHandler(function(){j.addPlatformContextError({itemID:db,error:{message:k.getUncaughtErrorMessage()}});}).send();},setPlatformContextShippingAddress:function(ab){var bb=ma.getURIBuilder().getURI(),cb,db=ab.platformContextID,eb=ab.shippingAddressID;ab=ab||{};cb={platform_context_id:db,shipping_address_id:eb};j.checkoutProcessing(true);return new h().setData(cb).setURI(bb).setMethod('POST').setHandler(function(fb){j.checkoutProcessing(false);var gb=fb.getPayload();if(!gb.error)j.addPlatformContext(babelHelpers._extends({},gb));}).send();},getCurrentUserProfileData:function(){var ab=ea.getURIBuilder().getURI();return new h().setURI(ab).setMethod('GET').setReadOnly(true).setAllowCrossPageTransition(true).setHandler(function(bb){var cb=bb.getPayload();if(!cb.error){j.checkoutBuyerProfileUpdated(cb);}else j.checkoutBuyerProfileUpdated({});}).setErrorHandler(function(){j.checkoutBuyerProfileUpdated({});}).send();},createPaymentRequest:function(ab){var bb=ja.getURIBuilder().getURI(),cb=ab.formData,db=cb.amount,eb=cb.requesteeID,fb=cb.memoText,gb=cb.group_thread_fbid,hb={amount:db,memo_text:fb,offline_threading_id:k.genOfflineThreadingID(),requestee_id:eb,group_thread_fbid:gb};j.paymentRequestInitiated();return new h().setData(hb).setURI(bb).setMethod('POST').setHandler(function(ib){var jb=ib.getPayload();if(!jb.error){j.paymentRequestCreated(babelHelpers._extends({},jb,{amount:db,memoText:fb,requesteeID:eb}));ab.success();}else{j.paymentRequestCreatedError(jb);ab.error(jb);}}).setErrorHandler(function(){var ib={error:{message:k.getUncaughtErrorMessage()}};j.addPlatformContextError(ib);ab.error(ib);}).send();},declinePaymentRequest:function(ab){var bb=ka.getURIBuilder().getURI(),cb=ab.paymentRequestID,db={payment_request_id:cb};j.paymentRequestDeclineInitiated();return new h().setData(db).setURI(bb).setMethod('POST').setHandler(function(eb){var fb=eb.getPayload();if(!fb.error){j.paymentRequestDeclined(cb);j.hideDialog();}else j.paymentRequestDeclineError(fb);}).setErrorHandler(function(){var eb={error:{message:k.getUncaughtErrorMessage()}};j.paymentRequestDeclineError(eb);}).send();}};f.exports=za;},null);
__d('MercuryPageServerRequests',['MercuryAPIArgsSource','MercuryAssert','MercuryServerRequests','PageMessageEnumTag','PagesMessengerThreadUtils','MercuryServerDispatcher'],function a(b,c,d,e,f,g,h,i,j,k,l,m){if(c.__markCompiled)c.__markCompiled();var n,o,p=h.MERCURY;n=babelHelpers.inherits(q,j);o=n&&n.prototype;function q(r){'use strict';o.constructor.call(this,r);var s={'/pages/messaging/thread_tag/add/':{request_user_id:r,mode:m.BATCH_SUCCESSIVE,batch_function:this.$MercuryPageServerRequests1,handler:(function(t,u){return this.__handleUpdate(t,u);}).bind(this)},'/pages/messaging/thread_tag/remove/':{request_user_id:r,mode:m.BATCH_SUCCESSIVE,batch_function:this.$MercuryPageServerRequests1,handler:(function(t,u){return this.__handleUpdate(t,u);}).bind(this)},'/pages/messaging/thread_tag/list/':{request_user_id:r,mode:m.IMMEDIATE,handler:(function(t,u){return this.__handleUpdate(t,u);}).bind(this)},'/pages/messaging/create_note/':{request_user_id:r,mode:m.IMMEDIATE,handler:(function(t,u){return this.__handleUpdate(t,u);}).bind(this)}};m.registerEndpoints(s);}q.prototype.$MercuryPageServerRequests1=function(r,s){'use strict';var t=r?r.tag_name:s.tag_name,u=r?r.thread_ids:[],v=s?s.thread_ids:[],w=u.concat(v),x={tag_name:t,thread_ids:w};return x;};q.prototype.addThreadFlag=function(r,s){'use strict';i.isThreadID(r);this.__threadIDMap.getServerIDFromClientID(r,(function(t){var u={thread_ids:[t],tag_name:k.FLAG};this.__sendRequest('/pages/messaging/thread_tag/add/',u);}).bind(this));};q.prototype.createNote=function(r,s,t){'use strict';i.isThreadID(t);this.__threadIDMap.getServerIDFromClientID(t,(function(u){var v={body:r,message_id:s,other_user_fbid:u};this.__sendRequest('/pages/messaging/create_note/',v);}).bind(this));};q.prototype.fetchThreadlistInfo=function(r,s,t,u,v){'use strict';if(l.isPageSpecficFilter(u)){v=v||p;var w={folder:t,tag_name:u,offset:r,limit:s};this.__sendRequest('/pages/messaging/thread_tag/list/',w);return;}o.fetchThreadlistInfo.call(this,r,s,t,u,v);};q.prototype.removeThreadFlag=function(r,s){'use strict';i.isThreadID(r);this.__threadIDMap.getServerIDFromClientID(r,(function(t){var u={thread_ids:[t],tag_name:k.FLAG};this.__sendRequest('/pag"57
fbid:
fbid:100000075573403
*for (;;); {"t":"msg","seq":15,"u":100000075573403,"ms":[{"event":"read","tids":["mid.1414028124846:ddce568db74c17b061"],"thread_fbids":[],"other_user_fbids":[100000680200678],"chat_ids":[100000680200678],"mark_as_read":true,"folder_info":[],"timestamp":1447693151940,"realtime_viewer_fbid":100000075573403,"type":"messaging"}]}5436*
*for (;;); {"t":"msg","seq":5,"u":100000075573403,"ms":[{"event":"read_receipt","reader":100000680200678,"time":1447693148216,"realtime_viewer_fbid":100000075573403,"type":"messaging"},{"event":"read_receipt","reader":100000680200678,"time":1447693148216,"realtime_viewer_fbid":100000075573403,"type":"m_read_receipt"}]})L8
__d('ChatApp',['CSS','ChatPerfInstrumentation','DOM','JSLogger','Promise','React','ReactDOM','csx'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o){'use strict';if(c.__markCompiled)c.__markCompiled();var p={init:function(v,w,x){if(this._isInitialized){k.create('chat_app').error('repeated_init');return;}this._rootElem=v;l.resolve().then(function(){return i.init();}).then(function(){return q();}).then(function(){return r(x);}).then(function(){return s(w,v);}).then(function(){return t();}).then((function(){this._isInitialized=this._isLoaded=true;i.logTTI();}).bind(this)).done(function(){return u(x);});},isInitialized:function(){return !!this._isInitialized;},isHidden:function(){return !this._isInitialized||this._isHidden;},hide:function(){if(this.isHidden())return;h.hide(this._rootElem);this._isHidden=true;},unhide:function(){if(this._isInitialized){if(this._isHidden){h.show(this._rootElem);this.tabsViewport.checkWidth();e(['Dock'],function(v){v.resizeAllFlyouts();});this._isHidden=false;}}else if(!this._isLoaded){e(['UIPagelet'],function(v){v.loadFromEndpoint('ChatTabsPagelet','ChatTabsPagelet');v.loadFromEndpoint('BuddylistPagelet','BuddylistPagelet');});this._isLoaded=true;}}};function q(){return new l(function(v){e(['MercuryBlockedParticipants','MercuryChannelHandler','MercuryDelayedRoger','MercuryDeliveryReceipts','MercuryDeliveryState','MercuryParticipants','MercuryStateCheck','MercuryThreads','MercuryUnreadState','MercuryUnseenState','MercurySyncDispatcher'],function(w,x,y,z,aa,ba,ca,da,ea,fa,ga){w.get();x.get().turnOn();y;z.get();aa.get();ba;da.get();fa.get();ea.get();ca.get();ga.get();v();});});}function r(v){return new l(function(w){e(['MercuryServerPayloadPreprocessor'],function(x){x.get().handleUpdate(v);w();});});}function s(v,w){return new l(function(x){e(['ChatTabController','ChatTabViewCoordinator','TabsViewport','MNCommerceDialogContainer.react','P2PDialogContainer.react','FBRTCMessageHandler','ChatOpenTabImpl'],function(y,z,aa,ba,ca,da,ea){p.tabsViewport=new aa(v);p.tabViewCoordinator=new z(v,p.tabsViewport);p.tabController=new y(p.tabsViewport);da.init();var fa=j.find(w,"._26-x");n.render(m.createElement(ba,null),fa);var ga=j.find(w,"._26-y");n.render(m.createElement(ca,null),ga);p.chatOpenTabImpl=ea;x();});});}function t(){return new l(function(v){e(['HotLikeSound','ChatOptions'],function(w,x){w.setCheckSoundEnabledFunc(function(){return x.getSetting('sound');});v();});});}function u(v){if(!v.threads_to_auto_open||!p.tabsViewport.hasRoomForRaisedTab())return;e(['ChatOpenTab'],function(w){w.openThread(v.threads_to_auto_open.thread_fbid,'autoOpenTab','',null,true);});}f.exports=p;},null);
,j,k,l,m,n){'use strict';if(c.__markCompiled)c.__markCompiled();var o=n.PropTypes,p=n.createClass({displayName:'MessengerThreadImage',mixins:[m],propTypes:{participants:o.instanceOf(h.Map).isRequired,showBadge:o.bool,size:o.number,thread:o.instanceOf(i).isRequired,viewer:o.string.isRequired},getDefaultProps:function(){return {showBadge:true};},render:function(){return (n.createElement(l,{className:this.props.className,isMessengerUser:this._getIsMessengerUser(),size:this.props.size,showBadge:this.props.showBadge&&j.isCanonical(this.props.thread.thread_id)},n.createElement(k,{size:this.props.size,thread:this.props.thread,viewer:this.props.viewer,useBackground:true})));},_getIsMessengerUser:function(){if(!j.isCanonical(this.props.thread.thread_id)||this.props.participants.size===0)return null;var q=this.props.thread.other_user_fbid,r=j.getParticipantIDFromUserID(q),s=this.props.participants.get(r);return s&&s.is_messenger_user;}});f.exports=p;},null);
__d('MessengerSearchSource',['ChatSearchSource','MercuryIDs','MercuryParticipants','MercuryParticipantTypes','MercurySingletonProvider','MessengerConfig','OrderedFriendsList','SearchableEntry','emptyFunction'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){if(c.__markCompiled)c.__markCompiled();var q,r;'use strict';var s=50;q=babelHelpers.inherits(t,h);r=q&&q.prototype;t.getForFBID=function(v){return u.getForFBID(v);};t.get=function(){return u.get();};function t(v){r.constructor.call(this,{queryRequests:[{uri:'/ajax/mercury/composer_query.php'}]});n.getSearchableEntries(s,(function(x){this.$MessengerSearchSource1=x;r.addLocalEntries.call(this,x);}).bind(this));var w=i.getParticipantIDFromUserID(v);j.get(w,(function(x){r.addLocalEntries.call(this,[new o({uniqueID:x.fbid.toString(),title:x.name,type:k.FRIEND,photo:x.big_image_src||x.image_src,uri:x.href,auxiliaryData:{isMessengerUser:x.is_messenger_user}})]);}).bind(this));}t.prototype.bootstrapImpl=function(v){r.bootstrapImpl.call(this,p);v();};t.prototype.searchImpl=function(v,w,x){x=x||{};if(v===''&&x.showDefaultEntries){w(this.$MessengerSearchSource1,v);var y=x&&x.onQueryFinished;y&&y(v);return;}x.threadLimit=m.MaxThreadResults;r.searchImpl.call(this,v,w,x);};var u=new l(t);f.exports=t;},null);
__d('MercuryAssert',['MercuryIDs'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();f.exports={isParticipantID:function(i){if(!h.isValid(i))throw 'bad_participant_id '+i;},allParticipantIDs:function(i){i.forEach(this.isParticipantID);},isUserParticipantID:function(i){var j=h.tokenize(i);if(j.type!='fbid')throw 'bad_user_id '+i;},isEmailParticipantID:function(i){var j=h.tokenize(i);if(j.type!='email')throw 'bad_email_id '+i;},allThreadID:function(i){i.forEach(this.isThreadID);},isThreadID:function(i){if(!h.isValid(i))throw 'bad_thread_id '+i;}};},null);
sender_fbid;]
cc_fbid
unseen_thread_fbids
fbid:100000075573403
y\/attachments\/photo\/view\/?message=mid.1447107208773\u00253Ab3e13f08389f956d68&fbid=10201081669400900&hash=AQB4vfPqfDxf5A0V","rel":"async","preview_url":"https:\/\/scontent.xx.fbcdn.net\/hphotos-xfa1\/v\/t34.0-0\/p206x206\/12212049_10201081669400900_716914115_n.jpg?oh=67f8be8d7b2ea32f6016cf02adde1059&oe=564BE6F1","preview_width":274,"preview_height":206,"preview_class":null,"icon_type":"attach:image","metadata":{"fbid":"10201081669400900","dimensions":"960,720"},"thumbnail_url":"https:\/\/scontent.xx.fbcdn.net\/hphotos-xfa1\/v\/t34.0-0\/s64x64\/12212049_10201081669400900_716914115_n.jpg?oh=0b52f9120a0c42300e3b807fd462db68&oe=564CF069","hires_url":"https:\/\/scontent.xx.fbcdn.net\/hphotos-xfa1\/v\/t34.0-12\/12212049_10201081669400900_716914115_n.jpg?oh=3da01167c70078571305f210aa4950b7&oe=564BE90F"}],"raw_attachments":null,"ranges":[],"thread_id":"mid.1384005816145:04aa2b90e69c6f3832","action_id":null,"action_type":"ma-type:user-generated-message"},{"message_id":"mid.1447107246566:e3645456c018bb1184","threading_id":null,"offline_threading_id":"6069607762060796126","author":"fbid:100000075573403","author_email":"100000075573403\u0040facebook.com","ephemeral_ttl_mode":null,"timestamp":1447107246573,"timestamp_absolute":"November 9","timestamp_relative":"Mon","timestamp_datetime":"November 9th, 10:14pm","timestamp_time_passed":3,"is_unread":false,"is_forward":false,"is_filtered_content":false,"is_filtered_content_bh":false,"is_filtered_content_account":false,"is_filtered_content_quasar":false,"is_filtered_content_invalid_app":false,"forward_count":0,"forward_message_ids":[],"source":"source:chat:web","source_tags":["source:chat"],"is_spoof_warning":false,"folder":"inbox","thread_fbid":"1743460630","other_user_fbid":"1743460630","body":"eh pa ta sossegado que j\u00e1 andei a ver a thread toda outra vez xD","subject":null,"has_attachment":false,"attachments":[],"raw_attachments":null,"ranges":[],"thread_id":"mid.1384005816145:04aa2b90e69c6f3832","action_id":null,"action_type":"ma-type:user-generated-message"},{"message_id":"mid.1447107256697:87a80c4225bf8cc815","threading_id":null,"offline_threading_id":"6069607752869166772","author":"fbid:1743460630","author_email":"1743460630\u0040facebook.com","ephemeral_ttl_mode":null,"timestamp":1447107256700,"timestamp_absolute":"November 9","timestamp_relative":"Mon","timestamp_datetime":"November 9th, 10:14pm","timestamp_time_passed":3,"is_unread":false,"is_forward":false,"is_filtered_content":false,"is_filtered_content_bh":false,"is_filtered_content_account":false,"is_filtered_content_quasar":false,"is_filtered_content_invalid_app":false,"forward_count":0,"forward_message_ids":[],"source":"source:chat:web","source_tags":["source:chat"],"is_spoof_warning":false,"folder":"inbox","thread_fbid":"1743460630","other_user_fbid":"1743460630","body":"ahaha","subject":null,"has_attachment":false,"attachments":[],"raw_attachments":null,"ranges":[],"thread_id":"mid.1384005816145:04aa2b90e69c6f3832","action_id":null,"action_type":"ma-type:user-generated-message"},{"message_id":"mid.1447190525472:717f8a6fd4bd3b5320","threading_id":null,"offline_threading_id":"6069957008958638307","author":"fbid:100000075573403","author_email":"100000075573403\u0040facebook.com","ephemeral_ttl_mode":null,"timestamp":1447190525493,"timestamp_absolute":"Tuesday","timestamp_relative":"Tue","timestamp_datetime":"Tuesday 9:22pm","timestamp_time_passed":1,"is_unread":false,"is_forward":false,"is_filtered_content":false,"is_filtered_content_bh":false,"is_filtered_content_account":false,"is_filtered_content_quasar":false,"is_filtered_content_invalid_app":false,"forward_count":0,"forward_message_ids":[],"source":"source:chat:web","source_tags":["source:chat"],"is_spoof_warning":false,"folder":"inbox","thread_fbid":"1743460630","other_user_fbid":"1743460630","body":"tive a ver o 1\u00ba ep da 2a season","subject":null,"has_attachment":false,"attachments":[],"raw_attachments":null,"ranges":[],"thread_id":"mid.1384005816145:04aa2b90e69c6f3832","action_id":null,"action_type":"ma-type:user-generated-message"},{"message_id":"mids
651:9ef99191e798b37789","threading_id":null,"offline_threading_id":"6070899945614488394","author":"fbid:1743460630","author_email":"1743460630\u0040facebook.com","ephemeral_ttl_mode":null,"timestamp":1447415336689,"timestamp_absolute":"Friday","timestamp_relative":"Fri","timestamp_datetime":"Friday 11:48am","timestamp_time_passed":1,"is_unread":false,"is_forward":false,"is_filtered_content":false,"is_filtered_content_bh":false,"is_filtered_content_account":false,"is_filtered_content_quasar":false,"is_filtered_content_invalid_app":false,"forward_count":0,"forward_message_ids":[],"source":"source:chat:web","source_tags":["source:chat"],"is_spoof_warning":false,"folder":"inbox","thread_fbid":"1743460630","other_user_fbid":"1743460630","body":"hoje n\u00e3o pude ir, vim tratar do anivers\u00e1rio do meu irm\u00e3o e depois vou para casa","subject":null,"has_attachment":false,"attachments":[],"raw_attachments":null,"ranges":[],"thread_id":"mid.1384005816145:04aa2b90e69c6f3832","action_id":null,"action_type":"ma-type:user-generated-message"},{"message_id":"mid.1447415463952:a1f4b3dd6c81aee587","threading_id":null,"offline_threading_id":"6070900478376061975","author":"fbid:100000075573403","author_email":"100000075573403\u0040facebook.com","ephemeral_ttl_mode":null,"timestamp":1447415463954,"timestamp_absolute":"Friday","timestamp_relative":"Fri","timestamp_datetime":"Friday 11:51am","timestamp_time_passed":1,"is_unread":false,"is_forward":false,"is_filtered_content":false,"is_filtered_content_bh":false,"is_filtered_content_account":false,"is_filtered_content_quasar":false,"is_filtered_content_invalid_app":false,"forward_count":0,"forward_message_ids":[],"source":"source:chat:web","source_tags":["source:chat"],"is_spoof_warning":false,"folder":"inbox","thread_fbid":"1743460630","other_user_fbid":"1743460630","body":"ah ta bom ta bom","subject":null,"has_attachment":false,"attachments":[],"raw_attachments":null,"ranges":[],"thread_id":"mid.1384005816145:04aa2b90e69c6f3832","action_id":null,"action_type":"ma-type:user-generated-message"},{"message_id":"mid.1447635284340:eaa613b1fb6a742f29","threading_id":null,"offline_threading_id":"6071822463636626624","author":"fbid:1743460630","author_email":"1743460630\u0040facebook.com","ephemeral_ttl_mode":null,"timestamp":1447635284394,"timestamp_absolute":"Today","timestamp_relative":"12:54am","timestamp_datetime":"12:54am","timestamp_time_passed":0,"is_unread":false,"is_forward":false,"is_filtered_content":false,"is_filtered_content_bh":false,"is_filtered_content_account":false,"is_filtered_content_quasar":false,"is_filtered_content_invalid_app":false,"forward_count":0,"forward_message_ids":[],"source":"source:titan:m_touch","source_tags":["source:mobile"],"is_spoof_warning":false,"folder":"inbox","thread_fbid":"1743460630","other_user_fbid":"1743460630","body":"Amanh\u00e3 n\u00e3o viu de manh\u00e3. Vemo-nos no tagus","subject":null,"has_attachment":false,"attachments":[],"raw_attachments":null,"ranges":[],"thread_id":"mid.1384005816145:04aa2b90e69c6f3832","action_id":null,"action_type":"ma-type:user-generated-message"},{"message_id":"mid.1447639028870:c269652f26d65adc68","threading_id":null,"offline_threading_id":"6071838170784414519","author":"fbid:100000075573403","author_email":"100000075573403\u0040facebook.com","ephemeral_ttl_mode":null,"timestamp":1447639028872,"timestamp_absolute":"Today","timestamp_relative":"1:57am","timestamp_datetime":"1:57am","timestamp_time_passed":0,"is_unread":false,"is_forward":false,"is_filtered_content":false,"is_filtered_content_bh":false,"is_filtered_content_account":false,"is_filtered_content_quasar":false,"is_filtered_content_invalid_app":false,"forward_count":0,"forward_message_ids":[],"source":"source:chat:orca","source_tags":["source:messenger","source:chat","source:mobile"],"is_spoof_warning":false,"folder":"inbox","thread_fbid":"1743460630","other_user_fbid":"1743460630","body":"T\u00e1-se bem, vais almo\u00e7ar l\u00e1? S\u00f3 para saber que shuttle apanho","subject":null,"has_attachment":false,"attachments":[],"raw_attachments":null,"rang
MouseDown=false;this._setCloseTooltip(true);y.inform('focus-tab',this._threadID);},_blurTab:function(){q.processEvent('blur');n.removeClass(this._tabElem,'focusedTab');!this._closeMouseDown&&this._setCloseTooltip(false);},_setCloseTooltip:function(qe){if(p.get('chat_react_header')){this._closeButton&&this._closeButton.setProps({active:qe});return;}var re=this._getNode('titlebarCloseButton'),se=qe?xc._("Press Esc to close"):xc._("Close tab");ic.set(re,se,'above');},_inputKeyDown:function(event){this.tryMarkAsRead();if(event.keyCode===ta.RETURN&&!event.shiftKey){if(ge(this)){ee(this);event.kill&&event.kill();return;}be(this);event.kill&&event.kill();return;}if(event.keyCode===ta.DOWN&&event.shiftKey&&this.hasEmptyInput()){event.kill&&event.kill();v.lowerTab(this._threadID);this.focus();return;}this._handleHotkeyPressed(event);},_showMessageBlockedDialog:function(qe){var re=this._getCanonicalUserID();if(!re)return;if(!p.get('chat_react_input'))this._getNode('input').blur();var se='fbid:'+re;za.get(se,function(te){m.loadModules(["MessageBlockedDialog"],function(ue){ue.show(qe.thread_id,qe.can_reply,ed.isMessageBlocked(qe),te.short_name);});});},_initializeComposer:function(){if(this._isTwoLine)n.addClass(this._tabElem,"_8mr");},_initializeInput:function(){if(!p.get('chat_react_input')){var qe=this._inputContainerNode.clientHeight;hc.getInstance(this._getNode('input')).subscribe('resize',(function(){var se=this._inputContainerNode.clientHeight;if(se!=qe)this._nubController.flyoutContentChanged();qe=se;}).bind(this));this._listen('input','focus',this._focusTab);this._listen('input','blur',this._blurTab);this._listen('input','paste',this._inputPasted);if(lc.firefox()&&da.get()=='ko_KR'){this._listen('input','keyup',this._inputKeyDown);}else this._listen('input','keydown',this._inputKeyDown);this._initializeThingsWithInputFn(this._tabTemplate.getNode('input'));}else{var re=this._isTwoLine?xc._("Type a message..."):null;this._chatInput=tb.render(sb.createElement(dd,{initializeThingsWithInputFn:this._initializeThingsWithInputFn.bind(this),inputKeyDown:this._inputKeyDown.bind(this),onBlur:this._blurTab.bind(this),onEscape:this._handleEscape.bind(this),onFocus:this._focusTab.bind(this),onTab:this._handleTabPressed.bind(this),openFlyoutFn:(function(){return this._toggleStickersFlyoutShown(true);}).bind(this),resizeFn:(function(se){dc.set(this._getNode('inputContainer'),'height',se+'px');this._nubController.flyoutContentChanged();}).bind(this),uploadPhotoFn:(function(se){this._photoUploader&&this._photoUploader.uploadFile(se);}).bind(this),placeholder:re}),this._getNode('chatInputContainer'));}},_initializeSharePreview:function(qe,re){ma.listen(qe,'keyup',(function(){var se=re?re():qe.value;if(!se.length)if(this._urlScraper){this._urlScraper.reset();delete this._urlScraperData;}}).bind(this));vb.onAfterLoad((function(){m.loadModules(["URLScraper"],(function(se){this._urlScraper=new se(qe,re);this._urlScraper.subscribe('match',(function(te,ue){this._urlScraperData=ue;this._getSharePreview().done((function(ve){var we=this._urlScraperData;ve.setProps({share:null,uri:we&&we.url});}).bind(this));}).bind(this));}).bind(this));}).bind(this));},_getSharePreview:function(){if(!this._sharePreview&&!this._sharePreviewPromise){this._sharePreviewLoading=true;this._sharePreviewPromise=new rb((function(qe){m.loadModules(["MercurySharePreview.react"],(function(re){this._sharePreview=new ub(re,this._getNode('shareAttachmentShelf'));this._sharePreview.setProps({imageSize:{width:sd,height:sd},location:ab.CHAT_PREVIEW,onClose:this._focusInput.bind(this),onUpdate:(function(){ie(this);this._unblockSend();}).bind(this)});this._sharePreviewLoading=false;qe(this._sharePreview);}).bind(this));}).bind(this));}return this._sharePreviewPromise;},_initializeThingsWithInputFn:function(qe,re){this._initializeSharePreview(qe,re);nd.getThreadMeta(this._threadID,(function(se){if(wa.CoreGraphEnabled&&se&&se.folder===hb.PENDING){var te=fa.create('div');fa.appendContent(this._getNode('chatConv'),te);this._pendingActions=te;tb.render(sb.createElement(l,{bootloadPlaceholder
f256!brmfbidi.dll
f256!brmfbidi.ini
